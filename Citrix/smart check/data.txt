Seamless flag is set due to receiver side code logic, which should not be.
SSL handshake not completing
TLS handshake failure when connecting through earlier versions of NetScaler
This issue seems to be due to user's inability to install applications in Non-Interactive desktop, as the installation is successful in the Interactive desktop of the same user and in Non interactive desktop of system account.
With Windows 10 Universal Windows Platform (UWP) “Black screen” issue was seen with User Profile Management. Citrix fixed the black screen issue with VDA LTSR 7.15 CU1 (LC7596). However the change made in the fix is causing this start menu icon missing behavior. With UWP lots of registry keys of UWP applications are not only in HKU, but also in HKLM. This affects UPM behavior as all the profile roaming option is restricted to HKCU. This is by design and a work in progress. Citrix has already opened a support ticket with Microsoft and is investigating if Citrix can implement a proper fix for the issues.
In the web socket connection request header, external device will send the request to the backend with a parameter called "Origin".  This parameter will contain the external URL. If this external URL (in the Origin parameter) is not added, under the WebSocket Trusted Origin Server List on the Citrix Server, the server will close the TCP connection causing the client browser to receive a '500 Internal Server Error'.  This is a security measure from the Citrix side.
Server-side (VDA) buffer limit for single Serial COM segment being reached and causing applications to hang.
An already existing internal or external store integrated with ICA proxy NetScaler Gateway Vserver has beacons configured to detect internal or external location. Depending on the beacon check Receiver decides whether to contact StoreFront directly or via NetScaler Gateway (if external).
When user moves from LAN to intranet, this triggers a beacon check (changes in physical adapter) and in this scenario the external beacon check will be successful. 2. This beacon check happens before full VPN could be established, so when VPN is eventually established Receiver has already detected it's location to be external.3. Now, when Receiver resolves the StoreFront FQDN (after VPN is connected) it will resolve to internal StoreFront and also StoreFront becomes reachable directly.Due to #3 Receiver connections land on internal StoreFront but due to #2, since it "thinks" its external the connection method (request url etc) used are that of NetScaler Gateway e.g. /cgi/login which does not exist on StoreFront and Receiver is never able to authenticate.
If Receiver is exited and restarted (while vpn is already connected), now beacon check will return internal, and also StoreFront resolved directly, so now apps become accessible.
EMF Viewer was trying to launch for every single letter which was causing the freezing issue.
Universal C Runtime in Windows is required on your computer.
Some browsers cannot detect plugin or the plugin is corrupted and 'Change Citrix Receiver' option does not appear at all.
This problem is caused by the current design limitation of support for a maximum of 32 virtual channels by Linux VDA. With Receiver 4.9 LTSR and Receiver 4.10, new virtual channel support has been added and this increases the overall virtual channel numbers to beyond 32. So when connecting to Linux VDA machine, because of the limitation, the virtual channels loaded last get unloaded resulting in the HDX Engine crash issue. Windows VDAs support up to 64 Virtual channels. So the problem is not seen when connecting to Windows VDAs.
This warning appears because Apple is preparing to deprecate 32-bit software on future release of macOS. From Apple: “To prepare for a future release of macOS in which 32-bit software will no longer run without compromise, starting in macOS High Sierra 10.13.4 a user is notified on the launch of an app that depends on 32-bit software.”
Fallback from DX11 to DX9 was broken in some cases, especially when DX11 initialization fails.
This eventually leads to the following error:•    ShowMessageBox TopMost=False title= message=Your apps are not available at this time.  Please try again in a few minutes or contact your help desk with this information: Cannot contact Delivery group.",""
This is a design limitation of Linux Desktops, Citrix is working on a solution that can be implemented from Receiver end.
Graphic rendering was getting failed with NVIDIA GeForce GTX , due to the introduction of D3D11 usage
Hotkey combo not configured to pass from the client workstation to the Active Citrix session window
To suppress Receiver add account prompt
bug in RfMac
This is a known issue 
3rd party software blocked the access
The NetScaler device does not authenticate users properly when using Smart Card hence apps enumeration does not work.
Issue with keyboard mapping
defect in code
DisplayLink drivers v3.1 MacOS 10.11 and 10.12  Receiver for Macintosh 12.6 and 12.7
For NetScaler 11.1 releases, the HDX Insight/SmartControl functionality embeds certain reconnect data into the reconnect cookie communicated by VDA to receiver for any TCP ICA connection. This reconnect cookie gets invalidated by VDA in scenarios where receiver makes reconnect request with UDP followed by the actual TCP connection due to the fact that NetScaler UDP ICA does not have the support for Insight till date.
Known issue with Receiver.
Receiver for HTML5 - Unable to Launch Apps Using HTTPS URL
How to Collect Logs in Receiver for Chrome and Receiver for HTML5
USB compatibility between Windows 7 embedded OS and USB device
RfW tried to start new session with StoreFront (uses SSO) which temporarily disconnects Receiver for Windows. Interruption corrupts screen redrawing on application.Change Internet Explorer’s home page depending on the user’s location. If the user is on the domain give them Google only; outside, give them Google and Receiver for Web. Group Policy Manager: User Configuration\Preferences\Control Panel Settings\Internet Setting\Internet Explorer 10\ Use Group Policy Preferences with IP item level targeting to determine the user’s IP address or use a WMI query to query the WORK/PUBLIC/HOME (Network Location Awareness) part of Windows firewall.Set Home page using Group Policy Preferences: https://blogs.msdn.microsoft.com/askie/2016/11/04/how-to-configure-internet-explorer-11-homepage-using-group-policy/General Preference Item Level Targeting:  https://technet.microsoft.com/en-us/library/cc733022.aspxIP Range: https://technet.microsoft.com/en-us/library/cc732310.aspx - might not be fool proof if users external IP is same as your internal range.WMI QueriesExample: Find Domain name and if connected to that domain ((gwmi win32_computersystem).Domain -like "FAKE.DOMAIN.COM" -and (gwmi win32_computersystem).partofdomain -eq $true)     Click on the Common tab, put a tick in Item-level targeting and click the Targeting… button.Add an item from New Item and select an operator from Item Options. In my example if the IP range is not between 192.168.100.1 and .254. then set the home page and other IE options.*** You have multiple preferences with different item level targeting.
SSON login prompt is enabled by default.
The issue is seen only when we upgrade from Receiver 4.3 to 4.9 directly without running the Receiver clean-up utility.
How To Customize App Shortcuts
The use of different DPIs between monitors is not supported in Citrix XenDesktop and XenApp environments, with Receiver Version prior to 4.10 as Versions of Citrix Receiver prior to Receiver 4.10 and higher are not "DPI scaling aware"
Wrong scan code is being sent from the MAC by the Receiver for MAC client
How to Confirm HDX Enlightened Data Transport Protocol is ActiveCTX220732 - How to Configure HDX Enlightened Data Transport ProtocolCTX230011 - EDT Session Connection/Reconnection Attempts using UDP and TCP in ParallelCTX230010 - Windows OS VDA 7.16 Schannel library support for DTLSCTX230012 - EDT Security using DTLSCTX231821 - How to Configure EDT when using VPN solutionsCTX231528 - Enlightened Data Transport Not working with Double Hop DMZ scenarioCTX226014 - Application Launch Fails with "Unknown client error 1110" When Using EDT/DTLS on NetScaler GatewayCTX224373 - XenDesktop 7.x Unable to launch published desktop with Adaptive transport policy enabled
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
HTML5 client uses something called as Unicode Keyboard feature. (This is not used by Windows Receiver). Through debugging we were able to confirm that the HTML5 client is sending the keyboard codes correctly to the RDP client. However RDP client is not sending the Shift key in the correct order to the session due to the intentional keyboard manipulation for [Apply Windows key combinations] feature of RDP. This is a bug in RDP client and this is reported by multiple users who do not even have Citrix in their environment.
Windows receiver will divide the redirected URL into server address and file location and test connectivity of the server address of the URL by HTTP-Ping. If the HTTP-Ping does not get replied, URL redirection will fail. For example, the redirected URL www.website.com/pageaaa/filebbb.aspx will be devided into server address www.website.com and file location /pageaaa/filebbb.aspx. If the server address does not response HTTP-Ping package, it fails the connectivity check and then leads to URL redirection failure. This is by design behavior.
Microsoft's problematic interface waveOutGetDevCaps takes 39 seconds to load and causes the webcam detecting delay. The interface " waveOutGetDevCaps " is defined by Microsoft and it isn't hooked by Citrix's components. It only costs about 100 ms or less in our internal lab which is ideal.
This issue can occur if the Receiver for Web URL is not added to the Trusted Sites list of the web browser on user's machine.
Permissions issue with registry hive.
How to question
Receiver for Android3 .12.2 display issue with 16 bits color depth.
Configuration on Client.
Problem with Receiver 4.6 and reset/uninstall/Reinstall the Receiver 4.6 doesn't fix this issue
Transaction Timeout settings need to be configured on a case-by-case basis, depending on the environment.
Feature added to Android Receiver do not destroy session but change configuration of existing session during docking with DeX. #LC8460
Citrix has identified that the error is due to a third-party-dependent SDK used for smart card authentication that is not compatible with iOS 11.
Configuration
Direct cause of the issue is the Receiver re-using the .ica file from the previous session. This is happening because Desktop Viewer can't delete the previously created .ica file from the browser’s temp directory, which blocked the .ica file copy for the next session launch. The .ica file in the temp directory has read-only attribute inheriting from its parent directory. Desktop viewer is not able to delete the previously created .ica file from the IE temp directory, an access denied error was returned, which blocks the ica file copy for the next session launch.The .ica file in the temp directory has readonly attribute inheriting from its parent directory.
Receiver Conflict
It is the designed behavior of Native Receiver (SSP) with WI/SF site under passthrough mode.
Patches in KB4034664 and KB4034670 Interrupted the multi monitor behavior with MS Office 2013
C:\Windows\System32\Rundll32.exe was missing on the client machine.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Citrix and Philips software logic.
Full Permissions are required for the user account under HKEY_USERS\USER_SID\SOFTWARE\Citrix on the Client Machine
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
By default Windows 10 has the DVR function enabled.
This looked like a .dll missing.Checked Procmon and found that "C:\Program Files (x86)\Citrix\ICA Client\AxWfIcaLib.dll" is missing
This could be due to an issue in using webgl graphics acceleration in some of the end points through Firefox browser.
https://support.citrix.com/article/CTX134940#STAIDhttps://docs.citrix.com/en-us/xenmobile/10/xmob-system-requirements/xmob-deploy-component-port-reqs-con.htmlhttps://www.citrix.com/blogs/2014/01/17/xenmobile-enable-hdx-apps-with-certificate-based-authentication/
Per-User Receiver installation before and the installation binary installed in user's profile exists. Uninstallation happened in other account's context, this caused clean up failed to complete.
This is known issue caused by the Maximum allowed color depth for a Citrix Policy being lowered from the default setting of 32bit.
How to Configure Citrix Receiver for Windows to Manually Add HTTP Storeshttps://support.citrix.com/article/CTX134341How to configure Receiver to not use proxy settings set up on IEhttps://support.citrix.com/article/CTX216226StoreFront Client Proxy Configuration
https://support.microsoft.com/en-ie/help/11529/what-is-a-windows-7-n-edition-https://support.microsoft.com/en-us/help/3010081/media-feature-pack-for-windows-10-n-and-windows-10-kn-editionshttps://www.microsoft.com/en-us/download/details.aspx?id=16546
The Receiver for Windows 4.7, Receiver for Mac 12.5, Receiver for Linux 13.6 and newer versions are going to validate the root certificates even if it trusts the intermediate, which is not the case with the browsers. If the browser trusts the intermediate, it trusts the server certificate, without going down to the root certificate and will display the newer version of the root from its certificate store and not the actual root certificate sent by the server or NetScaler Gateway.In Receiver for Android 3.12.2, joint server certificate validation is turned off by default. If this policy is enabled in the Receiver without the correct set of certificates configured on the server/gateway, users may see the error message.
Remote Code Execution through published content . A malicious Storefront can publish arbitrary URLs as published content.  Published content appears as an icon in RfWeb and is indistinguishable from any other item.RfWin implements this feature via a shellexecute call - allowing a malicious storefront to run arbitrary code on the client without prompts or policy control; it can even supply a UNC path and RfWin will use AuthManager to auth
The problem is caused by the remote flash player instance cannot quit when changing the webpage but staying on the same website. This is caused by the way IE behaves when closing the page with the flash instance running.
Seamless display issue in high DPI
Bug/problem in JavaScript parsing the keystrokes in the client.
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Linux Receiver not support single FQDN scenario, which means linux receiver unable to detect internal beacon to separate client location. So linux receiver will connect the single FQDN as the storefront base URL. However, this doesn't works because it is connecting NetScaler rather than Storefront.
It is Windows' behavior and this resolution is work around. Please involve Microsoft support for further root cause investigation.
Some custom cursors employ an alpha channel for transparency to achieve shadow effects and other graphical enhancements. These are referred to as 32-bit cursors (RGBA). At the moment, 32-bit cursors are currently not supported by Receiver for Linux. 24-bit cursors do not support the alpha channel, so only the black transparency mask is display, resulting in a black box around the cursor.
​The behavior we are experiencing is a limitation of HTML5 Receiver with Internet Explorer and Safari.
How to Enable HTML5 in XenDesktop 7.x to Access Virtual Desktops From a HTML5-Enabled Browser
Code change/possible regression introduced by chrome version 57.
The client machines when connecting externally will not have access to the Issuing CA and Root CA certificate in the internal Network. The certificates should be manually imported to the client machine either through a GPO or copying the certificate and putting it in the "Trusted Root Certification Authorities" and "Intermediate Certification Authorities" respectively.
By default Citrix Receiver will attempt to render a URL by using media foundation first and directshow second. URL's pointing to a multicast stream typically point to a file extension of type .nsc and always want to attempt rendering with directshow first. When this issue manifests, attempting to render the multicast stream via media foundation first, the CREATE_CONTEXT message from the VDA was timing out and the render stream falls back to the server side. Applying the registry key will allow the media stream to render using directshow first.Note: Improvements have been added to later versions of receiver (receiver 4.7) and this workaround should not be required.
Receiver for Windows 4.7 adds functionality for Generic Client Input Method Editors (IME) which is configured by default to use the SHIFT + F4 hotkey sequence.
The added store address is not accessible due to one of the following reason:1. Store Address is not valid.2. Communication protocol is not https.3. The folder \Web\Sites\AGService is empty.
It happens if timing is not same when the audio device on the client is opened/closed and when the audio data is played/stopped. Otherwise VDA does not send audio data.
To extract and install MSI files for receiver follow: https://support.citrix.com/article/CTX132447
STA missing for XenApp Delivery Controllers in the Netscaler Gateway VIP.
AVG web protection may change the certificate issuer to "AVG" instead of the actual Certificate Authority (e.g. Comodo, Symantec, etc.)
In XenApp/XenDesktop 7.13, an enhancement was made and now Citrix administrators can manage ACR/SR via Citrix Policy, not via the Citrix Receiver Group Policy Object administrative template nor the default.ica file. By default, ACR/SR is allowed in Citrix Policy.Upgrade Paths and ACR/SR BehaviorScenario 1: ACR/SR was originally disabled, but not configured accordingly in Citrix Policy after upgrade to 7.13 + 4.7Scenario 2: ACR/SR was originally Enabled, but not configured accordingly in Citrix Policy after upgrade to 7.13 + 4.7ACR/SR Behavior Matrix
Receiver for WindowsDelivery ControllerVDACitrix PolicyReceiver GPO templatedefault.ica4.77.137.13HonorIgnoreIgnore4.77.13Lower than 7.13Not ApplicableHonorHonor4.7Lower than 7.13Lower than 7.13Not ApplicableHonorHonor4.7Lower than 7.137.13Not ApplicableHonorHonorLower than 4.77.137.13Not ApplicableHonorHonor
CTX218929: Unable to launch application from Chrome via Netscaler Gateway with client selective trust (CST) enabled
By default, Receiver for HTML5 will only be used if the native plug-in is not installed. If the ica session is always launched via HTML5 instead of native Receivers even though there was no such setting to force the use HTML5, it may have happened that during native plug-in installation process detecting the native Receiver was skipped.
Citrix Receiver refresh on application change on the server.
The issue is due to a defect in some builds of NetScaler where SSL handshake fails if a client hello message includes an ECC extension but the NetScaler appliance does not support any of the ECDHE ciphers in the cipher list sent by the client. The handshake fails even if the list contains some non-ECDHE ciphers that are supported.
Receiver for Windows 4.7, Receiver for Mac 12.5, Receiver for Android 3.12.2/3.12.3 and Receiver for Linux 13.6 introduce these ECDHE ciphers which trigger this defect.
Edge browser requires change in Web.config file
CGP Signature Split Across Multiple SSL Records is not Handled by NetScaler .Working Android Receiver : We can see the CGP Signature(1a 43 47 50 2f 30 31) is part of the Same SSL Record for the Android Receiver.Non-Working Windows Receiver : ---à we see that the  CGP Signature is Split and the Value (1a) is received first SSL Record.  the Rest of the Signature(43 47 50 2f 30 31) is coming in the Second SSL Record.
Default printer attribute associated with client side printer is not properly updated by Receiver along with default printer manual change.
some other application on client machine is setting ForegroundLockTimeout to a value other than 0
Receiver crash was originally triggered by client side video decoder since it is unable to be enumerated out in the VMware VM (client machine) equipped with VMware SVGA 3D display adapter.
Linux Client will send the client os's locale information to the VDA side which will be detected by the VDA OS and then the application Microsoft Office installed in the VDA machine will set the proofing (Spelling, Grammar) language according to the collected locale information.
Native application configured through "Prefer=" keyword in DDC is handled by "OverrideInstaller" in SSP, the install logic in OverrideInstaller doesn't calculate thumbprint of the resource and write it into registry, thus when refresh occurs, there is no way to compare local native resource property and remote server property through thumbprint, then the native resource's property such as category folder can't be updated through refresh if there is changed done in DDC. (2) In SSP local "RefreshLocalShortcuts()" function, the native application is not considered, so if the desktop or startmenu folder for the native application is removed manually, there is no re-install executed during refresh. (3) OverrideInstaller uninstall logic doesn't consider to remove the parent folders of native application when they are empty after removing the child category folder.
Last update/version of Dell Data Protection | Encryption on the client was found to be the root cause of the issue.
Service "Tablet PC input Service" is stopped
Some exceptions in the interface importTokenFromFile of Java library SecurIDLib.jar lead to this symptoms.
In the design of Receiver 3.x or 4.x, we introduce a new sync mechanism for the communication between host and client. It uses less machine resource and more effective than previous version of Receiver. But we still keep the legacy polling in client for some legacy virtual drivers to help them send message to host. We do legacy polling every 2ms in each legacy virtual channel threads.
The CPU hike is caused by these legacy polling.
Launching unsubscribed resource is a new use case in receiver 4.3 which would not launch content resources correctly due to error in launch commandline .
https://docs.citrix.com/en-us/xenapp-and-xendesktop/7-6/xad-policies-article/xad-policies-settings-wrapper/xad-policies-settings-ica/xad-policies-settings-mobile-exp.html
wfica32.exe crashed at divide-by-zero exception (C0000094) when cursor position is set in DesktopViewer window.
Site was not trusted on client end hence the automatic launching was not executed
Default configuration SharedUserMode=False
FileAccess.exe (installed on the VDA to enable FTA access) will only open the following file types by default:  .accdb.doc.docx.pdf.pps.ppsx.ppt.pptx.txt.xls.xlsx
The root cause is,1.When installing Receiver,  because the encrypted drive drive has more free space than C: drive, so TARGETDIR property is set as the encrypted drive drive.Note: TARGETDIR property is a global variable used by Windows Installer during an installation. https://msdn.microsoft.com/en-us/library/windows/desktop/aa372064(v=vs.85).aspx2. After Receiver installation completed, BitLocker is enabled on the encrypted drive drive.3. When launching desktop, Windows Installer will check if key path of each Receiver components is available. If this check passed, Receiver process is launched to open desktop. However, keypath of one Receiver component just equals to value of TARGETDIR equal to the encrypted drive drive.4. As the encrypted drive was locked and became invisible to Windows Installer, Windows installer thought keypath of the Receiver component is unavailable and then try to repair Receiver installation. That's why a Windows installation dialog appears.5. AS the encrypted drive was locked and inaccessible, the repair finally fails with MSI error 2330.
This is a “Design behavior" in receiver 4.4.
Old ADM templates.
Java based windows with Seamless hooking were causing display issues on iOS devices.
Customer is connecting through a NetScaler in order to get to the other domain. It is documented that for security reasons if you are connecting through a NetScaler\Gateway you will not be able to save the password so that option will not show up. This setting is only for internal connections.
The root cause is Apple's lack of supported interfaces to properly get information about the current type of keyboard that is in-use (on-screen or external).  We have asked Apple for an enhancement.  They need to provide supported interfaces to give an event callback when the keyboard is changed, and supported interfaces to allow us to query the information, status and type of the current keyboard.
There are too many thinwire commands coming from the server during the Excel cell selection process. This is a limitation of Citrix Receiver for iOS.
The Issue is with Windows Phone receiver 1.2.2 not handling HTTP 302/301 redirects
Bug in HTML5 Receiver.
Wfica32.exe included in Receiver 4.4 CU1 and Receiver 4.5 has a GDI handle leak issue when using published applications with multiple sub windows and when users switch between the windows frequently.
Touch events are disabled by default within Edge browser
Unlike receiver for windows or receiver for mac, receiver for iOS does not start a new process every time the session is launched. Hence if there is an issue cleanup it could cause this issue.
Customize using configuration files: http://docs.citrix.com/en-us/receiver/linux/13-4/connect/customize-using-configuration-files.htmlOEM Reference Guide @ https://www.citrix.com/downloads/citrix-receiver/linux/receiver-for-linux-latest.html
A VMware graphics driver is present on the VDA which is causing the incorrect resolution to be used due to limitations with this driver.
Misconfiguration on IIS.
Policy missing on NetScaler.
Call delegate isJailBroken.",Active,com.apple.main-thread,b07,Receiver,/Users/Shared/Jenkins/workspaces/iOS_HdxSdk_7.1HF1/EngineSdk/HdxSdkManager/HdxSdkManager.m,-[HdxSdkManager isJailbroken],300
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
1) By default Receiver's Preference is remote application.2) If local application shortcut is of same name then Receiver will discard local application
Session Sharing setting are not correctly set on the Linux receiver client
Receiver needs root certificate to verify the signature of Certificate Authority on the server certificate
Recommendations for Collecting the CDF TracesCTX107025 - How to Capture a Common Diagnostic Facility (CDF) Trace using Registry Settings
Missing Registry key under HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\Windows\CurrentVersion\Run
API changes in the beacon detection inside of the receiver 4.4. As a result, beaconing is done over the system configured proxy server.
SSL libraries used by the Receiver 4.3/4.4 had issues.
It is a know issue with older version of  Receiver.
Receiver for Android Known Issues
Windows 10 allows custom scaling settings per monitor, which causes issues with Seamless windows.
In Receiver for Mac 12.3, support for non-HTTP(S) published content is deprecated and disabled by default.
In a double hop scenario, Client <--> VDA 7.8 & WinReceiver 4.4x <--> XA 6.5, ICACtlsSendEPClientData()/ICACtlsSendEPClientConnectNotification() is called to send passthru data to host side. When client is Android device, the client name can be 20 WCHARs (21 WCHARs in total), crashing wcscpy() call which checks the source buffer length, CLIENTNAME_LENGTH (20).
How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindHow to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
This issue was majorly because of Memory leak issue and the following errors show that the server gets an exception for out of memory and causes the console to go down.2017-08-30T09:01:51.28+0200 |   | ERROR | http-nio-10080-exec-189 | com.sparus.nps.ErrorFilter | Error for page: /zdm/cxf/public/getserverinfoorg.glassfish.jersey.server.ContainerException: java.lang.OutOfMemoryError: Metaspaceat org.glassfish.jersey.servlet.internal.ResponseWriter.rethrow(ResponseWriter.java:230) ~[jersey-container-servlet-core-2.4.jar:?]at org.glassfish.jersey.servlet.internal.ResponseWriter.failure(ResponseWriter.java:212) ~[jersey-container-servlet-core-2.4.jar:?]at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:420) ~[jersey-server-2.4.jar:?]at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:265) ~[jersey-server-2.4.jar:?]at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271) ~[jersey-common-2.4.jar:?]at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267) ~[jersey-common-2.4.jar:?]at org.glassfish.jersey.internal.Errors.process(Errors.java:315) ~[jersey-common-2.4.jar:?]at org.glassfish.jersey.internal.Errors.process(Errors.java:297) ~[jersey-common-2.4.jar:?]at org.glassfish.jersey.internal.Errors.process(Errors.java:267) ~[jersey-common-2.4.jar:?]…Caused by: j ava.lang.OutOfMemoryError: Metaspace.........WARNING [http-nio-18443-exec-7] org.glassfish.jersey.server.ServerRuntime$Responder.mapException WebApplicationException cause: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement    at org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:241)    at org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:366)    at org.springframework.orm.hibernate5.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:326)
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
Configuration issues
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Configuration
The enumeration of published app shortcuts are enabled by default.
McAfee On-access scanner causes the DCOM for AuthManager to timeout
By default the file  "CtxExplorerLauncher.exe" located under "C:\Program Files (x86)\Citrix\ICA Client\" is executed automatically after installing the Receiver Desktop Lock which enables the detection of Administrator accounts at logon. If an antivirus in installed on the computer it could prevent the file to be executed which causes to not detect Administrator accounts at logon.
Upgrade to Receiver for Chrome 2.1
Desktop folder missing in the default users profile.
Microsoft security advisory: Availability of SHA-2 code signing support for Windows 7 and Windows Server 2008 R2: March 10, 2015
https://support.microsoft.com/en-us/kb/3033929Windows was unable to support higher than SHA1 on signed drivers.
The crash seems to be occurring during seamless window creation wherein the ImmAssociateContext call (http://msdn.microsoft.com/en-us/library/windows/desktop/dd318171(v=vs.85).aspx ) is made to associate specified input context for the window and doing some IME related configuration. Since the crash is occurring in the Bing’s Kunlun.dll, we don’t much visibility into what is exactly going wrong here.
PnSson service key was inaccessible due to permission issue.
This is as designed. Hidden stores can't be added in normal way.However, older Receiver versions are not yet implemented for this function(hide store) of StoreFront side.
wfica.ocx didnt register properly
This is due a known issue with Receiver for MAC 12.As it doesn't send traffic for CRL Revocation Check to Internet through proxy and fails.Citrix Receiver Team is working on the official fix as of now, but can provide a workaround to fix this issue for the time being.
The request for resources/list can be very time consuming and can take upto 30 seconds in worst cases (depending on the performance of the network, StoreFront server or other components). This can cause timeout on the Receiver UI. But the response has been received successfully on the Receiver side.
Caution! Refer to the Disclaimer at the end of this article before using Registry Editor.
We can figure out whether this issue is caused by network latency by adding the following registry key on the client:HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Citrix\Dazzle\Reg_SZ WebUILoadingWatchDogTimeoutMs
WebUILoadingWatchDogTimeoutMs controls the timeout value of watchdog.
Alternately, turn off the Unified Experience in StoreFront (if Receiver 4.4 is being used).
Receiver 4.4.1001 app enumeration network connection breaks
During the upgrade of a VDA, the previous install path is used in setting the "Location" install key in HKLM\Software\Citrix\Install. If the upgrade is from 5.6.400 this Location key is set to C:\Program Files (x86)\Citrix. If the prior install was 7.6 this key is set to C:\Program Files\Citrix.
The WDICA driver incorrectly looks at the HKLM\Software\Citrix\Install key to determine the install path. Other drivers use HKLM\Software\Citrix\Install\ICAWS which will be set to C:\Program Files\Citrix even on an upgrade. WDICA uses the install path to locate KDB files which are used for Unicode Keyboard mapping required by non-Windows clients.
In the event of an upgrade from 5.6.400 to 7.6.300 WDICA is unable to locate the KBD files which are located in C:\Program Files\Citrix\HDX\Drivers\wdica since it is looking in C:\Program Files (x86)\Citrix\HDX\Drivers\wdica. As a result keyboard mapping for non-Windows clients will fail.
Receiver for iOS
"Microsoft Enhanced Cryptographic Provider" does not support the SHA256 algorithm required for TLS_1.2 Certificate Verify message.This is why we see the empty signature in the returning "Certificate Verify" message (RCVR => NetScaler) in the WireShark
When the Apply Windows key combinations setting is set to On the remote computer, the RDP client hooks into the keyboard at a lower level and this doesn’t appear to interact properly with the Presentation Server’s Unicode keyboard support.
The following excerpt from iOS Receiver Citrix product documentation describes the correct behavior in iOS Receiver 7.0:
Private (self-signed) certificatesIf a private certificate is installed on the remote gateway, the root certificate for the organization's certificate authority must be installed on the device to successfully access Citrix resources using the Citrix Receiver.Note: If the remote gateway's certificate cannot be verified upon connection (because the root certificate is not included in the local keystore), an untrusted certificate warning appears. If a user chooses to continue through the warning, a list of applications is displayed; however, applications fail to start.
Receiver keeps on refreshing.
Incorrect Gateway name: https://FQDN/Changed to https://FQDN.
The connection error happens in the initial SSL handshake between the iOS device and server. SSL connections will go through a handshake procedure, which is the function performMultiplexedSslClientHandshake in our code, and in this case, the function just returns: SSL_STATUS_X509ERROR_BAD_CERTIFICATE_CERT_NAME, which is a constant defined in the SSLSDK.
The main reason for this issue is that iOS Receivers do not currently support Session Reliability connections. Please refer to CTX104182 – Receiver - Client Feature Matrix.
Note: The NetScaler Gateway (by default unless disabled) attempts to broker the connection to the XenApp server over the Session Reliability port 2598. In a non-SSL relay configuration if the client does not support Session Reliability this connection can be re-negotiated over the non-SSL relay port 1494. However with SSL relay in play this re-negotiation cannot happen (This is due to the secure nature of the solution).
SelfServicePlugin.exe invokes SelfService.exe with the parameter "-periodicpoll" (4.4) or "-poll" (4.3.100 or earlier), every an hour.At this time, the window created by SelfService.exe sometimes steals focus from other windows. This sometimes confuses Z-order of windows.
According to Install log, ICAWebWrapper.msi file was not found in the path when attempting to use LastUsedSource from source list.The path in LastUsedSource had already deleted and it did not existed.
Receiver settings in users profile
We need either to comment out or remove the line <% Html.RenderPartial(“SaveCredentialsRequirement”, SaveCredentials); %> at inetpub\wwwroot\Citrix\Authentication\Views\ExplicitForms
CTX135438 - How to Suppress the Add Account Window in Citrix Receiver for Windows for Receiver for Windows 4.4.1000 and later.
This mouse pointer distortion is caused by a bug in the libpixman library. A custom mouse cursor image created by XRenderCreateCursor() is not masked properly when created by a pixmap object.
When applying template from article: "How to Configure Default Device Access Behavior of Receiver, XenDesktop and XenApp" http://support.citrix.com/article/CTX133565, changes the default value of the Connection Authorizations Decision from default 1, to 3 (non-secure connections).
Expected behavior in 4.x with the SelfService Process.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The client workstation was locked down and was not allowing FTA to be enabled. logging into the client device as an admin allowed the association to work and double clicking a file with the correct extension launched the published application.Client drive mapping was not enabled. The published application would open however you would see an error saying "could not access file \\client\c:\~~~" meaning client driver redirection was not enabled.
http://support.citrix.com/article/CTX200337
Upgrading to Citrix Receiver for WindowsCitrix eDocs
The RADIUS was not set to "PAP" and a set token with the value of "Qwert1234%" was used.
iOS devices perform proper security checks and would not allow any connection to complete until its trusted.
The Wyse thin client is using and old/modified version of Receiver.
Internal beacon is resolving from the outside on port 443, Receiver believes it is connecting from the inside and is trying to discover the store using the wrong path.
The RCVR code supports proxy configuration through ICA settings such as: ProxyHost, ProxyPort, ProxyTimeout, ProxyType.However, the RCVR code deprecates all AltProxy ICA settings such as: AltProxyHost, AltProxyPort, AltProxyType.Looking at the history of Receiver for Windows code changes, it appears that AltProxy related code has always been commented out.The conclusion from LCM is that it was never meant to be supported.**Please note that the Citrix ICA Settings Reference currently documents all AltProxy related settings (https://docs.citrix.com/en-us/receiver/windows/ica-settings.html).The AltProxy references will be removed.
Fixed Issue
Transparent key was not passing through.
The issue we are facing with Receiver 4.4 where the applications freeze after launch is a known issue with this receiver version. The engineering team is working on this bug and we expect this to be fixed in a newer release / Private fix. This issue was also seen in previous versions and was patched in 4.3.100 by the Bug # LC2723.More about the bug –Sessions connected through optimal NetScaler Gateway might become unresponsive when browsing map sites and using the zoom in and out option to view images.[#LC2723] - This seems to have regressed in 4.4 and the users experience the same behavior.http://docs.citrix.com/en-us/receiver/windows/4-3/receiver-windows-43-about/receiver-for-windows-4-3-fixed-issues.html
This is by design.
Generally, when this problem is not resolved by using these values in the Web Config File, please ensure that Store you wanted to target was actually modified correctly and ensure that syntax was added in the right html tagThese changes will only be reflected on Windows Users, not on MAC users.
Web Interface / StoreFront configured for SSON. Receiver attempts to authenticate from a non-domain joined machine, as per the settings on Web Interface / StoreFront, fails, and falls back to explicit authentication.
Windows client missing updated .Net Framework
Keyboard shortcuts were not mapped in ICA session.
The delay is due to the receiver Authentication component trying to autodetect the proxy information.
Manual setup was done for Android receiver thus Android receiver will try to access /config.xml instead of discovering store.
Corrupted entries in the Windows Registry
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Unable to sign iOS binaries
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The issue is that ADFS does not allow all browsers to do Integrated Windows Authentication by default.
Transport protocols HTTP/2.0 and SPDY are enabled by default in iOS9.  There is a known issue in Netscaler affecting the use of these protocols, so they must be disabled.  With these protocols disabled on the Netscaler, iOS devices will negotiate the HTTP1.1 protocol, which works as expected.
CitrixReceiver and ConnectionCenter in HKCU\Software\Microsoft\Windows\CurrentVersion\Run was causing the issue.
For more information refer to Citrix eDocs
Error 45 (E_SSLSDK_ALERT_BAD_MAC)
There is a regression in the release of Citrix Receiver 4.4. This issue was previously reported with the versions of Citrix Receiver 4.2 and 4.3 and classified as bug LC2723.
Audio has not be enabled on the Citrix Receiver for playback of multimedia files.
This is a known issue with Receiver 4.1 UAC displays.
MDX policy MinimumDataProtectionClass was set to "none".
Receiver Installation
Refer to Citrix Blog for more information.
After setting the registry key, the store must be re-configured to update the registry to trigger reconnect on logon.
Receiver was unable to add the store automatically
In case you are using a browser then you can refer to one of the Citrix Blogs on customization which work with the browsers.
Since windows 8 use of remote paths for shortcuts is now disabled by default. Since Receiver 4.3.100 shortcut paths for applications are now stored in the registry instead of stub files. A combination of both these factors result in the behavior observed.
Provider Order in the client device did not have the Single Sign On on the top of the list.The PNAgent URL did not match the PNAgent url listed in the StoreFront Console.
http://www.wisdombay.com/hidedrive/  calculate the datahttps://technet.microsoft.com/en-us/library/cc938267.aspx​
CTX101990 - Error: "The server certificate received is not trusted (SSL Error 61)" for Receiver UsersCTX108800 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." on Receiver for MacCTX200836 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." When Launching Apps with Citrix Online Plug-in
https://www.citrix.com/blogs/2014/10/14/customize-and-deploy-citrix-receiver/
by design
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The inability to launch multiple concurrent sessions is a current limitation of the current versions of Android Receiver (3.8 and lower, at time of writing). Citrix is actively investigating improvements that will improve the experience for those using Web Interface but this is a limitation of the browser support available.
Desktop lock was not getting installed, with following error:
"To use desktop lock feature, make sure the store is configured and install following components: Citrix receiver and pass-through authentication"
A race condition bug in XS code
The NetScaler appliance inserts an NS_ESNS cookie for page tracking (for showing a waterfall chart) when AppFlow is enabled. Cookie insertion was controlled by the clientSideMeasurements option in the appflow action in release 10.5, but in release 11.0 the default became to always insert the cookie when appflow is enabled. Android receiver (HTTP client) was not able to handle this cookie. This fix adds the Enable/Disable page tracking (cookie insertion) option to the appflow action.
Users should check the product documentation and known issues (in the “About this release” section) for the relevant version of Receiver for Android from the links provided on the Citrix Product pages - Receiver for Android.
CTX Support Articles – Receiver for Android
How to Configure Connection Methods with Receiver for Android on StoreFront/NetScaler Gateway
TechEdge Los Angeles 2013 - Troubleshooting and Debugging Citrix Receiver for iOS and Android
How to Get Diagnostic Data for Troubleshooting Issues in Citrix Android Receiver
Unable to Add First Store If Store Uses Non-default RfAnd TLS Protocol Setting
Unable to Add Keys to Extended Keys Ribbon While in Session in Receiver for Android
When Used With Web Interface, Applications on Receiver for Android 3.8 or Earlier Show Download Prompt Instead of Launching Automatically
This is a known issue.
The behaviour is a known issue and limitation in Receiver for iOS, version 6.1.1.
Citrix Discussions - Logon prompt to the Citrix Receiver for iOS App no longer appears after upgrading to NetScaler 11
Citrix is aware of the issue and is currently investigating the cause for a fix to be provided in a future software update.
Unsupported on Windows 10
CTX101990 - Error: "The server certificate received is not trusted (SSL Error 61)" for Receiver UsersCTX203362 - Error: "The server certificate received is not trusted (SSL Error 61)" on Receiver for LinuxCTX200836 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." When Launching Apps with Citrix Online Plug-in
This is a known issue on Windows 7 which has been resolved in later Microsoft operating systems Win 8.x and up. Windows 7 can sometimes get confused and change what is seen as the primary adapter.
We recommend customers contact Microsoft support if the workarounds do not work or are impractical for your setup. We are actively investigating ways to programmatically workaround the issue with Microsoft Windows 7.
The localization is incorrect.
Configure Storefront
Configure and install Receiver for Windows using command-line parameters
Using registry keys to customize app shortcut locations
There are many options that you can now configure in 4.2. For a list of all configurations refer Registry keys for shortcuts customization. If you see an option in the preceding link and you do not see it in your registry settings, add the value and set the appropriate.
Citrix Receiver for iPhone and iPad do not support their use with a Web Interface that is configured to any of the following for the client-side proxy:
Web Proxy Auto Detect
Client defined
Browser setting
If Web Interface client-side proxy settings are configured to one of the specified settings and Citrix Receiver for iPhone is used to access the published application, either the published application list does not appear or it appears but the applications do not start and present error messages like the ones below:
“The Citrix SSL Relay The_AGEE_Address could not be found (While the The_AGEE_Address is the address configured to access the Access Gateway Enterprise Edition)”“There is a problem communicating with HTTPS Proxy server.”
This is because the iPhone and iPad browser proxy settings work different from a Windows PC in relation to the configuration of internet access, and the browser proxy settings on the client device are not accessible to the Citrix Receiver.
This is known issue caused by the Maximum allowed color depth for a Citrix Policy being lowered from the default setting of 32bit to 16bit.
Citrix Documentation - Using StoreFront account settings to customize app shortcut locationsCitrix Documentation - Using registry keys to customize app shortcut locations
Citrix Receiver 3.0 and later requires a match for the SessionSharingKey ICA file parameter, for Session Sharing to work when the application launches. If the SessionSharingKey is not present, Session Sharing does not work.
Downloads - Citrix Receiver for Windows
CTX133982 - How to Manually Install and Configure Citrix Receiver for Pass Through Auth.
Configuring and Installing Receiver for Windows Using Command-Line Parameters
Delivering Receiver Using Active Directory and Sample Startup Scripts
The receiver does not have the ability to change the Server Language based on the client’s language. Instead, it uses the server's default keyboard language settings.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Administrators have configured  a PNAgent site on Web Interface through NetScaler Gateway which is NOT a supported configuration.
The issue occurs when ICA packets are not fully compressed, which depends on compression buffer condition in the endpoint.
CTX135140 - Delay in Displaying the Published Applications Icons in the Start menu at Logon
From nstrace Perspective
In configuration CVPN must be set to ALLOW because in nstrace you can observe the Receiver with CVPN requests.
When CVPN is OFF you will observe that the NetScaler does not send the following request from Receiver to the back end but sends a "403:Not a privilege user" error right away to the client:
After CVPN is set to ALLOW in session profile you will observe that the NetScaler sends the request from Receiver to the back end and gets a 200 response, which is sent to the client.
You can configure the Receiver Linux client to access the XML brokers’ servers directly without authentication. The user can view published application/desktop. The users are prompted for credentials, such as the User ID and Password while logging on to published application /desktop.
With this configuration in the Receiver Linux client and with limitation of one session per user in the farm, the message about the exceeded connection limit is displayed to the user. The reconnect session process uses the User ID (SID) as the search criteria to retrieve all connected and disconnected sessions in the entire farm. It is also possible to query the data collector to find the least loaded server and redirect the user to this server, which presents the logon screen.
The error message is not displayed to the user with this configuration if the least loaded server that was redirected to the user is the server that has the user’s previous disconnected session.
Following is the link to the Citrix Receiver feature matrix which shows the supported features with the latest Citrix iOS Receiver.http://www.citrix.com/content/dam/citrix/en_us/documents/products-solutions/citrix-receiver-feature-matrix.pdf
In Google Chrome 40 there is a change related to Content Security Policy Level 2 which breaks the connection if you are using Receiver for HTML5 1.3.
With Receiver 3.x and later, the USB and Keyboard inputs is being processed asynchronously. This change was done with performance improvements in mind. The speed at which a keyboard-emulation device transmits the emulated keystrokes to the OS if beyond speeds of human typing can sometimes cause the missing/corrupted data.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The Receiver for Windows installer inadvertently removes binaries related to Citrix Lync Optimization Pack during in-place upgrade or uninstall.
To identify the problem, take a network trace (nstrace) on NetScaler Gateway. if you see only username is being returned from the Entrust server, then it is not NetScaler Gateway issue.
A problem was introduced with the release of Citrix Receiver for iOS version 5.9.2 that prevents this from working while in full screen mode.Another existing problem occurs when toggling the Use Unicode Keyboard feature to off. Citrix is aware of this issue and is currently under investigation.
Note: The problem introduced in 5.9.2 will be addressed in the upcoming 5.9.3 release.
During ICA session termination, OS is expected to clean up resources, but may be leaving behind resources from Wfica32 process.
CTX136671 - Frequently Overlooked Settings to Improve Graphics Performance for XenApp, XenDesktop, Receiver Technologies
This issue could occur if SSON/Pass-through is not enabled on the Citrix Receiver.
This issue may occur if Citrix Receiver plug-in is blocked by Google Chrome browser.
Apple Support - Keyboard unresponsive when in Citrix 11.8.2 (255309) after 10.9.5 upgradeCitrix Discussions - Keyboard stops working - OSX ONLYIf you require additional technical assistance with this issue, please contact Citrix Technical Support. Contact details for Citrix Technical Support are available at http://www.citrix.com/site/ss/supportContacts.asp.
Citrix Discussions - Num Lock key and Chromebooks
This occurs due to the required default Audio over UDP ports to be enabled in XenApp/XenDesktop 7.5
Citrix eDocs - Machine Catalogs preparation
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
Citrix UPD requires the use of the PostScript data format to support client printing on Mac and Linux clients. To achieve this, Citrix leverages PostScript driver developed by HP. The version of this HP driver, that Microsoft had previously built into the Windows 7 and Server 2008 R2 operating systems, is no longer included with Windows 10, Server 2012 R2, or Server 2016. Because of this missing driver, client-printers on Mac and Linux endpoints fail to be created in the XenApp and XenDesktop session.
This error might occur if the result of Name Resolution was not saved correctly.
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
CheckPoint Firewall device on the internal network of the Citrix XenApp or XenDesktop hosts is the cause for this issue.
This error will occur if you have Chrome browser version 30.0.1599.69. It is a known bug with this particular version of Chrome.Refer to: https://code.google.com/p/chromium/issues/detail?id=304319&can=1&q=citrix&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified
This behavior is by design. The Program Neighborhood Agent uses the WinINET.dll file to authenticate and communicate to the Program Neighborhood Agent site.
The Program Neighborhood Agent indirectly creates the PIN dialog using the WinINET.dll file using the underlying smart card CSP whenever access to a user's private key or other personal credentials on a smart card is required. In contrast if a Web Interface site is created, then PIN pass-through works. There is no prompt when logging on to Web Interface or when launching applications.
Microsoft TechNet - Configure Trusted Roots and Disallowed CertificatesMicrosoft TechNet - Error Message: This Security Certificate Was Issued by a Company that You Have Not Chosen to TrustInstalling the Root & Intermediate CertificatesCTX128539 - How to Link an Intermediate Certificate to the Server Certificate in NetScaler/NetScaler GatewayCTX200836 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." When Launching Apps with Citrix Online Plug-inCTX203362 - Error: "The server certificate received is not trusted (SSL Error 61)" on Receiver for LinuxCTX108800 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." on Receiver for Mac
Citrix Discussions - SSL Error 61
Citrix Discussions - Citrix ICA Client: SSL Error 61: You have not chosen to trust "VeriSign", the issuer to the server's security certificateCitrix Discussions - Unable to launch applications SSL Error 61
A call blocked during startup is causing a timeout which results in the error.
This issue may occur if the Citrix Desktop Viewer Toolbar was enabled on the StoreFront Services Receiver for Web. The Desktop Viewer Toolbar is not recommended for use with XenApp published desktops as it causes numerous issues. The Citrix Desktop Viewer Toolbar was designed specifically for use with XenDesktop only.
Multiple sessions can be opened if multiple configured seamless Windows applications are started in rapid succession and the server running has custom logon scripts that take longer than 20 seconds to complete.
There can be a number of reasons for the issue including but not limited to:
The *.ica file on the client needs to be associated with a required installation of the Citrix Receiver.
The Internet Explorer browser option "Do not save encrypted data to disk" is selected in the Internet Settings on the Advanced tab.
A lockdown issue occurring after an upgrade of the current Internet Explorer browser version is preventing the launch.
The Web Interface server is not configured with the proper address routing or network address translation setting causing the launch.ica file to render with the incorrect local network IP address or https/SSL WAN address location.
Third party web browser based applications, known as Adware, or password caching shopping based programs installed on a client’s machine have been known to be the cause of this prompt.
The Citrix MIME types may not be configured correctly with ICA.
New restrictions on browser plug-ins, including the Citrix Plug-in used to access desktops and applications, were introduced in Firefox 26.
DLL files that are part of the Citrix Online Plug-in for Windows 12.x, or earlier versions, might have been altered or removed.
This is a known limitation and corresponds to CTX101997."The Auto Client Reconnect feature does not work for Citrix Secure Gateway users because during each reconnection attempt, the client resubmits the used STA ticket with which it originally connected."
How to Enable and Collect Logging for Receiver for Mac 11.9
Running a process monitor at logon reveals that the SelfService.exe is trying to create a file in the following directory: AppData\Roaming\Microsoft\Windows\Start Menu\Program Files
Writing of this file is essential for the synchronization of the applications. But, the creation of this file is denied. Therefore, it interrupts the Self Service process and thus the Citrix Receiver application icon fails to populate correctly.
CTX132629 - RSA SecurID Software Token URL Issue in Receiver for iOS
CTX219666 - Advisory: Receiver for iOS and Apple’s App Transport Security (ATS)
RES Virtual Desktop Extender (VDX)
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
This issue occurs when "SmartCard, " is included in the Modules file of the ICA client on MAC client workstations.
Note: The issue has also been reported with SSPI instead of SmartCard.
The Citrix web plug-in for Google Chrome is enabled. From Google Chrome 13.x version, the Citrix web plug-in is enabled by default. In some cases, this can cause a failure of ICA files during launch. This feature is a part of Google Chrome and is independent of Citrix Receiver. This is NOT part of the Citrix Receiver installation and works in the same manner as Internet Explorer plug-ins, but does not automatically update. (as by design with Google Chrome)
Printers mapped to the client local system are no longer valid printers on the network. The printer was physically present, but the share name on it had changed. Therefore, the Printer Properties for these items on the local system received an error message stating the printer was unavailable and stating to check the connection.
Authentication Policy Configuration
If dual authentication is required on NetScaler Gateway (such as RSA SecurID and Active Directory) and there are no qualifying expressions defined in authentication policy other than "ns_true", RSA SecurID authentication must be defined as the default primary authentication type. Active Directory authentication must be the secondary authentication type.
RSA SecurID uses a RADIUS server to enable token authentication.
For more information refer to CTX125364 - How to Configure Two-Factor Authentication on NetScaler Gateway for Use with Mobile/Tablet Devices.
Citrix Documentation - Configure Access Gateway Enterprise Edition for Citrix Receiver for iOS
Citrix Documentation - To configure Access Gateway Enterprise Edition for Citrix Receiver for Android
# Please note that using Windows Receiver with Web Interface (including WI on NS) at the Backend is not supported at the NetScaler gateway level.
For more information on Citrix StoreFront, refer to Citrix Documentation - StoreFront 3.0.
CTX125533 -  Troubleshooting Citrix Receiver for Mobile Devices
Citrix Documentation - Receiver
CTX122962 – Citrix Printing Tool
The error is generic and might occur due to multiple causes. The most common causes are the following:
Invalid Client Configuration.
Invalid Network Environment.   For example, having an IP Address on the Client that cannot route packets to the Server that is defined.
Terminal Services Licensing.
Citrix Documentation - ICA Settings Reference
Windows Sysinternals - Autoruns for Windows v11.62
CTX122536 - Citrix Quick Launch
CTX101644 - Seamless Configuration Settings
The Citrix Online (Web) Plugin version 11.2 or later do not support UDP (TCP/IP) Browsing (the TcpBrowserAddress<number>=... parameter), instead HTTP/XML browsing is supported (the HttpBrowserAddress<number>=... parameter).
If you only have domain joined clients, you can choose to automatically permit or deny this request through a registry adjustment. For more information about this, refer to CTX124921 - Citrix Online Plug-in 12.0 Ignores Webica.ini Settings.
Note: The registry can be configured for every client by completing the instructions available in CTX124921 - Citrix Online Plug-in 12.0 Ignores Webica.ini Settings.
Citrix Documentation - Configure Receiver with the Group Policy Object template​CTX124921 - Citrix Online Plug-in 12.0 Ignores Webica.ini SettingsCitrix Receiver - Latest DownloadKnowledge Center Highlights: App Virtualization & VDI (July Edition)
Deploying the Lync VDI Plug-in​
The PNAgent does not accept the proxy pac directory specified as c:\....\proxy.pac within the Internet Explorer Auto Proxy script field.
The examination of the Trolley Express (Receiver Installation log file) indicates that the installation failed due to an existing package.
package was found. Install cannot continue.
The previous version of the Citrix Receiver client was removed but some corrupted registry entries that are still present are causing the installation issue. Filtering on trolleyexpress.exe through process monitor( ProcMon) reveals the remaining registry entries that are blocking the installation process.
By default, Citrix Receiver standard edition requires https.
Receiver cannot store cookies like a browser can.
Removing or reinstalling Citrix Receiver can cause an incorrect setting to remain in the registry. Also see CTX325140 - How to Remove Client Files Remaining on System after Uninstalling Receiver for Windows.
How to Configure Default Device Access Behavior of Receiver, XenDesktop and XenApp
If you log on to network shares in another domain, overall logon time is increased. This interferes with the PnSSON function on the published desktop.
Note: This functionality does not work with Receiver for Mac software release earlier than 11.4. Macintosh or Citrix Receiver has reserved certain keys and key combinations.For example:
You cannot create a shortcut key containing Option and Command key. This is because the Option and Command key combination is passed or sent to the session as an Alt key.Command, Ctrl, and D combination is the Mac OS X system-defined shortcut for Dictionary lookup, and cannot be used as an application shortcut.
Citrix Documentation - Improving the user experience in Citrix Receiver for Mac.
Citrix recommends you to restart the system after editing the registry.
The number of items, their locations and names mentioned in this article might change in subsequent releases of the Receiver for Windows.
CTX121917 - How to Remove Legacy ICA Clients for Windows Using MSI or EXE Command-line Parameters
Refer Receiver and Plug-ins section of the Citrix eDocs.
This error may occur due to a missing or an outdated root certificate on the client device.
The wfcrun32 process continues to run in the installation user’s context when the installation is complete. Connection Center initiates the wfcrun32 process, which starts after installation. Users cannot open applications until wfcrun32 runs in applications context.
In the following image, TestUser is the logon account and has lowered privileges. The client was installed using the Run As option with an Administrator account. After the installation, the wfcrun32 process is running in the Administrator account that prevents TestUser from accessing hosted applications.
Note: This situation can occur if an enterprise software delivery system is used to deliver the client with elevated credentials used during the installation.
The error occurs if the user’s profile was moved after the XenApp plugin was installed. The log file path in the Users Appsrv.ini is incorrect. Uninstalling and reinstalling does not correct the issue.
Note: Lack of permissions to the log file destination directory can also cause the issue.
This error may occur if some MSI packages are not properly removed from (Add/Remove Programs) or (Programs & Features). The remnants of the corrupted installation can sometimes prevent installation and uninstallation of software.
Pass-Through Authentication for a services site can only use the Receiver Enterprise Edition, also known as the Legacy PNA. There is a misconception that the Standard Receiver can be installed with command line switches to enable to Pass-Through. Then use the Standard receiver to connect to a services site and Pass-Through will work. However, this does not work.
The server URL can be specified during installation using SERVER_LOCATION parameter. For more information refer to Citrix eDocs - Receiver for Windows (desktop).
The issue is caused by limitations in the Client Drive Mapping (CDM) as well the Application Programming Interfaces (APIs) used.	For a file write, the application server passes a 32-bit offset. (0xFFFFFFFF).
However, even with that on the client side, the application server uses the _llseek API, which takes LONG (not ULONG) as a parameter. Therefore, the application server is limited to 0x7FFFFFFF = 2,147,483,647 bytes of space. Anything larger than this (>=0x80000000) will pose a problem.
This issue occurs due to the “multi-arch” bug problem (Ubuntu Bug #1185771).
The issue is caused when Client Choices is enabled in Session profile on Netscaler
Citrix Discussions - Citrix NetScaler Gateway Enterprise VPX - License not working
Citrix Discussions - Access Gateway VPX - Unable to launch apps Socket operation on non socket
Citrix Documentation - NetScaler Gateway License Types
Citrix Blog - NetScaler Gateway Licensing Demystified
Citrix Documentation - How SmartAccess Works for XenApp and XenDesktop
Citrix Documentation - Configuring the Secure Ticket Authority on NetScaler Gateway
Copying and pasting content within Microsoft Excel or running macros causes the session to disconnect temporarily due to issues with Wfica32.exe when Receiver 3.x (13.0) is installed.
The certificate chain (root and intermediate certificate) was upgraded from SHA1 to SHA2 (SHA256, SHA384 or SHA512). (see Citrix Receiver Feature Matrix).
CTX132447 – How to Manually Extract, Install, and Remove Individual .msi Files from ReceiverEnterprise.exe
The Citrix Receiver client software installation is corrupt or some required registry settings are missing.
One of the reasons for this issue to occur is when there is no domain specified when logging into Citrix Receiver for Windows.
Even though the Citrix Receiver allows you to log on and subsequently enumerates applications without specifying a domain name, the credentials when passed to XenApp server are interpreted as an attempt to logon to the server locally, since there was no domain name specified. This scenario is explained in the following procedure:
Logging on to Citrix Receiver for Windows.
After attempting to start the application, a prompt to re-enter the user credentials appears.
The server rejects the credentials because there was no domain specified:
After choosing the option to switch user accounts and the domain name is specified, the application starts successfully.
The ICA request is not reaching the XenApp Server.
CTX101810 - Communication Ports Used by Citrix Technologies
Citrix Documentation - Configuring the Secure Gateway or Secure Gateway Proxy
Fix site display problems with Compatibility View
Citrix Receiver
There have been changes to iOS 5 platform, which affect connectivity issues from the device.
Important Changes
iOS 5’s TLS implementation has been upgraded to support the TLS protocol version 1.2 as opposed to TLS 1.0 that worked for previous iOS versions. http://developer.apple.com/library/ios/#technotes/tn2287/_index.html
Support for X.509 certificates with a MD5 hash has been disabled for use as trusted certificate.
Default system trust settings have been reconfigured to not trust Digicert issued certificates.
Note: If any of these configurations are in place in your network you will experience client authentication time-outs because of a failed SSL handshake.
The STA ticket has expired, cannot be found, or the connection to the Secure Gateway server from the client cannot be established.
Note: These errors can be reproduced when disabling the network interface card (NIC) on the Secure Gateway server, waiting for the client’s session reliability to timeout, modifying the STA ticket within the ICA file prior to connection, disabling the NIC on the client computer, and waiting for the session reliability timeout to expire.
Seamless Taskbar Grouping of hosted, published applications is not set.
This issue might occur because of an issue in the “SmartScreen Filter Online service.” The behavior can also occur with the Winlogon key or Userinit value in the registry on the server if not configured correctly.
Citrix Documentation - Receiver for iOS 5.9
Citrix Receiver used a screen update feature to refresh the screen view of the published desktop or published application for seamless use.
This is mainly used to improve the refresh screen repaint issues sometimes found on poor refresh rate system. The same feature sense is used for Windows causing a conflict on the repaint or refresh for showing published application or desktop from a UNIX server sense. These are made entirely different compared to Microsoft Windows.
The repaint/refresh gets low and seems that there is a bad performance on server side, but in reality Citrix Receiver is taking a long time repainting the screen for the user.
CTX121900 - Error: "Citrix XenApp Could Not Contact the Server"
CTX126692 - Error: 'Citrix XenApp Could Not Contact the Server' after Installing .NET 1.1 or 4.0 Framework in Web Interface 5.x
Citrix Download - XenApp 6.5 Feature Pack 1 Enterprise Edition - Group Policy UpdatesCitrix Documentation - Receiver for HTML5
This issue might occur for many reasons:
The user capturing the traces does not have administrative rights on the remote system.
There is an architecture mis-match between the version of CDFControl and the remote system.
The Remote Registry service might not be running on the remote system.
When Receiver for HTML5 is hosted on a https site (default and recommended), non SSL/TLS websocket connections are prohibited by browsers.
The XenApp plugin uses Internet Explorer’s proxy server setting to communicate with the network.
The cause of the issue is an incorrect module.ini file in the c:\Program Files\Citrix\ folder that is modified by the Sentillion/Vergence SSO product.
This issue occurs because of the following reasons:
Issue with the way the receiver renders mouse pointer that leads to situations when receiver rendered the cursor with nothing visible.
Windows allows for an inverse cursor (the bits are flipped based on what the cursor is over) and Linux X server does not support inverse cursor.
Bugs in X server XRender extension.
With Citrix Receiver 3.x and later, you must select Show advanced Receiver menu from Preferences > User Settings section.
In the new version, when you click the Citrix Receiver icon from the Systray, the menu is displayed as shown in the following screen shot:
How to Start the Application
By default the shortcut presentation is not configured:
Configuring the Shortcut Presentation Options in the Properties of the Published application can alter the required location of the Published Application Icon on the Endpoint Desktop.
Adding this shortcut enables you to access the application from the Start menu, as shown in the following screen shot:
In addition, one can Configure the Self Service Plug-in to enable user self-service access to applications.
CTX115465 – You Cannot Print to Locally Attached USB Printer when Using Java Client on Macintosh
CTX115230 - Understanding-Shift-F11-Key-Combination-Behavior
Prior to Windows Receiver 4.0, the Windows Receiver was unable to enumerate devices that were selectively suspended. This led to those devices not being available in the ICA session.
The Windows Receiver 4.0 resolves this issue by enumerating and then redirecting devices that are selectively suspended.
Citrix Downloads - Citrix ReceiverCitrix Documentation - Configuring and Installing Receiver for Windows Using Command-Line ParametersCitrix Documentation - Deliver Receiver using Active Directory and sample startup scriptsCTX133982 - How to Manually Install and Configure Citrix Receiver for Pass-Through Authentication
During the upgrade process, the previous ICA Client was not removed successfully. This leaves behind old information that conflicts with the single sign on process.
Citrix strongly recommends removing earlier versions of the ICA client before installing the latest client to avoid potential configuration conflicts.
Some modules like cpviewer.exe linked to client-side printing can also output information to the debug port. For cpviewer.exe, this can be achieved using CTX122962 - Citrix Printing Tool on x86 OS client machines. Use the Debugging options for cpviewer.exe section to achieve this.
CTX238200 - How to Troubleshoot Client Drive Mapping
Note: A tool has been developed that automatically removes previous installations of the Citrix Receiver Receiver Clean-Up Utility
Citrix Documentation - Citrix Receiver for Windows Enterprise 3.4 and 3
This is a new add-on from Citrix for an upcoming feature, which causes the security policy of IE9 to display the preceding message.
Resetting Receiver to factory defaults removes the following items:
All accounts and stores.
All apps delivered by the Self-Service Plug-in, along with their icons and registry keys.
All file type associations created by the Self-Service Plug-in.
Cached files and saved passwords.
Per-user registry settings that are user preferences and, for per-machine installations, all user-specific registry settings.
NetScaler Gateway registry settings for Receiver.
Resetting Receiver does not impact the following items:
Receiver or Plug-in installation.
Per-machine ICA lockdown settings.
GPOs.
CTX138514 - SelfService.exe Command Line Parameters Specified
When launching the seamless application, if another process requests a foreground focus then this focus is not returned to the seamless window.
The issue occurs because of the wrong encoding being specified in the ICA file. Citrix does not use ISO8859_1 encoding with the desktop viewer.
Some features of the Citrix Desktop Receiver version 11.1 toolbar or the latest version of the ICA client Desktop Viewer toolbar are not supported by XenApp published desktops.
The Certificate Chain includes an expired certificate.
CTX130356 - Mac OS X 10.7 Lion - Known Issues with Citrix Receiver for Mac
Citrix Documentation - Receiver for Mac
Resetting Receiver to factory defaults removes the following items:
All accounts and stores
All apps delivered by the Self Service plug-in, along with their icons and registry keys
All file type associations created by the Self Service plug-in
Cached files and saved passwords
Per-user registry settings that are user preferences and, for per-machine installations, all user-specific registry settings
Access Gateway registry settings for Receiver
Resetting Receiver does not impact the following items:
Receiver or plug-in installation
Per-machine ICA lockdown settings
GPOs
ICA clients prior to Receiver version 3.0 are unable to interpret the registry value LegacyLocaluserNameAndPassword or the value LegacyLocaluserNameAndPassword was incorrectly configured.
Configuring and Installing Receiver for Windows Using Command-Line Parameters
Delivering Receiver Using Active Directory and Sample Startup Scripts
CTX136927 - How to Enable Logging for Receiver for Windows 8 and Windows RT
This is by design. Special functionality was added in the Receiver for Windows to get the Bloomberg keyboard to work on a Windows OS client. Bloomberg keyboard special keys and fingerprint scanner require the Receiver for Windows 3.x and later. This works only with XenDesktop, not with XenApp as the remote Citrix host.
The Receiver default behavior is set to the following value: 3 =  reconnect on application launch or refresh When an application is launched within a published desktop it is seen as an open application which generates a disconnection.
In certain scenarios, customers might have configured the Receiver to point to with XenApp Services sites hosted on Web Interface with farms existing on one or more domains. There is currently a limit of 11 characters for store names. This only affects the message presented to the user by the Receiver when a XenApp Services site is added to the Receiver as a Store.
Note: Stores hosted on StoreFront sever are not affected by this limitation.
The issue can occur when you apply Client Selective Trust settings through Group Policy. These settings are written to the following locations.
[HKLM \SOFTWARE\Citrix\ICA Client\Engine\Configuration\Region Identification\Trusted Region\Evidence] "EffectiveAddress"="" "InternetExplorerZone"="Trusted,Intranet,Internet”	[HKLM\SOFTWARE\Policies\Citrix\ICA Client\Lockdown Profiles\All Regions\Lockdown\Network\ClientSelectiveTrust] “EnableClientSelectiveTrust”=”true”
When you upgrade the ICA client, the registry key is deleted and the standard settings are recreated.
[HKLM \SOFTWARE\Citrix\ICA Client\]
The following Registry key is not deleted and therefore the settings are incorrect.
[HKLM\Policies\Citrix\ICA Client]
In .NET 4 Framework, call forwarding of the .NET Framework is not available because of the introduction of in-process side-by-side hosting. Therefore, programs created to work with earlier versions of the .NET Framework do not use .NET version 4 and later, unless you enable the relevant option to facilitate it to work with the earlier versions.Computers on which only .NET 4 Framework is installed and earlier versions of the .NET Framework are not installed, these programs fail to run.
CTX122362 - How to Deploy the XenApp Online Plugin for Macintosh 11.0 from Web Interface 5.1.x
CTX122996 - How to Deploy the CitrixOnlinePluginWeb.exe Client 11.2 on Web Interface 4.5/4.6
CTX123001 - How to Deploy the CitrixOnlinePluginWeb.exe Client 11.2 on Web Interface 5.0.1, 5.1.2
CTX130745 – How to Deploy the CitrixReceiver.exe 3.x on Web Interface 5.3 and 5.4
The previous version of Citrix Receiver is either not uninstalled or not upgraded properly. So, the older Citrix Receiver icon still exists in the Startup folder of the user.
CTX131857 – Citrix Receiver 3.1 does not Allow you to Add Non-Secure URL.Citrix Documentation - StoreFront 3.0
Citrix Documentation - Install and uninstall Receiver for Windows manually
Citrix Documentation - Receiver for Windows 4.4
CTX212272 - How to Suppress the Add Account Window in Citrix Receiver 4.4 or Earlier for Windows
Winlogon Notification Package Reference – Registry Settings
Configuring Custom Clientless Access Policies for Receiver
The feature of mapping the Windows key inside the ICA session is not available in Mac Receiver versions prior to 11.8 clients.
To Remove or Cleanup Plug-In or Receiver installation use the following tool:CTX137494 - Receiver Clean-Up Utility
Windows Server Group Policy Home
Citrix eDocs - Receiver for Windows
Prior to Receiver 4.0, by default the Receiver client would attempt to resolve the FQDN of the target device (example: SG/AG Server, XA server) to IP address and then attempt to connect to the IP Address through a configured Proxy Server.
The issue with this approach is that some Proxy Servers might block connections that are made by IP address through the Proxy Server.
In some environments, the DNS server might not be configured to return the correct IP address for an external device. Such an environment depends on the Proxy Server to resolve the FQDN of the target device to an IP.
The workaround in the past was to set client side setting ProxyUseFQDN=on OR off in the Receiver for Windows client registry so that the Receiver for Windows client would CONNECT by FQDN to the Proxy Server and depend on the Proxy Server to resolve the FQDN to IP.
Use of this workaround at times for various reasons in the past would result in issues in environments that might not have a Proxy server or that might have a non-standard Proxy type setup.
XenApp 6.5 Feature Pack 1 Enterprise Edition - Group Policy Updates Receiver for HTML5 1.1
System Requirements for Receiver for HTML5 1.0
Installing and Configure Receiver for HTML5
Intel Credentials Manager is loaded before Citrix Single Sign-On in the Network Provider Order list.
Citrix Documentation - Configure USB support
For information on USB devices tested with XenDesktop, see CTX123569 - XenDesktop USB Citrix Tested Device List.
Because the Mac devices does not have a registry like Windows devices, a license must be issued to the client devices name. If the device does not have a name, it cannot be issued a license. It attempts to assign a license to a null value, and the session drops.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The cause of this issue is because of the removal of Citrix Time Zone hooking mechanism tzhook from Citrix XenApp and XenDesktop in compliance with the newer Windows operating systems standards.
When logging in, the duplicate subscriptions are created in the StoreFront database preventing the applications to enumerate. The applications and desktops which are subscribed using the older version of the Citrix Receiver create duplicate entries. For more information refer to Citrix Documentation - Installing, setting up, upgrading, deploying, or removing Receiver for Mac.
Methods for configuring where applications go to the Start Menu Folder are discussed in the following Citrix Documentation - Configure and install Receiver for Windows using command-line parameters.
Comparison of the preceding Receiver 4.x configuration with Receiver 3.4 Enterprise with a XenApp Legacy (PNA) site:
Receiver 4.X Auto Start Menu Experience
Receiver 3.4 Enterprise
Auto Provisioned and User
Subscribed app appears in Start Menu (Or in Folders in the Start Menu )
User can still open Receiver from the notification area menu and add new accounts or remove and add more apps
User can remove apps using Add/ Remove programs
Useable on managed physical or virtual desktop
If using StoreFront, mark resources as ‘auto subscribed’ on the backend provider
All resources for user are placed in the Start Menu (Or in Folders in the Start Menu or as Desktop Shortcuts)
User cannot open Receiver, add new accounts or remove and add more apps using the Receiver UX
User can remove apps using add remove program but all apps will be restored at the next logon and any deleted shortcuts will be recreated
Useable on managed physical or virtual desktop
Citrix Documentation - Connect user devices and published resources
CTX200282 - Citrix Receiver Logging - Reference List.CTX141751 - Citrix Receiver Diagnostics Tool - For Windows
Issue caused by metadata added to the BrokerCatalog by App Orchestration.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
Cannot have FIPS enabled during the AppDNA installation
This is a limitation with Windows.
CEIP is enabled on the AppDNA Console .
This is a Linux behavior by design.
By default, IIS is configured with time-out values that are generally too low for use with AppDNA. In particular, the Recycle settings can result in AppDNA tasks being terminated before completion because they have been running for too long. This problem occurs most frequently when dealing with larger application portfolios.
AppDisk Product Documentation:https://docs.citrix.com/en-us/xenapp-and-xendesktop/7-8/install-configure/appdisks.htmlAppDNA 7.8 Documentation:http://docs.citrix.com/en-us/dna/7-8.html
Issue with the System.IO.Path.GetTempFileName() call due to  Excessive files in the Windows temp folder
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
The following are possible causes for this issue:
Problem Cause 1
Blank Spaces being used in the AppDNA logon name used to access the website.
Problem Cause 2
Password that the AppDNA website uses to connect to the AppDNA database is expired or changed.
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
There are cached files on the AppDNA server from the first installation.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
When a task is force-canceled, no additional clean-up is possible or attempted, and some files can be left on the disk.
https://www.vmware.com/resources/compatibility/sim/interop_matrix.php#interop&103=&139=
A cache disk on the Target device can cause this problem.  When using a cache disk, the disk must also be added to the platform layer.
Some kind of compatibility problems between the ELM's SMB client and NetApp servers.
Reboot required to complete installation.
Offline ESXi host associated with the CP, due to host failure.
Layer disk cache was enabled on the connector vsphere with 120 gigs as vsphere is unable to complete the task and sits at 100%
When the ELM boots up, in order to maximize multithreading efficiency, each Connector will spawn one process per detected CPU core.  In 4.6, with the addition of the new Hyper-V connector, we now have six connectors.  With the default 4 CPU cores, making 4 processes per connector, you remain well within the limits of the number of connections to the configuration database allowed.  However, if you have manually increased the number of CPUs, then the extra Connector processes automatically spawned is likely to exceed that limit.  8 CPUs was not a noticeable problem in 4.5, because there were only 5 connectors, so the limit of connections was only rarely exceeded.  In 4.6, it is immediately exceeded on bootup, breaking both the upgrade and subsequent ELM operation if the upgrade eventually succeeds.
Error encountered when publishing an image.
The ELM and the hosts cannot have a firewall blocking their communication over port 443 for the export to succeed.
Failure installing Adobe 2017
Known issue with older versions of the PVS Agent's use of ciphers. It is also possible that the environment has SSL/TLS locked down
The CIFS/SMB module in the CentOS Linux kernel currently available does not support DFS on SMB higher than 1.0.
This could be related to permissions issues, the file share location changing since the image was published (registry key outdated), or the file share configuration in the ELM pointing at the wrong location.
As User Layers are still an App Layering "Labs" feature, we do not recommend using them in production yet.
When running the PowerShell commands to import the App Layering Enterprise Layer Manager (ELM) to Azure, the task will fail if the name is over 24 characters (Azure limitation). Our script adds 9 characters to the original deployment name (deployment name + "diagstore"), which means that the deployment name should be limited to 15 characters in order to keep under the 24 character limit.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Layering Naming and versioning
Unidesk recommends including the OS Type and OS bit level in the name, for Example Google Chrome 31 Win7x32.  For versions remember that when choosing a layer you can see the version name but not the version description.  Use naming that will allow you to differentiate versions appropriately.  For example “1.0 12-12-2013”.
Licensing Considerations
None.
Updates
If you are using a GPO to disable updates just add a version to your layer and open Chrome it will automatically update.  If you have used the registry setting to disable updates modify the registry setting to a number other than 0 and open chrome, it will update then you can set the registry entry back to 0.  Note: If this doesn’t work for you let me know I was not able to test this in the lab.
Considerations for Non-Persistent Desktops
It is not possible to add custom extensions for a single user with a NP desktop.
The ELM needs to be able to remotely execute commands on the PVS server.
The files located in the "Program Files\WindowsApps\Microsoft.MicrosoftOfficeHub" directory are not able to be copied by NTFS-3g. The publishing process may fail if any of the layers have Windows Updates Including Feb 17, 2017 or newer.
This is caused by having additional drives mounted to the packaging machine when the ELM tries to import the layer.
https://support.sas.com/software/products/enterprise-guide/
PVS server had been downgraded to 7.6.  The ELM was detecting the Citrix.PVS.Snapin was still installed on the PVS server but that snapin is only for the newer versions of PVS.The ELM Unidesk PVC Connector log included the following snippets:PVS Console found.  Located 'Citrix.PVS.SnapIn' at version '7.13.0.13008'Cannot load Windows PowerShell snap-in Citrix.PVS.Snapin because of the following error: Could not load file or assembly 'file:///C:\\Program Files\\Citrix\\Provisioning Services Console\\Citrix.PVS.SnapIn.dll' or one of its dependencies. The system cannot find the file specified."
Task is in a "Stalled" state.Stalled" explicitly means "we have not received an update on this task in 60 minutes."  It tells us nothing about why.  Some tasks that are not chatty could go to stalled if whatever they're working on is particularly slow.  The task might still be cheerfully running, we have no way of knowing.  The whole point of "Stalled" is just to let you try to cancel it again.
Importing a vDIsk is not supported.
Office Recipe: https://support.citrix.com/article/CTX224566
It appears this is a Microsoft issue...https://social.technet.microsoft.com/Forums/windowsserver/en-US/6b56be3c-bf68-42fd-8bcb-0b9d90215138/boot-manager-giving-error-cmimcextsys-help-someone?forum=winservergen
On the connector screen, the customer had been including the port number (9440) in his web console address, which was creating an error when mounting the NFS share.
How to Upload Data to Citrix Insight Services (CIS) - https://support.citrix.com/article/CTX136396
There may be other reasons you could get this error, like the customer is using EFI or GPT partition tables. Unidesk requires MBR partition tables currently.
But if you get this error:Failed to attach the disk /mnt/repository/Unidesk/OsImport Disks/Windows 10.vhd. Failed to probe partitions from virtual diskCollect logs from Citrix Enterprise Layer Manager (ELM) as described in  https://support.citrix.com/article/CTX223723. When you export logs, the Citrix software creates a gzipped tar file (.tgz) containing the log files. On extracting the .tgz log file you will find camlogfile.Open the camlogifle in notepad and see if you have a block like this:2016-07-15 12:53:39,717 ERROR DefaultPool3 AttachDiskJobStep: Disk attach failed, detaching /dev/nbd255 Message: MessageId=FailedProbeVirtualDiskPartitions, DefaultTitle=, CategoryData={[ExternalToolFailure { Call = "/bin/nice", Args = "-n-10 /sbin/partprobe /dev/nbd255", Output = "", Error = "Warning: Error fsyncing/closing /dev/nbd255: Input/output errorWarning: Error fsyncing/closing /dev/nbd255: Input/output errorError: Can't have a partition outside the disk!Warning: Error fsyncing/closing /dev/nbd255: Input/output error", ErrorCode = 1 }]}The important bit is that "Can't have a partition outside the disk!" line.For reasons we don't yet understand, sometimes the ELM's way of mounting up a disk comes up about 1MB short. If you mount the same disk to a VM through a hypervisor, the size is correct, but in the ELM, the size is reported just a hair too small. The partition then ends just slightly after the end of the disk, which is illegal.
You can see the specific failure in the vSphere Connector log in unidesk-vsphere-connector.log.json.log (in a log export), like this:
[2017-05-05T09:22:10.708Z]  INFO: UploadVmdk/26379 on localhost.localdomain: Upload execute parameters (dsPath=Some_Layer-2017-05-05_09-22-07.391, reqNum=633)
vmdk: /mnt/repository/Unidesk/Packaging Disks/Some_LayerBoot.vmdk
[2017-05-05T09:22:10.709Z]  INFO: UploadVmdk/26379 on localhost.localdomain: Uploading sparse: /mnt/repository/Unidesk/Packaging Disks/Some_LayerBoot.vmdk => Some_Layer-2017-05-05_09-22-07.391/Some_LayerBoot-tmp.vmdk (reqNum=633)
[2017-05-05T09:22:10.710Z]  INFO: UploadToDatastore/26379 on localhost.localdomain: Uploading Some_LayerBoot.vmdk (23472832512 bytes) to https://esx_host1/folder%2FSome_Layer-2017-05-05_09-22-07.391%2FSome_LayerBoot-tmp.vmdk?dcPath=ha-datacenter&dsName=dataStore (reqNum=633)
[2017-05-05T09:22:10.747Z] ERROR: VsphereClient/26379 on localhost.localdomain: (reqNum=633)
SOAP command 'AcquireGenericServiceTicket' failed: [ServerFaultCode] A specified parameter was not correct.
url
[2017-05-05T09:22:10.749Z] ERROR: UploadToDatastore/26379 on localhost.localdomain: (reqNum=633)
Failure occurred while uploading the file: vCenter returned an unexpected failure => Fault Code: 'ServerFaultCode' FaultMessage: 'A specified parameter was not correct.
url' Details: {"attributes":{"xsi:type":"InvalidArgument"},"invalidProperty":"url"}
The "AcquireGenericServiceTicket failed: A specified parameter was not correct. .url'" error is a known issue when there is a version mismatch between vCenter 5.5 and ESXi 5.1. The ELM is sending commands to vCenter 5.5, however, when we are redirected to the ESXi for the file upload, it does not understand the 5.5 commands we are sending.  When creating a layer or layer version, much of the communication goes through vCenter.  App Layering requires vSphere 5.5, so as long as vCenter is 5.5, that much works.  However, when it's time to actually upload the VMDK for the layer, a "service ticket" is granted by vCenter to talk directly to an ESXi host.  You get this error if your ESXi host is not also at version 5.5 or above.  If, for instance, your ESXi host is still 5.1, App Layering will generate this failure because the commands we send are not implemented in 5.1, only 5.5 and above.
This is a limitation of NTFS-3G, the NTFS system we use to read ad write Windows filesystems.  It can only support file attributes up to about 64KB.  Anything larger causes the copy operation to fail. Larger attributes are certainly legal, we just can't exceed the limitation of the tools we use.The user.favicon is actually stored as an alternate data stream on the file.  Its size is not included by explorer when it reports file size.
Program Files\WindowsApps\Microsoft.MicrosoftOfficeHub are not able to be copied when importing a new Gold Image. The import fails if the Windows 10 gold has Windows Updates Including Feb 17, 2017 and newer.The files located in the "Program Files\WindowsApps\Microsoft.MicrosoftOfficeHub" directory are not able to be copied by NTFS-3g
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
This issue can occur if the Stream Service is stopped, possibly due to a timing issue at startup. The Stream Service is responsible for keeping all critical services running and monitors the database and storage. If StreamProcess terminates automatically to avoid a crash, the Stream Service will attempt to restart it.
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check.http://https://discussions.citrix.com/forum/1729-smart-check/
Citrix recommends at least two Delivery Controllers on different physical servers to provide needed redundancy and scalability for your production Site. If your current Delivery Controller fails, your users won't be able to access your Site. You can hide this alert if this was found in a non-production environment.
Citrix recommends that all Delivery Controllers in the Site have the same version of XenApp and XenDesktop installed.
Smart Check has detected that the Provisioning Services console is not installed on the target machine.
The RDS license server was not configured and the required RDS CAL policies were not applied.
Issue was identified as the StoreFront server marking the cloud connectors as offline when there was a network interruption. Changing the value of  bypass duration time resolved the issue.
Google cloud printing uses the Citrix PDF Printer driver is needed on the VDA along with the Auto create PDF Universal Printer driver policy
From the CDF trace ,It was found that "Enable auto update of controllers" policy worked and Connector1,Connector2 were detected because of this policy .And ListOfDDCs settting was overwritten by the policy result.
Internet Explorer cached previous connection information. This issue occurs due to the aged cached information.
Citrix cloud can only link subscriptions for which the account is in the same AD directory as the subscription.
Citrix Studio has been provisioned as an application using Receiver for HTML. By clicking on the hamburger icon for Receiver, we are able to initiate a logoff for our session with published Studio application
The Delivery Controller is running a later version of  XenApp and XenDesktop than the database server
The Database cannot be reached, a Citrix XenApp/XenDesktop Controller Service failed to connect to database with current connection settings.
The database is compatible and the service group for the Controller Service is available for registration. The Controller Service can communicate with the database, but no endpoints are registered in the Central Configuration Service. This can occur when the Site setup or upgrade did not complete, resulting in a partially configured Site.
One or more services were affected:ADIdentity ServiceAnalytics ServiceAppLibrary ServiceBroker ServiceConfiguration ServiceDelegated Admin ServiceEnvironment Test ServiceHost Availability Service Machine Creation ServiceMonitor ServiceStoreFront Service
Service communication within the Delivery Controller is not functioning properly. The Citrix Monitor service could not connect to the Citrix Broker service.
A database connection string has been specified for the Controller Service, but the database is not compatible or working properly.
Database access was denied for Citrix Monitor Service
the whole environment has been set to Decommissioned as the trial customer used to use has expired than a month.And under Decommissioned state,it will show as pending in customer citrix cloud site.
In order to check order information, the user needs to have Administrator role, which was missing.
Communication Ports Used by Citrix Technologies
Unsupported as the smart check requires the smart check agent or XenApp and XenDesktop Call Home or Citrix Scout. And the Delivery controller access to the customer is restricted.
Disconnected session and idle session for the admin were retained ,and this caused the issue
This behavior is  by design.
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check.http://https://discussions.citrix.com/forum/1729-smart-check/
Communication Ports Used by Citrix Technologies
As per the Citrix Document, pre-requisites are not met and theTCP ports 9350-9354 needs to be open
Here the Storefront server that is configured in XenMobile server is not able to accept the credentials provided by the Secure Hub at the time of enumeration of the apps, because of which the enrollment fails even after setting the Citrix Pin and XenMobile recording this enrollment as successful initially.
The Microsoft.ServiceBus.channel which is used by Connector to communicate with  Citrix Cloud Delivery Controller is in Faulted State.And this caused the VDA registration timeout.
Additionally, if you would like to increase the XenMobile server console session time out value, you can refer to the article https://support.citrix.com/article/CTX216647
Functional level for the catalog was not set correctly.
The Citrix Cloud Connector being installed does not trust the primary or intermediate certificate which is used to sign the bundle (*.exe) that installs the Citrix Cloud provider services. During installation this certificate is programmatically validated in order to ensure integrity of the components downloaded.Note: This is usually not an issue of Windows Updates are automatically allowed.
Reference Articles

Secure Deployment Guide for the Citrix Cloud Platform: https://docs.citrix.com/en-us/citrix-cloud/overview/get-started/secure-deployment-guide-for-the-citrix-cloud-platform.html	 Citrix Cloud Connector Technical Details: https://docs.citrix.com/en-us/citrix-cloud/citrix-cloud-connector/technical-details.html	 Internet Connectivity Requirements: http://docs.citrix.com/en-us/citrix-cloud/overview/requirements/internet-connectivity-requirements.html	 Citrix Cloud Overview: https://docs.citrix.com/en-us/citrix-cloud/overview.html	 Configuring the NetScaler Gateway by Using Wizards: https://docs.citrix.com/en-us/netscaler-gateway/11/install/ng-config-ng-with-wizards-con.html	 Creating a Traffic Policy: https://docs.citrix.com/en-us/netscaler-gateway/11/vpn-user-config/how-traffic-policies-work/ng-create-traffic-policy-tsk.html	 How to Generate and Install a Public SSL Certificate on a NetScaler Appliance: https://support.citrix.com/article/CTX109260	 How to Configure LDAP Authentication on NetScaler or NetScaler

Citrix Cloud Connector Troubleshooting Guide: https://support.citrix.com/article/CTX221535
If you are using older version of servers you can refer to the following link for more information - https://www.citrix.com/blogs/2014/01/17/xenmobile-enable-hdx-apps-with-certificate-based-authentication/
Further trouble shooting found that in the customer's on-premise infrastructure, any HTTP(s) requests would be filtered by a proxy server, which was pre-defined by the customer's network administrator. After reviewing the proxy server setting, HTTP(s) traffic to https://*.xendesktop.net was found blocked.
Smart Tools Agent Requirements: https://manage-docs.citrix.com/hc/en-us/articles/212713903-Agent-and-connector-requirements
Smart Tools Agent Requirements: https://manage-docs.citrix.com/hc/en-us/articles/212713903-Agent-and-connector-requirements
Smart Tools Agent Requirements: https://manage-docs.citrix.com/hc/en-us/articles/212713903-Agent-and-connector-requirements Troubleshooting Agent Connectivity Issues: https://manage-docs.citrix.com/hc/en-us/articles/212715003
Citrix Cloud Connector Overview: http://docs.citrix.com/en-us/citrix-cloud/citrix-cloud-connector.htmlCitrix Cloud Connector Technical Details: http://docs.citrix.com/en-us/citrix-cloud/citrix-cloud-connector/technical-details.htmlCitrix Cloud Internet Connectivity Requirements: http://docs.citrix.com/en-us/citrix-cloud/overview/requirements/internet-connectivity-requirements.html
Microsoft Azure Portal Overview
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
How to use XenMobile MDX Service on Citrix Cloud:https://support.citrix.com/article/CTX220487  How to Configure Multiple Domains for XenMobile Service in Citrix Cloud.https://support.citrix.com/article/CTX220491  How to Configure Certificate Based Authentication for XenMobile Service in Citrix Cloud:https://support.citrix.com/article/CTX220479  How to Create Custom Android KeyStore for MDX App Wrapping:https://support.citrix.com/article/CTX220480
How to Configure Certificate Based Authentication for XenMobile Service in Citrix Cloud:https://support.citrix.com/article/CTX220479How to use XenMobile MDX Service on Citrix Cloud:https://support.citrix.com/article/CTX220487How to Create Custom Android KeyStore for MDX App Wrapping:https://support.citrix.com/article/CTX220480How to Create Apple Certificate and Provisioning Profile for MDX App Wrapping:https://support.citrix.com/article/CTX220481
How to Configure Multiple Domains for XenMobile Service in Citrix Cloud:https://support.citrix.com/article/CTX220491
How to use XenMobile MDX Service on Citrix Cloud:https://support.citrix.com/article/CTX220487
How to Create Custom Android KeyStore for MDX App Wrapping:https://support.citrix.com/article/CTX220480
How to Create Apple Certificate and Provisioning Profile for MDX App Wrapping.https://support.citrix.com/article/CTX220481
How to use XenMobile MDX Service on Citrix Cloud:https://support.citrix.com/article/CTX220487  How to Configure Multiple Domains for XenMobile Service in Citrix Cloud.https://support.citrix.com/article/CTX220491  How to Configure Certificate Based Authentication for XenMobile Service in Citrix Cloud:https://support.citrix.com/article/CTX220479  How to Create Apple Certificate and Provisioning Profile for MDX App Wrapping:https://support.citrix.com/article/CTX220481
It was discovered that the Citrix Cloud AD Provider service on the connector was crashing when attempting to start. This crash was logging the above error in the event viewer. This was caused because the UTC time on the connector server/local active directory time service was out of sync by 1 hour. Once this was corrected the service was able to start and the domain was visible in the Citrix Cloud UI.
Write Back Cache is turned on by default for catalog 7.9 or newer.  The way Microsoft validates VHD size has changed recently and that surfaced up the bug which causes disk size mismatch between current size field in VHD footer and the actual blob size.
The following XenApp and XenDesktop PowerShell snap-ins are supported in this release of the XenApp and XenDesktop PowerShell (PS) SDK
BrokerActive Directory (AD) IdentityMachine CreationConfigurationConfiguration LoggingHostDelegated AdministrationAnalytics
Several cmdlets are disabled in remote operations to maintain the integrity and security of the Cloud control plane, the full list is visible in Citrix Docs linked in the Additional resources below.
In a traditional XenDesktop Deployment, the System Center Virtual Machine Manager Console is required to be installed on the Delivery Controller to enable a hosting connection to SCVMM devices. For Citrix Cloud, the requirement is that the SCVMM Console is installed on the servers running Citrix Cloud Connector.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
The XenDesktop database contains both configuration and state information, which must be updated often.
A single Virtual Desktop Agent (VDA) inactive for an hour generates approximately 62 kilobytes of transaction log data.
Following are the average transaction log calculations:
Number of Virtual Desktop Agents x 24 Hours x approximately 62 kilobytes of data.
Example 10 VDA Farm in idle state:10 VDA x 24 x 62K = 14.8 megabytes
Note: This can be substantially higher in active environments.
CTX123278 - XDPing ToolCTX126992 - Troubleshooting Virtual Desktop Agent Registration with Controllers in XenDesktopCTX122450 - Citrix Port Check UtilityCTX117449 - Virtual Desktops Appear as "Not Registered" in the ConsoleKnowledge Center Highlights: App Virtualization & VDI (July Edition)
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Looking at the Error code, 1062 it says Duplicate entry 'PRIMARY'
catch (final SQLException e) {
if (e.getSQLState().equals("23000") && e.getErrorCode() == 1062) {
throw new EntityExistsException("Entity already exists ", e);
}

It seems its trying to insert a primary key which already exists in database.
Looking into the DB, I could see there exists an entry in vm_work_job table with the same ID and then it errors out saying. (sample snippet)
Duplicate entry '121374' for key 'PRIMARY'
The path values we are seeing ending with 00000X are actually paths of vmdk file of the diff snapshots in VMware. When ever a new snapshot is created, the volume path would be updated to the recent snapshot path (in case data disk it is happening during start of vm). Once the snapshot is deleted, the path is placed back to the original volume path. In the case after snapshot deletion, the reset of the volume paths back to the original vmdk path is not happening.
As per the latest code of 3.x, 4.5 and 4.5.1 we dont see PPTP  implemented in Virtual Router
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
When we start the CPBM server, we can see following error in logs"Waiting on change lock"When looking into cloud_portal DB, We could see lock was set on  DATABASECHANGELOGLOCK even with CPBM server stopped.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
There is only one entry returned by the following query (top customer), while we are expecting one entry for each customer.SELECT * FROM vw_PropertyValues WHERE Property = 'CustomerFullPath'
The tables corresponding to this view are populated by the execution of the Stored Procedure sp_CustomerFullPath and sp_PropertiesManage.
These Stored Procedures are called when Customers and Users are Provisioned, their triggers are PostRequest Provisioning Rules. In this case, these Provisioning Rules were not being executed.
A comma ‘,’ acts like an OU separator. So if you have comma in the customer’s name, it will create 2 OUs for the same customer.
This behavior is seen when an upgrade was done on the back end server (Citrix Desktop delivery controller) and the Hosted App & Desktops service connector is not re-configured.
Primary Email address missing.
Special case not included in the regular expression.
We are inquiring about creating a template user.
[#LC0646]
During initial configuration the SQL table HAaDSelectOutputNew was created under the User schema [OLMUser].[HAaDSelectOutputNew].
Product Document – Hosted Apps and DesktopsInstall the Hosted Apps and Desktops Service
know issue caused due to MS security update KB3159398
There is a 64 character length limit for Access Policy Rules names.
This is caused by the execution of the SQL Stored Procedure sp_resourcemanagement which times out after 30000 milliseconds.The Stored Procedure refers to the table PropertyValues on which some lock intents are causing the problem.For  more information regarding lock_Escalation please refers to https://technet.microsoft.com/en-us/library/ms184286%28v=sql.105%29.aspxThe resolution  requires to disable the Lock_Escalation as follows:alter Table PropertyValues set (Lock_escalation=Disable) You can always revert back this change by running:alter Table PropertyValues set (Lock_escalation=Table) Also you can verify this parameter status for the table PropertyValues by running:select name, lock_escalation, lock_escalation_desc from sys.tables where name = 'PropertyValues'
When we expand a customer it shows any provisioning errors. To show any errors it scans the old request logs from the SQL server.Too many old request logs were retained in the SQL server for this issue and thus it resulted to delayed performance.
The AD servers that were being contacted to create the groups were unavailable.
There is no way to configure the default domain type within CloudPortal Services ManagerInitially when creating domains for the customer, they are done with no knowledge of Exchange, therefore no setting is configured for the ExchangeAuthoritative column in the database.  A Null value in this column means "External Relay", so when Exchange is finally provisioned to the customer, or if the domain is added to the customer after Exchange was first provisioned, then the domain is configured as "External Relay" automatically.  You would then need to go back to the Exchange Customer Service screen in order to re-configure the domain.
Key mismatch on the web.config file for the CortexDotNet Web application
A fix is available for this in Cloudportal Services Manager v11.5 CU2
Blog Post by Selma Wei: How to Setup CloudPortal Services Manager Branding & White Labeling
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
If you complete executing this procedure, then no customer will have access to the resource mailbox.
To add permissions to the resource mailbox, open the Resource Mailbox and add the permissions.
This change will affect ALL customers in CloudPortal Service Manager.
The resource mailbox created after the new rule will not have the "Proxy {CustomerShortCode} Users" permission added.
With Exchange 2010 Service Pack 2, the globaladdresslist and globaladdresslist2 attribute must be in synchronization with CN=Microsoft Exchange,CN=Services,CN=Configuration,DC=yourdomain,DC=local.
If the two attributes are not in synchronization, the following error appears when trying to provision Hosted Exchange to a new customer.
The globaladdresslist attribute should only contain entries similar to the following entries:
CN=X2010 Global Address List,CN=All Global Address Lists,CN=Address Lists Container,CN=Development,CN=Microsoft Exchange,CN=Services,CN=Configuration,DC=yourdomain,DC=local
It should NOT contain deleted entries such as the following entries:
CN=X2010 Global Address List\0ADEL:a875c624-3233-4bc9-8641-6a6b4b04075f,CN=Deleted Objects,CN=Configuration,DC=yourdomain,DC=local
In the 10.0 release of CPSM, even with the Cumulative Update 1, there is a deployment bug where some assemblies are not copied to the correct location.
Complete the following steps to resolve this issue:
Open C:\Program Files(x86)\Citrix\Cortex\CortexWeb\CortexAPI\bin.
Create a folder called Services.
From the parent folder, copy the following files to the new Services folder:
Restart the IIS service.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
When provisioning a Hosted Exchange Service for a user, it can take up to five minutes for the user’s mailbox to be available to add permissions. During the process, the CPSM disables system wide calendar sharing permissions and adds additional calendar permissions. This delay of provisioning a Hosted Exchange Service for a user causes the error message.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
After installing the Exchange Server 2010 SP2 Rollup 4 v2, the remote calls to some PowerShell cmdlets fails.
The CPSM powershell script "GetSitePermissions.ps1" filters out the ‘Limited Access’ role, so that it is no longer displayed in the “Role Management” in user’s SharePoint service.
$Roles = $Site.RootWeb.Roles | where { !($_.ID -eq 1073741825 -or $_.Name -eq "Limited Access") };
This role is filtered out and cannot be assigned to users or SharePoint group directly. The permission is only assigned when a user is given access to a specific item and does not have permissions to have access to specify object.
If the user account has the limited access role, the site permission for the user will not load. During the time, CPSM attempts to load the user permission and validates the permission for the site.  It compares the site permission against the permission for the user.  If the user has permissions and it does not match the site, CPSM will throw the following error:
“Failed to load the site permissions for the user…. “
In addition, this behavior might occur when the SharePoint 2010 site is imported into CPSM, and users are granted with ‘Limited Access’ Role.
Traps files under:/opt/Citrix/Citrix_Command_Center/state/traps getting full
Transaction Logs have captured a lot of Hard Disk and once it was removed Hard Disk is free and Command Center is accessible
The user had modified the root user permission (changed Group with restricted access)
While-clicking-on-Configuration-tab-the-user-get-automatically-kicked-out-of-from-the-Command-Center-and-back-to-the-logon-page-again
/var partition getting full
Most of the times the hprof crashes occurs due to memory file size and perf polling issues, We have to execute the below steps to clean up some files on command center.
Please find the below reference link for more details: Configuring Custom Reports : https://docs.citrix.com/ja-ja/command-center/5-1/cc-perf-report-wrapper-4-0-con/cc-perf-report-conf-custom-tsk.html
Issue: While doing a command center upgrade to the newer version using the package file, we are suppose to add the DB password credentials to connect with the same Database using the Old password and if we don't give the correct password the setup wizard will not allow to install the new version because while installation is done using package file the command center will synchronize with the database for the newer version validation check.
There is a known issue in Command Center, because of which backup files are piled up under /var in SVM.
SVM becomes unreachable as the svmd services were not able to start because the file system is full.
DB corruption.
The Command Center Database has couple of bytes left in storage space. We have to drop specific tables of higher GB size to free up the space. Command Center was unable to perform any db read/write actions.
SVM didn't accept the SSL handshake from CC
We can see from the logs for the User a colon(:) is appended  and this is the issue as per Engineering Team."<134> 10.102.x.40 05/12/2011:09:30:09 GMT ns PPE-0 : SSLVPN CLISEC_CHECK 33636331 :  User nsroot - <Client IP> - Vserver <IP>  - Client_security_expression CLIENT.APPLICATION.PROCESS(notepad.exe) EXISTS - Client_security_check failed - User not allowed to login"25/08/2016:09:17:35 GMT NSCALER 0-PPE-0 : default SSLVPN CLISEC_CHECK 117963934 0 :  User: niblettr - <Client IP> - Vserver <IP>  - Client_security_expression "CLIENT.REG('HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Services\\\\Tcpip\\\\Parameters_Domain').VALUE == 'domain.com'" - Client security check failed - User put in quarantine group MSOfficeAllowed - Error message Browser - Client is not a domain member
SSLv3 should not be used due to vulnerabilities in the Protocol.
If such process is busy on some internal Task (or) in hung stage , the CC service in restart phase trying to connect to this JVM process may not be successful triggering this error.Due to this the CC service will not start completely.
Some java files may be missing or corrupt. This script will replace the /Citrix/Citrix Command Center/jre folder with the _jrebkup folder.
REPORTS file being so large
-backup files were filling up location "/opt/Citrix/Citrix_Command_Center/data/Inventory/temp" with backup files of SDX and VPX
CTX111079 - How to Configure a NetScaler Appliance for Active Directory Group Extraction of LDAPCTX135603 - Active Directory Group Extraction Does Not Work on NetScaler
CEF logging was enabled in the Application Firewall settings and that was the reason why Application Firewall records were not coming onto the dashboard.
We can see the event in the NetScaler ns.log file :Aug  6 16:18:24 <local0.info> 192.168.31.21 08/06/2015:16:18:24  waf01 0-PPE-0 : APPFW APPFW_FIELDCONSISTENCY 30385582 0 :  CEF:0|Citrix|NetScaler|NS10.1|APPFW|APPFW_FIELDCONSISTENCY|6|src=X.X.X.87 spt=25968 method=OPTIONS request=https://mail.got.com.tr/Microsoft-Server-ActiveSync?Cmd\=OPTIONS&User\=John%Snow&DeviceId\=SEC1A7516082D449&DeviceType\=Longclaw msg=Field consistency check failed for field "" cn1=25456906 cn2=32871710 cs1=John_Owa_Prof cs2=PPE0 cs3=M2a7QubQDCayIe4lSv7ZngdfEtYA000 cs4=ALERT cs5=2015 act=not blocked
We can see the same event on the Command Center alert_audit.txt which confirms that the event came till the Command Center server :Update:  At Thu Aug 06 16:15:58 EEST 2015. Major from Major. Alert: CEF:0|Citrix|NetScaler|NS10.1|APPFW|APPFW_FIELDCONSISTENCY|6|src=X.X.X.87:appfwFieldConsistency192.168.31.21 : CEF:0|Citrix|NetScaler|NS10.1|APPFW|APPFW_FIELDCONSISTENCY|6|src=X.X.X.87 spt=25968 method=OPTIONS request=https://mail.got.com.tr/Microsoft-Server-ActiveSync?Cmd\=OPTIONS&User\=John%Snow&DeviceId\=SEC1A7516082D449&DeviceType\=Longclaw msg=Field consistency check failed for field "" cn1=25456906 cn2=32871710 cs1=John_Owa_Prof cs2=PPE0 cs3=M2a7QubQDCayIe4lSv7ZngdfEtYA000 cs4=ALERT cs5=2015 act=not blocked
Again we can see a trap received by Command Center from NetScaler for this event in the FaultOut.txt :-> trap from x.x.x.242 vectVarBind=[.1.3.6.1.2.1.1.3.0: 169 days, 3 hours, 47 minutes, 32 seconds., .1.3.6.1.6.3.1.1.4.1.0: .1.3.6.1.4.1.5951.1.1.0.92, .1.3.6.1.4.1.5951.4.1.10.2.25.0: CEF:0|Citrix|NetScaler|NS10.1|APPFW|APPFW_FIELDCONSISTENCY|6|src=X.X.X.87 spt=25968 method=OPTIONS request=httrequest=https://mail.got.com.tr/Microsoft-Server-ActiveSync?Cmd\=OPTIONS&User\=John%Snow&DeviceId\=SEC1A7516082D449&DeviceType\=Longclaw msg=Field consistency check failed for field "" cn1=25456906 cn2=32871710 cs1=John_Owa_Prof cs2=PPE0 cs3=M2a7QubQDCayIe4lSv7ZngdfEtYA000 cs4=ALERT cs5=2015 act=not blocked, .1.3.6.1.4.1.5951.4.1.1.2.0: 192.168.31.21
The database has reached it's limit due to which the command center is not starting.
https://docs.citrix.com/en-us/command-center/5-2/cc-install-cc-wrapper-con/cc-install-cc-linux-4-0-tsk.html
The AppFW table on the Database server was filling up very quickly with a large amount of logs causing the size of the database to grow.+--------------------+---------------------------------------+------------+| Database           | Table                                 | Size in MB |+--------------------+---------------------------------------+------------+| CitrixDB           | APPFW                                 |    5961.09 |
The hourly table in the Command Center database is getting filled up, which is filling the database quickly.
In general the SYSLOG traffic is sent over NSIP from Netscaler to Command Center. The configuration on the Netscaler points the SYSLOG server as Command Center. The Command Center acts as a receiver for the SYSLOG messages from Netscaler over NSIP. Due to the communication changes on Netscaler 11.0 release this issue is observed. In the Netscaler releases (prior to 11.0.64.34) the SYSLOG messages are sent over SNIP rather NSIP.
Discover issue with SNMPv3.
The issue might be with the permission / rights given to the service Log on account.
Netscaler discovery is not completing and would enter a "started" state, rather than failing.
Error found in Command Centre logs:
[18 Nov 2015 10:56:29:856] INVENTORYERR: Source : ServerUtils.getMoProps : Unable to get MO Props for node:10.120.196.153
The regular installation wizard might skip some processes because of which the upgrade script would break and lead to failure.
This is caused because of an issue in Java JRE 1.6 version, which might cause automatic deletion of the rt.jar file after a restart.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
Command Center Administration Guide
CTX131668 – Citrix Command Center 5.0 Administrator's Guide
Receiver may return different kind of appnames and InitalProgram data. The exception handling of explorer did not considering of "C:\Program Files\Internet Explorer"
VM is not getting assigned to Mac Book.
Desktop Player can be used only with the local admin user or the user needs to be part of the local admin user group.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
Refer to the following article from Apple for detailed instructions on configuring and using Mission Control feature: Mac Basics: Mission Control
DesktopPlayer comes bundled with a customized release of VirtualBox and OSX Fuse. Therefore any existing version of VirtualBox or OSX which are installed must be removed for DesktopPlayer to function correctly.
This behavior is caused by a new feature in OSX Mavericks which isolates each display into a separate workspace. This setting is enabled by default. This setting can be disabled by completing the steps in Solution section.
Potential RDP licensing issue.
Misconfiguration of the EdgeSight Agent.  The Edgesight.ini file for each of the new machines was configured on the Master image and the hostname and instance were the same on all servers.
CTX122209 – How to Exclude a Process from Data Collection in EdgeSightCTX134770 – How to Exclude Processes from being Monitored by EdgeSightCTX111062 – Required Antivirus Software Configuration for the EdgeSight Agent
http://support.citrix.com/article/CTX141786
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The issue was caused by Edgesight's injection and monitoring of the cshadow.exe process.
The EdgeSight Server is very active, servicing EdgeSight Agent requests and requests from EdgeSight end users and administrators. Its architecture consists of many critical parts that are not tolerant to continuous antivirus scanning or monitoring.
The antivirus software must be configured to exclude the scanning of the following components:
EdgeSight Server Script HostSQL ServerEdgeSight Web site (an Internet Information Services (IIS) Web site)Reporting Services, which is also an IIS Web site
Lync has an anti-tamper technology and does not function with the injection of Edgesight into the process Lync.exe.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
The article CTX135782 - Black or Blue Screen When Connecting to Published Desktop provides a solution to fix logon performance issues.  The fix disables the logon status by creating the DWORD registry key DisableStatus. The Citrix End-User Experiencing Monitoring (EUEM) service generates PLSD/LSESD metrics and the use of this key may suppress the metric.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
The Compatibility View mode is required for Internet Explorer 11 to visit the EdgeSight web server page.
For more information refer to Fix site display problems with Compatibility View.
Example of this change
Before registry change:
EdgeSight agent data folder contains 5 kept copies of SYS_EVENT_TXT.txt (as shown- BCK_4 is oldest and BCK_8 is newest of the kept copies). 	REG file used: (note the value are Hexadecimal values, 0x18021=98337)	Windows Registry Editor Version 5.00	[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Citrix\System Monitoring\Agent\Core\4.00]	"SysEventKeepCount"=dword:8	"SysEventMaxRecords"=dword:2ee0 	How to restart the EdgeSight agent (Citrix System Monitoring) service:	Using services.msc applet, screenshot showing the service to be restarted.
After registry change:
Using the regedit program, screenshot showing changed values (8, 2ee0).
Note - when changing registry key value you MUST choose the “decimal” button to enter decimal values (such as 12000).
The affected files are SYS_EVENT_TXT (and also SEMS_EVENT_TXT).

This screenshot shows the registry setting is 8 archived files (numbers 116-123) with 12000 records.
The 3rd party application- Notepad++ shows the number of lines in a file, here you can see the SEMS_EVENT_TXT_BCK_11.txt is 12670 lines (when >=12000 is set).
The same program shows SYS_EVENT_TXT_BCK_123.txt is 12000 lines.
Where/How to find the EdgeSight agent data folder
Default (for Windows 2008 and variant OS) path:
C:\ProgramData\Citrix\System Monitoring\Data

Default (for other OS) path:
%allusersprofile%\Application Data\Citrix\System Monitoring\Data   (E.G. c:\ProgramData\Citrix\System Monitoring\Data)

Non Default path lookup via registry key (remove \Wow6432Node for x86 OS):
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Citrix\System Monitoring\Agent\Core\4.00\DataPath
Note- data folder usually contains rsdatr.fdb, SYS_EVENT_TXT*.txt, EdgeSight\log folder.  The exception is when the EdgeSight agent is using the Agent Database Broker to store the rsdatr.fdb (the firebird database, rsdatr.fdb, will be found in an Agent Database Broker’s directory).

Note:  This folder is not the software installation folder, C:\Program Files (x86)\Citrix\System Monitoring\.
EdgeSight agent is not able to locate and/or access the Windows Temp directory.
CTX111114 – Enabling SSL on the EdgeSight Monitoring Agent After Installation
Old Versions (End of Life reached, Product Matrix)
Release        VersionComponentAvailabilitySA Burn-in5.2.3012.05.2 SP1 2009-10-232009-09-185.2.2183.05.2 2009-09-212009-09-185.1.15.3.4109.0ALL2010-03-022009-08-274.5 SP54.5.3304ALL2010-08-25
Old Versions Memo: The Agent is a multi-product architecture with a core component and an extension component. The only extension component available is EdgeSight, so this is commonly referred to as the EdgeSight version. Because of these two components, you might see two different version numbers reported by the EdgeSight Agent.
Release versionAgent versionCore if different5.1.15.1.1110.0 5.1*5.1.1104.0 5.0 SP2*5.0.622.0 5.0 SP1*5.0.275.05.0.236.05.0.1*5.0.269.15.0.233.04.5 SP54.5.3304 4.5 SP4*4.5.32954.5.32754.5 SP2*4.5.32814.5.32674.5 SP1*4.5.32614.5.32534.5*4.5.32444.5.32374.2 SP3*4.2.29374.2.28964.2 SP2*4.2.29284.2.28884.2 SP1*4.2.29224.2.28794.2*4.2.29024.2.2866
Note: Some EdgeSight versions (4.5 Service Pack 2 through 5.1) become inoperable beyond March 25, 2010, because of the expired digital certificates. These software versions do not function as expected after March 25, 2010. Version 5.1.1 or 5.2 (or later than 5.2) is required to function as expected.
EdgeSight Server
CTX125986 – How to Determine the Version of the Installed EdgeSight Server
One of the causes of the error is the permission on the SQL account specified during the update.
These reports require data collected by the Session Experience Monitoring Service (SEMS).
An unknown issue with the EdgeSight “Load Reports” caused the report loading to remain unresponsive after attempting to load the first report that contains a sub-report. EdgeSight loads the sub-report later in the normal sequence.
The SQL 2012 Report Server log shows that the sub-report generated an exception for the sub-report. During this failure, there is no subsequent loading of the report by EdgeSight.
During the implementation of EdgeSight, the Windows account is used to communicate between the EdgeSight server and the SQL database. The installer cannot validate the account against Active Directory if you are logged in with a local administrator account.
CTX132986 - Deletion of Duplicate Device Fails with Error Message: "This SqlTransaction has completed; it is no longer usable."
CTX111062 - Required Antivirus Software Configuration for the EdgeSight Agent
This error may occur if the local Administrator account has been renamed to something different other than Administrator.
Sometimes it may be best practice to rename the administrator account to something different, not realizing that the installer is that specific about the local account name.
The installer, hotfix, .msi or EUEM.msi in question is looking for the local Administrator account and if it has been renamed the installation fails.
The password for the user account that runs the Application pool identity in EdgeSight properties has changed, or the account in Active Directory is locked out.
When the Company setting is incorrect, or does not match a department in the EdgeSight console, it will not add to the department, but instead adds to the root of the EdgeSight.
Note: This setting is case sensitive.
The Common Language Runtime (CLR) tries to verify the Authenticode signature at load time to create Publisher evidence for the assembly.
This issue may occur if the EdgeSight web server has restricted access to the internet.
The password of the account used to query Active Directory for users and groups has expired or has been manually changed.
When the VDA is installed, VDA creates a default personality.ini file containing the 'private' flag. The personality.ini file is designed to stop EdgeSight operation assuming to be a master image. If the VDA installed EdgeSight Agent is not delivered using Provisioning Services Server, the personality.ini is never changed, and EdgeSight does not run.
The user profiles are locked because of a defect caused by a service querying the Win32_QuickFixEngineering WMI Class first, followed by querying the Win32_StartupCommand WMI Class.
EdgeSight performed the WMI queries in the asset worker (103) in this sequence. Thus shortly after a server restarts, the user profiles are locked.
CTX122209 – How to Exclude a Process from Data Collection in EdgeSightCTX137776 – Recommended EdgeSight Exclusions for Firebird Service FBServer.exe with High CPU UsageCTX111062 – Required Antivirus Software Configuration for the EdgeSight AgentCTX113514 – How to Determine the Version of the Installed EdgeSight Agent
The problem occurs when the Report Server account is denied local logon rights to SQL by the following group policy on the SQL server:
This problem can occur if the EdgeSight agent has been pre-packed for deployment using the Active Directory. The package was created on one operating system version and deployed to other operating system versions. Once deployed and installed, the core Citrix EdgeSight driver is unable to be located on the target device. On Windows XP-based operating systems, the default location for rskcore.sys (and other drivers) is <SYSTEMDRIVE>\WINDOWS\system32\drivers. Windows 2000 uses <SYSTEMDRIVE>\WINNT\system32\drivers.
http://aspadvice.com/blogs/name/archive/2007/09/24/Installing-SQL-Server-Management-Studio-with-SQL-Server.aspx
In some cases, ASP.NET 2.0 is not properly registered under Web Service Extensions (under the Internet Information Services (IIS) Manager). This can happen if you install ASP.NET 1.1 after installing 2.0, for example. You can validate this by opening the IIS Manager, and selecting Web Service Extensions.
In the following screen shot, you can see that ASP.NET 1.1 is listed, but not 2.0:
CTX123445 - Error: Real Time Information is Unavailable for other causes of this error.
This issue generally occurs as a result of problems with the IUSR account (that is, the Internet Information Services (IIS) guest user account) on the EdgeSight Server Web server system (which is set up as a part of IIS). The EdgeSight Agent for XenApp needs to be able to access the EdgeSight Server through  the Website configured in IIS. If authentication to the IIS Website for EdgeSight is not configured properly, the following error messages appear.
“Specified command not authorized for the current user” is an indicator that the configured user cannot access the EdgeSight server due to an authorization issue.
A recent domain account password change has not been updated on the EdgeSight server. The error reflects an authentication problem described in Microsoft KB 811889 article.
This behavior occurs when the Full Qualified Domain Name (FQDN) of the XenApp Servers or Endpoints are different from the FQDN of the XenApp or Endpoints in Active Directory.
Note: The same error can appear when user account does not have the correct permissions documented in article CTX118692 - EdgeSight Remote, Troubleshoot, and Real-time Reports Error Messages and starts the EdgeSight Web console to view a real time report.
The IIS Application Pools are stopped.
The Citrix RSSH Admin Service does not have the required permissions.
This error occurs because the SQL server (default instance) is on a non-standard port.
EdgeSight installer will find SQL instances on SQL servers and will install without requiring the procedure discussed in this article. The best practice is to provide an SQL instance for the EdgeSight server database.
The SQL server default port is 1433. However, some customer installations might have specified another port. The EdgeSight installer does not allow choosing a SQL server instance with a customized port.
Note: This article addresses one method to enable EdgeSight to be installed for this unusual SQL configuration.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
You might experience the issue if the Windows operating system default permissions of the C:\Documents and Settings\LocalService\Local Settings\Temp folder have been altered.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The Citrix RSSH services does not use an account that has DB_owner rights to the EdgeSight database.
In the following screen shot, the account used is SYSTEM, which has a local account that does not have permissions to access the EdgeSight database, if the database was located on a remote SQL server:
CTX124091 - Citrix EdgeSight Administrator's Guide
IIS is using .net in 32-bit mode and EdgeSight uses the 64-bit .net.
The password of logon service account which was used to start the Citrix RSSH Admin Service was expired or changed.
In the EdgeSight Web console under Devices, in the Last Uploaded column, you do not see the specific device even though there are workstations with the agents installed.
When the Agent was installed, a company name was not specified or an incorrect company name was specified.
The company name can be obtained from the EdgeSight Web console, in the upper right corner of the screen. In the preceding screen shot, the company name is “Cybertron 5.0, Inc.” (the DOT is part of this company name, see registry key screenshot in the Resolution section).
Citrix does not recommend using this Registry change if customers are planning to use Standard mode virtual disks because issues might arise. Review the following caveats if switching to Standard mode after setting the above key. Other anomalies might be observed as well.
The agent database which is created in Private mode will have the same GUID for each instance that the shared image is deployed. The agent will not necessarily think it needs to report up until the next regularly scheduled upload, at which point it will notice that the MAC address and device name are different. During that time, any alerts fired might be ignored because the device has changed. Once the data is uploaded, devices will be sorted. However, this expensive process will repeat at every reboot.
In a XenDesktop environment, the remote file share synchronization will not function appropriately.
The beginning of the SYS_EVENT_TXT.txt file will not contain the correct information.
The EdgeSight agent is running in Basic mode, but an End User Experience Monitoring (EUEM) metric is being monitored in the Dashboard configuration. EUEM metrics are only collected in Advanced mode
On checking the SQL server, it is observed that the disk drive has run out of space.
It takes more than 90 seconds for the SQL query to retrieve data from EdgeSight database. This can happen if there is more data to retrieve and/or if there is a performance issue with the SQL server.
As the error indicates, the Report Server service is not running or has been stopped unexpectedly.
Es_zqueue.ini.original
Original copy of es_zqueue.ini file
[Application]
AutoStart=1
AutoStartDelay=40000
AutoTerminate=1
AutoRestart=1
DefaultWriteLogLevel=1000
EnableScriptDebugging=0
IPCReceivePort=0
MaxEventQueueSize=4096
MaxLogFileSize=1024
MaxLogLevel=1000
PerfDataQueryInterval=15000
RaiseExceptions=1
ScriptFiles=!<*.bak>,!<*.scc>,<*.*>
ScriptLanguage=VBSCRIPT
ScriptTimeout=90000
ServiceStateQueryInterval=5000
StartupScriptFiles=<core_zalertq_actions.ssh>,<core_zalertq_recv.ssh>,<core_zasync_executor.ssh>,<core_zpd_loader1.ssh>,<core_zpd_loader2.ssh>,<core_zshell_controller.ssh>,<core_zshell_licensing.ssh>,<es_zcrash_loader.ssh>,<core_lsm_license_poller.ssh>
MonitorScriptFiles=1
When to restart RSSH services?
Ensure the core_zbatch_run (grooming job) has stopped. Grooming starts at 00:05 (default time, this can be customized) daily. Core_zbatch_run (grooming) and core_zpd_loader1 (payload, along with core_zpd_loader2) are mutually exclusive, when one runs, the other stops.
Common method to restart RSSH services
The Citrix RSSH Admin Service restarts its dependent Citrix RSSH Application Manager service.
CTX128283 – XenDesktop Setup Wizard from XenDesktop 4 does not Work with XenDesktop 5.x
Citrix TV ​contains the following videos for this article: http://www.citrix.com/tv/#videos/888 http://www.citrix.com/tv/#videos/2598
Note: These videos require the Adobe Flash player plug-in for the Web browser.
CTX111114 – Enabling SSL on the EdgeSight Monitoring Agent After Installation
CTX111924 – How to Configure EdgeSight to Use SSL with Microsoft Certificate Services
CTX112115 – How to Change the HTTP Port of the EdgeSight Server Web Site
CTX118848 – How to Change the HTTP Port of the EdgeSight Web Server
CTX112209 – EdgeSight Agent Worker Function Log Files Explained
Processes that dynamically link to the same runtime components of Visual C++ libraries as the EdgeSight Agent cause this issue.
The installation of DSCXACmd600W2K8R2X64003 introduced new assemblies which are not referenced as expected for the software specifying the use of an older version.
XenApp 6.5 metric for “available output bandwidth” is an order of magnitude larger than previous releases. EdgeSight calculates this value based on the average of a set of data points within a time period (that is, during consolidation of data).
The system administrator cloned the EdgeSight Agent desktop or server.
Windows 2008 uses User Account Control (UAC) and while you might be logged in as an administrator account, it does not mean that all tasks you are performing are running with administrative access.
The components, Metabase, WMICompatibility, LegacyScripts, LegacySnapin are selected by the bootstrapper program.
EdgeSight’s Agent Database server (FQDN) name is limited to 50 characters on the broker table in EdgeSight’s SQL database table.
For Example:
intWINvm01.NXTdomain.1912.ut.Octogone-Unlimited.co (50 characters) should be intWINvm01.NXTdomain.1912.ut.Octogone-Unlimited.com (>50 characters).
The error is caused by the EdgeSight server responding to the agent’s request to find a Firebird database through the Agent Database broker. The name (Firebird Server Name) of the Agent Database Server (could be one of many in a pool) is obtained, but in this case, was a truncated (shortened) name, thus the errors on the FbDB::PrimOpenDB.
The EdgeSight Database Agent Server provides database hosting and log file mirroring for EdgeSight Agent for VDA devices. Each EdgeSight agent for VDA device connects directly to the EdgeSight Agent Database Server for persistent storage. The FB Monitor synchronizes the Agent’s data folder to the shared network and maintains a copy of the Agent’s data folder.
Most antivirus products are configured to scan all the files on the disk. If an antivirus program scans the continuously active EdgeSight database, it impedes the normal functioning of EdgeSight.
The EdgeSight Agent for VDA or EdgeSight Agent Database Server might become very slow and consume more resources.
The EdgeSight Agent for VDA can also be prevented from initializing because of the Agent’s remote database being scanned or locked by the antivirus software.
This might have a negative impact on the overall performance of the device, which is being monitored.
CTX111313 - How to Install and Configure Reporting Services for Use by EdgeSight
EdgeSight 5.2 agent is attempting to detect the XenApp license too early during the server restart. It was unable to properly re-detect the XenApp license afterward, leading to messages in the Application log and EdgeSight’s agent log (SYS_EVENT_TXT.log).
The EdgeSight documentation indicates that Process Usage is available for XenApp Basic and Advanced modes.
CTX130967 – How to Configure EdgeSight 5.4 with SQL 2008 R2CTX136702 – How to Install EdgeSight 5.4 Web Server with SQL 2012 StandardCTX136519 – EdgeSight Web Console Report Server "Load Reports" Operation Times Out on SQL Server 2012CTX114501 – Supported Databases for Citrix ProductsCTX113514 – How to Determine the Version of the Installed EdgeSight Agent
Although there is an alert to indicate a duplicate agent, there is in fact only one agent and no duplicate devices seen in Device Management, nor are there any duplicates in Unmanaged Devices.
The server has set Coalesce Duplicate Instances to Yes.
For more information, refer to the EdgeSight 5.4 Documentation.
Refer to the Online Help in EdgeSight.
This error is displayed because there are null values in the app_name column in the local Firebird database where data is stored on the EdgeSight agent.
The server is unable to connect to crl.microsoft.com to validate a certificate when the service starts because the server has no Internet access.
Port 9035 is blocked. Windows Firewall is enabled on the remote device.
This generally happens as a result of an incomplete Reporting Services 2005 configuration. Log on to the server machine, open the Reporting Services Configuration Manager, and select Email Settings from the left menu, as displayed in the following screen shot:
Note: In the preceding screen shot, both the Sender Address and SMTP Server fields are blank.
The EdgeSight agent is continuously monitoring every process that is running on the monitored device. In turn, it is continuously writing performance data to its local Firebird SQL database. The problem is that most antivirus products are configured to scan all files on disk. If an antivirus program scans the continuously active EdgeSight database it impedes the normal operation of EdgeSight.
In extreme cases, the EdgeSight agent can become sluggish and consume more resources than necessary. This can potentially lead to a negative impact on the overall performance of the device being monitored.
This error appears randomly or after you have re-entered the authentication details for the RSSH Admin Service and RSSH Application Manager accounts, and restarted their services.
The identity user initially logged on to the server when the application was started. The behavior occurs when the identity user logs off and the COM+ application can no longer read registry keys in the profile of the identity user. This is because when the user logs off, a new User Profile Service functionality is forcing unloading of the user profile on Windows 2008.
The new User Profile Service functionality is built into the OS by default. This is a situation where the functionality of forcing unload of the user profile might break an application if registry handles are not closed during the process.
Another engineer (for example, an I.T.Administrator) has recently logged onto the Controller application server, and then logged off again, using the Windows username/password that is running the Controller system in the background.
In other words, someone has recently logged off the Controller application server who was logged onto Windows using the Controller COM+ user account.
The Microsoft Report Server configuration is not set up for EMAIL SETTINGS.
This message does not indicate a problem. This indicates that no alerts have been received from this particular server.
CTX138381 - FAQ - Truncate EdgeSights Alert and Alert_Param Table
The behavior occurs when the server has been hardened for security purposes.
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\FipsAlgorithmPolicy]	"Enabled"= Dword:0000000x	Validate the preceding registry key. If the enabled key is configured with the Dword 00000001, SQL Server and Reporting Services will fail to connect to the databases and might display the errors.
The Access Management Console for XenApp 4.5 to 5.0 is not configured to use the farm settings for the License Server. Instead, the License Server is specified in the individual server properties as shown in the following screen shot.
Spot this defect from EdgeSight’s agent log (SYS_EVENT_TXT.txt):
2010-04-30 13:49:10 Ctrx                     XAAPIBridge
Attempting to get license server settings from XenApp
2010-04-30 13:49:10 Ctrx                     XAAPIBridge
Successfully retrieved license server port from XenApp: 27000
2010-04-30 13:50:27 Core                     Service
----- Starting Agent on FTLvcTobonPS45b version 5.3.4109.0 -----
Note: It is observed that the agent version 5.3.4109.0 is restarting after it has tried to retrieve the XenApp server’s License Server data for every repeating restart of the agent. The agent had crashed and an rscorsvc.exe file might have been recreated for each subsequent fail– the timestamp should correspond to 2010-04-30 13:49:xx.
When selecting a domain account for authentication to the Microsoft SQL Server, the domain account must have been granted the Logon As Service privilege and must be a member of the local Administrators group on the machine hosting the EdgeSight for NetScaler Server. The error message is displayed when the account is not a member of the Administrators group.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Reason for this failure with “alter database” command can be the mirrored SQL Server. This command is restricted on mirrored database. EdgeSight installation sets the database to single user mode a few times during the installation, and this cannot be avoided.
The XenApp server is missing one or both of the following components:
Citrix Common Commands
Citrix XenApp Commands
The remote connection is being rejected by design and is caused by a default setting on the remote EdgeSight Agent you are trying to connect to.
The RemoteSecurity setting defines who can and cannot use the real-time reports to connect to the Agent.
The default setting is one (1), which ONLY allows a local administrator of the device to connect. However, most EdgeSight users are not a local administrator on all of the devices they are trying to connect to.
The RemoteSecurity setting is configurable and can be set at the Agent installation time or adjusted post-installation by editing the EdgeSight Agent registry settings.
The EdgeSight Database Agent server is tested to support 40 Virtual Desktop Agents.
When an environment reaches 80 to100 Virtual Desktop Agents, the Firebird Monitor is observed to crash periodically.
The fbmonitor.log recorded the following messages, starting with “internal gds software consistency check”:
8/4/2009 12:49:34 PM: [Pinger](5): Firebird error: internal gds software consistency check (cannot start thread)
8/4/2009 12:49:34 PM: [Pinger](5): Ping failed: 'Connection to database denoted by '172.16.0.1/9037:ping' failed because the database is not accessible: internal gds software consistency check (cannot start thread)'.
8/4/2009 12:49:34 PM: [Pinger](5): FbMonitor is not configured correctly, its environment is critically flawed, or 'FirebirdServerCSMPInstance' is not recoverable. FbMonitor will now shutdown.
The Citrix Edgesight ActiveX plugin might not be installed. Check for the presence of csmdbprov.dll in the “Downloaded Program Files” folder.
The EdgeSight Agent installs components to enable End User Enterprise Monitoring functionality, some of which are in common with Presentation Server. A reference counting error causes the uninstall operation to remove some shared components, specifically .NET components (Citrix.Diagnostics.dll and Citrix.Diagnostics.Recorder.cdf.dll), even though they are still being referenced by Presentation Server.
This article was originally written for EdgeSight 4.5 for Presentation Server being uninstalled from a server installed with Citrix Presentation Server 4.5. Other combinations of EdgeSight agent being uninstalled on a server with Citrix XenApp (or Presentation Server) installed can trigger similar symptoms.
Note: Citrix Presentation Server 4.5 was re-named Citrix XenApp 4.5.
The Antivirus Exclusions are not configured on the EdgeSight Server and EdgeSight Agents.
The issue occurs when you install Citrix SmartAuditor on the server that is hosting the EdgeSight site.
SmartAuditor inserts custom HTTP headers on Web Sites > Default Web Site > edgesight40 > rsproxy as shown in the following screen shot:
The data source user does not have the proper rights to the EdgeSight database.
Symptom 1, both execute and select rights have not been granted to the Data Source user.
Symptom 2, the Data Source user is not able to login to the EdgeSight database (usually because of not being registered as a user on the database).
Symptom 3, the Data Source user does not have the right password. To set the password, open the EdgeSight web console, and click Configure tab > Server Configuration > Reporting Services > Report Server > Data Source Credentials.
CTX134770 - How to Exclude Processes from being Monitored by EdgeSight
Groom Days
The “groom days” setting for the image_event table can be found in the following way.
EdgeSight database (the setting is stored as a negative value, that is -55)
Select m.groom_days from maint_table_config m, table_def d where m.tableid=d.tableid and d.table_name='image_event'
EdgeSight web console
Configure (top tab) > Server Configuration (left tab) > Data Maintenance > Grooming:

Upload Configuration
The “Environment Usage” upload configuration can be found in the EdgeSight web console:
Configure (top tab) > Server Configuration (left tab) > Data Maintenance > Upload Configuration.
The EdgeSight Web Server’s default setting is to not upload this data. Review your site’s use of the “Environment Usage” report and turn off the upload, if it is not required (remove the check mark to not upload this data).
Real World Sample 1- script executed
The deletion in the database took about an hour (from 16:47:57.440 to 17:43:50.307). Deleted 108,125,791 (17 days) of 281,273,440 rows (about  38%).
This particular SQL Server is allocated 3 CPU Xeon cores and >16GB of memory.
When grooming is performed by EdgeSight RSSH, the time frame required is very long (13 to 15 hours).
5/27/2013 11:08:03 AM: core_zbatch_run: Proc: [core_groom_generic_table], Table: [image_event], Duration: [775m 45s], Rows: [18021213]
6/2/2013 7:06:04 PM: core_zbatch_run: Proc: [core_groom_generic_table], Table: [image_event], Duration: [928m 36s], Rows: [35627647]
---------------------------------
------------ -----------------------
Script Start 2013-06-21 16:45:34.443
(1 row(s) affected)
------------ -----------------------
Status Start 2013-06-21 16:45:34.443
(1 row(s) affected)
nDaysInTable EarliestDate            NumOfRows
------------------------ ------------ ----------------------- -----------
Status CurrentTableState 47           2013-05-05 00:05:29.337 281273440
(1 row(s) affected)
groom_days  DeleteDays
--------------- ----------- -----------
Status Settings -55         -30
1 row(s) affected)
NumOfDeletedRows
---------------------- ----------------
Status RowsToBeDeleted 108125791
(1 row(s) affected)

---------- -----------------------
Status End 2013-06-21 16:47:57.440
(1 row(s) affected)

------------ -----------------------
Delete Start 2013-06-21 16:47:57.440
(1 row(s) affected)
(108125791 row(s) affected)

--------- -----------------------
Delete End 2013-06-21 17:43:50.307
(1 row(s) affected)
nDaysInTable EarliestDate            NumOfRows
---------------------------- ------------ ----------------------- -----------
PostDelete CurrentTableState 30           2013-05-22 20:14:15.650 173147649
(1 row(s) affected)

--------------- -----------------------
Script Completed 2013-06-21 17:44:33.850
(1 row(s) affected)
Real World sample 2- script executed at different sites
This script had run before in the previous week, which is why there are 37 days of data.
The deletion in the database took about 16 minutes (from 13:00:25.160 to 13:16:50.587). Deleted 32,407,066 (7 days) of 166,353,803 rows (about 19%).	SQL configuration unknown
------------ ------------------------------------------------------
Script Start 2013-06-22 13:00:00.633
(1 rows(s) affected)
------------ ------------------------------------------------------
Status Start 2013-06-22 13:00:00.633
(1 rows(s) affected)
nDaysInTable EarliestDate                                           NumOfRows
------------------------ ------------ ------------------------------------------------------ -----------
Status CurrentTableState 37           2013-05-16 13:21:38.297                                166353803
(1 rows(s) affected)
groom_days  DeleteDays
--------------- ----------- -----------
Status Settings -55         -30
(1 rows(s) affected)
NumOfDeletedRows
---------------------- ----------------
Status RowsToBeDeleted 32407066
(1 rows(s) affected)
---------- ------------------------------------------------------
Status End 2013-06-22 13:00:25.160
(1 rows(s) affected)
------------ ------------------------------------------------------
Delete Start 2013-06-22 13:00:25.160
(1 rows(s) affected)
---------- ------------------------------------------------------
Delete End 2013-06-22 13:16:50.587
(1 rows(s) affected)
nDaysInTable EarliestDate                                           NumOfRows
---------------------------- ------------ ------------------------------------------------------ -----------
PostDelete CurrentTableState 30           2013-05-23 19:04:03.457                                133946786
(1 rows(s) affected)
---------------- ------------------------------------------------------
Script Completed 2013-06-22 13:16:56.557
(1 rows(s) affected)
CTX117433 – EdgeSight SQL FileGroups
The MS11-100 security update implements a rule that by default limits the number of form keys, files, and JSON members that ASP.NET accepts in a request to 1000. This change is made to address the Denial of Service vulnerability documented in security bulletin MS11-100. Payload uploads that exceed this limitation trigger a response from ASP.NET, resulting in upload failure.
Firewall rule for XenMobile communication from XenMobile to License IP was hitting two rule. One was allowing and the other was denying.
Citrix_startup.lic file is missing.
This is caused by upgrading the Citrix licensing Server before completing the install for XenApp Fundamentals 6.0 for Windows Server 2008 R2.
The slowness is a consequence of the Licensing Config Service disappearing in 11.11. The LCS PowerShell snap-in in XenDesktop 5.6 is trying to communicate with the non-existent LCS service, and failing after a timeout period.
Refer to Commands for more details on licensing commands.
Refer to Rereading License and Options Files (lmreread) for more details on the LMReRead command.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
This issue occurs because of a problem in the XenApp 6.0 core installation file (MPS.msi). The issue occurs if any of the following actions are taken on a XenApp 6.0 server that has the Citrix Licensing server installed:
Repair of XenApp 6.0 product
XenApp 6.0 hotfix is installed
During the preceding actions, as part of the repair process the following registry keys for the Citrix Licensing component are removed (which is expected):
HKLM\SYSTEM\CurrentControlSet\services\Citrix Licensing\Performance
HKLM\SYSTEM\CurrentControlSet\services\Citrix Licensing
However, not all of the values for the preceding registry keys are restored as expected and this is causing the errors to appear.Servers seeing the issue have the registry values present under HKLM\SYSTEM\CurrentControlSet\services\Citrix Licensing\Performance.But registry values will not be present under: HKLM\SYSTEM\CurrentControlSet\services\Citrix Licensing.
The license allocation request sent from the client XenApp server to the license server contains a different host ID, and therefore another license is consumed.
For example:
When you open a session as UserA from DeviceA using NIC1, one user license is allocated.
When you open a session as UserB from DeviceA using NIC1, one device license is allocated.
When you open a session as UserB from DeviceA using NIC2, an additional (new) user license is allocated.
Observe that during the Step 3. the NIC1 used on DeviceA is either disabled or disconnected or changed. For example, in a scenario when a laptop transitions from LAN to wireless connectivity the NIC changes.
The licensing device ID algorithm is based on the MAC address of the device running the ICA Client. If a previously used NIC is disabled or disconnected, a new device ID is calculated and used in the license request when the new session is established. An additional user license is consumed because the license server gets a new device ID from the ICA Client.
The issue is caused by un-synchronized licenses. If the licenses are correctly synchronized, the Provisioning Services (PVS) listed on the License Administration Console will show an active Subscription Advantage date on the license server.
The following are the possible causes for the issue:
License server name spelled incorrectly during allocation process (license server name is case sensitive).
License server is not running the current version.
Multiple separate license files installed on the license server conflict.
There is a time discrepancy between the XenApp server(s) and the Licensing server. A system time discrepancy of 2 minutes or greater can cause the Licensing Vendor Daemon to stop intermittently. Following is an example:
XenApp Server Time
License Server Time
The time discrepancy causes the Vendor Daemon to enter the “Stopped” status.
This issue can occur when there is a break in the communication within the 7279 daemon port of the licensing server. The break can occur because of a random port scanning on the server.
Verify the lmadmin.log file for the Licensing server in the c:\program files\citrix\licensing\ls\logs\ folder. This lmadmin.log file initially shows that there is a continued break in communication.
The c:\program files\citrix\licensing\ls\logs\CITRIX.log file gives more information about the loss of connection to the Licensing Server:
The preceding error indicates that there is a loss of connection, because the heartbeat is timing out.
In this scenario, the application event log shows a consistent entry from McLogEvent. This entry is a port monitoring software function from McAfee:
The port scanning software is interrupting the established connections to the Citrix Licensing server causing the heartbeat to the port to timeout and eventually causing the service to lockup.
For assistance in North America, call 1-800-4Citrix (800-424-8749), 24x7 or visit our Customer Service support site to open a case. For International contact information, click here.
For assistance in North America, call 1-800-4 Citrix (800-424-8749), Monday through Friday 7 a.m. to 11 p.m. EST. For International contact information, click here.
Provisioning Services 6.1 requires License Server version 11.10 or newer.
The above error occurs because of loss of connectivity to an appropriate license server.
CTX134629 -  How to Download and Install Updated License Files after a Renewal
The following are two potential reasons for this behavior:
The XenDesktop Controller and Citrix License Server are on a different domain and XenDesktop studio does not have permission to access the license Configuration Service.
The License Server VPX is in use. Though XenDesktop 5 Service Pack 1 through XenDesktop 5.6 is compatible with License Server VPX, you cannot use the Desktop Studio to view or manage licenses. Use the License Administration Console.
Refer Citrix Documentation - About Citrix Licensing to see more information on other known issues and considerations.
This error message is displayed when the license code does not exist or the license code exists but belongs to another customer record.
Additional Resources
CTX131109– How to Change License Renewal Files using the New License Portal to work with License Server 11.3 or Older)
CTX131114– FAQ - Citrix Licensing Portal System)
CTX131110– My Account All Licensing Tools - User Guide)
Licensing Your Product in eDocs
Contact the Citrix Customer Service department in your region for additional assistance.
The client-side validation on the webpage for User Configuration causes the issue.
The issue occurs when using the Citrix License Administration Console and is the result of client-side validation on the webpage for User Configuration.
Note: Lmadmin command line tool does not have character restriction.
The behavior is by design; it is possible to change the character limit.
CTX126167 - How to allocate licenses on My Account
Citrix Documentation - Licensing
CTX132453 - How to Re-Synchronize licenses after a renewal
This error might occur if incorrect licensing model is selected.
This is a harmless bug that happens intermittently with XenApp 6.5. If licenses have been installed, this error can be ignored
The concurrent_state.xml and/or the activation_state.xml files become unusable and the Citrix Licensing Service, lmadmin.exe, does not properly handle the unusable file and crashes.
This is a workaround and the password will be in clear text.
The issue is because of Windows Firewall Service that is disabled on the Server. The following details in the Process Monitor indicate that a process is locked:The uninstallation failed because of a locked file:
12:29:57,8958446     msiexec.exe 732   CreateFileMapping C:\Program Files (x86)\Citrix\Licensing\LicensingConfig\Service\Citrix.LicensingConfig.SdkWcfEndpoint.exe   FILE LOCKED WITH ONLY READERS SyncType: SyncTypeCreateSection, PageProtection:
12:29:57,8991473     csrss.exe   404   CreateFileMapping C:\Program Files (x86)\Citrix\Licensing\LicensingConfig\Service\Citrix.LicensingConfig.SdkWcfEndpoint.exe.Config   FILE LOCKED WITH ONLY READERS SyncType: SyncTypeCreateSection, PageProtection:
12:29:57,9003644     Citrix.LicensingConfig.SdkWcfEndpoint.exe 3260  CreateFileMapping   C:\Windows\System32\mscoree.dll     FILE LOCKED WITH ONLY READERS SyncType: SyncTypeCreateSection, PageProtection:
The underlying code of the License Server does not properly handle the Windows logoff function.
For assistance in North America, call 1-800-4Citrix (800-424-8749), 24x7 or visit our Customer Service support site to open a case.  For International contact information, click here.
The possible causes for Desktop Studio not being able to detect the License Configuration Service are:
The License Configuration Service is not running.
The License Server VPX is in use.	Though XenDesktop 5 Service Pack 1 through XenDesktop 5.6 are compatible with License Server VPX, the Desktop Studio cannot be used to view or manage licenses. Use the License Administration Console. Refer to Citrix Documentation - Other Known Issues and Considerations.
The administrator who is using Desktop Studio does not have permission to access the License Configuration Service.
For assistance in North America, call 1-800-4Citrix (800-424-8749), 24x7 or visit our Customer Service support site to open a case.  For International contact information, click here.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
If Nagle's algorthim is not selected. Netscaler will use tcp small_window_protection feature to scale the packet size.By default its value is set to '1' (enabled), and it can be configured only in shell mode. Which limits netscaler to save the config or setting in startup config. Resulting in saving the setting in RAM which stay up until the device is rebooted.Thus rebooting the device, will revert the setting to default value, and resulting in packet drops with window size less than defined MSS value.Causing disturbance to services with less window size.
As per design, NetScaler considers action URL without query for CSRF protections. While deploying, action URL without query has to be used.Also If you deploy it from learned data, you will not see issues relaxations with query parameters as CSRF Tag validation is not supposed to validate the query part.Adding a query to the relaxation rules manually will cause failure.
The Following responder policy was bound globally to protect against ShellShock Vulnurability. This policy needs to inspect 1000 Bytes of the http body as per definition. However in this case, client sent 1GB as content-size and only 104 bytes in the subsequent packet so NetScaler is waiting for the rest of the data to make up 1000-104 = 896 bytes to evaluate the policy and buffering the packet instead of forwarding it. add responder policy ShellShock_policy "HTTP.REQ.FULL_HEADER.REGEX_MATCH(re/\(\)\s*{/) || HTTP.Req.BODY(1000).REGEX_MATCH(re/\(\)\s*{/) || HTTP.REQ.URL.QUERY.REGEX_MATCH(re/\(\)(\s*|\++){/) || HTTP.REQ.BODY(1000).REGEX_MATCH(re#%28%29[+]*%7B#)" DROP -logAction ShellShock_Log
https://docs.citrix.com/en-us/netscaler-gateway/12/vpn-user-config/alwayson.html
Cache Redirection does not support HTTPS responder policies
https://docs.citrix.com/en-us/netscaler/12/system/basic-operations/backup-restore-netscaler-appliance.html
You can also run a wireshark trace on NetScaler to analyze ssl handshake.
the default route requests might not be going through 1/1 and hence API calls were failing on Primary.Secondary was only having 1 interface hence the request were going via 1/1 only.
Netscaler is unable to forward the packet from the server to client since the response received from server is in binary and NS by default waits for the first newline to start parsing the HTTP response.
As per the current analysis, Cron job which runs on the NetScaler VPX and NetScaler MPX is not running on the SVM of SDX.
You may have additional logging enabled which is causing huge ns.log files, for example TCP logging/acl logging,TCP logging will be capturing all the tcp transactions and will be logging them into the system so the amount of data logged will be huge, which is creating 2GB+ ns.log file in var/log directory. also old files may present in var directory consuming extra memory.
Per design, persistent session information is communicated over to Secondary Node and once cleared on Secondary the Primary clears its own.Internal Services on port 3009 was down as no cert was bound on it, so this caused SSF Connections between the HA Nodes Primary and Secondary to fail, so the primary could not clear the persistent session info on the secondary causing it to not clear its own as well,ultimately leading to the issue.
We have seen certain cases where a PBR would be configured for the management IP (NSIP) that would be pointing to a next hop gateway.In case the NetScaler does not have a SNIP in the same subnet as the next hop configured, then the packet might never leave the NetScaler and hence it would fail.No SNIP causes the Radius packet from Freebsd to Virtual server to be not sent to the actual server.
GUI issue wherein the NetScaler in not able to retain the custom expression added under signature rule pattern.
Some websites use and require SNI (Server Name Indication).  This allows for multiple certificates to serve up the same IP/Port.  Since the server typically does not know the FQDN that is being requested by the client until after the handshake is complete, SNI will add an extension to the Client Hello of the SSL Handshake, allowing for the server to choose which certificate is used for the connection when multiple are being used to serve the IP/Port.This is common for ADFS and is becoming popular for cloud providers as well.
It's the expected behavior from NetScaler CLI.
Hostname, NSIP, default gateway, interface LA Channel Bindings are individualnode config, none of this will be wiped out on secondary as a part of HA SYNC.If a different default route is configured on the Secondary node as compared to the Primary, this will not be removed as a part of config sync. Instead the one from primary will be added as part of config sync causing the Secondary node to have two default routes.In this scenario if a failover happens, the old secondary (new primary) will have two default routes and will forward traffic via both routes (round robin) this can also cause an outage if one of the default routes is wrong / invalid.
Pooled license on Gladius is supported on 12.0 and 12.1 latest version
GUI is not working because 'httpd' process is not running. You can check this by running command 'top' and confirming if you see that process in the output.11.1 version of NetScaler uses php5 version whereas 12.0 uses php7. When an upgrade happens, the httpd.conf file will be picked up from '/nsconfig' folder which will still have php5 version.
https://docs.citrix.com/en-us/netscaler/12/aaa-tm/configuring-openid-connect-protocol.htmlhttps://docs.citrix.com/en-us/netscaler/12/aaa-tm/oauth-authentication.html
CTX121291 - FAQ: NetScaler VPX
SSL feature not enabled on the NetScaler
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
For deterministic nat, during config time itself create subscriber with reserved port range , so later if any traffic coming from those subscribers(clients) we allocate port from the same range. For ACL configuration, we will not have subscriber ip info to create subscriber with reserved  port range.Thus it's by design that ACL cannot be used with deterministic nat.
Expected Behavior , this can not be changed by GUI and need to be done via the CLI
By Design.
Firewall was blocking the connection to connect securely to other sites
Content Switching expression was 2499
LDAP policy base DN limited to a specific OU or has a search filter defined, thus limiting the user search within the LDAP Directory.
Audit Logging - https://docs.citrix.com/en-us/netscaler/12/system/audit-logging.html
304 response coming from backend is containing extra character (null) after \r\n\r\n, This behavior of the backend server is not RFC complaint.  GET /widgetId=3 HTTP/1.1Host: <citrix>Connection: keep-aliveAccept: application/json, text/javascript, */*X-Requested-With: XMLHttpRequestUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36Content-Type: application/x-www-form-urlencodedReferer: Accept-Encoding: gzip, deflateAccept-Language: nl-NL,nl;q=0.9,en-US;q=0.8,en;q=0.7If-Modified-Since: Wed, 21 Dec 2016 14:14:39 GMT                     << See if we can drop GET request if request contains If-Modified-Since header as a workaround  HTTP/1.1 304 Not ModifiedCache-Control: privateContent-Type: text/html; charset=utf-8Server: Microsoft-IIS/8.5x-frame-options: SAMEORIGINX-Powered-By: ASP.NETX-UA-Compatible: IE=edgeDate: Thu, 15 Mar 2018 13:18:51 GMTnull               << 304 shall not contain body, see if we can fix backend server to eliminate ‘null’ body
This is due to the change in the order of the DHT namespace between 11.1 Build 56.19 and 11.1 Build 57.11. So the issue will be seen if customer upgrades from 11.1.x to 11.1.57.11. But the issue will not be seen when customer upgrades from 11.0 or below build and the reason being NetScaler during upgrades between major version the DHT namespace is expected to be different and NetScaler handles the difference gracefully.
This issue is caused due validation of the URL which does not allow '+' in path.
The NetScaler version 11.x cannot handle SNI request in right way
SNMP option not available under Configuration menu.
GUI BUG
Files were deleted from var/ns_sys_backup with command rm -r filename >> This shouldn't be done directlyThis command deleted the backup file from directory however it was not updated in database.This is the reason "show system backup" showing 50 files.
Backend Server sending Cacheable content to NEtScaler which is not expected
Enable Stickiness was enabled
Known issue in GUI #705340
NS is changing the chunk data and values received by backend server and due to this changed chunked data to front end client failsWhen NS is sending a chunk size of smaller values like 74 octets the hexadecimal value does not cover all four octets and the remaining octets are covered with blank space followed by a CRLF and in hexadecimal blank space is represented as 20 and CRLF as 0d 0ad. Because of this representation(where in an octet is represented by an empty space(20) before being followed by a CRLF(0d 0a).) the client is not able to handle the response and is throwing the error
There was a mismatch of Date on the NetScaler and the Certificate to be valid From Date.This made the Certificate to be Not Yet Valid.
Here is the Screenshot of the time (highlighting the time difference) on the NetScaler and the Certificate.
https://docs.citrix.com/en-us/netscaler/11/system/basic-operations/restart-shutdown-netscaler-appliance.html
some register values incorrectly written
File /nsconfig/.callhome.conf is have permissions 644 (-rw-r--r--) and the file is always opened with r+ mode. If the user does not have write permission will get this error. There is no functionality break due to this.
There was a mismatch of Date on the NetScaler and the Certificate to be valid From Date.This made the Certificate to be Not Yet Valid.
Here is the Screenshot of the time (highlighting the time difference) on the NetScaler and the Certificate.
The udp-ecv monitor, if it has not been modified to expect a particular string in the service's response, will assume the service is in an UP state if it receives no response to its probes. Only in the case where the probe is answered with an Internet Control Message Protocol (ICMP) “Port Unreachable” error will the monitor declare the service is down.
This is because UDP does not provide a mechanism for determining a connection state, so there is no way to judge whether or not a particular UDP port is being listened to.
This can ultimately mean that common service problems, such as routing black holes, or even completely disconnected servers can cause the probe to appear to pass as a false positive.
If there is a firewall between the NetScaler and backend server and firewall has threat protection feature enabled on it, it needs to be disabled. The threat protection feature resets the TCP window size to zero which causes the monitor probe connection to close without NetScaler being able to send additional data for the probe to be successful.
Whenever there is network disruption or failover, RDP client tries to reconnect, in this case the reconnection will be successful based on rdpCookieValidity period configured on the rdpClientProfile. If the reconnect or failover happens after cookie timeout value, the reconnection will not be honored.
The feature was not available by design wherein we have an IPV6 gateway IP getting loadbalanced to an IPV4 StoreFront IP.
fine tuning of TCP parameters
This can occur if the Data Warehouse Synchronization server entry is deleted
Sometimes SCOM agent get corrupted or stops collecting data for different reasons. In some cases restore or Health service cache helps to resolve the issues.
When one bumps into a situation like this it’s time to investigate the SQL server which hosts the SCOM R2 databases. Here the cause is to be found. These causes can be:
SQL Engine not running;SCOM database is corrupted (you don’t want to go there…);SCOM database is running in single-user mode;SCOM database is full;SCOM database log file is full.
In this case Option 5 was at play here. The log file was full. Which is strange since by default the Recovery Model for the SCOM R2 databases is set to Simple. So the log file stays small and nothing serious happens to it. But now the log file was totally used (0% space left). And indeed, the Recovery Model for the OpsMgr database AND the OpsMgrDW database was changed to FULL…
CTX121974 - FAQ: USIP Address Mode of NetScaler
CTX129182 - How to Configure Single Sign-On for Outlook Web Access 2007 on NetScalerCTX135875 - Troubleshooting Steps for AAA Issues on Exchange OWA Through NetScaler
CTX138988 - How to Configure SAML SSO Authentication between NetScaler Gateway and Load Balancing Virtual Servers
CTX108876 - How to Configure LDAP Authentication on NetScaler or NetScaler Gateway CTX114999 - How to Troubleshoot Authentication Issues Through NetScaler or NetScaler Gateway with aaad.debug Module
SCOM agent security setting “Allow this agent to act as a proxy and discover managed objects on other computers” is disabled by default and therefore no other instances of objects are discovered in SCOM console.
CTX201133 - How to Change Password for LDAP Authentication for NetScaler Gateway and AAA-TM Users
NetScaler Gateway EPA: How Do I?
CTX205823 - How Do I Enable SSL Client Certificate Authentication on NetScaler
ARP entry was not identified on the NetScaler for the device connected to that particular Partition.
System temperature was hovering around 17-18C which is lower threshold limit which is currently set on ipmitool.
Issue IDs: #701682 , #700872
There was an enhancement done on the NetScaler in build 11.1-53.11, after which the wildcard matches for a specific GEO (US in example case) were disabled by default. Here is the description as per the release notes:
The GEO rule for wildcard qualifiers matched any other qualifier. With this fix, the matchWildcardtoany option in the set locationParameter command is set to NO and hence the wildcard qualifiers do not match any other qualifier, by default.
[# 665771]
You may go through the below links for more details :
https://docs.citrix.com/content/dam/docs/en-us/netscaler/11-1/release-notes/NS_11_1_53_11.html
https://support.citrix.com/article/CTX130701
As in the gateway the monitor probes are not configured for the WIHOME, as a result all the available SNIP would be used to probe the WIHOME.
Content Switching Virtual Server having SSL Policy as to use Client Based authentication and SSL Profile having Client Based Authentication as disabled
High availability sync ports were restricted in the AWS security settings.
CTX135889 - How to Export and Use SSL Session Keys to Decrypt SSL Traces Without Sharing the SSL Private KeyCTX116557 - How to Decrypt SSL and TLS Traffic Using Wireshark
Chrome on Android seems to be making parallel requests to download a single file,using range requests. APPFW drops the "range" header from client request while forwarding to back-end server, which causes the problem. Below is the detailed explanation. Say the real file size the client intends to download is 72299385 Bytes [CLIENT]=====[NS]=====[SERVER] ==================================================================== Working Scenario - APPFW DISABLED or APPFW with only BASIC-CHECKS enabled ==================================================================== 1. First request is a normal GET request for the file, this request is forwarded to the Backend 2. Backend responds with 200OK along with the content-length of 72299385, and the "Accept-Ranges: bytes" header , this response is forwarded to client and the download starts. 3. Now the client knows the file size is 72299385 Bytes (from content-length header in the response), and also that the server supports Range requests (the presence of Accept-Ranges in the response) 4. While the file is still being downloaded, client initiates another parallel Get request for the same file but includes the header "Range: Bytes=36149692-" , i.e. bytes in the range of 36149692 to end of the file” this is half of the “Content-length” received in the original response. In short this is a parallel request to download the 2nd half of the file.This request is forwarded to the Backend as is. 5. Backend responds with "206 partial-content" + "content-range: bytes 3614962-72299384/72299385" , this is the back-end response for the requested byte range. This request is forwarded to the Client the download of the 2nd half starts. ===== At this point, two downloads are in progress===== The first request for the entire file #2 The second request for the 2nd half of the file #5 ============================================ 6. Once the first download reaches halfway mark, the client terminates the TCP connection FIN and also a RST (just in case) 7. The Second request is also closed once download is done. At the end of all this, the client has the first half of the file from the 1st request and the second half of the file from the 2nd request and it constructs the actual file. ==================================================================== Non-Working Scenario - APPFW with ADVANCED-CHECKS enabled ==================================================================== 1. First request is a normal GET request for the file, this request is forwarded to the Backend 2. Backend responds with 200OK along with the content-length of 72299385, and the "Accept-Ranges: bytes" header , this response is forwarded to client and the download starts. 3. Now the client knows the file size is 72299385 Bytes (from content-length header in the response), and also that the server supports Range requests (the presence of Accept-Ranges in the response) 4. While the file is still being downloaded, client initiates another parallel Get request for the same file but includes the header "Range: Bytes=36149692-" , i.e. bytes in the range of 36149692 to end of the file” this is half of the “Content-length” received in the original response. In short this is a parallel request to download the 2nd half of the file. APPFW with advanced checks enabled, drops the "range" header from the client request (expected) and forwards to Backend5. Without the range header, Backend responds with entire file 200OK along with the content-length of 72299385. This is forwarded back to client and download starts===== At this point, two downloads are in progress===== The first request for the entire file #2 The second request also for the entire file #5 ============================================ 6. Once the first download reaches halfway mark, the client terminates the TCP connection FIN and also a RST (just in case) 7. The Second request is also closed once download is done. At the end, the client has the first half of the file from the first request. and the Entire file from the 2nd request. Then the client seems to merge this and end up with a file 1.5 times the original size and the file of course is corrupt.
This issue may occur intermittent when:
The Common Name and Subject Name have the same field.The Subject Name has the Wild card Entry with the name as filled up in Common Name.
For example:Subject name (SN): www.xyz.com*Common name (CN) : www.xyz.com
high sessiontimeout value configured
A DNS UDP response for an internal query that exceeds 512 bytes is not processed at NetScaler because a "truncated" bit is set in the DNS flags. As per current NetScaler behavior, NetScaler doesn't treat a truncated response as a valid response and also there is no support for DNS TCP for internal queries. Therefore, a DNS UDP response greater than 512 bytes will be dropped at NetScaler.
Clientless Access component on the NetScaler uses the Regex engine to search and rewrite the URLs contained in all responses provided by backend application servers, SharePoint in this case. There are some situations were the request is build up on the client side, by a java script file for example so the URL is not CVPN-ized (e.g. /cvpn/aHR0cHM6Ly9zaGFyZXBvaW50LnJvbHkubGFiCg/) by the NetScaler. In such cases, the NetScaler will respond to the request with "503 Service Unavailable"
Checked that only the Intermediate Cert of the actual Client Certificate is installed in the NetScaler.> Top root CA was missing
Effective state of the Name Server is DOWN which results in DNS lookup failure
The issue could be an incorrect DNS server specified on the SDX that caused the backups to fail.
This is a known issue tracked with issue ID 697771.
The extended ACL view was trying to get VXLAN.  VXLAN is not supported in cluster setup.
Known Fixed issue #692008 caused the behavior, so If you run the 'ldapsearch' command at the NetScaler shell prompt, the following error message appears: Segmentation fault: 11 (core dumped) And a crash is observed frequently.
When AppFW is bound, it decompresses traffic to perform inspection.Compression was not enabled on the NetScaler, so it did not re-compress the traffic
Please note disabling TCP Slow Start after idle option will start sending the traffic on loadbalancing methods as son as the server state is up instead of gradual increase.Also note that increasing the BufferSize at the NetScaler will require NetScaler to hold more data in buffer, if the other end is unable to process the data. So it may cause the NetScaler TCP buffer to go slightly high and in rare cases can impact packet CPU if NetScaler has too much data in the buffer.
AppFW Signatures are lost upgrade and hence Profile and policy binding does not work
https://support.citrix.com/article/CTX117322
Combination of SSL enabled VDA (for TCP) and DNS configured for the VDA is creating the problem for EDT as both EDT and TCP share. This is addressed as part of enhancement 690030. With this enhancement, the NetScaler Gateway appliance supports end-to end encryption with DTLS 1.0 for Enhanced Data Transport (EDT) termination between Receiver and VDA.
Citrix Documentation - NetScaler Configurations Supported in Partitions
Customer have active-active GSLB set-up deployment wherein he is using AGEE vserver on different sites as GSLB service. On analysis it was found that EPA fires up a new dns lookup request and does not look into cache entry on host. Due to this sometimes IP address obtained for initial request and for EPA request are different. In simple words site persistency was not obeyed and will cause a connection timeout failure. The issue is not specifically linked to EPA, connection timeout issue can also happen when setup is configured with GSLB.
An LDAP monitor probe is defined and is timing out with the normal parameters. No filter is defined to reduce the result. Filtering result reduces the amount of information returned by the request.
'force cluster sync' on node 0 or cluster re-join wouldn't help in resolving the issue. When you do so, you will see the below error: Command "force cluster sync" - Status "ERROR: This command will not be propagated to the other cluster nodes as you are connected to the NSIP of this cluster node" Here the issue is related to DB sync between cluster node and node 0.When we run 'sh cluster propstatus' we see 'NumPropCmdFailed' error.When we check ns.logs on non-CCO node, we observe db related errors:/var/log/ns.log.10:Sep  1 02:49:34 <testhostname.err> ns nsconfigd: cfd_dbtrans_commit(): 5 -Failed to commit the DB-transcation for command(feature:enable)/var/log/ns.log.10:Sep  1 02:49:34 <testhostname.err> ns nsconfigd: cfd_stage_validate(): 1 -Failed to open a DB-transcation for command(mode:enable)/var/log/ns.log.10:Sep  1 02:49:34 <testhostname.err> ns nsconfigd: cfd_stage_validate(): 1 -Failed to open a DB-transcation for command(cmdPolicy:add)/var/log/ns.log.10:Sep  1 02:49:34 <testhostname.err> ns nsconfigd: cfd_stage_validate(): 1 -Failed to open a DB-transcation for command(patset:add)
https://docs.citrix.com/en-us/netscaler/12/aaa-tm/saml-authentication.html
Issue with GUI code for password check of .pem format files.
NTP/Time mismatch between the client and the NetScaler.
Scenario TWO: A known bug (703995) exist which is getting fixed in 12.0-58+GA build
A mismatch between LDAP credentials format (upn) presented and credentials accepted by RADIUS backend servers (sAMAccountName only)
The NetScaler device does not authenticate users properly when using Smart Card hence apps enumeration does not work.
Possible Causes:1. vServer and Service type is incorrect.2. Backend server can't recognize the client-ip header. The header may be "X-Client-IP", or "X-Forwarded-For" or other customize headers. 3. WAF/Firewall in the midder removed the header.
For NetScaler 11.1 releases, the HDX Insight/SmartControl functionality embeds certain reconnect data into the reconnect cookie communicated by VDA to receiver for any TCP ICA connection. This reconnect cookie gets invalidated by VDA in scenarios where receiver makes reconnect request with UDP followed by the actual TCP connection due to the fact that NetScaler UDP ICA does not have the support for Insight till date.
Customer has ssoNameAttribute configured as CN however we see that the CN is different from the login username of the customer, in the above example:username : "testuser.local"CN retrived from LDAP: "testuser local"There is an extra space character in the CN retrieved, so the sso will fail when an ssoNameAttribute is configured with such a field which is not acceptable by the backend server.
In the above flow, “upn_no_auth” policy is a dummy/no-authentication policy used to jump to second factor to attempt login after modifying the username.
NO_AUTHN policies can be used to simulate implicit success logic. NO_AUTHN policies help to compute logical decisions such as the current case.
Please note that browsers/clients url encode the input data. Therefore special characters such as “@” are encoded in the request. Therefore, care must be taken when checking for form values in policy rules.
The bound CA cert's public key type must match. If the client cert is ECC the CA cert must also be ECC. If the CA certs public key is RSA, for example, you will see this counter incrementing - ssl_err_cvm_cmd_ecdsa_sig_mismatch
Known fixed issue#697789 The NetScaler appliance becomes unresponsive if after an SNI handshake is complete, an HTTP/1.1 request is received and the SNI certificate is unbound from the virtual server simultaneously.
Known issue# 691211 A NetScaler Application Firewall appliance running release 10.5 build 66.6, 11.0, or 11.1 fails because of a packet-engine crash while applying an AppFirewall policy to the load balancing virtual server.
Design change in the new codes as mentioned above for 11.1.
Secondary NetScaler VPX was found in the hung state and unreachable from the Primary instance of the NetScaler due to which the Primary NetScaler was not able to propagate the commands to the other pair in the HA. Hence it was showing the error message as Operation timed out when making any changes in the config of the Primary. At the same time we could see some  SNMP alert has been triggering  for  haPropFailure (This trap indicates that config propagation has failed on secondary) and Write failed because of broken pipe in nsnet_sendack; FD=20 errno=32 peerPort=-1 peerProcess=?? in the ns.log.
CPU is not dedicated to NetScalers from Azure. Hence, when the CPU is not utilized on NetScaler, NetScaler will yield those CPUs to Azure. In the meantime, when the NetScaler wants to send the Heartbeats, it couldn't process the Heartbeat packets due to the unvailability of CPUs. Thus the Heartbeats are getting missed between the NetScalers and ends with HA failover.
There is a limit on max supported field types in aslearn. If user configured or aslearn deployed field types reaches the limit, get learnt data will not able to display total learnt data in certain cases.
Fixed issue # 658120, 684909 The Certificate Revocation Lists (CRL) checks and Online Certificate Status Protocol (OCSP) validation are not done on a NetScaler appliance through an SSL renegotiation as part of certificate based authentication.
For more details on HTTP profiles, refer below:https://support.citrix.com/article/CTX130963For more details on customizing Weblog options, refer below:https://support.citrix.com/article/CTX227457
SSO fails because NetScaler is corrupting the POST request while sending to the backend server. As soon as the backend server receives the corrupted POST, it responds with 400 BAD request.Trace Snippet:
In the POST below we can see that POST request being constructed again inside the BODY and with incorrectly spelled characters.Since this POST is not standard HTTP request server responds with 400 BAD request.POST /url/url.jsp HTTP/1.1Host: example.comConnection: keep-aliveUpgrade-Insecure-Requests: 1User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8Referer: https://example.com/abc/xyzPOST /url/url.jsp HTTP/1.1Host: example.comConnection: keep-aliveUpgrade-Insecure-Requests: 1User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8Referer: https://example.com/abc/xyzn;q=0.8Accept-Encoding: identityContent-TAccept-Encoding: identityype: application/x-www-form-urlencodedContent-Length: 21Cookie: JSESSIONID=5970E79722E4C79E44467517FA220BT7
This is a known issue tracked with issue ID 683512.
Dead interval was configured as 10 sec and Hello Interval as 600ms. This is wrong config as 10 sec is not exactly divisible by 600ms and needs to be corrected.
Xenserver IP was not configured on SVM which resulted in no communication error.
Feature: AppFlow The NetScaler appliance crashes, dumps core, and restarts if a certificate is unbound from an SSL virtual server while an SSL transaction is in progress. [0679995]
From GUI, we will parse the schema and render the form for look and feel and also we can do label customizations from there. During this process, we will validate all credentials and labels. If we have custom credentials and labels, this is not included in the GUI code.
Warm Reboot of VPX on SDX causes SSL chips to go down.
Currently the destination attribute is not a part of he SAML logout response generated by NetScaler IDP
The /var/ partition did not have enough free space on the NetScale being upgraded.
First redirection from 8080 to 443 works as expected with 302 response from NetScaler. Consecutive attempts give 301 redirection code from 8080 to 8080RFC 6797 section 8.3, once HSTS is set for a Domain the Browser, not the NetScaler, will redirect the request before the load of the page to HTTPS. if the URI contains an explicit port component of "80", then the browser MUST convert the port component to be "443"http://example.com:80 --> https://example.com:443if the URI contains an explicit port component that is not equal to "80", the port component value MUST be preservedhttp://example.com:8080 --> https://example.com:8080if the URI does not contain an explicit port component, the browser MUST NOT add onehttp://example.com --> https://example.com
SHA1 is vulnerable
Known issue as the ULFD config doesn't clean up even after removing from the configuration and NetScaler has to be rebooted to get the Web Insight data flowing out of NetScaler for MASonly if the ULFD mode/server has been removed/disabled anytime during configuration/testing, we need to restart NetScaler for the webinsight data to be presented on MAS 11.1.50.x onwards and 12.0.14.x onwards
aaad service using high cpu utilization
Issue is with NetScaler Handling the OPTION request
1. vServers configured over SSL protocol2. As per setup requirement and based on Microsoft's recommendation, NetScaler is required do the partial processing of SSL traffic.Flow of communication for Lync and NetScaler - ++ Whenever the client will try to connect, first the discovery will be done to lookup for the available servers - that's when the Lync load balancing vServer discovery will be hit. ++ Once discovery is successful, the available server will vouch for authenticating the user credential - that's when the Lync authentication vServer will get the hit.++ It is necessary that the end user should have a trust with discovery server for the phenomena to work.++ As the CA is internal, end users will never be able to trust that and communication is ought to fail.++ So, NetScaler is required to do the SSL Handshake (and not processing of any SSL data)NOTE: The above mentioned steps are deployment specific.
Log action under responder policy is not defined
Typically a form within a form (aka nested forms) is forbidden by the HTML specs.https://www.w3.org/MarkUp/html3/forms.html <<>> Every form must be enclosed within a FORM element. There can be several forms in a single document, but the FORM element can't be nested. The browser is responsible for handling the input focus, i.e. which field will currently get keyboard input. Many platforms have existing conventions for forms, for example, using Tab and Shift-Tab to move the keyboard focus forwards and backwards between fields, and using the Enter (aka Return) key to submit the form.<<>>
Monitor service on StoreFront is not running on port 80 or 443 by default
http://docs.citrix.com/ja-jp/netscaler/11/system/high-availability-introduction/restricting-high-availability-synchronization-traffic-to-a-vlan.html
https://docs.citrix.com/ja-jp/netscaler/11/appexpert/responder.html
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
This is caused due to a known issue in Netscaler Version.This has been fixed in latest 11.1 release i.e. 11.1 56.15.
This is caused due to a known Bug. When a responder policy with a rate limiting expression is bound to a DNS bindpoint, and DNS views are configured, the NetScaler appliance might fail to return an expected response to a GSLB domain query.add ns limitIdentifier Limit200Reqs -threshold 300 -mode REQUEST_RATE -limitType SMOOTH -selectorName Top_CLIENTS -trapsInTimeSlice 1add responder policy ReqAResPol200Global "dns.REQ.QUESTION.TYPE.EQ(A)  && sys.CHECK_LIMIT(\"Limit200Reqs\")" DROPbind responder global ReqAResPol200Global 2000 END -type DNS_REQ_DEFAULT
As per https://blogs.technet.microsoft.com/josebda/2012/11/13/windows-server-2012-file-server-tip-disable-8-3-naming-and-strip-those-short-names-too/
NtfsDisable8dot3NameCreation =2 means it is volume dependent. So it seems the C: volume NtfsDisable8dot3NameCreation is disabled.  And thus the shortcut end up using the long name.When you have Windows AutoLog-ON feature enabled on your NetScaler Gateway appliance, during logon the client is unable to find the "nsauto.exe" file because the path to the file is incorrectly truncated.
Windows VPN plugin uses short names (dos style path name where longest name will be 8 characters and it won’t have space) for launching nsauto.exe.In short names as space won’t be present, VPN plugin doesn’t add quotes around path. But looks like, the customer’s machine is not in default configuration and that’s why short name generation has failed. Please create a bug for tracking this issue.
sjis / euc-jp charset when used transform the 5c with SQL Transformation to "\".
This issue was caused due to GUI passing wrong filter name.
The fetch for the software version is failing during the upgrade process.
If you upgrade NetScaler appliance in a high availability (HA) setup and skip 250 rules with active traffic, the GUI or CLI displays a "failed to skip some rules" error message and an operation time-out error message.
Citrix Documentation - About PersistenceCTX230733 - NetScaler 12.0.56.20 Traffic Management Enhancements Centered Around Monitors, Persistence and Service Groups
CTX230733 - NetScaler 12.0.56.20 Traffic Management Enhancements Centered Around Monitors, Persistence and Service Groups
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The issue was with GSLB configuration fro LDAP .While resolving the FQDN for LDAP some cases the LDAP load balancing ip  to Secondary netscaler.
Users ran wizard before and deleted the virtual server .However, there are remained info which cause conflict when users want to run the wizard again.
SSO on Traffic Policy of NetScaler Gateway needs to be "OFF"to verify if the Bearer Header is present on Wireshark Trace.
This is a bug in the firmware version. It is mentioned in the release notes accordingly.
"Authentication" submenu under "System" cannot be expanded. [# 693573]
This behavior is by design, and not a bug.
Crash is happening while dreferncing the nsb, since nsb is not accessible and dreferencing it is causing segmentation vioaltion. Crash is duplicate of TSK0694195.
It is confirmed SSL certificate has been changed on “citrixservices.citrix.com” since 11/16, which is not installed to NetScaler. The issue started happening since then.
The issue occurred as one of the devices in the network is not accepting the TCP compaction, which is an RFC compliance. we need to check with customer(after Engineering confirmation) on a new test to reproduce it and collect traces on NS, Back end server and middle boxes (like switch etc) which will tell us the reason for packet drop at the end devices as in ideal scenario it should be accepted.
Citrix Documentation - Setting Up an Authentication Virtual ServerCitrix Documentation - NetScaler as a SAML IdPCitrix Documentation - SAML Assertion verification fails with Multiple SPs and NetScaler as IDP
Citrix Documentation - Configuring SynchronizationCitrix Documentation -Forcing the Secondary Node to Stay SecondaryCitrix Documentation - Forcing the Primary Node to Stay Primary
When multiple SAML IDP Policies are bound to AAA VIP (One for each SP and expressions as true) and this binding is done from GUI the policy binding is done with "-gotopriorityExpression END".This prevents the subsequent SP Policies from being evaluated except the one with the highest priority.
known Issue: TSK0610809 and also with other bugs TSK0686520/TSK0670652/BUG0687871/ and suggested to upgrade.
The certificates file names were identical
This is caused due to the incorrect Certificate template selected while generating the Certificate from the Internal Certificate Authority server(Active Directory)
After submitting the token, the client issues a /nf/auth/doAuthentication.do even though nFactor is not in use and Classic Authentication policies are configured. In response, the user receives a 404 message and the Authentication remains incomplete.
RfWebUI based theme is not supported for an Authentication virtual server configured with Classic Authentication policiesRfWebUI based themes for AAA Vserver are designed for Advanced Authentication policies as a result the action is performed as /nf/auth/doAuthentication.do
Note: This is specific to AAA Vservers, NS Gateway Vservers configured with Classic Authentication should work with RfWebUI based themes.
Issue is caused due to no value in nslog.nextzip file.
#697709 PE is crashing in the SSL handshake while doing ECDH key computation
Packet highlighted in the Capture is not a LACP packet. It is generated by a daemon in SDX that is used for detecting TX stalls in the system. It sets the type as “Slow Protocols”, but the subtype is 0 and not 1 (LACP). This packet should be ignored by the switch and not treated as a LACP pdu. Siwtched use tjose packets as LACP. Disabling the daemon stops the flaps, and the error messages in the switch logs. That will eliminate or confirm if the switch is misinterpreting the subtype 0 packets.
When Gateway is tunneling FTP (port 21), the Gateway parses the data to support active FTP. In case of FTP over SSL, these data is all encrypted/SSL handshake data. This causes parsing to fail. When NetScaler parse packet for FTPS traffic, packets are truncated, thus client cannot recognize the truncated server responses. Client does not respond and connection times out.After comparing the capture of via SSLVPN and direct access, packet length is decreased via NetScaler.Below is the Wireshark screen capture, which shows the difference in the packet lengths when received and forwarded to client
Caused by known issue where STA will be marked down in a double hop scenario.NS initiates TCP healthcheck SYN packet, whose destination port is not 80, so the monitor probing fails and causing STA failure.If destination IP is configured in monitor and it’s not TOS monitor we were overwriting that with server information destination IP.  Destination Port not added in TOS monitor profile, Port information for monitor is not able to generate from LB Vserver
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
CTX113357 - NetScaler Hardware and Software Compatibility MatrixCTX213153 - How to upgrade NetScaler using Command CenterCTX121840 - NetScaler Software Release Dates
https://support.citrix.com/article/CTX203957
We saw a lot of hits on some signatures. This was causing CPU to raise mgmmt upto 50% from 3%Concerned logs: 555600       0        5199845     281164    40120 as_sig_num_fast_match sig_name:appfwprofilename id:18743515369       0          76745      17418     2472 as_sig_num_fast_match sig_name:appfwprofilename id:999998  515370       0          76745      17418     2472 as_sig_num_fast_match sig_name:appfwprofilename id:999997  515371       0          76745      17418     2472 as_sig_num_fast_match sig_name:appfwprofilename id:1519 515372       0          76745      17418     2472 as_sig_num_fast_match sig_name:appfwprofilename id:1376 These are all different signatures and causing a lot of CPU overhead.
Default IE version in sharefile plugin is 7.0. This is not supported on NetScaler.But sharefile plugin 5.1 has default IE version as 11In the given workaround, we are manually setting the IE version on Sharefile plugin to 11.
nscm_hashlookup is taking a lot of utilization
EPA plugin  support for with MAC OS 10.13
The above situation arises if the NetScaler SDX appliance was running a recent version of single bundle image release where 10G/40G interface NIC firmware was upgraded (5.XX/6.XX).  This is an expected behavior as the factory shipping software requires a lower version of interface NIC firmware (4.53) to be present on the NICs. The current factory shipping software is 10.5-62.54 and is not capable of downgrading the NIC firmware, because of which the interfaces prevented from coming up and are reported as missing. The solution is to perform single bundle upgrade back to the version that was running earlier on the appliance.
proxyarp was disabled in l2params - "set l2param proxyArp DISABLED" was seen in config.When this parameter is enabled, NetScaler Proxies the ARP as NetScaler MAC when FreeBSD queries for the Dummy Next-Hop.The default setting is proxyarp enabled, this value SHOULD NOT be changed unless advised by Citrix support / engineering.
Confirmed it is a GUI bug
The issue is caused because of incorrect logging of tcp connection delink. Which is a known issue#695326 and is fixed.
Showing VPX(1) for a pooled license, is a cosmetic issue in NetScaler firmware 11.1.x.
This behavior is due to  connection multiplexing being enabled on the VIP.  With wildcard service groups and VIPs connection multiplexing can cause these issues as Netscaler tries to reuse existing open connections for multiple http requests.
High Availability Sync VLAN configuration mismatch
NetScaler has HSM gateway binary which runs on management core. It takes requests from PE and forwards it to HSM (via hardserver). That binary always assumes that it will only receive socket connection from PE. When the Qualys scan runs on management IP, it will find gateway’s port open and it will connect to it and try to send some data. Since that binary only understands the data from PE, it will not be able to interpret Qualys data and NetScaler Gateway is not reachable / accessible over port 443
SNI relies on the hostname to be provided in the client hello in order to be able to answer the SSL handshake. It is missing in Client Hello sent by the NetScaler.
With version NetScaler 11.1, VPX was sharing CPU with other VMs. With NetScaler 12.0 version, VPX will not share CPU by default.
Synopsys
add authentication loginSchema <name> -authenticationSchema <string> [-userExpression <string>] [-passwdExpression <string>] [-userCredentialIndex <positive_integer>] [-passwordCredentialIndex <positive_integer>] [-authenticationStrength <positive_integer>]
Arguments
name
Name for the new login schema. Must begin with an ASCII alphanumeric or underscore (_) character, and must contain only ASCII alphanumeric, underscore, hash (#), period (.), space, colon (:), at (@), equals (=), and hyphen (-) characters. Cannot be changed after an action is created.
The following requirement applies only to the NetScaler CLI:
If the name includes one or more spaces, enclose the name in double or single quotation marks (for example, "my action" or 'my action').
authenticationSchema
Name of the file for reading authentication schema to be sent for Login Page UI. This file should contain xml definition of elements as per Citrix Forms Authentication Protocol to be able to render login form. If administrator does not want to prompt users for additional credentials but continue with previously obtained credentials, then "noschema" can be given as argument. Please note that this applies only to loginSchemas that are used with user-defined factors, and not the vserver factor.
userExpression
Expression for username extraction during login
passwdExpression
Expression for password extraction during login
userCredentialIndex
The index at which user entered username should be stored in session.
Minimum value: 1
Maximum value: 16
passwordCredentialIndex
The index at which user entered password should be stored in session.
Minimum value: 1
Maximum value: 16
authenticationStrength
Weight of the current authentication
Minimum value: 0
Maximum value: 65535
Output From aaad.debug
We can see here that the radius verification happens before ldap regardless of the order at the login page.
root@ns# cat aaad.debug
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[1082]: process_kernel_socket 0-64: call to authenticate
user :administrator, vsid :10366, req_flags 2
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[3820]: start_cascade_auth 0-64: starting cascade authentication
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/radius_drv.c[772]: continue_radius_auth 0-64: RADIUS auth: Starting RADIUS authentication for user administrator @ 10.107.141.174
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/radius_drv.c[2116]: process_radius 0-64: RADIUS auth: RADIUS authentication successful for user: administrator from server 10.107.141.174
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/radius_drv.c[2118]: process_radius 0-64: extracted group string :(null)
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[2969]: send_accept 0-64: sending accept to kernel for : administrator
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[845]: process_kernel_socket 0-65: partition id is 0
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[1082]: process_kernel_socket 0-65: call to authenticate
user :administrator, vsid :10746, req_flags 2
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[3820]: start_cascade_auth 0-65: starting cascade authentication
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/ldap_drv.c[107]: start_ldap_auth 0-65: Starting LDAP auth
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/ldap_drv.c[131]: start_ldap_auth 0-65: attempting to do ldap auth for administrator @ 10.107.141.167
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/ldap_drv.c[133]: start_ldap_auth 0-65: LDAP referrals are OFF
receive_ldap_user_bind_event 0-65: User authentication (Bind event) for user administrator succeeded
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[2969]: send_accept 0-65: sending accept to kernel for : administrator
Wed Nov  1 16:35:37 2017
Check the SSL profile/ SSL parameters if OCSP stapling is enabled.
SSL hanshake might fail if server cert ocsp response cache is not found and another client request is served by Vserver before receiving ocsp response from the OCSP responder for server certificate.
In this condition, with OCSP stapling enabled, the NetScaler can send incorrect Server Hello to the client, causing the client to generate the SSL alert.
Request was not parsed as html and was getting rendered as text
OCSP Caching needs to be enabled.Nonce for External Responder needs to be disabled.
Traces showed that this particular admin partition was not sending any G-Arp's for its VIP's. This is a corner case where if the number of ip's configured on the entire device is approx. 85 then the last partition does not send any G-Arp's. Instead it re-sends G-Arp's for previous partition.
This would be the case of DNS record not found for the internal network resource, NetScaler is trying to contact the DNS servers which are externally/internally hosted and no response from DNS server is observed
The memory spike issue is because of HA SYNC is disabled on the NetScalers.Root cause: A NetScaler Application Firewall appliance in a high availability configuration will run out of memory, because firewall sessions not getting cleaned up if sync or propagation is disabled or the software versions running on a pair of nodes do not match. This is due to DHT not being able to clean up session entries properly. Please refer the Issue ID 0646293 in the 11.0 build 68.10 or latest 11.1 or 12.0 build release notes.
Due to TCP buffer size 8KB, uploading more than 8KB when request body signatures are enabled on NetScaler AppFirewall profile causes application to hang. This is happening due to NetScaler advertising "TCP window Full" to client after client sends first 8KB.
There can be multiples causes of the issue
gateway is out of licenses, causing MAM enrollment to fail. macro configured ‘SEND_LDAP_ATTRIBUTES’.LDAP is configured with UPN and with Global Catalog. For e.g. the Domain ‘test.abc.local’ is managed with alias ‘xyz.ab, xyz-test-racing.ab, xms.com’ Users are login with alias like ‘user@xyz.ab’ .
A NetScaler VPX instance on a NetScaler SDX appliance might fail because of kernel memory corruption caused by a problem in the error handling path in the kernel. The issue occurs when a user-space process fails and dumps the core file at a time when the value for "sysctl.kern.corefile" points to a nonexistent directory.
known issue #684488 with 11.1 52.13 build,
This issue is because we pass “as is” the password received from client, to the LDAP server. In some cases we need to convert password from Unicode-codepoints to UTF-8 to fix this issue.
Unicode codepoints for the range 0x00000000 - 0x0000007F pose no trouble: for characters in this range, codepoint == UTF-8 encoding. All ASCII numerals, English alphabets fall in this range. This is the reason why plain English usernames/passwords are interpreted correctly by the receiving auth(LDAP) server.Conversion is needed for characters in the range beginning with 0x00000080. Umlauts (like ä, ë, ï ) and Arabic characters fall in this range. For these characters, codepoint != UTF-8 encoding. So we need to convert the codepoint to UTF-8 before passing on to auth server.
Incorrect date and time set on NetScaler caused the valid license file to not get processed.
For list of NetScaler supported ciphers, see Citrix Documentation - Ciphers Supported by the NetScaler Appliance
The vulnerability only affected systems that have the HTTP PUT method enabled, it could be exploited by attackers to upload a malicious JSP file to a targeted server using a specially crafted request. Once the file has been uploaded, the code it contains could be executed by requesting the file.
There was private IP of backup service configured in place of 'public IP' and hence we were getting private IP during DNS resolutions
SRonHAfailover feature for hdxinsight is using the mentioned ssf pcb for syncing hdxinsight data to secondary. The problem came as TCP is in slow start mode due to packet drop and the packets to be sent are very high resulting the increase in MEM_CONN as they are in hold queue.when there are many number of sessions running, the number of cgp sequence updates sent to secondary node are very high resulting in more number of nsb allocations.Refer the BUG:  TSK0671918
How to Configure Authentication at StoreFront using NetScaler Gateway – Requirements and LimitationsHow to Configure Authentication at StoreFront using NetScaler Gateway - NetScaler ConfigurationFAQ - Configuring Authentication at StoreFront using NetScaler Gateway
How to Configure Authentication at StoreFront using NetScaler Gateway – Requirements and LimitationsHow to Configure Authentication at StoreFront using NetScaler Gateway - StoreFront ConfigurationFAQ - Configuring Authentication at StoreFront using NetScaler Gateway
The management CPU is tasked with performing some periodic functions such as compress the log files that cause high CPU utilization which is by design.
The 11.1-55.13 XVA in the “/var/mps/xen_nsvpx_images/ directory” of SDX updated was missing, to which all the VPX are upgraded,
Renegotiate extension missing in Client Hello sent by NetScaler.
Packets on Netscaler which was on Vmware is being changed to Hyper-V
For an example and additional information, refer to Citrix Documentation - Adding or Updating a Certificate-Key Pair.For more information on managing certificates on NetScaler refer to Citrix Documentation - Managing Certificates
Media classification got enabled after upgrade due to which NetScaler was buffering the HTTP response before forwarding to the client
Unnecessary files in the NetScaler VAR/ directory can use the VAR space.A failure in zipping the newnslog files can case the large files to stay in VAR/nslog directory and can cause access memory.known issue #681196 can cause the newnslog flooding with nsssf_handler debug messages.
Issue caused due to a known bug 682219.Where NS stopped checking the maximport limit before importing new objects.
There was a sync vlan mismatch between the primary and Secondary nodes causing the nodes to keep failing over. var/log]$ grep syncvlan ns.log.*ns.log.0:Aug 10 21:58:18 <local0.info> 220.76.194.2 08/10/2017:12:58:18 GMT ns 0-PPE-0 : CLI CMD_EXECUTED 547484968 0 :    - Command "set HA node -haStatus ENABLED -haSync ENABLED -haProp ENABLED -helloInterval 200 -deadInterval 3 -failSafe OFF -maxFlips 0 -maxFlipTime 0 -syncvlan 3094" - Status "Success"ns 0-PPE-0 : CLI CMD_EXECUTED 546965186 0 :  Command "set HA node -haStatus ENABLED -haSync ENABLED -haProp ENABLED -helloInterval 200 -deadInterval 3 -failSafe OFF -maxFlips 0 -maxFlipTime 0 -syncvlan 1" - Status "Success"
TCP ZeroWindow issue is observed with TLS12 and TLSv11 protocol on SDX 89xx device.Download speed starts decrementing from Higher Mbps/Gbps to Kbs and finally the session getting timed out and user would not be able continue to work on XenAPP or XenDesktop sessions.
======================Sample output======================High number of packets seen on L0/1 147233       0  9432286848363    7665244  1094722 nic_tot_rx_packets interface(LO/1) 147268       0  9432359323499   20370151  2907529 nic_tot_rx_packets interface(LO/1)  147245       0  9432311651932   24803569  3541343 nic_tot_rx_packets interface(LO/1)   147256       0  9432338953348   27301416  3897974 nic_tot_rx_packets interface(LO/1)      1       0         101658877 nic_tot_rx_packets interface(0/1)     3       0         186493260 nic_tot_rx_packets interface(1/1)     5       0         203010135 nic_tot_rx_packets interface(1/2)     7       0         145670878 nic_tot_rx_packets interface(1/3)     9       0         134409190 nic_tot_rx_packets interface(1/4)    11       0     9432366910303 nic_tot_rx_packets interface(LO/1) =============Spike in arp=============      5    7003  9433455164389       2533      361 arp_tot_skip         6    7003  9433455166929       2540      362 arp_tot_skip          7    7004  9433455170595       3666      523 arp_tot_skip         8    7003  9433455174799       4204      600 arp_tot_skip          9    7003  9433462434345    7259546  1036633 arp_tot_skip   >>>>>>>>>>>>>> same time when cpu started to increase     10    7005  9433487511133   25076788  3579841 arp_tot_skip         11    7004  9433515039825   27528692  3930424 arp_tot_skip        12    7004  9433544231301   29191476  4167829 arp_tot_skip
Appflow connection chaining is enabled on one GSLB site and not on the other. set appflow param -httpUrl ENABLED -httpCookie ENABLED -httpReferer ENABLED -httpMethod ENABLED -httpHost ENABLED -httpUserAgent ENABLED -httpContentType ENABLED -httpAuthorization ENABLED -httpVia ENABLED -httpXForwardedFor ENABLED -httpLocation ENABLED -httpSetCookie ENABLED -connectionChaining ENABLED -httpDomain ENABLED -identifierName ENABLED -identifierSessionName ENABLED- When AppFlow parameter connectionChaining is enabled on one GSLB site node, NetScaler adds 20 bytes in TCP option in the very first data packet.- For this reason, received MSS is adjusted by 20 bytes in NetScaler- Now when another GSLB node send MEP packet, we validated this packet size against the reduced mss and found it more than expected. So, MEP connection gets closed with reset code 9825.
The VLAN Misconfiguration is the cause of MAC Moves.MAC Moves: (counter nic_tot_bdg_mac_moved) This indicates that the NetScaler is using more than one interface to communicate with the same device (MAC address), because it could not properly determine which interface to use.
Special Thanks!
Thanks to our Citrix CTP Carl Stalhood’s excellent post, NetScaler Firewall Rules for numerous suggestions captured in this article.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Customer had different traffic domain configured on LB/CS and Services. Due to this and the presence of 'Cookie Persistency', we were losing the td data in subsequent packets sent to frontend client and hence we fail to send the entire HTTP response.
Self singed certificate created with an old NS version. The old certificate was replaced by a new one after an upgrade therefore is not longer valid.
To enumerate the cert names in the dropdown the plugin uses windows API - CERT_NAME_SIMPLE_DISPLAY_TYPE (https://msdn.microsoft.com/en-us/library/windows/desktop/aa376086(v=vs.85).aspx). "Iterates through the following list of name attributes and uses the Subject Name or the Subject Alternative Name extension for the first occurrence of: szOID_COMMON_NAME, szOID_ORGANIZATIONAL_UNIT_NAME, szOID_ORGANIZATION_NAME, or szOID_RSA_emailAddr. If one of these attributes is not found, uses the Subject Alternative Name extension for a rfc822Name choice. If there is still no match, uses the first attribute."In short - one of the above attributes must be available on the device cert - either on the Subject or SAN Field, for it to be visibly listed in the dropdown. The Device Certificates generated using the default “workstation” template in Active Directory Certificate services has the “Subject” field Empty and the “SAN” Extension as “DNS-NAME: <FQDN of computer>” The current logic used to list the cert names fails to due to missing attributes in the cert, so the cert names come up blank in the dropdown.Please look for [ISSUE ID #695035] in release notes of future releases - This is to have additional logic in the plugin so that the certs issued via default template are detected using the DNS-NAME attribute present in the SAN Extension.
SNI feature not enabled
https://www.citrix.com/blogs/2015/04/10/how-to-create-a-csr-for-a-san-certificate-on-netscaler/
CTX135602 - How to Create a Self-Signed SAN Certificate Using OpenSSL on a NetScaler Appliance 	cli command for using passphrase  in CSR "create ssl certReq abcde -keyFile abcd.key -keyform PEM -PEMPassPhrase "********" -countryName IN -stateName asdf -organizationName sdvdsc -commonName dvcdsds -digestMethod SHA1
Insufficient memory has caused  either the Packets to get dropped or processed at the slower rate and due to which the heartbeat packets are not received by Secondary node within the Dead interval time of 3 secs. Thus, the failover has triggered.
Expected behavior with a VPN vip used on a lb as a service.
https://support.citrix.com/article/CTX137072
IP Reputation supported from 11.0 but Security Insight support is there from 11.1 and above. It is recommended to upgrade the Netscaler to latest 11.1 release - 11.1-55.10.Due to a known issue, Netscaler will not send profile names for inbuilt Appfw profiles. Hence, the IP reputation violations won’t be listed in NMAS reports. As a workaround it is required to use User defined appfw profile.
Changes in Secure Mail public and Enterprise app Design:
Secure Mail Enterprise app used to deliver the tenant id as a part of MDX file. Secure Mail public app does not have tenant id added in MDX file, instead SecureMail acquires a Tenant ID from Citrix Registration service.
In case of any HA Event, like missed heart-beats (not necessarily a failover) or interface flaps - NS primary node Sends GARP for IPv4 and Unsolicited NA (Neighbor Advertisement) for IPv6, this is by design.There is an issue with the Unsolicited NA for IPv6 that Netscaler sends,  it is missing the "router flag", so the devices which have Netscaler as a default gateway or next-hop may purge the routes pointed towards netscaler on receipt of such a an NA packet. Refer: RFC 4861, page 63 - 65,  7.2.5.  Receipt of Neighbor Advertisements.Below is a sample ipv6 unsolicited NA packet with the router flag missing, these packets are sent twice from the link local address (FE80) and twice from the global address (2001). Notice that the router flag is missing.
NetScaler no longer supports the obsolete "Proxy-Connection" header on build 11.0.69.x and higher, so without a "Connection header" from a HTTP/1.1 back-end which has a related HTTP/1.0 front-end connection, NetScaler FINs both connection
NTLM authentication fails due to this issue as NTLM challenge and response is supposed to flow on the same connection.
> Redirect URL is missing a forward slash at the beginning, that is causing the current Secure Web logic to add an additional base URL, which causes the 503 error.
Current: Response.Redirect("logon_funct.asp?.")Expected: Response.Redirect("~/logon_funct.asp?.")
> iOS Secure Web redirect logic takes into consideration that “/”, which adds the additional base URL in the redirection URL
If an add lb monitor command specifies an httprequest argument value of more than 77 characters, a subsequent show command shows an incorrect httprequest value for the HTTP requests that the monitor sends to the CLIP address.The NetScaler appliance's ns.conf file also contains the incorrect httprequest value for the monitor. Also, the other nodes (non-CCO) in the cluster are updated with the incorrect httprequest value by the configsync process.
When unsigned AuthnReq is sent with NameIDPolicy, SAML IDP fails to parse incoming request
The SSL profile creation using GUI in version NetScaler 11.1 build 54.14 (and Build 54.16) contains the option "Strict Signature Digest Check" which cannot be configured at the time of creating a profile.
This option is not available in the configuration of any other build of NetScaler. When creating the profile using CLI, this option is not used and hence the error is not seen - https://docs.citrix.com/en-us/netscaler/11-1/ssl/ssl-profiles1.html
How to Configure Syslog on a NetScaler Appliance
If the passphrase contains the "at" special character (@), test connection performed on LDAP server fails, and the dashboard shows that the LDAP server is down.
Name servers on NetScaler were showing as down.DNS servers are external and ICMP traffic was blocked on default gateway.
Pattern was not in the AppFW XSS Database
It's the expected behaviour:The authentication and accounting are different operations:>>>> ExternalAuth disable means you are not delegating authentication operation to external server.>>>> Accounting ON means for all user operation, you are sending accounting information to particular external server.
This can happen when the unit is upgraded while a gateway customization is still in place.When using this method, the customization is saved into a customtheme.tar.gz located in /var/ns_gui_custom/ directory.  The .tar file will contain all the GUI files for the build the .tar file was created on. If the appliance is upgraded, it will still use the customtheme.tar.gz, however the files included are for the older build/version.This can lead to issues with accessing the Management GUI. Please note that in version 11+ there is now an option to add portal themes to the vservers which allows custom themes to be created within the GUI.
This seems to be a bug in e1000e driver where the driver fails to acknowledge its interrupt and the OS disables that interrupt. This seems to have been fixed in e1000e-3.3.3
NetScaler deletes the HTTP Authorization header before forwarding the request to SharefileEarlier, we did not used to recognize Bearer header. Therefore, we would not corrupt it. This caused issues when new MS clients talk to legacy SharePoint servers.This will happen only when SSO is enabled.Thumb rule is – SSO needs to be turned ON when customers want NetScaler to intervene in the SSO process and override client’s behavior.In other cases, it needs to be turned OFF.
NetScaler SDX 12.0 Product Documenation
Certificates with duplicate AIA extensions, from different CA's (possibly different Intermediates from the same root CA).
From NetScaler 11.1 55.x and 12.0-53.x, a new security feature has been added to stop users adding Certificates with duplicate AIA extensions. When these are added to the NetScaler, it can cause OCSP Request failures for the OCSP Stapling feature and other security concerns.
This is being reviewed under issue ID 694395. The issue fixed in version in 11.1 55.13 or above and in 12.0 53.13 or above
This will not occur in NetScaler builds earlier to 11.1 55.x and 12.0-53.x.
This is a most common issue when
Netscaler is unable to successfully do a DNS resolutiondoesnt have access to internt in case the splittunnel is offincorrect DNS policies .
https://support.citrix.com/article/CTX140293
Citrix Documentation - AlwaysON
Please do visit the following eDocs resources for more information:Configuring and Using the Learning FeatureLearning
When exporting the pfx file from the Windows server the option "Include all files in the certificate" makes the certificate pair and issuer to show a missmatch from the Netscaler SSL side.To avoid this issue export PFX without selecting this option.
Checked the Direct access packet captures, the request has sent a another server (xyz.com) while editing the document by saving it on local machine.Whereas, in the NetScaler packet captures, the Client machine couldn't contact (xyz.com) since the NetScaler doesn't have the (xyz.com) LB Vserver configured in the Content Switching server policies.
This is caused by the nsrised daemon.
This feature is being removed from NetScaler 11.0 onwards.
When the Content Switching virtual server receives an HTTP invalid/corrupt header next packets from same source IP may be redirected to a incorrect destination Load Balancer.
In a high availability setup, an unusually large spike in the number of persistent connections might result in under performance of the Secure Socket Funneling channel between the primary node and the secondary node. The under performance can eventually lead to session buildup on the primary node and cause persistence to fail.
Problem Description:
Unable to bind multiple services to a virtual server at the same time, however it is possible to bind service one by one.
Action Taken:
Replicated this issue in my lab for the following NS versions:11.1.53 and 11.1.54.
Issue:
This is due to a known issue TSK0675637, fixed in NS 11.1.53.6 and 12.0.33.4.
Command line installation (CLI) is not support for NetScaler URL
By default, LDAP timeout on NetScaler is 3 seconds. If the Backend LDAP server doesn't respond with either success or failure results within 3 secs, then NetScaler will timeout and fails the authentication.The time out could be because of Network latency or backend LDAP server takes more time than the given timeout value to search for the user
The issue is due to the SAN certificate not including a CN within the certificate.This appears to be common practice with some public CA's (example - Comodo).The SAN cert does not require this field but it is required for SNI.However the error shown occurs when attempting to add the certificate, not when attempting to bind.
SSO user expression not honoured for domain information in domain\username format.The NetScaler will use complete Domain in FQDN format during SSO to backend servers.NetScaler will prefer the Domain obtained during Login to the Authentication Vserver.If SSO user expression is used to obtain user in Domain\Username format, Domain information is ignored in favour of the login Domain.As in the above, the Domain information is in FQDN form and is the Login Domain
From the trace, we can see that for the last ACK to the RESET, no pcbdevno or linked pcbdev no is assosciated . So we are not hitting any session. So the ACK from backend , is stray packet and we are just routing it. This is expected .
Interface bind to LACP channel was flapping continuously
Status of the certificate or how many days are left for certificate expiry can be verified from GUI - NetScaler > Traffic Management > SSL > SSL Certificates.
Citrix Documentation - Certificates and Keys FAQsCTX109711 - How to Update an SSL Certificate on NetScalerCitrix Documentation - Adding or Updating a Certificate-Key PairCTX122521 - How to Replace the Default Certificate of a NetScaler Appliance with a Trusted CA Certificate that Matches the Hostname of the ApplianceCTX114146 - How to Install and Link Intermediate Certificate with Primary CA on NetScaler Gateway
Points to Note
If the server certificate is not placed first in the PEM file, then the following error appears:	Server certificate must be placed first in the certificate bundle file.
It is not recommended to include the Root Certificate Authority (CA) certificate in the certificate bundle as the CA certificate would be linked. When the Server certificate is bound to a virtual server on the NetScaler appliance, the complete SSL chain of certificates is sent to the client as part of the SSL handshake. Therefore, negating any validation of Certificate Authorities as part of the SSL handshake.
Always include a carriage return at the end of the PEM file and/or key, as shown in the following screen shot:
Converting from PKCS7 (P7B) or PKCS12 (PFX/P12) formats to PEM using OpenSSL might not result in the certificates in the PEM file being in the correct order, this must be validated before proceeding.
The following is a sample layout of a PEM file with Server certificate, private key and two intermediate CA certificates for your reference:
-----BEGIN CERTIFICATE-----
MIIEnzCCA4egAwIBAgICFDEwDQYJKoZIhvcNAQEFBQAweDELMAkGA1UEBhMCQUUxXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXPuAVCo+NoXprg5maEDsVBiZXBSq3Ffvg3KBo9WKgN2/QrUo=
-----END CERTIFICATE-----
-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA2S/Z0APwlguIP98ez7447STJNRqb9UKYL2TAxA4KhRFt7+XtXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXWpDzEMFyGZh/ONpIBY3jmZoPFU5vfTFmec8fB4FjtU9tGgDKaDuPDw==
-----END RSA PRIVATE KEY-----
-----BEGIN CERTIFICATE-----
MIIEWTCCA0GgAwIBAgICBAIwDQYJKoZIhvcNAQEFBQAwdjELMAkGA1UEBhMCQUUxXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXjAZCgo3v1YkSX713zg==
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIEWTCCA8KgAwIBAgIEBAAD8TANBgkqhkiG9w0BAQUFADB1MQswCQYDVQQGEwJVXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXN0K3XhD5ROczKe5iRQ==
-----END CERTIFICATE-----
For more information, refer to the IDs # 678514, 677813 under known issues section of NetScaler 12.0-51.24 Release Notes.
NetScaler 59xx/89xx Platform Build LinkCipher Support on MPX 5900 and 8900 PlatformsNetScaler Hardware and Software Compatibility Matrix
INAT works as per the design. ie INAT not forwarding traffic after Idle timeout value is reached is expected.
https://support.citrix.com/article/CTX223787https://support.citrix.com/article/CTX224445
Inconsistent Timeouts requires a cookie to keep the Load Balanced session
If system logs are not rotated properly, over time they consume too much disk space. This causes the XenServer server to run out of disk space and creates unexpected system behavior.
Why 0 length request are being forwarded by the NetScaler?
Special handling is done to overcome the memory build-up issue when client tries to upload large POST data to backend server.
NetScaler 11.1 54+ handle special case for POST request from client in SSO module. where Netscaler sends additional POST request with content length 0 to backend server in case of large file uploading to avoid failure during large file size document upload.
In many cases where NetScaler is sending 0 length packets but backend server is not expecting content-length 0 POST requests, it may cause an issue returning the error from Backend server and terminating the session.
The IP address 172.20.1.15 is external to Netscaler The “-local” in the Netscaler’s DNS configuration makes the IP belong to Netscaler, and will behave as resolver on that IP. Hence, whatever packets sent to LDAP server is returned back on loopback interface, since Netscaler owns the IP.
These type of verbose logging is triggered on App/ Desktop launch when HDX Insight is enabled on the Netscaler.
Known issue #0677747: NTLM authentication fails when the NetScaler tries to negotiate with an LB virtual server in front of the NTLM server.
Based on the log message and extensive troubleshooting we reached Developers team for the same. Based on the analysis done:Gateway/AAA servers do not expect protocol requests on an existing session. That’s why there is a 404.  One way to avoid is by changing configuration slightly. Instead of sending traffic to AAA vserver (behind CS), please have it sent to LB vserver. Currently, there is no LB behind the CS in picture. Please add one and send this to lb vserver. LB should be enabled for authentication and point to AAA vserver. You can reuse current vserver itself. That would avoid this 404.
this was due to a hardcoded limit in the code which does not allow size of relaystate beyond 1024
Terminal server was setting 'msthash' cookie which suggests that it is using User-Based tokens.We only support 'msts' cookie i.e IP- Based tokens
The "Socket is already connected" message is logged by nsumond when the application fails to respond in time, based on response timeout value configured for the corresponding Monitor. "Socket is already connected" message is raised by the PERL module used for probing the server, when TCP connection is established, but the application times out.This is a genuine response timeout, that happens from the application to respond back for the probe sent by Dispatcher to back end server.newnslog :As we can see below, the probes to the SMTP Server are failing and the Netscaler logs this monitor failures in the Newnslogs,Checking the current newnslog with the below command shows the probes that failednsconmsg –g mon_tot -d current –s disptime=1 | grep “Service_Name” Note : Replace “Service_Name” with the actual service nameNS Trace Log :In the NS Trace log, we can see the Dispatcher returns the HTTP 503 errorFrame#12176 - Packet Engine (127.0.0.1) is sending the probe message using the POST /nssmtp.pl to the Dispatcher (127.0.0.2)Frame#15643 - Dispatcher returns the HTTP 503 error to Packet Engine
HTTP/2 requires specific Ciphers. These Ciphers can only be used when the NetScaler is properly configured. This configuration involves TLS1.2, ECC Curves, Proper Ciphers, and HTTP/2 being enabled in the Vserver's HTTP Profile.
The issue could also be related to the /var being full. Please check that there is space in /var.>> This issue could occur due to memory leaks in code which is fixed in 10.5 build 59+ >> Other proble cause is:  The issue is not with the hardware but with a third party software. Underlying IPC layer is not delivering few messages properly to the required processes. This is a defect in thirdparty tool (ZMQ) that SVM uses. (which needs a restart of SVM processes)
Below Ciphers not enabled on NSTLS_RSA_WITH_AES_256_GCM_SHA384   :  TLS1.2-AES256-GCM-SHA384TLS_RSA_WITH_AES_128_GCM_SHA256  :  TLS1.2-AES128-GCM-SHA256
Applied change to HTTP profile to drop extra data from server.1. In the NetScaler Configuration tab, expand the System Node and select Profiles2. Select the HTTP profileUse/create a custom profile or edit the default profile3. Check the option "Drop extra data from server"NOTE: Checking this box will drop any extra data when server sends more data than the specified content-length. This will drop the extra data without dropping the connection. However, this does not address any configuration issues on the server side. If this error is being triggered, care should be taken to investigate why the server is sending extra data.
Customer has LA channel assigned to 7 interfaces already.For a 10G interface, SDX supports up to 63 virtual functions per physical port, which translates to 63 instances per 10G NIC. For 1G interfaces, the maximum number of shared instances per NIC is 7.
Below ID talks about this behavior change i.e. regarding authorization bearer header:https://docs.citrix.com/en-us/netscaler/11-1/about-the-netscaler-11-1-release/fixed-issues-in-previous-11-1-builds.html
If a NetScaler appliance is used to load balance SharePoint servers with AAA-TM, then an upgrade to the office 2016 suite on the client device causes failures during inline editing of the documents.[From Build 50.10] [#656067, 658202]
Reason to change this behavior:With Office 2016 suite, office clients send Bearer header in authorization header as a negotiation with server. Since this comes on a new connection to 401 lb, we try to process authorization header and return failure, ie a 200OK. Office interprets 200 OK as success and tries actual page with Bearer token. Now, we think that there is some authorization header and go into bridge state. Hence SSO fails.
Fix 1. If 401 LB sees unknown authorization header, send 401 to clientFix 2. If bearer header is seen while deciding on SSO, corrupt it if SSO is ON and register normal SSO. If we don't corrupt/remove it, when we attempt SSO, 2 authorization headers go to server. This results in 400 from server.
NetScaler version previous to 11.1 build 54.14 does not support SHA384 and SHA512 on the back-end.
incorrect default route on NS
This was caused due to an internal bug.
https://docs.citrix.com/en-us/sdx/10-5/sdx-ag-config-manage-ns-instance-wrapper-tsk/sdx-ag-config-vmac-on-interface-tsk.htmlhttps://docs.citrix.com/en-us/netscaler/11/system/high-availability-introduction/configuring-virtual-mac-addresses-high-availability.html
This issues can happen during:
PE startPE coming upinterface resetsHA Failover scenarios
Found that the affected users where connecting directly to the AAA login page, instead of to the LB first, which means the NSC_TASS cookie is not getting inserted into the clients; browsers which causes the issue
Libvpath_if_so file is missing on version 12.0 .
This can happen when there is 2 or more vServers that have listening on overlapping IP addresses and Port numbers.E.g.vServer1 is configured for 1.2.3.4:88 TCPvServer2 is configured for 1.2.3.4:88 HTTPUsers may have issues connecting to which ever vServer was added last
Refer to "nic_tot_bdg_mac_moved" counter to confirm this issue.
By default, a DNS Vserver will cache both positive and Negative DNS responses received from the backend server.As a result, if a Negative response is cached, the NetScaler will continue to respond with the Negative response until the DNS cache is updated/flushed.
Rx ring was cleaned completely as a part of every reset which is not in sync with backends expectation.
nstraceaggregator process hang
Some Exchange versions (SP3) stopped issuing the Cookie "OutlookSession=", hence the "PBack=0" doesn’t get set. For the SSO to happen both need to be present when passing to the backend or a 400 Bad Request is issued by OWA.
Token ID returned from Oauth server is in plaintext format, where the NetScaler requires Base64 encoded format
The delay is caused by nonexistent DNS AAAA record resolution. NetScaler tries to resolve IPv6 address for the kerberos.domain FQDN, despite having an IPv4 address resolved already. As the AAAA record does not exist, NetScaler tries to wait 5 and 10 seconds subsequently.
The described behaviour is explained by below traffic flow:
No.    Time     Source           Destination       Protocol     Info
1      *REF*    10.0.0.160       127.0.0.2         DNS          Standard query 0x07fa SRV _kerberos._tcp.DOMAIN
2      0.000    10.0.0.160       127.0.0.2         DNS          Standard query 0x07fa SRV _kerberos._tcp.DOMAIN
3      0.000    127.0.0.2        10.0.0.160        DNS          Standard query response 0x07fa SRV _kerberos._tcp.DOMAIN SRV 0 100 88 kerberos.domain A 10.0.0.20
4      0.000    10.0.0.160       127.0.0.2         DNS          Standard query 0x087a A kerberos.domain
5      0.000    10.0.0.160       127.0.0.2         DNS          Standard query 0x087a A kerberos.domain
6      0.000    127.0.0.2        10.0.0.160        DNS          Standard query response 0x087a A kerberos.domain A 10.0.0.20
7      0.000    10.0.0.160       127.0.0.2         DNS          Standard query 0x087b AAAA kerberos.domain
8      0.000    10.0.0.160       127.0.0.2         DNS          Standard query 0x087b AAAA kerberos.domain
9      5.000    10.0.0.160       127.0.0.2         DNS          Standard query 0x087b AAAA kerberos.domain
10     5.000    10.0.0.160       127.0.0.2         DNS          Standard query 0x087b AAAA kerberos.domain
11     15.004   10.0.0.160       10.0.0.20         KRB5         TGS-REQ
12     15.008   10.0.0.20        10.0.0.160        KRB5         TGS-REP
TLS 1.2 Handshake breaks because of the ciphers sent on the client hello are not configured on the server for TLS 1.2
Nfactor concepts: https://support.citrix.com/article/CTX222713LDAP Authentication: https://support.citrix.com/article/CTX108876
Nfactor concepts: https://support.citrix.com/article/CTX222713LDAP Authentication: https://support.citrix.com/article/CTX108876
How to configure Radius Accounting Policy: https://docs.citrix.com/en-us/netscaler-gateway/11/authentication-authorization/configure-radius/ng-radius-user-accounting-tsk.html
The semicolon (;) is causing brake in the way the GUI executes commands.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Issue ID #659782SSL connection problem in Cavium SSL chips caused by GCM-based ciphers
From CPU profiler we see zegrep is causing the spike when trying to compress log files in /var/log.
To configure the same setting using the NetScaler CLI, refer to Citrix Documentation - Support for HTTP Strict Transport Security (HSTS).
The Connections through NetScaler was remaining in TIME_WAIT state for a long time, hence the Client Application was unable to re-use the Socket.
Custom Theme and nFactor in place during upgrade.
Classic authentication policies are deprecated in NetScaler 12.0.  Use advanced authentication policies from NetScaler 12.0.
http://discussions.citrix.com/topic/312982-how-set-new-password-for-nsroot/
Linux Receiver not support single FQDN scenario, which means linux receiver unable to detect internal beacon to separate client location. So linux receiver will connect the single FQDN as the storefront base URL. However, this doesn't works because it is connecting NetScaler rather than Storefront.
Firewall was blocking Ping. SVM was not able to ping VPX and that causes the issue and error message on SVM.
For more information, refer to http://docs.citrix.com/zh-cn/netscaler/11/system/audit-logging/configuring-audit-logging.html
The NetScaler appliance sends malformed HTTP headers to the server if insertion of the client address is configured on a service in a non-default traffic domain (TD).[From Build 53.13] [# 675352]
If there is a delay in processing the user's authentication, which can happen from the two known causes detailed below, then a user can repeatedly press the Login button and cause multiple logins to process. The second and subsequent login requests, when using OTP, will fail due to processing the same token, which causes authentication failures. Also, depending on your OTP policies, this can lockout the user's OTP token and cause further authentication denials. Finally, there is a bug in NetScaler 11.1 that can affect this as well.Known cause 1)There is an issue with LDAP over SSL that causes the handshake for LDAP over SSL to be a Blocking call for the AAA process. This means that the AAA system can no longer process ANY requests for ANY user until the SSL Handshake with LDAP completes. This can lead to authentication delays, which can cause a user to be able to repeatedly click the Login button. NetScaler 11.1 Build 41.1 and newer have this fixed. There are plans to back-port the fix to 11.0 but no ETA as of May 2017.Known cause 2)If a Radius server delays in responding to an authentication request, there will be a delay at the login page which allows the user to click the Login button multiple times.Known cause 3)In 11.1, there is a Bug with AppFlow that results in closing the AAAd connection and eventually also the client side connection. Due to abrupt closure, the WebUI resends the post again. This counter confirm this: aaa_force_drop_data, aaa_tot_term_linkNote that you may also experience crashes or login stuck at cgi/login blank page from this bug.
This is a known issue with issue ID 683171.
SNIP was active in HA on the SecondaryMost likely, the SNIP was configured on both devices before creating the HA pair.
Secure Mail sync over a STA connection does not function properly with NetScaler 12.0 Build 41.16
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The packet was being dropped in the packet engine when an internal call was made by the AAAD module of the NetScaler with Appflow enabled.This was triggerred only for users with a large number of group memberships as the packet size exceeds the default MSS of 1460.
This is a Know issue on 11.1 49.16 And it is Recorded Internally
Root cause:
The gslb_tot_mep_ldns_entries_received counter gets incremented indicating that MEP is UP and local site is receiving ldns entries from other sites.
One of the conditions leading to this issue is that at-least one out of multiple sites would be down and typically all svcs for this site are up as corresponding monitors are up
One of these svc from the remote down site is bound to the vserver on local site doing RR LB instead of configured RTT LB
vsvr_gslb_rr_contribs counter gets incremented to non-zero value on the vserver on local site doing RR LB instead of configured RTT LB. This represents the number of services that are contributing towards deferred Round Robin LB due to MEP failure. Hence services equal to counter increment value would impact the vserver thereby not allowing the vserver to apply the configured RTT LB method and to fall back to RR LB.
The short term remedy is to disable these svcs from remote down site on the local site where vserver is falling back to RR LB
Subversion (SVN) tries to replicate HTTP traffic, but is a different protocol from HTTP.The Load Balancer that was being used, had the Protocol set to HTTP
https://docs.citrix.com/en-us/netscaler/12/load-balancing.html
We enable Auto-key setting on the NS (any n/w appliance trying to sync with the NTP server ) when the same is supported on the NTP server .There is a mutual exchange of key in between the NetScaler and the NTP server .
When checking the configuration further the NSIP the customer had configured was the last address in the subnet - the broadcast address. Due to this the packet engine crashed on startup as this breaks IPv4 subnetting rules/logic.
Know issues#675983
It is a Regression on 10.0 and 10.1 Builds
CTX113250 - Required Ports for Citrix NetScaler Gateway in DMZ SetupCTX101810 - Communication Ports Used by Citrix Technologies
The behavior seen is expected as per the current design. The Netscaler is not parsing the CONNECT Request and simply forwarding the Request to the Origin Server, and this is more specific to advance Policy Engine. For a Classic Policy Engine we see no such Restriction.
SAML authentication is failing due to invalid field format in SAML assertion. NetScaler is acting as IDP and SP is PingFederateWhen sending custom attributes from SAML IDP, we send xmlns for xsi and xsi='xs:string' to specify the attribute type. However, PingFederate complains that "xs" is undefined.Testing internally, "xs" was always getting removed during canonicalization when tested with sharefile and samltool.com.So, we are now removing xsi xmlns from attribute definition as SAML 2.0 spec does not mandate sending it. It says -'IdP MAY send it'.Tested with sharefile, NS SP, and samltool.com
Set Cookie sent by the Backend Server is not Included in the Response from NetScaler to the Client .From the Above Behaviour the Page does not Render and Results in Server Error .
The Below Request Sent from Server to NetScaler where the Set-Cookie Header is Present .The Below Response From NetScaler to the Client Where the Set-Cookie is not Included in the Response .
The backend server is returning several segments for the requested file for download.These segments are adding up to a size larger than what is specified in the Content-Length header.The NetScaler then drops this response with a reset code of 9217
It's a cosmetic Bug only GUI is affected and the configuration can be performed via Command Line Interface.
This is due to the created themes missing javascript and json files in their directories for early builds of NS11.1:Left: Theme Created on 11.1 49.16 & Right: Theme created on 11.1 52.13
CTX221693 - What is the difference between Negotiate and NTLM authentication?CTX221696 - How does the NetScaler use Kerberos for Single Sign On?CTX222453 - How to Configure the NetScaler for Kerberos ImpersonationCTX222386 - How does Negotiate authentication work on an AAA-TM vServer for Internal Clients?CTX222568 - How does Negotiate authentication work on an AAA-TM vServer for External Clients?CTX222443 - How does Client Certificate Authentication work with KCD Single Sign On?CTX222444 - How does LDAP Authentication work with Kerberos Impersonation SSO?
CTX221693 - What is the difference between Negotiate and NTLM authentication?CTX221696 - How does the NetScaler use Kerberos for Single Sign On?CTX222454 - How to Configure the NetScaler for Kerberos Constrained DelegationCTX222386 - How does Negotiate authentication work on an AAA-TM vServer for Internal Clients?CTX222568 - How does Negotiate authentication work on an AAA-TM vServer for External Clients?CTX222443 - How does Client Certificate Authentication work with KCD Single Sign On?CTX222444 - How does LDAP Authentication work with Kerberos Impersonation SSO?
LDAP server certificate configuration is necessary
https://support.citrix.com/article/CTX138663
The Device Cert Authentication Fails with Green Bubble theme because of the fact that we do not retain the NSC_EPAC Cookie since the above 2 request results in a 302 Redirect from the NetScaler which eventually resets the NSC_EPAC Cookie  as shown below. GET /media/Screen_shadow_top.png HTTP/1.1Host: FQDNUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:28.0) Gecko/20100101 Firefox/28.0Accept: image/png,image/*;q=0.8,*/*;q=0.5Accept-Language: en-US,en;q=0.5Accept-Encoding: gzip, deflateReferer: https://fqdnCookie: NSC_EPAC=a9e4ea61badd278b6fd18837c7ba87cdConnection: keep-alive   HTTP/1.1 302 Object MovedLocation: /vpn/index.htmlSet-Cookie:NSC_EPAC=xyz;Path=/;expires=Wednesday, 09-Nov-1999 23:12:40 GMT;SecureSet-Cookie:NSC_FSRD=xyz;Secure;HttpOnly;Path=/;expires=Wednesday, 09-Nov-1999 23:12:40 GMTConnection: closeContent-Length:534Cache-control: no-cache, no-storePragma: no-cacheContent-Type: text/html <html><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"><script type="text/javascript" src="/vpn/resources.js"></script><script type="text/javascript" language="javascript">var Resources = new ResourceManager("/vpn/resources/{lang}", "REDIRECTION_BODY");</script></head><body><span id="This object may be found "></span><a href="/vpn/index.html"><span id="here"></span></a><span id="Trailing phrase after here"></span><script type="text/javascript" language="javascript">Resources.Load();</script></body></html>  GET /media/Screen_shadow_bottom.png HTTP/1.1Host: fqdnUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:28.0) Gecko/20100101 Firefox/28.0Accept: image/png,image/*;q=0.8,*/*;q=0.5Accept-Language: en-US,en;q=0.5Accept-Encoding: gzip, deflateReferer: https://fqdnCookie: NSC_EPAC=a9e4ea61badd278b6fd18837c7ba87cdConnection: keep-alive   HTTP/1.1 302 Object MovedLocation: /vpn/index.htmlSet-Cookie:NSC_EPAC=xyz;Path=/;expires=Wednesday, 09-Nov-1999 23:12:40 GMT;SecureSet-Cookie:NSC_FSRD=xyz;Secure;HttpOnly;Path=/;expires=Wednesday, 09-Nov-1999 23:12:40 GMTConnection: closeContent-Length:534Cache-control: no-cache, no-storePragma: no-cacheContent-Type: text/html <html><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"><script type="text/javascript" src="/vpn/resources.js"></script><script type="text/javascript" language="javascript">var Resources = new ResourceManager("/vpn/resources/{lang}", "REDIRECTION_BODY");</script></head><body><span id="This object may be found "></span><a href="/vpn/index.html"><span id="here"></span></a><span id="Trailing phrase after here"></span><script type="text/javascript" language="javascript">Resources.Load();</script></body></html> Since there is no NSC_EPAC Cookie in the subsequent request NetScaler Provides a new Cookie and expects the device cert to be sent again but we never do the device cert authentication again and use the new cookie in the POST /cgi/login request which results in 403 forbidden error as shown below. POST /cgi/login HTTP/1.1Host: fqdnUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:28.0) Gecko/20100101 Firefox/28.0Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8Accept-Language: en-US,en;q=0.5Accept-Encoding: gzip, deflateReferer: https://fqdnCookie: NSC_EPAC=460bf477eb6a5abcefba8120dda987cdConnection: keep-aliveContent-Type: application/x-www-form-urlencodedContent-Length: 28login=user&passwd=passwd  HTTP/1.1 403 Access ForbiddenConnection: closeContent-Length: 29Content-Type: text/htmlCache-Control: no-cache,no-storePragma: no-cache Error: Not a privileged User.
https://docs.citrix.com/en-us/netscaler-gateway/10-1/ng-configuration-mgmt-wrapper-con/ng-authen-authoriz-wrapper-con/ng-authorize-config-con/ng-authorize-radius-group-extraction-con.html
Issue was found in one of the functions used to store / duplicate password strings in a structure used by authentication module.When using that function and later encrypting given password, the resultant encrypted string sometimes contained a pattern that caused some bytes of the password not copied, and resulted in wrong string passed into internal ldap password change function.
https://support.citrix.com/article/CTX116431https://docs.citrix.com/en-us/netscaler/11/traffic-management/ssl/config-client-auth.htmlhttps://docs.citrix.com/en-us/netscaler/11/traffic-management/ssl/config-ssl-actions-policies.html
https://docs.citrix.com/en-us/netscaler/11-1/aaa-tm/saml-authentication/netscaler-saml-idp.htmlhttps://docs.citrix.com/en-us/netscaler/11-1/aaa-tm/saml-authentication/netscaler-saml-sp.html
When no SSL Chip is Assigned to VPX , The Hashing and Encryption Algorithm advertised by the NetScaler in the certificate request message is SHA-256 and RSA Respectively .As a Result of the above , If the client certificate uses a lower Encryption and Hashing Algorithm , the client sends a certificate message with a empty payload resulting in Connection RST from the NetScaler .When SSL Chip is Assigned , Then NetScaler Advertises SHA256 RSA as well as SHA128 RSA
Working Capture : When SSL Chip is Assigned .
In the Certificate Request Message . NetScaler is All 4 Hashing and Encryption Algorithms Which include SHA1 RSA , SHA256 RSA and couple of other .In the Subsequent Response From the Client Certificate Message . The Client is Selecting SHA1 RSA .
Server Requesting for Certificate :Client Response with the Certificate :Non Working Capture : When SSL Chip is Not Assigned .
In the Certificate Request Message . NetScaler is Sending Hashing and Encryption Algorithms Which include SHA2 RSA only Which is by Design with VPX Hosted on SDX .In the Subsequent Response From the Client Certificate Message . The Client is Communicating only with SHA1 RSA . It is Sending 0 bytes since the Algorithm is Not supported by the Client .
Server Requesting for Certificate :Client Response with the Certificate :
Null Route option turns out to be “YES “unintentionally ,by upgrading from NS10.1build 129.11 to NS11.1 build 51.21. We don't have a null route in the Command line.
The Request-Range header is also exploitable by this CVE. It too can be mitigated in the same manner by replacing “range” with “Range-Request”.
the Java Compatibility problem causes this.
GSLB Metric Exchange Protocol between appliance pairs uses TCP 3009 and 3011however GSLB Configuration Sync uses TCP 22 3008 or 3010, we need to open one of these 3 ports such as SSH(22).
For instructions on configuring LDAP groups on the NetScaler for management purposes, refer to https://support.citrix.com/article/CTX123782Configuring Users, User Groups and Command Policies: https://docs.citrix.com/en-us/netscaler/11/system/ns-ag-aa-intro-wrapper-con/ns-ag-aa-config-users-and-grps-tsk.html
The issue is due to a defect in some builds of NetScaler where SSL handshake fails if a client hello message includes an ECC extension but the NetScaler appliance does not support any of the ECDHE ciphers in the cipher list sent by the client. The handshake fails even if the list contains some non-ECDHE ciphers that are supported.
Receiver for Windows 4.7, Receiver for Mac 12.5, Receiver for Android 3.12.2/3.12.3 and Receiver for Linux 13.6 introduce these ECDHE ciphers which trigger this defect.
TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 andTLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
Feature was temporarily removed from versions of Netscaler code.
The user does NOT have permission to access the requested resource. Where the Admin bind Request will Result in Failure with Invalid user Credentials .
NetScaler holds the ApplicationData in its memory , If SSL Handshake is in ReNegotiation State .Due to the above scenario while uploading files , NetScaler per Connection Basis can hold only upto 65k Bytes , As a result if file size is Greater than 65k NetScaler will run out its TCP Window and advertises Zero window to the Client which results in File Upload Stall .
http://discussions.citrix.com/topic/349006-delete-a-portion-of-a-path-rewite/
NetScaler does not detect double encoded cross site scripting by default. It needs command nsapimgr_wr.sh -ys appfw_perc_decode_recursively=1 to be added.Note: The nsapimgr does not persist a system restart, for this reason it has to be added to netscaler /nsconfig/rc.netscaler file.In addition to the above, in this use case the reason why we are not blocking the request which are having the double encoding form of the “prompt()” and “whscheck()” is that these patterns needs to be explicitly ( not available in default ) added under the AppFirewall signature xss/denied/pattern list.
Signing Private Key on Mac needs Access Control set to "Allow all applications to access this item".
To Disable NTLM V2 we can tweak the value using the command nsapimgr_wr.sh -ys sso_enable_ntlmv2=0 from shell . This will Disable NTLM V2 on NetScaler and only use NTLM V1 .    There is no way to select NTLM version credentials on the NetScaler config .NTLM tweak to persist reboot:	echo "/netscaler/nsapimgr_wr.sh -ys sso_enable_ntlmv2=0" >> /nsconfig/nsafter.shThe nsapimgr command is forcing the netscaler to send a NTLMv1 Type 1 Message, but due to the presence of Negotiate Target Info flag in the Type 2 Message from the Server we are sending NTLMV2 Response which is as per the NTLM spec. Below is the explanation for same  0x00800000    Negotiate Target Info           Sent by the server in the Type 2 message to indicate that it is including a Target Information block in the message. The Target Information block is used in the calculation of the NTLMv2 response.        	   Detailed Information on NTLM @  http://davenport.sourceforge.net/ntlm.html 	We will need  to make sure the server is not sending this flag if it supports only NTLMv1.
Server Response with Negotiate Target Info Flag bit Set Netscaler Responding with NTLM V2 Since the Server is Initiating on V2
PFS ciphers are more CPU intensive on servers because fresh keys are used for each handshake. Moreover, common SSL chips which are used in most of the SSL acceleration products are tuned to accelerate RSA computation but not ECC computation. This leads to low output from such SSL chips.
Older models of NetScaler have low ECDHE TPS numbers because there are less number of SSL chips in them. Also, old SSL chips were not designed to compute ECC.
Loss of heartbeats on VPX HA on Hyper-V
For NO Auth : https://support.citrix.com/article/CTX222713Entrust_AM is the name of Action type which is configured under Radius setting. Still for more information below :https://en.wikipedia.org/wiki/Entrust
Summary: There are few Modules in Netscaler(Appflow, Appfw) which need Uncompressed Responses hence we either Delete or Corrupt Accept-Encoding header coming from the Client and Add “Accept-Encoding: identity”. The AppFw needs to see the data uncompressed as it does response side parsing of HTML, XML, JavaScript, CSS etc. If Netscaler receives a compressed data then it has to first decompress the data, perform the inspection and then compress the data, this adds to a lot of processing overhead on Netscaler. To avoid the overhead of processing, we disable compression on the request side so the AppFw module can inspect and Compress the data. Now Coming to the problem of not compressing the data in this case is because of the presence of “Cache-Control: public, no-transform” directive which according to RFC2616 dictates not to transform the response-entity as explained below. 14.9.5 No-Transform Directive    no-transform      Implementors of intermediate caches (proxies) have found it useful      to convert the media type of certain entity bodies. A non-      transparent proxy might, for example, convert between image      formats in order to save cache space or to reduce the amount of      traffic on a slow link.       Serious operational problems occur, however, when these      transformations are applied to entity bodies intended for certain      kinds of applications. For example, applications for medical      imaging, scientific data analysis and those using end-to-end      authentication, all depend on receiving an entity body that is bit      for bit identical to the original entity-body.       Therefore, if a message includes the no-transform directive, an      intermediate cache or proxy MUST NOT change those headers that are      listed in section 13.5.2 as being subject to the no-transform      directive. This implies that the cache or proxy MUST NOT change      any aspect of the entity-body that is specified by these headers,      including the value of the entity-body itself.Analysis:
GET /assets/js/extra/jquery-1.10.2.js HTTP/1.1
Accept: */*
User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 10_2 like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Version/10.0 Mobile/14C92 Safari/602.1
Accept-Language: en-gb
Referer: http://www.abc.com/string/204-32/result
True-Client-IP: 203.x.x.x
Pragma: no-cache
Akamai-Device: smartphone
X-Akamai-CONFIG-LOG-DETAIL: true
TE:  chunked;q=1.0
Connection: TE
Akamai-Origin-Hop: 2
Via: 1.1 v1-akamaitech.net(ghost) (AkamaiGHost), 1.1 akamai.net(ghost) (AkamaiGHost)
X-Forwarded-For: 203.x.x.x, 125.x.x.x
Host: www.abc.com
Cache-Control: no-cache, max-age=0
Connection: keep-alive
X-forwarded-for: 173.x.x.x
Accept-Encoding: identity

HTTP/1.1 200 OK
Date: Tue, 31 Jan 2017 09:00:29 GMT
Server: Apache
Accept-Ranges: bytes
Content-Length: 93104
Vary: Accept-Encoding
Cache-Control: public, no-transform             // Because of the presence of no-transform we bypass compression though we hit the policy for compression.
Expires: Thu, 02 Mar 2017 09:00:29 GMT
Connection: close
Content-Type: application/javascript
Wrong backplane interface set when adding the new node
Issue with the way that the diff command interprets the data between the running and saved. When using the command
diff ns config savedConfig runningConfig -outtype CLI
Both the running and saved config contains information in relation to the partitions
the running configuration will have addition options added such as
partitionIDpartitionMAC
When this is compared to the running.
This will cause the diff command to flag these lines as showing a difference and hence show a false positive.
Use Case: Efficient load balancing for dynamic URLs
Here is an example of URL which goes through the CDN network and adds up tokens generated dynamically on the path. Thus the object may remain same but URLs would look different and would confuse the classic URL hash based LB algorithms.
Request1:
http://v22.nonxt1.c.youtube.com/videoplayback?ip=0.0.0.0&sparams=id%2Cexpire%2Cip%2Cipbits%2Citag%2Calgorithm%2Cburst%2Cfactor%2Coc%&ipbits=0&burst=40&sver=3&expire=169728675840&key=yt1&factor=1.25&id=106b536e54d1d185&redirect_counter=1
Request2:
http://v22.nonxt1.c.youtube.com/videoplayback?ip=10.10.0.1&id=106b536e54d1d185&sparams=id%2Cexpire%2Cip%2Cipbits%2Citag%2Calgorithm%2Cburst%2Cfactor%2Coc%&ipbits=0&burst=40&sver=3&expire=1294587600&%2Cexpire%2Cip%2Cipbits%2Citag%2Calgorithm%2Cburst%2Cfactor%2Coc%&key=yt1&factor=1.25&redirect_counter=1
Request3:
http://v22.nonxt1.c.youtube.com/videoplayback?ip=10.10.0.1&sparams=id%2Cexpire%2Cip%2Cipbits%2Citag%2Calgorithm%2Cburst%2Cfactor%2Coc%&id=106b536e54d1d185&ipbits=0&burst=40&sver=3&expire=1272387600&key=yt3&factor=1.25&redirect_counter=1Note that all the 3 dynamic requests are requesting for the same object with id=106b536e54d1d185.>> As can be seen with above example, at times the URL Hash LB Method might not be able to generate the same unique Hash Value for all the three requests requesting for the same YouTube video with id=106b536e54d1d185.>> This Method with the different Hash values for all the above mentioned requests will end up directing the requests to different back end servers. Which is undesirable, as these requests should be directed to the same backend server.>> To counter this, a need to extract only the relevant data from the request for identifying unique object requested arises.>> With the below mentioned rule configured on NetScaler, based on the values of the “id=”, the Token LB Method configured on NetScaler, we can extract the relevant data i.e. id=106b536e54d1d185 in this case.HTTP.REQ.URL.QUERY.VALUE(“id”)>> This expression will direct the requests to the same back end server using the Token Load Balancing Method
When you configure a Radius Action or Server, you have to specify a port used for communication. Whatever port you use there will be used by defualt for all the Radius related messages.
Change in IE User-Agent string.
Traces
Access https://basic.nw.lab from client over NetScaler.
NetScaler tries to access the webserver and gets an 401 Unauthorized response.
on the LBV configured, the authentication triggers and NetScaler sends a redirect to the login page.
Client initiates logout with "GET /logout.html"
Traffic Policy triggers and NetScaler expires the session cookies.
Huge spike of traffic on Loopback interface, LO/1, which is caused by a looping DNS packet detined to port 53
Even though you have alternative UPN suffix it is a feature of AD but the real Kerberos principal name will still be samAccountName. So you can map an alternate UPN to the user in AD and get the Kerberos delegation work. But your User logon name attribute and samAccountName (User logon name pre-windows 2000) must match. If you have a domain “example.com” and then an alternative suffix of “example.net” then you can mentioned the domain “example.com” as your realm and then change the UPN suffix for user to “example.net” and it will work. What happens during the Kerberos SSO is that NS will append the realm “example.com” to the user and then get a TGT and TGS from the delegated user account.  I have a user named “test” who has an alternative suffix “example.net” for which front end authentication is LDAP  and I can see the below in aaa debug :  receive_ldap_bind_event User name: dirty = <test@example.net> sanitized = <test@example.net>ns_ldap_search Searching for <<(& (userPrincipalName=test@example.net) (objectClass=*))>> from base <<dc=example,dc=com>>receive_ldap_user_search_event received LDAP_OKreceive_ldap_user_search_event User DN= <<CN=test 1,CN=Users,DC=example,DC=com>>extract_ldap_attribute retrieved userPrincipalName value test@example.net for test@example.netsend_accept sending accept to kernel for : test@example.net  Then later when Kerberos SSO happens in the backend I see :  ns_process_kcd_req username is testns_process_kcd_req realm is EXAMPLE.COMns_process_kcd_req svc is sf.example.com ns_process_kcd_req delegated_user len is 10 value is deligatorns_process_kcd_req user non-enterprise username test@EXAMPLE.COM    >> Here we are appending the realm configured in KCD account settings to the username ns_process_kcd_req tgt ticket cachename is /var/krb/tgt_deligator_EXAMPLE.COMns_process_kcd_req delegated cachename is /var/krb/s4u_test_EXAMPLE.COM_deligator_EXAMPLE.COMns_process_kcd_req tgs cachename is /var/krb/tgs_test_EXAMPLE.COM_sf.example.com_EXAMPLE.COMs4u_test_EXAMPLE.COM_deligator_EXAMPLE.COM does not contain ticket for deligator@EXAMPLE.COMns_kgetcred krb5_get_creds returned 0, svcname deligator@EXAMPLE.COM, impersonate str test@EXAMPLE.COM, deleg NULL outcache /var/krb/s4u_test_EXAMPLE.COM_deligator_EXAMPLE.COMns_kgetcred successfully written credentials to cache file /var/krb/s4u_test_EXAMPLE.COM_deligator_EXAMPLE.COMns_process_kcd_req service name for s4u2proxy is HTTP/sf.example.com@EXAMPLE.COMns_kgetcred krb5_get_creds returned 0, svcname HTTP/sf.example.com@EXAMPLE.COM, impersonate str NULL, deleg /var/krb/s4u_test_EXAMPLE.COM_deligator_ EXAMPLE.COM outcache /var/krb/tgs_test_EXAMPLE.COM_sf.example.com_ EXAMPLE.COMns_serialize_creds client name in creds: test@EXAMPLE.COMns_serialize_creds server name in creds:len 25 HTTP/sf.example.com@EXAMPLE.COM
Netscaler Not storing credentials in iprep DB, getting from PE every time.
https://docs.citrix.com/en-us/netscaler/10-5/ns-tmg-wrapper-10-con/ns-ssl-wrapper-con-10/ns-ssl-monitor-cert-status-with-ocsp-con.html
Troubleshooting
When you try to log on with a user who has an expired password, NetScaler Gateway will present a prompt for changing password. This will be part of path https://FQDN/cgi/login.
During aaad.debug you might notice a message logged in different formats but that will have a code 773 as part of it, this code is the way that LDAP mentions the password must be changed. The following are two examples on how these messages might appear:
Example 1: ns_show_ldap_err_string LDAP error string: <<80090308: LdapErr: DSID-0C0903C5, comment: AcceptSecurityContext error, data 773, v2580>>
Example 2: receive_ldap_user_search_event expired AD password detected delaying update until user bind sends dos code 0x773
All logs related to real-time sync are stored in the /var/netscaler/gslb/periodic_sync.log file. Partitioning has no effect on enabling AutomaticConfigSync from the default partition. However, this parameter can be enabled from all other partitions.
Citrix Documentation - Handle Multiple NITRO Calls in a Single Request
DNS on AWS not working
This was an issue with the Microsoft App's Webview in iOS9.x which failed to load java plugins. No Workaround  available from NetScaler side to address this client side issue.
We do not support downgrade of aslearn data as schema of later release would be incompatible with the earlier release.
The Monitor Details showed that "Time out during SSL handshake stage"It was determined later that the Blue Coat proxy was configured on HTTP only and not SSL.When we keep the Secure tab on the monitor checked, the NetScaler would initiate the SSL handshake to the bound service.The Blue Coat proxy, however, in this case would never respond to the request since it is not configured to allow SSL connection.Configuration when the monitiorng was failing:add lb monitor Proxy_Monitor HTTP-ECV -customHeaders "Host: www.citrix.com\r\nCache-control: no-cache\r\n" -send "GET http://www.citrix.com/" -recv 200 -LRTM ENABLED -interval 30 -secure YES
http://support.citrix.com/article/CTX129631
The NetScaler would by default send the credentials out of the last Login Schema. In this case, since the Radius is the second factor authentication, so the credentials posted by the NetScaler to achieve the Single Sign On (SSO) would be through the Login Schema to which the Radius Authentication Policy is bound.
The analysis showed that the Internet Explorer was not sending the NSC_TASS cookie after the NetScaler issued the cookie to the client.We were able to see the same in the ns.log as well on the NetScaler.Oct  4 14:58:08 <local0.err> 172.28.210.29 10/04/2016:12:58:08 GMT VPX29 0-PPE-0 : default AAATM Message 142906 0 :  "AAATM LOGIN: TASS cookie absent, declaring failure"
"internaluserlogin" parameter is disabled on the NetScaler which makes Netscaler to unable to communicate with itself and also prevented file synchronization between the HA pairs.
This issue will happen when we forget to turn off previous running tcpdump and then trying to start again not knowing that nstcpdump is already running.
The database learning limit is reached as mentioned in below link:"The learning database is limited to 20 MB in size, which is reached after approximately 2,000 learned rules or relaxations are generated per security check for which learning is enabled​"https://docs.citrix.com/en-us/netscaler/11-1/application-firewall/profiles/learning.html
If the user authrnticates using “sAMAccountName”, Netscaler sends only username suffix without sending domain which is expected. Here’s how it works!User enters domain\username in netscaler login pageNetscaler uses username and domain that user entered during NTLM SSOUser enters sAMAccountNameNetscaler uses only username in NTLM. It picks domain from type2 of the server. If server does not send anything, it uses default NETSCALERIf user enters UPN, netscaler uses UPN with empty domain field.
The Issue is with Windows Phone receiver 1.2.2 not handling HTTP 302/301 redirects
Tested the database files in lab and able to see the problem with the new database. The reason this is not working is because in the new DB(GeoIP-142_20150804), the ISP entry's length exceeds 32."213.x.x.0","213.y.y.255","TR","Example1 Example1 example3 net"
In the older DB, GeoIP-142_20140401, the entry for the same is:"213.x.x.0","213.y.y.255","TR","Example1 Example1 example3 org"
Further we tried the Responder policy with new DB GeoIP-142_20150804, for entries where this length doesn't exceed 32, and that is working fine.
As of now ISP string length to maximum 32 bytes only is supported. We need to modify entries which have length more than 32 bytes/characters.
Use of VMACs on NetScaler VPX causes logical loop on XenServer.
The database for the Application Firewall profile was corrupted due to which aslearn module was unable to connect to it and retrieve the data.
Oct  6 09:14:27 <local0.info> XXX.0.0.2 10/06/2015:07:14:27 GMT VPXExtProd01 0-PPE-0 : default GUI CMD_EXECUTED 1670370 0 :  User John Doe - Remote_ip XXX.19.XXX.XXX - Command "show appfw learningdata WebPub_vs_af_1 startURL" - Status "ERROR: Communication error with aslearn"
When we edit the webinterface configuration file we will have to restart the tomcat otherwise the file will be corrupted. Also it is recommended to make the edits from the CLI.
The users must be missing from 'users' table, but present in other tables. The workaround is to manually delete entries from the database for the problem users.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
If Command center version 5.2 Build 45.4 or lower is used to monitor the SDX appliance, then that can leave the residue backup files on SDX causing the /var to get full.
While Configuring the Cisco ACS for TACACS+ Authentication and Authorization Using Aritcle https://support.citrix.com/article/CTX113820In the NetScaler Configuration we add the TACACS server IP and authentication and authorization is done through TACACS server. When any user will execute the 'show run' command after getting authentication from TACACS server , we see the huge logs getting generated for each and every command on TACACS server which runs under show run output.
Screenshot: Cause:When each and every command gets executed while running show run command on NetScaler , plenty of other show run commands also get executed and we are able to find huge logs on the TACACS server logs which consumes huge memory while logging the commands.
Slow output is observed if, rbaOnResponse is enabled. This is because, if rbaOnResponse is enabled, each entity of the output/response of the command is sent to the external auth server for authorization, and if it is authorized, we display the output on CLI else it moves to the next entity. The slowness is introduced due to the latency of the external authentication server.
same instance IP being used by another entity.
When NetScaler configure OCSP responder url, it does resolve that url once and use resolved ip for all following operations. When DNS changes that ip for given url, NetScaler doesn’t update it’s entry as it is not doing poling or monitoring for that url or ip.
Customer was using centralized DNS providers such as Google DNS which can result in LDNS servers which aren't geographically close to the client. GSLB static proximity makes a decision based on the LDNS IP so for example, a client in APAC could be given a LDNS server close to the US which results in GSLB handing out a US data center versus an APAC one.
CTX116748 - How to Set Up a High Availability Pair on NetScaler.CTX127455 - How to Upgrade Software on NetScaler Appliances in High Availability SetupCTX126793 - Best Practices for Upgrading NetScaler or NetScaler Gateway AppliancesCitrix Documentation - Backing up and Restoring the NetScaler Appliance
Unable to resolve DNS entriesDNS servers showing downresolv.conf files missing amazon DNS
CTX125798 -  The SNI Feature of NetScaler Appliance
Netscaler configured with APPFW Profile for XML Protection with Blocking Enabled for Web Service Interoperatibility blocks Requests or Responses which do not adhere to Namespace values.Log message BP1201 validates that "Message body should be a soap:envelope with namespace".https://docs.citrix.com/en-us/netscaler/11-1/application-firewall/xml-protections/xml-webservice-interoperability-check.htmlNetscaler allows only 2 type of namespace values with XML Protection.http://schemas.xmlsoap.org/soap/envelope/http://www.w3.org/2003/05/soap-envelope
Memory problem
The Admin account had expired due to which the login for the actual user was also failing.The Administrator account is bound before the actual user bind occurs while authenticating a user through LDAP.
The reason is that with Free BSD version 8.2 and later fsck needs an entry in fstab to determine the filesystem type.
SCSI drive selected on the deployment
SalesForce as the Service Provider expects InResponseTo as empty for IDP-init Browser POST Profile
NetScaler does not support signing entire SAML Response until version 11.1
LDAP server configured with Plaintext so no option for "Allow Password Change"
https://docs.citrix.com/en-us/netscaler/10-1/ns-appexpert-con-10/ns-responder-wrapper-con/ns-resp-sett-default-act-tsk.html
Insight Center does not display does not Display HDX Data, as time zone was misconfigured on Insight Center.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Few things to keep in mind regarding memory leak issues:
If you suspect a memory leak on your NetScaler (steady increase to high memory, ~60% utilization), the immediate workaround is to force an ha failover to the Secondary appliance.The previous Primary appliance with the affected memory leak should still have HIGH memory.  The leaked memory does not free even if the NetScaler is in Secondary mode.The only way to free the 'leaked' memory is to reboot the affected appliance. Ensure to save configuration before rebooting.
RPC node Password Mismatch.
The Service Group/Service had multiple monitor bindings. Along with this, the Monitor Threshold was a non-zero value.
Hence even though 1 monitor went down, the other monitors were still up, and the sum of the weights of the monitor was more than the monitor threshold value.
Since the sum of weights of monitor was greater than the threshold value, the service was never marked DOWN.
Refer to "NetScaler: How Do I?" page for more easy to implement articles on commonly used features of NetScaler.
There is a known issue in Command Center, because of which backup files are piled up under /var in SVM.
SVM becomes unreachable as the svmd services were not able to start because the file system is full.
Private Key Format
Wireshark can decrypt SSL traffic provided that you have the private key. The private key has to be in a decrypted PKCS#8 PEM format (RSA). You can open and verify the key file. If it is in binary, then it is likely to be in a DER format, which cannot be used with Wireshark.
You can use OpenSSL to convert the key. For example, converting a PKCS#8 DER key to a decrypted PKCS#8 PEM format (RSA) key.
At the $ prompt enter the following command:openssl pkcs8 -nocrypt -in der.key -informat DER -out pem.key -outformat PEM
Where:der.key is the file name and path to the DER key file.pem.key is the file name and path to the PEM key file output.
The decrypted PKCS#8 PEM format (RSA) key must be similar to the following screen shot:
Notice that the key begins with:-----BEGIN RSA PRIVATE KEY-----
If it begins with:-----BEGIN ENCRYPTED PRIVATE KEY-----
Then the key is encrypted and needs to be decrypted with the right passphrase. You can again use OpenSSL to do this.
At the $ prompt, issue the following command: openssl rsa
If you issue this command without arguments, you are prompted as follows: read RSA key
Type the name of the key file to be decrypted.	You can type the openssl rsa command with arguments if you know the name of the private key and the decrypted PEM file.	For example, if the private key filename is myprivkey.pvk and the decrypted filename is keyout.pem, the command is: openssl rsa –in myprivkeypvk -out keyout.pem
Helpful Links
CTX232735 - How to Ensure NetScaler Traces will DecryptDownload WiresharkWireshark SSL WikiWireshark - Display Filter Reference: Secure Sockets LayerOpenSSL - RSA DocumentationSourceForge - GnuWin
Citrix Documentation - Rate Limiting on NetScalerCTX128992 - How to Configure the Responder Feature to Display User Specific Messages when Rate Limit for Active Connections Exceeds on a NetScaler ApplianceCTX138964 - FAQ: Limiting Bandwidth Using Rate Limiting on a NetScaler Appliance
Using newslog event to confirm that VPX has scheduling issues
Check the failover event in the /var/nslog/newnslog*.nsconmsg -K newnslog -d event | grep -E "node|heartbeat" | more
Here is an example of what is seen for an HA failover due to missed HA heartbeats.
Primary Device:
(The Primary device is now Secondary due to the Secondary device not receiving HA heartbeats)
2077  7537 PPE-0 self node 192.168.1.10: INIT due to REQUEST from HA peer node Tue Jul 26 10:20:25 2016
2062     0 PPE-1 self node 192.168.1.10: INIT due to REQUEST from HA peer node Tue Jul 26 10:20:25 2016
2064     0 PPE-2 self node 192.168.1.10: INIT due to REQUEST from HA peer node Tue Jul 26 10:20:25 2016
2085     0 PPE-2 self node 192.168.1.10: Secondary      Tue Jul 26 10:20:25 2016
Secondary Device:
(This Secondary Device did not miss the required HA heartbeats causing an HA failover and now it's Primary)
2630  7529 PPE-0 interface(0/1): No HA heartbeats (Last received: Tue Jul 26 10:20:24 2016; Missed 15 heartbeats) Tue Jul 26 10:20:27 2016
2631     0 PPE-0 interface(1/1): No HA heartbeats (Last received: Tue Jul 26 10:20:24 2016; Missed 15 heartbeats) Tue Jul 26 10:20:27 2016
2632     0 PPE-0 interface(1/2): No HA heartbeats (Last received: Tue Jul 26 10:20:24 2016; Missed 15 heartbeats) Tue Jul 26 10:20:27 2016
2633     0 PPE-0 interface(1/3): No HA heartbeats (Last received: Tue Jul 26 10:20:24 2016; Missed 15 heartbeats) Tue Jul 26 10:20:27 2016
2634     0 PPE-0 remote node 192.168.1.10: DOWN         Tue Jul 26 10:20:27 2016
2635     0 PPE-0 self node 192.168.1.20: Claiming       Tue Jul 26 10:20:27 2016
2636     0 PPE-0 self node 192.168.1.20: Primary        Tue Jul 26 10:20:27 2016
Examining the netio_tot_called counter to confirm that VPX has scheduling issues
In the following logs we see that counter logging is stopped for few seconds on both VPXs during the HA failover, which means that the VPX Virtual Machine was scheduled out.
netio_tot_called - This is the number of times the function netio is called. This function is called every time NetScaler needs to start packet processing; ideally the gap should be seven (7) seconds.
Collector bundle for 192.168.1.10 - /var/nslog/
nsconmsg -g netio_tot_called -d current -K newnslog  -s time=26Jul2016:10:20 -s disptime=1 |more
Index   rtime totalcount-val      delta rate/sec symbol-name&device-no&time
0 3585223      287355050      56748     8105 netio_tot_called  Tue Jul 26 10:20:08 2016
1    7002      287381927      26877     3838 netio_tot_called  Tue Jul 26 10:20:15 2016
2    7002      287408841      26914     3843 netio_tot_called  Tue Jul 26 10:20:22 2016
3    7002      287554531      85636    12230 netio_tot_called  Tue Jul 26 10:20:34 2016   à Here we have a 12 second gap; ideally it should have been just 7 seconds
4    7002      287593240      38709     5528 netio_tot_called  Tue Jul 26 10:20:41 2016
5    7003      287621530      28290     4039 netio_tot_called  Tue Jul 26 10:20:48 2016
6    7003      287648373      26843     3833 netio_tot_called  Tue Jul 26 10:20:55 2016
7    7001      287676102      27729     3960 netio_tot_called  Tue Jul 26 10:21:02 2016
8    7004      287703248      27146     3875 netio_tot_called  Tue Jul 26 10:21:09 2016
9    7004      287730415      27167     3878 netio_tot_called  Tue Jul 26 10:21:16 2016
Collector bundle for 192.168.1.20 - /var/nslog/
nsconmsg -g netio_tot_called -d current -K newnslog  -s time=26Jul2016:10:20 -s disptime=1 |more
Index   rtime totalcount-val      delta rate/sec symbol-name&device-no&time
0  343090      246967167      26729     3817 netio_tot_called  Tue Jul 26 10:20:07 2016
1    7001      246994115      26948     3849 netio_tot_called  Tue Jul 26 10:20:14 2016
2    7003      247019658      25543     3647 netio_tot_called  Tue Jul 26 10:20:21 2016
3   12698      247055240      35582     2802 netio_tot_called  Tue Jul 26 10:20:33 2016   à Here is the 12 seconds gap
4    7012      247125542      70302    10025 netio_tot_called  Tue Jul 26 10:20:40 2016
5    7001      247200102      25784     3682 netio_tot_called  Tue Jul 26 10:20:55 2016
Examining the sys_cur_duration_since_start counter to confirm that VPX has scheduling issues
You can also verify this issue using sys_cur_duration_since_start counter which should also be updated every second and thus have a delta of seven (7) seconds in ideal case. If there is gaps in uptime reporting counter then it clearly indicates issue with lost CPU time.
9    7001   163.21:23:31          7        0 sys_cur_duration_sincestart  Mon Aug 14 13:32:12 2017
10   12201   163.21:23:43         12        0 sys_cur_duration_sincestart  Mon Aug 14 13:32:25 2017------Delta value more than 7
11    7002   163.21:23:50          7        0 sys_cur_duration_sincestart  Mon Aug 14 13:32:32 2017
Citrix Documentation - Managing High Availability Heartbeat Messages on a NetScaler Appliance
Citrix Documentation - Managing User Sessions
After replicating the issue in house Engineering team has confirmed that this is working as per design, SAN cert is not supported for WIonNS callback URL. since the WI code has been EOL’ed. We will not be able to take any new enhancements as we won’t be able to modify the WI code
Issue is seen only with Receiver for Mac which needs code level fix.
There was no xenserver IP configured due to which xenserver upgrade failed.
This issue is happening when the “Zebos.conf” file has the “redistribute trill” entry. We miss all the bgp entries followed by “redistribute trill” entry.
Xen prints a large amount of messages to the serial console when disabling boot CPUs, of the form "Broke affinity for irq" due to the large numbers of IRQs that Netscaler uses.
(XEN) [ 2543.038825] Broke affinity for irq 82
(XEN) [ 2543.038830] Broke affinity for irq 83
(XEN) [ 2543.038834] Broke affinity for irq 84
(XEN) [ 2543.038839] Broke affinity for irq 85
(XEN) [ 2543.038868] Broke affinity for irq 92
(XEN) [ 2548.000370] Watchdog timer detects that CPU0 is stuck!
(XEN) [ 2548.067966] ----[ Xen-4.4.1-xs116341  x86_64  debug=n  Not tainted ]----
(XEN) [ 2548.154287] CPU:    0
(XEN) [ 2548.187565] RIP:    e008:[<ffff82d08013f5a6>] ns_read_reg+0x16/0x50
(XEN) [ 2548.268681] RFLAGS: 0000000000000002   CONTEXT: hypervisor
(XEN) [ 2548.340439] rax: 0000000000000000   rbx: ffff82d0802e8e20   rcx: 0000000000000000
(XEN) [ 2548.436118] rdx: 00000000000003fd   rsi: 0000000000000005   rdi: ffff82d0802e8e20
(XEN) [ 2548.531794] rbp: ffff82d08026f75c   rsp: ffff82d0802c7e38   r8:  0000000000000000
(XEN) [ 2548.627471] r9:  0000000000000005   r10: 0000000000000004   r11: ffff82d080109930
(XEN) [ 2548.723149] r12: 0000000000000246   r13: ffff82d080308240   r14: 0000024fd9b20831
(XEN) [ 2548.818826] r15: ffff82d0802c7f18   cr0: 000000008005003b   cr4: 00000000001126f0
(XEN) [ 2548.914504] cr3: 000000007dc6d000   cr2: ffff880001bfdbc0
(XEN) [ 2548.985224] ds: 0000   es: 0000   fs: 0000   gs: 0000   ss: 0000   cs: e008
(XEN) [ 2549.074659] Xen stack trace from rsp=ffff82d0802c7e38:
(XEN) [ 2549.142259]    ffff82d08013f68d ffff82d08026f6e0 ffff82d08014142e 0000000000000000
(XEN) [ 2549.238977]    0000000000000005 ffff83007dd0e000 ffff82d0801a2925 0000000000000100
(XEN) [ 2549.335692]    ffff82d080308220 00000000802c7f18 ffff8304b1619010 ffff82d080308208
(XEN) [ 2549.432411]    ffff83007dd0e000 ffff82d080308240 0000024fd9b20831 ffff82d0802c7f18
(XEN) [ 2549.529128]    ffff82d080105996 ffff83007dd0e1b8 ffff82d0803082f0 0000000000000000
(XEN) [ 2549.625846]    ffff82d08012b6be ffff82d0803082d0 ffff82d08012b778 ffff82d0802c7f18
(XEN) [ 2549.722562]    ffff83007f3e3000 ffff83007f3e3000 ffff82d08016027f ffffffffffffffff
(XEN) [ 2549.819279]    0000000000000014 000000000000000f 0000000000000048 000000000000006f
(XEN) [ 2549.915998]    ffff8801eee399d8 ffff8801f080c400 0000000000000010 0000000000000001
(XEN) [ 2550.012715]    ffff8800000bfe12 0000000000000000 ffffffff81c32600 00000000ffffffff
(XEN) [ 2550.109431]    0000000000000000 0000000000000003 ffffffff81cc31a8 000000fa00000000
(XEN) [ 2550.206149]    ffffffff81391392 000000000000e033 0000000000000246 ffff8801eee39998
(XEN) [ 2550.302865]    000000000000e02b 0000000000000000 0000000000000000 0000000000000000
(XEN) [ 2550.399585]    0000000000000000 0000000000000000 ffff83007f3e3000 0000000000000000
(XEN) [ 2550.496302]    0000000000000000
(XEN) [ 2550.539982] Xen call trace:
(XEN) [ 2550.579500]    [<ffff82d08013f5a6>] ns_read_reg+0x16/0x50
(XEN) [ 2550.650217]    [<ffff82d08013f68d>] ns16550_tx_ready+0x2d/0x50
(XEN) [ 2550.726135]    [<ffff82d08014142e>] serial_start_sync+0x8e/0xb0
(XEN) [ 2550.803093]    [<ffff82d0801a2925>] enter_state_helper+0x1c5/0x3b0
(XEN) [ 2550.883170]    [<ffff82d080105996>] continue_hypercall_tasklet_handler+0xe6/0xf0
(XEN) [ 2550.977807]    [<ffff82d08012b6be>] do_tasklet_work+0x5e/0xa0
(XEN) [ 2551.052686]    [<ffff82d08012b778>] do_tasklet+0x78/0xb0
(XEN) [ 2551.122364]    [<ffff82d08016027f>] idle_loop+0x1f/0x50
(XEN) [ 2551.191003]
(XEN) [ 2551.214922]
(XEN) [ 2551.238841] ****************************************
(XEN) [ 2551.304360] Panic on CPU 0:
(XEN) [ 2551.343878] FATAL TRAP: vector = 2 (nmi)
(XEN) [ 2551.396915] [error_code=0000] , IN INTERRUPT CONTEXT
(XEN) [ 2551.462436] ****************************************
(XEN) [ 2551.527954]
(XEN) [ 2551.551874] Reboot in five seconds…
NA
The artifacts of the issue match the BUG 511764 which was Duplicated to BUG 543117 which is fixed in 10.5.56.x and 11.0.40.x, since the nodes are running different clusters there is a mismatch is Name Space List as a result the Offset of Name Space on One Node(11.0.66.11) is not matching the Offset on the Other Node(10.5.55.8). The above leads to header name space corruption as a result the value of “hdr->namespace” pointer will be 0 , and while trying to dereference the node is crashing.
There seems to be some issue with nssync process on secondary node. Restarting nssync process fixed the issue
The issue is caused due to the handshake failure with NPN extension on MPX with TLS1.0.
The following Responder policy for shellshock is more of a concern here. This regex expression is mainly looking out for empty spaces in the character set of the HTTP data coming from clients I believe HTTP data from the jpg file might have some values matching this Regex expression and getting a hit which drops the upload. The interesting fact is we used the following file for test. When the jpg file properties has no author name of the file, NetScaler is doing TCP Reset. When write an author name to file properties, it works and no reset packet.
This problem is encountered because Netscaler has a check in place, that limits the max length of finished packets to be allowed as <=96 bytes. If Netscaler receives a SSL Finished Packet during Handshake which has Packet Length greater than 96 bytes, Netscaler will reset this connection and  we will notice this counter incrementing "ssl3_get_msg_ivld_msg_size" in newnslog.
By default each packet engine can only handle 1,00,000 AppFW session at a given time. So if the sessions are crossing 1,00,000 per PE than this issue is seen.
flash/nsconfig/rc.conf file had wrong hostname specified.
APPFW sends a 400 error back to the client.
Known Issue: This can be tracked under the ID: 649848Link for same: https://www.citrix.com/content/dam/citrix/en_us/documents/downloads/netscaler-adc/NS_11_1_47_14.html
https://www.citrix.com/blogs/2010/10/19/load-balancing-ssl-session-persistence/https://docs.citrix.com/en-us/netscaler/11/traffic-management/load-balancing/load-balancing-persistence/session-id-persistence.html
There is intermediate device interfering with NetScaler to Client communication.After reviewing the Packet capture , it has been identified that there is a intermediate device stopping the connection to pass ON from NetScaler to Client. Please check the intermediate device for any issues.We can do a small change in Port Randomization on NetScaler for Active-FTP, but this will have any effect of fix as this is not a NetScaler issue. System > Settings > Configure Global System Settings Parameter >:-Analysis-: Packet 332: Client is sending to NetScaler LB(NS-LB) FTP PORT REQUEST mentioning the ACTIVE PORT:52760Packet 342: Client is sending FTP LIST Request to LB-VIPPacket 343: FTP server is initiating communication [TCP-SYN] on Data Port 20 to the advertised FTP active port for NetScaler TCP 32538Packet 351: NetScaler is initiating communication [TCP-SYN] on Data Port 20 to the advertised FTP active port for Client TCP 52760Packet 344: Client (or) Intermediate device (firewall) is sending [TCP-RST] to NetScaler initiated communication [TCP-SYN] on Data Port 20 to the advertised FTP active port for Client TCP 52760Packet 350: NetScaler is sending [TCP-RST] to the FTP server indicating the Client not willing to Client.  From the below packet capture(latest.pcapng) on the client , we can see the FTP-Active Port:52760. We do not see from this trace for any Packet from NetScaler on SRC port TCP 20.  In this Backend capture (trace.pcapng), we can see that when Server is sending on SRCPort FTP 20 , the intermediate device allows the connection to go through, at the same time not allowing for NetScaler.
CTX128655 - How to Record Network Packet Trace on NetScaler ApplianceCitrix Documentation - nstrace Command ReferenceCTX205282 - How Do I Configure Perfect Forward Secrecy (PFS) on NetScaler?
This is a memory leak issue caused due to SSO using KCD as enabled in traffic action which is invoking the MEM_SSLVPN
NetScaler currently does not handle the broadcast packets directed to the IIP subnet.
The issue is caused by unsupported SFP being used on NetScaler.
Issue is caused due to some code level issue which will be fixed in upcoming 11.0 build.
Current NetScaler behaviour causes RHI routes to continue to be advertised, even if the global VIP is disabled.  This is due to the fact that disabling a VIP may not completely disable the bound virtual servers.If any of the Virtual Servers which share this Virtual IP have an active 'backup' virtual server, the vserver health is still 'up' overall and RHI route is still advertised.For instance : Virtual IP 192.168.1.1 with RHI enabledLB Virtual Server with IP 192.168.1.1 has a backup LB Virtual Server - its status is 'UP'Now if you disable the Virtual IP, the LB Virtual server which shares this IP address goes to 'disabled' state but because there is a backup virtual server, the overall Virtual Server status remains 'UP'Because the Virtual Server status is 'UP' - RHI routes continue to be sent.This leads to a problem wherein a customer may disable a Virtual IP and expect the NetScaler to stop advertising the route to it.  In this scenario, this will not be the case.
SVM didn't accept the SSL handshake from CC
SNMP-Specific Trap config was not added.
The HDD on SDX was not getting detected as it was not properly inserted.
When USIP is enabled on a service on the NetScaler, the server will see the actual client IP address and not the SNIP/MIP address. Hence, when the server needs to send back the response, it will directly try to reach the client IP.
From the netscaler trace we see that Netscaler flow is correct and the request is being forwarded to backend server. But backend server is trying to do another SSL handshake over existing SSL session by sending "Hello Request" as shown below. As DenySSLReneg is set to ALL by default (which means Netscaler will not allow any renegotiation on Netscaler). So Netscaler is closing this connection as shown below:Note: To view the full image clearly, you can right click on the image and "save image as" on desktop machine and open or right click on image and open in new tab.As per rfc 5426:https://tools.ietf.org/html/rfc5246#section-7.4.1.1"HelloRequest is a simple notification that the client should begin the negotiation process anew. In response, the client should send a ClientHello message when convenient. This message is not intended to establish which side is the client or server but merely to initiate a new negotiation.
We cannot create a Load Balancing virtual server using * port for protocols other than TCP, UDP, HTTP, SSL and ANY.
Starting NetScaler software release 9.0, the appliance includes the nscollect process. This process collects the data from the NetScaler appliance and store in an XML data source. The data source is used to create various report graphs in the Reporting tab of the NetScaler GUI.
At times the XML file, which can be up to 10,000 lines, might get corrupted. The nscollect process does not recover the data in this file and still accesses the file. As a result this issue is noticed.
http://support.citrix.com/proddocs/topic/ns-faq-map-10-5/ns-faq-ssl-ref.htmlhttp://man.he.net/man1/pkcs7https://www.openssl.org/docs/man1.0.2/apps/openssl.html
Need to pass the Client Certificate information to the backend server as an HTTP Payload
Detailed description available in the below document:https://docs.citrix.com/en-us/netscaler/11/system/http-configurations/configuring-http2.html
Known issue and is caused  by different error codes returned by different PE’s(Packet Engines).
Since netscaler is in DMZ, netscaler was talking to backend storefront/xenapp servers over a natted IP. When DDC was giving IP address of XA server (application host server), its giving internal IP of the XA server instead of the natted IP.Netscaler cannot communicate with the internal IP and has to go through natted IP.
SQL character transformation was causing the issue where the backend Oracle application server is not accepting the SQL strings.
End of Sale Announcement - EOS for Access Gateway Enterprise Edition Models
http://support.citrix.com/article/CTX122860
Insight Center has 'Secure Access only' enabled.
The issue is caused due to nsload.exe component of VPN signed by SHA2 from 11.1 onwards which is not supported by Win7 RTM unless customer's have installed security patch KB3033929 on that user's Windows machine.
We can see from the logs for the User a colon(:) is appended  and this is the issue as per Engineering Team."<134> 10.102.x.40 05/12/2011:09:30:09 GMT ns PPE-0 : SSLVPN CLISEC_CHECK 33636331 :  User nsroot - <Client IP> - Vserver <IP>  - Client_security_expression CLIENT.APPLICATION.PROCESS(notepad.exe) EXISTS - Client_security_check failed - User not allowed to login"25/08/2016:09:17:35 GMT NSCALER 0-PPE-0 : default SSLVPN CLISEC_CHECK 117963934 0 :  User: niblettr - <Client IP> - Vserver <IP>  - Client_security_expression "CLIENT.REG('HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Services\\\\Tcpip\\\\Parameters_Domain').VALUE == 'domain.com'" - Client security check failed - User put in quarantine group MSOfficeAllowed - Error message Browser - Client is not a domain member
Out of the 2 Netscaler in HA pair, the Primary Netscaler was licensed however the secondary Netscaler was not.Hence, when the failover was done from the Primary to the Secondary Netscaler the certkey bindings were lost due to the absence of the license on the secondary node.
SSL libraries used by the Receiver 4.3/4.4 had issues.
Known issue as reported in issue id 635939
Backed server supportability.
A known bug in 11.0-66.11nC tracked under ISSUE ID: 0656437
Plotting of graph cannot be of more granular.
Configuration
Issue ID 633308
-XML broker not responding.  It was configured on port 80 in the WI  onNS configuration.
Since the profile was bound globally, it was utilizing high memory on the device. The following are the NetScaler logs:
Sep 1 17:00:00 <local0.warn> X.X.X.X CEF:0|Citrix|NetScaler|NS11.0|APPFW|AF_MEMORY_ERR|4|src=0.0.0.0 spt=0 method= request= msg=Memory allocation request for 64512 bytes failed (e). Call stack PCs: 0x8e7f778, 0x8ef8054, 0x8e679b7, 0x8e68601, 0x884d74d, cn1=153306 cn2=0 cs1= cs2=PPE0 cs4=ERROR cs5=2016 act=not blocked
Sep 1 17:00:00 <local0.info> X.X.X.X 09/01/2016:22:00:00 GMT grcns02 0-PPE-1 : default APPFW Message 153307 0 : "Error while parsing response headers. "
Sep 1 17:00:00 <local0.warn> X.X.X.X CEF:0|Citrix|NetScaler|NS11.0|APPFW|AF_MEMORY_ERR|4|src=0.0.0.0 spt=0 method= request= msg=Memory allocation request for 4096 bytes failed (e). Call stack PCs: 0x8f1d1bc, 0x8f20fbf, 0x8f22833, 0x8f22f6c, 0x8f54044, cn1=154634 cn2=0 cs1= cs2=PPE0 cs4=ERROR cs5=2016 act=not blocked
This has been reported as a GUI bug in the NetScaler 11.1 release.
Persistency was not maintained.
Backup and restore:https://docs.citrix.com/en-us/sdx/10-5/sdx-ag-config-svm-wrapper-tsk/sdx-ag-config-mangmt-svd-vm-backup-restore-tsk.html
Factory reset:https://docs.citrix.com/en-us/sdx/10-5/sdx-ag-config-svm-wrapper-tsk/sdx-ag-config-svm-factory-default-tsk.html
Common reasons for this error:
1. Misconfiguration between SP and IDP binding 2. Incoming authentication request is matched to the wrong policy
This is a code level fix for GUI issue.
known issue in NS 11.0-64.34nc and NS 11.0 67.12.nc
Issue ID 634480
Not showing all of the Usernames and Desktops names
Application Firewall blocking the request for netscaler gateway.
It is a code level issue fixed in 11.1-47.x and 11.0-69.x builds
SAML authentication does not use a password and only uses the user name. Also, SAML authentication only informs users when authentication succeeds. If SAML authentication fails, users are not notified. Since a failure response is not sent, SAML has to be either the last policy in the cascade or the only authentication policy.
Two possible causes for being unable to log in.1: There is a bug (should be fixed in next image) where passwords containing repeated special characters can be mangled when the instance is initially deployed (things like "Pa$$word").Workaround is to use a simpler password for initial instance creation and change it to complex with special character later on.
2: Second cause could be Azure network security rules.  If GUI is used for management access, the default Azure settings don't allow https/http access to the public IP.  You will need to open appropriate ports in your Azure network configuration
Session Policy for Receiver was configured as Contains CitrixReceiver && X-Gateway-Referrer Exist.
SourceIP Persistence Timeout was configured as 2 minutes.
From the NetScaler traces it is seen that TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 cipher is exchanged and agreed, then later TCP  Zero Window is sent by NetScaler to server.
There is window leak issue in 11.0 65+ builds with TLS1.2 and TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 cipher.
Citrix Documentation - https://docs.citrix.com/en-us/netscaler/11-1/application-firewall/top-level-protections/html-sql-injection-check.html
The following options will lead to this issue:
StoreFront servers are load balanced on NetScaler.Load balancing IP used to load balance StoreFront servers is a non-routable IP. This means that you cannot reach the load balancing VIP from client machine or any other machine, or there is no route added on NetScaler for Load balancing VIP. For example if a NetScaler is in 10.x.x.x subnet and you configure the load balancing VIP in 192.x.x.x.subnet for which there is no route on the NetScaler.NetScaler Gateway session profile pointing to load balancing VIP under "Published Applications" tab.
This issue is seen because of a design change from NetScaler 11.0-67+ builds, where when you add StoreFront URL in NetScaler Gateway session profile, NetScaler will internally try to probe the load balancing VIP that is added.
In few cases the probe will fail as NetScaler is not able to find the source IP for probing non-routable load balancing VIP.
In previous NetScaler builds it was working as the load balancing VIP was not probed. This behavior was changed since the previous design occasionally led to crashes.
In  Netscaler Release 10.5, when a client VPN plugin attempts to establish the connection, it will handle the initial request for the services.html page, which, by design is an HTTP request on port 8080. The services.html page will then redirect to either the portal homepage or to the configured homepage in the session profile.If the VPN connection is taking longer than expected, the plugin will not be able to send the request over the VPN on port 443 and so will result in the page stuck on :8080/vpns/services.html.
The issue is haappening because customer is using wildcard lb vserver (Any,Any) and destination ip to which customer is trying to connect through that LB Vserver is in the same subnet as netscaler.
LLB+RNAT
Outbound traffic choose specific ISP to go out, but there is no specific RNAT configuration to match this traffic, and traffic cannot be matched by network segment RNAT too.
For example:Netscaler has two ISP links and one LAN link.ISP1 ----- interace 1/1ISP2 ----- interface 1/2LAN ------ interface 1/3Internal Server IP 10.1.91.13RNAT setting:set rnat 10.1.91.0 255.255.255.0 -natIP (interface 1/1 IP)set rnat 10.1.91.13 255.255.255.255 -natIP (interface 1/2 IP)In normal condition, we assume that NetScaler will choose ISP2 for 10.1.91.13 outbound traffic.So the traffic should have Source IP : Interface 1/2 IP                                  Source Mac: Interface 1/2 Mac                                  Dst IP: target IP                                  Dst Mac: ISP2 gateway MacBut in this condition, Source IP is: Interface 1/2 IP                                   Source Mac: Interface 1/1 Mac                                   Dst IP: target IP                                   Dst Mac: ISP1 gateway Macatchedmatched
If packet is sent out with interface 1/1 but with interface 1/2 IP, the second RNAT will not be matched, and first one also cannot be matched.
ISP1 gateway does not know Interface 1/2 IP as Source IP, it may drop the traffic. This is why outbound traffic cannot be deliveryed properly.
https://docs.citrix.com/en-us/netscaler/11/traffic-management/load-balancing/load-balancing-advanced-settings/use-proxy-port.html
Global communication settings were set to HTTPS. This was causing a failure in the SSL handshake, possibly due to an issue with certificate/cipher/protocol. Changing the protocol to HTTP in the profile did not fix the issue. NetScaler MAS still tried to negotiate HTTPS.
Missing internal LAN routing for the IP Pool in use for full VPN.
Due to the fix done in below Issue ID to address the issue this change was made from 11.0-65+ builds:NetScaler Insight Center might intermittently become unresponsive and not populate any reports.[# 618370, 622539]
https://docs.citrix.com/en-us/netscaler-gateway/10-5/ng-configuration-mgmt-wrapper-con/ng-authen-authoriz-wrapper-con/ng-authorize-config-con/ng-authorize-config-policy-tsk/ng-authorize-ldap-extraction-con/ng-authorize-config-nested-ldap-tsk.htmlhttp://support.citrix.com/article/CTX123795
With ANY-type VServers, the Netscaler operates as a load balancing router.  It does not proxy connections or intervene in the TCP protocol in any way.  As such, the Netscaler does not monitor connections for timeouts at the TCP level. So this is a expected behaviour.
Customer has enabled the Netscaler call home feature. They require the correct port to open on their Firewall to allow access.
Unable to use the image provided by websense to upgrade the websense instance on SDX
Unable to unbind all Transform Policy from vserver
Issue ID 633486Currently, SQL Management Console 2014 in Azure is not compatible with the Datastream feature (it IS compatible for Server-based MSSQL--just not Azure)
Created a service on the NetScaler, and confirmed that TCP time out error is being received.
Receiving the error message advising that the ShareFile application is not installed on the device. It appears that the version of the Secure Mail app, does not have explicit setting of “Enabling ShareFile” within the MDX policy.
Unauthenticated store on StoreFront was breaking the authentication on thin clients.
Management port (interface 0/1) used for production/data traffic.
none
Android Receiver does not support cookie insert persistence.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Citrix Documentation - Configuring Users, User Groups, and Command Policies
The service group was already bound to the LoadBalanced virtaul ip.Service Group need to be unbinded before adding new service members.Load balanced virtual ip does not allow service group bindings when service bindings already exist - produces error message: IP, port conflict with an entity already bound to the virtual serverBinding both individual services and service groups are not supported.
The issue was caused due to high sessiontimeout set on traffic management session actions of 480 minutes.
Issue ID 617267 fixed in 11.0-65+, 10.5-62+ and 11.1-30+Below is the confirmation from Release notes:In the GUI, on the GSLB statistics page, the local site MEP state is always displayed as DOWN instead of as a blank field.[# 617267]https://www.citrix.com/content/dam/citrix/en_us/documents/downloads/netscaler-adc/NS_11_0_65_35.html
OCSP server information is added on the code level with Default TD 0 - that is why Netscaler attempts to communicate with OCSP server from SNIP in TD 0This behavior is according to the current design (as OCSP is not supported in non-default Traffic Domain)
NetScaler is running out of ports on the NSIP.
The following counters indicates this problem:   3295       0             58          4        0 dns_tot_ServerQueries  Wed Jul 20 08:04:55 2016   3296       0              4          2        0 dns_err_NoDomains  Wed Jul 20 08:04:55 2016   3297       0           5704          2        0 dns_tot_Queries  Wed Jul 20 08:04:55 2016   3298       0              4          2        0 natpcb_tot_conn_refused  Wed Jul 20 08:04:55 2016 ( This counter value here is 2 and in the trace we can see that there are 2 DNS queries to the loopback IP)   3299       0          26292          2        0 allnic_tot_tx_mbits  Wed Jul 20 08:04:55 2016   3300       0              8          4        0 tcp_err_noip  Wed Jul 20 08:04:55 2016   3301       0            400          2        0 pbr_tot_hits  Wed Jul 20 08:04:55 2016   3302       0            400          2        0 pbr_tot_allow  Wed Jul 20 08:04:55 2016   3303       0            453          2        0 natpcb_newconnection_free  Wed Jul 20 08:04:55 2016
The above counters indicate that NetScaler is not able to open a connection to the server due to port allocation errors.
Known issue in 11.1-47.14 build when Enterprise license is installed on Netscaler.
The NetScaler MPX and NetScaler SDX appliances use internal addresses to distinguish multiple power supplies for subsequent status monitoring.  The addressing methodology for multiple power supplies changed, making the update necessary.
Strict-Transport-Security header in the initial 302 response can not be added using rewrite policy, This is as per the design . the request and response which are generated outside Netscaler only for those rewrite policy can be applied here 302 is Netscaler generated  response so we won’t apply this policy “
The issue can be caused due to some issue on the server side or the parameters specified in monitor bound to that service.
This is by design that the Android Receiver will show the NetScaler Gateway web page after authentication in Android Receiver 3.9 and StoreFront 3.x.
This is due to the fact that all NetScaler initiated communication use nstcp_internal_apps TCP profile for which has mss set as higher value and hence we see packets length of more than 1460 before TCP reset.
Microsoft security advisory: Availability of SHA-2 code signing support for Windows 7 and Windows Server 2008 R2: March 10, 2015
https://support.microsoft.com/en-us/kb/3033929Windows was unable to support higher than SHA1 on signed drivers.
Incorrect time on Netscaler and XenMobile servers.
It seems that we were booting SDX’s XS component in an unsupported “Measured boot” mode. This mode is untested in the SDX context.
The problem is with “$” and not all the special characters. I was able to create RSA key with all other special characters in the “password” field.With special character “$” also it behaves in three different ways :
It works well if the “$” is given at the end of a password stringIt fails to create the RSA key if “$” is inputted in between the password string.If “$” is given at the beginning of password string then also it does not work and gives the error “ERROR: Problem in writing output file”
It seems to be a kernel side issue or either that the code is not properly interpreting the password that have special characters.
The /StoreWeb portion of the expression interferes with many aspects of app enumeration, as many links begin with /Citrix but do not include the actual store name in the rest of the URL.
STA servers are VMs hosted on a hypervisor.When NetScaler communicates with the STA, it uses the virtual MAC address.When the STA responds, its source MAC is the physical MAC address.The NetScaler updates its ARP table and then tries to communicate to the STA using the physical MAC address.However, this does not reach the STA and the connections gets reset
If there is no Route on netscaler when the NSIP , SNIP and Server IP are in Different Network .
The persistence table is not same on two sites.
The "show ns hardware" command output also shows the number of cards present as well, 2*CVM N3 1400210 represents 2 SSL cards in the system. For other details on the product specification please refer NetScaler Datasheet https://www.citrix.com/content/dam/citrix/en_us/documents/data-sheet/netscaler-data-sheet.pdf
underscore in Instance Name on SVM was causing the issue.
The reason why $test worked is maybe it is treated like a bash variable whose value is either empty or null and the parameter “challengePassword" is set as empty/null allowing the command to be executed. Also in test$ scenario the $ would be treated like string terminator and would have been ignored.
CTX116431 - How to Create and Use Client Certificates on NetScaler Appliance with Firmware 10.0
If Nagle's algorthim is not selected. Netscaler will use tcp small_window_protection feature to scale the packet size.By default its value is set to '1' (enabled), and it can be configured only in shell mode. Which limits netscaler to save the config or setting in startup config. Resulting in saving the setting in RAM which stay up until the device is rebooted.Thus rebooting the device, will revert the setting to default value, and resulting in packet drops with window size less than defined MSS value.Causing disturbance to services with less window size.
On the NetScaler Gateway > Basic Settings > ICA only was set to True.
Known Issue on builds 11.0.66 and lower.
Naming convention disallows the use of underscore in the DNS names unless they are for SRV records
Some websites use and require SNI (Server Name Indication).  This allows for multiple certificates to serve up the same IP/Port.  Since the server typically does not know the FQDN that is being requested by the client until after the handshake is complete, SNI will add an extension to the Client Hello of the SSL Handshake, allowing for the server to choose which certificate is used for the connection when multiple are being used to serve the IP/Port.This is common for ADFS and is becoming popular for cloud providers as well.
VXME Jabber needs communication between VDA and external client machine
NetScaler intermittently modifies the packet due to which VDA closes the connection.CDF shows error: 'WdDropSession - Dropping session to save server'
CTX121291 - FAQ: NetScaler VPX
VPN does not terminate existing connections by default, in other words if an application maintains a persistent TCP connection then connecting VPN will not terminate the connection. However if you lose and relaunch the application it wont work as public IPs are not allowed over VPN per configured policy. This is the default behavior.
Expected Behavior , this can not be changed by GUI and need to be done via the CLI
By Design.
Antivirus or some other application is blocking the NetScaler Gateway from listing the application plugin in the Windows firewall under "Allowed applications".
You might have to install the Plugin with admin rights and have the Windows Firewall allow the plugin to register itself under allowed applications. You can verify this by checking under "Control Panel\All Control Panel Items\Windows Firewall\Allowed apps". It should have Gateway plugin allowed as shown in the following figure:
-icaSessionTimout parameter should be OFF if authentication is not happening on the NetScaler Gateway itself.
Expected Behavior.
An already existing internal / external store integrated with ICA proxy NetScaler Gateway Vserver has beacons configured to detect internal or external location. Depending on the beacon check Receiver decides whether to contact StoreFront directly or via NetScaler Gateway (if external).
1. When user moves from LAN to intranet, this triggers a beacon check (changes in physical adapter) and in this scenario the external beacon check will be successful. 2. This beacon check happens before full VPN could be established, so when VPN is eventually established Receiver has already detected it's location to be external.3. Now, when Receiver resolves the StoreFront FQDN (after VPN is connected) it will resolve to internal StoreFront and also StoreFront becomes reachable directly.Due to #3 Receiver connections land on internal StoreFront but due to #2, since it "thinks" its external the connection method (request url etc) used are that of NetScaler Gateway e.g. /cgi/login which does not exist on StoreFront and Receiver is never able to authenticate.
If Receiver is exited and restarted (while vpn is already connected), now beacon check will return internal, and also StoreFront resolved directly, so now apps become accessible.
The NetScaler version 11.x cannot handle SNI request in right way
This is a configuration issue. The authentication on the NetScaler Gateway Vserver is not enabled and user certificate based action policy to extract the username from CN of the SSL Certificate is required.
If the authentication point is NetScaler Gateway the change password option will not appear as this feature is on WebInterface UI
Files were deleted from var/ns_sys_backup with command rm -r filename >> This shouldn't be done directlyThis command deleted the backup file from directory however it was not updated in database.This is the reason "show system backup" showing 50 files.
issue was identified as 706237 fix will be available in updated EPA libraries 1.1.2.0 upwards(not inclusive)
As the application doesn't work but telnet works, the problem is at layer 7In this configuration, the Traffic policy was configured on the Netscaler Gateway VIP with expression "true".The action was for SSO to HTTP services and  http.req.xxx expressions were used.With this configuration, the policy with expression true will hit for all traffic, but the action being HTTP specific will fail to execute for non-HTTP traffic, due to this the traffic gets dropped and never forwarded to the back-end. Telnet to the affected Non-HTTP services works because it is just the three-way handshake and there is nothing to be processed.
This issue is tracked with issue ID 703627.
The feature was not available by design wherein we have an IPV6 gateway IP getting loadbalanced to an IPV4 StoreFront IP.
NetScaler Gateway & StoreFront Configuration: How Do I?
CTX121974 - FAQ: USIP Address Mode of NetScaler
CTX129182 - How to Configure Single Sign-On for Outlook Web Access 2007 on NetScalerCTX135875 - Troubleshooting Steps for AAA Issues on Exchange OWA Through NetScaler
CTX138988 - How to Configure SAML SSO Authentication between NetScaler Gateway and Load Balancing Virtual Servers
CTX108876 - How to Configure LDAP Authentication on NetScaler or NetScaler Gateway CTX114999 - How to Troubleshoot Authentication Issues Through NetScaler or NetScaler Gateway with aaad.debug Module
CTX201133 - How to Change Password for LDAP Authentication for NetScaler Gateway and AAA-TM Users
NetScaler Gateway EPA: How Do I?
CTX205823 - How Do I Enable SSL Client Certificate Authentication on NetScaler
The same thing can be observed as well in NetScaler 11.1 and 12.0. However, in NetScaler 10.1 and 10.5, instead of the "-cipherName DEFAULT" many ciphers will be added automatically after binding the particular cipher "SSL2-EXP-RC2-CBC-MD5"
Before binding cipher (10.5)GUICLI> show version        NetScaler NS10.5: Build 66.6.nc, Date: May 13 2017, 15:56:26  Done> show ns runningConfig | grep cipher>>(empty output---no cipher bound)After binding cipher (10.5)GUI> bind ssl vserver vpngateway -cipherName SSL2-EXP-RC2-CBC-MD5 Done>> show ns runningConfig | grep cipherbind ssl vserver vpngateway -cipherName SSL3-RC4-MD5bind ssl vserver vpngateway -cipherName SSL3-RC4-SHAbind ssl vserver vpngateway -cipherName SSL3-DES-CBC3-SHAbind ssl vserver vpngateway -cipherName TLS1-AES-256-CBC-SHAbind ssl vserver vpngateway -cipherName TLS1-AES-128-CBC-SHAbind ssl vserver vpngateway -cipherName SSL3-EDH-DSS-DES-CBC3-SHAbind ssl vserver vpngateway -cipherName TLS1-DHE-DSS-RC4-SHAbind ssl vserver vpngateway -cipherName TLS1-DHE-DSS-AES-256-CBC-SHAbind ssl vserver vpngateway -cipherName TLS1-DHE-DSS-AES-128-CBC-SHAbind ssl vserver vpngateway -cipherName SSL3-EDH-RSA-DES-CBC3-SHAbind ssl vserver vpngateway -cipherName TLS1-DHE-RSA-AES-256-CBC-SHAbind ssl vserver vpngateway -cipherName TLS1-DHE-RSA-AES-128-CBC-SHAbind ssl vserver vpngateway -cipherName TLS1-ECDHE-RSA-RC4-SHAbind ssl vserver vpngateway -cipherName TLS1-ECDHE-RSA-DES-CBC3-SHAbind ssl vserver vpngateway -cipherName TLS1-ECDHE-RSA-AES128-SHAbind ssl vserver vpngateway -cipherName TLS1-ECDHE-RSA-AES256-SHAbind ssl vserver vpngateway -cipherName TLS1.2-AES128-GCM-SHA256bind ssl vserver vpngateway -cipherName TLS1.2-AES256-GCM-SHA384bind ssl vserver vpngateway -cipherName TLS1.2-DHE-RSA-AES128-GCM-SHA256bind ssl vserver vpngateway -cipherName TLS1.2-DHE-RSA-AES256-GCM-SHA384bind ssl vserver vpngateway -cipherName TLS1.2-ECDHE-RSA-AES128-GCM-SHA256bind ssl vserver vpngateway -cipherName TLS1.2-ECDHE-RSA-AES256-GCM-SHA384bind ssl vserver vpngateway -cipherName TLS1.2-ECDHE-RSA-AES-128-SHA256bind ssl vserver vpngateway -cipherName TLS1.2-ECDHE-RSA-AES-256-SHA384bind ssl vserver vpngateway -cipherName TLS1.2-AES-256-SHA256bind ssl vserver vpngateway -cipherName TLS1.2-AES-128-SHA256bind ssl vserver vpngateway -cipherName TLS1.2-DHE-RSA-AES-128-SHA256bind ssl vserver vpngateway -cipherName TLS1.2-DHE-RSA-AES-256-SHA256----------->from this line and above lines are added automaticallybind ssl vserver vpngateway -cipherName SSL2-EXP-RC2-CBC-MD5----------->Only this line is added manually
For 11.0 to 12.0, we use cipherName -default instead of many specific cipher names in 10.1 to 10.5. This is an improvement which makes the displaying concise and short. However, for all NetScaler versions (10.1 to 12.0), default ciphers will  be bound automatically after bind a particular cipher. This is by design and will not impact on that particular cipher binding.
For 11.0~12.0, we use cipherName -default instead of many specific cipher names in 10.1~10.5,This is an improvement which makes the displaying concise and short.However, for all NS versions(10.1~12.0), default ciphers will  be bound automatically after bind a particular cipher,This is by design and will not impact on that particular cipher binding.If you want to unbind these cipher manually, you can use the following command>unbind ssl vserver vpngateway -cipherName XXXbut make sure that you wants to remove these ciphers.
Clientless Access component on the NetScaler uses the Regex engine to search and rewrite the URLs contained in all responses provided by backend application servers, SharePoint in this case. There are some situations were the request is build up on the client side, by a java script file for example so the URL is not CVPN-ized (e.g. /cvpn/aHR0cHM6Ly9zaGFyZXBvaW50LnJvbHkubGFiCg/) by the NetScaler. In such cases, the NetScaler will respond to the request with "503 Service Unavailable"
Here is a sample command line output. Output is scrubbed and information was replaced with explanation of what will actually display in the logs.
login as: nsroot
###############################################################################
#                                                                             #
#        WARNING: Access to this system is for authorized users only          #
#         Disconnect IMMEDIATELY if you are not an authorized user!           #
#                                                                             #
###############################################################################
Using keyboard-interactive authentication.
Password:
Last login: Fri Feb 16 15:55:17 2018 from IP of the device that last logged on to the NetScaler will be here
Done
> shell
Copyright (c) 1992-2013 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
The Regents of the University of California. All rights reserved.
root@Val105# cd /var/log
root@Val105# more ns.log | grep NetScaler Gateway IP will be here
Feb 16 17:08:23 <local0.info> Netscaler IP will be here 02/16/2018:22:08:23 GMT Val105 0-PPE-0 : default SSLVPN TCPCONNSTAT 300 0 :  User User Name  will be here - Client_ip Client will be here - Nat_ip 127.0.0.2 - Vserver NetScaler Gateway IP will be here:443 - Source Client will be here:54964 - Destination 127.0.0.1:80 - Start_time "02/16/2018:22:08:23 GMT" - End_time "02/16/2018:22:08:23 GMT" - Duration 00:00:00  - Total_bytes_send 744 - Total_bytes_recv 1330 - Total_compressedbytes_send 0 - Total_compressedbytes_recv 0 - Compression_ratio_send 0.00% - Compression_ratio_recv 0.00% - Access Allowed - Group(s) "N/A"
Feb 16 17:08:23 <local0.info> Netscaler IP will be here 02/16/2018:22:08:23 GMT Val105 0-PPE-0 : default SSLVPN TCPCONNSTAT 301 0 :  User User Name  will be here - Client_ip Client will be here - Nat_ip 127.0.0.2 - Vserver NetScaler Gateway IP will be here:443 - Source Client will be here:54964 - Destination 127.0.0.1:80 - Start_time "02/16/2018:22:08:23 GMT" - End_time "02/16/2018:22:08:23 GMT" - Duration 00:00:00  - Total_bytes_send 744 - Total_bytes_recv 2600 - Total_compressedbytes_send 0 - Total_compressedbytes_recv 0 - Compression_ratio_send 0.00% - Compression_ratio_recv 0.00% - Access Allowed - Group(s) "N/A"
Feb 16 17:08:23 <local0.info> Netscaler IP will be here 02/16/2018:22:08:23 GMT Val105 0-PPE-0 : default SSLVPN LOGIN 306 0 : Context User Name  will be here@Client will be here - SessionId: 1- User User Name  will be here - Client_ip Client will be here - Nat_ip "Mapped Ip" - Vserver NetScaler Gateway IP will be here:443 - Browser_type "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36" - SSLVPN_client_type Clientless - Group(s) "N/A"
Feb 16 17:08:23 <local0.info> Netscaler IP will be here 02/16/2018:22:08:23 GMT Val105 0-PPE-0 : default SSLVPN HTTPREQUEST 312 0 : Context User Name  will be here@Client will be here - SessionId: 1- Destination Server IP will be here User User Name  will be here : Group(s) N/A : Vserver NetScaler Gateway IP will be here:443 - 02/16/2018:22:08:23 GMT : SSO is ON : POST /Citrix/ValWeb/Resources/List - -
Feb 16 17:08:24 <local0.info> Netscaler IP will be here 02/16/2018:22:08:24 GMT Val105 0-PPE-0 : default SSLVPN TCPCONNSTAT 373 0 : Context User Name  will be here@Client will be here - SessionId: 1- User User Name  will be here - Client_ip Client will be here - Nat_ip Subnet IP or Intranet IP will be here - Vserver NetScaler Gateway IP will be here:443 - Source Client will be here:54964 - Destination Destination Server IP will be here:443 - Start_time "02/16/2018:22:08:23 GMT" - End_time "02/16/2018:22:08:24 GMT" - Duration 00:00:01  - Total_bytes_send 0 - Total_bytes_recv 4213 - Total_compressedbytes_send 0 - Total_compressedbytes_recv 0 - Compression_ratio_send 0.00% - Compression_ratio_recv 0.00% - Access Allowed - Group(s) "N/A"
Feb 16 17:08:24 <local0.info> Netscaler IP will be here 02/16/2018:22:08:24 GMT Val105 0-PPE-0 : default SSLVPN TCPCONNSTAT 391 0 : Context User Name  will be here@Client will be here - SessionId: 1- User User Name  will be here - Client_ip Client will be here - Nat_ip 127.0.0.2 - Vserver NetScaler Gateway IP will be here:443 - Source Client will be here:54963 - Destination 127.0.0.1:80 - Start_time "02/16/2018:22:08:24 GMT" - End_time "02/16/2018:22:08:24 GMT" - Duration 00:00:00  - Total_bytes_send 985 - Total_bytes_recv 3554 - Total_compressedbytes_send 0 - Total_compressedbytes_recv 0 - Compression_ratio_send 0.00% - Compression_ratio_recv 0.00% - Access Allowed - Group(s) "N/A"
Feb 16 17:08:24 <local0.info> Netscaler IP will be here 02/16/2018:22:08:24 GMT Val105 0-PPE-0 : default SSLVPN HTTPREQUEST 392 0 : Context User Name  will be here@Client will be here - SessionId: 1- Destination Server IP will be here User User Name  will be here : Group(s) N/A : Vserver NetScaler Gateway IP will be here:443 - 02/16/2018:22:08:24 GMT : SSO is ON : GET /Citrix/ValWeb/Resources/Icon/L0NpdHJpeC9WYWwvcmVzb3VyY2VzL3YyL05VTTJSRE5EUkRVMVF6ZEJNVUUwUmpVME5qQTROalJCTlRrd016WTBOelF5T - -
Feb 16 17:08:24 <local0.info> Netscaler IP will be here 02/16/2018:22:08:24 GMT Val105 0-PPE-0 : default SSLVPN TCPCONNSTAT 398 0 : Context User Name  will be here@Client will be here - SessionId: 1- User User Name  will be here - Client_ip Client will be here - Nat_ip Subnet IP or Intranet IP will be here - Vserver NetScaler Gateway IP will be here:443 - Source Client will be here:54964 - Destination Destination Server IP will be here:443 - Start_time "02/16/2018:22:08:23 GMT" - End_time "02/16/2018:22:08:24 GMT" - Duration 00:00:01  - Total_bytes_send 0 - Total_bytes_recv 325 - Total_compressedbytes_send 0 - Total_compressedbytes_recv 0 - Compression_ratio_send 0.00% - Compression_ratio_recv 0.00% - Access Allowed - Group(s) "N/A"
Feb 16 17:08:24 <local0.info> Netscaler IP will be here 02/16/2018:22:08:24 GMT Val105 0-PPE-0 : default SSLVPN TCPCONNSTAT 401 0 : Context User Name  will be here@Client will be here - SessionId: 1- User User Name  will be here - Client_ip Client will be here - Nat_ip 127.0.0.2 - Vserver NetScaler Gateway IP will be here:443 - Source Client will be here:54954 - Destination 127.0.0.1:80 - Start_time "02/16/2018:22:08:24 GMT" - End_time "02/16/2018:22:08:24 GMT" - Duration 00:00:00  - Total_bytes_send 789 - Total_bytes_recv 16041 - Total_compressedbytes_send 0 - Total_compressedbytes_recv 0 - Compression_ratio_send 0.00% - Compression_ratio_recv 0.00% - Access Allowed - Group(s) "N/A"
Feb 16 17:08:24 <local0.info> Netscaler IP will be here 02/16/2018:22:08:24 GMT Val105 0-PPE-0 : default SSLVPN TCPCONNSTAT 404 0 : Context User Name  will be here@Client will be here - SessionId: 1- User User Name  will be here - Client_ip Client will be here - Nat_ip Subnet IP or Intranet IP will be here - Vserver NetScaler Gateway IP will be here:443 - Source Client will be here:54948 - Destination Destination Server IP will be here:443 - Start_time "02/16/2018:22:08:24 GMT" - End_time "02/16/2018:22:08:24 GMT" - Duration 00:00:00  - Total_bytes_send 0 - Total_bytes_recv 25866 - Total_compressedbytes_send 0 - Total_compressedbytes_recv 0 - Compression_ratio_send 0.00% - Compression_ratio_recv 0.00% - Access Allowed - Group(s) "N/A"
Feb 16 17:08:24 <local0.info> Netscaler IP will be here 02/16/2018:22:08:24 GMT Val105 0-PPE-0 : default SSLVPN HTTPREQUEST 405 0 : Context User Name  will be here@Client will be here - SessionId: 1- Destination Server IP will be here User User Name  will be here : Group(s) N/A : Vserver NetScaler Gateway IP will be here:443 - 02/16/2018:22:08:24 GMT : SSO is ON : GET /Citrix/ValWeb/Resources/Icon/L0NpdHJpeC9WYWwvcmVzb3VyY2VzL3YyL00zZE9NVWROUmtWMFQwZDBhME5yWVRJM2NsaDBia04yUTFkU1QxbFNkVGhXU - -
root@Val105# more ns.log | grep -i login
Feb 16 17:08:23 <local0.info> Netscaler IP will be here 02/16/2018:22:08:23 GMT Val105 0-PPE-0 : default SSLVPN LOGIN 306 0 : Context User Name  will be here@Client will be here - SessionId: 1- User User Name  will be here - Client_ip Client will be here - Nat_ip "Mapped Ip" - Vserver NetScaler Gateway IP will be here:443 - Browser_type "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36" - SSLVPN_client_type Clientless - Group(s) "N/A"
Feb 16 17:08:23 <local0.debug> Netscaler IP will be here 02/16/2018:22:08:23 GMT Val105 0-PPE-0 : default SSLVPN Message 310 0 :  "TCU_DHT UCB: Updating DHT entry for key 'User Name  will be here:Single Sign On Domain  will be here:51410',current values: login_count: 0, ica_conn_owner_refmask: 0"
Feb 16 17:08:23 <local0.debug> Netscaler IP will be here 02/16/2018:22:08:23 GMT Val105 0-PPE-0 : default SSLVPN Message 311 0 :  "TCU_DHT UCB: DHT entry updated for key 'User Name  will be here:Single Sign On Domain  will be here:51410', new values: login_count: 1, ica_conn_owner_refmask: 0"
Feb 16 17:08:23 <local0.info> Netscaler IP will be here 02/16/2018:22:08:23 GMT Val105 0-PPE-0 : default SSLVPN HTTPREQUEST 335 0 : Context User Name  will be here@Client will be here - SessionId: 1- Destination Server IP will be here User User Name  will be here : Group(s) N/A : Vserver NetScaler Gateway IP will be here:443 - 02/16/2018:22:08:23 GMT : SSO is ON : POST /Citrix/ValWeb/GatewayAuth/Login - -
Feb 16 17:08:23 <local0.debug> Netscaler IP will be here 02/16/2018:22:08:23 GMT Val105 0-PPE-0 : default SSLVPN Message 336 0 :  "SSO ns_sslvpn_process_sso_conn: user User Name  will be here clientip Client will be here request: /Citrix/ValWeb/GatewayAuth/Login sso_flags-0 p_flags-0 x_flags-200000 author_hdr_removed-0"
Checked that only the Intermediate Cert of the actual Client Certificate is installed in the NetScaler.> Top root CA was missing
Effective state of the Name Server is DOWN which results in DNS lookup failure
This is a known issue tracked with issue ID 697771.
Bug in 11.1 build 48 version of Gateway plugin
AppFW Signatures are lost upgrade and hence Profile and policy binding does not work
NetScaler requires ECC ciphers when using HTTP/2Previous ECC ciphers bound to vServer were not able to be used due to a number of reasons, such as:type of Certificate used, SSL capability, etc.
Combination of SSL enabled VDA (for TCP) and DNS configured for the VDA is creating the problem for EDT as both EDT and TCP share. This is addressed as part of enhancement 690030. With this enhancement, the NetScaler Gateway appliance supports end-to end encryption with DTLS 1.0 for Enhanced Data Transport (EDT) termination between Receiver and VDA.
Citrix Documentation - NetScaler Configurations Supported in Partitions
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
This issue is due to Gateway Insight functionality. While copying the application launch failure information for reporting, there is an incorrect copy operation that results in a crash.
Issue with GUI code for password check of .pem format files.
NTP/Time mismatch between the client and the NetScaler.
Scenario TWO: A known bug (703995) exist which is getting fixed in 12.0-58+GA build
SNI not enabled. Backend WebSites require SNI. Can be confirmed with OpenSSL s_client -connect toolC:\OpenSSL\bin\openssl.exe s_client -connect sni_required_site.com:443CONNECTED(000001C0)13328:error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure:s23_clnt.c:769:---no peer certificate available---No client certificate CA names sent---SSL handshake has read 7 bytes and written 308 bytes---New, (NONE), Cipher is (NONE)Secure Renegotiation IS NOT supportedCompression: NONEExpansion: NONENo ALPN negotiatedSSL-Session:    Protocol  : TLSv1.2    Cipher    : 0000    Session-ID:    Session-ID-ctx:    Master-Key:    Key-Arg   : None    PSK identity: None    PSK identity hint: None    SRP username: None    Start Time: 1515703521    Timeout   : 300 (sec)    Verify return code: 0 (ok)---When SNI is included in SSL handshake request, it succeed.C:\OpenSSL\bin\openssl.exe s_client -connect sni_required_site.com:443 -servername sni_required_site.comCONNECTED(000001D4)depth=3 C = US, ST = Arizona, L = Scottsdale, O = "Starfield Technologies, Inc.", CN = Starfield Services Root Certificate Authority - G2verify error:num=20:unable to get local issuer certificate---Certificate chain 0 s:/CN=*.sni_required_site.com   i:/C=US/O=xxxxx/OU=Server CA 1B/CN=xxxxx 1 s:/C=US/O=xxxxx/OU=Server CA 1B/CN=xxxxx   i:/C=US/O=xxxxx/CN=xxxxxRoot CA 1 2 s:/C=US/O=xxxxx/CN=xxxxxRoot CA 1   i:/C=US/ST=zzzzz/L=Scottsdale/O=yyyyy Technologies, Inc./CN=yyyyy Services Root Certificate Authority - G2 3 s:/C=US/ST=zzzzzz/L=Scottsdale/O=yyyyy Technologies, Inc./CN=yyyyy Services Root Certificate Authority - G2   i:/C=US/O=yyyyy Technologies, Inc./OU=yyyyy Class 2 Certification Authority---Server certificate-----BEGIN CERTIFICATE-----
This is a known issue (RFANDROID-1900).
The issue can be due to several reasons as below:
Double hop is checked in a non double hop setup.On a DoubleHop seup if DoubleHop option is enabled on both the 1st and 2nd hop Vservers, which should be enabled in the second hop only and first hop should have next hop defined as per the article https://support.citrix.com/article/CTX201290.If in a double hop scenario users are directly landing on the 2nd hop of a Double hop setup.
CTX108876 - How to Configure LDAP Authentication on NetScaler or NetScaler Gateway
CTX108876 - How to Configure LDAP Authentication on NetScaler or NetScaler Gateway
Design change in the new codes as mentioned above for 11.1.
NetScaler appliance cannot load the background image when the VPN virtual server has custom theme and DFA policy bound to it.It has been identified as a known issue and tracked under the issue ID 695413.
There was a global tunnel policy configured:bind tunnel global ns_tunnel_cmpall_gzipWhen this policy is configured, NetScaler tries to compress the already compressed files and that increases the latency.You can check if this policy is enabled by running the command on CLI:show tunnel global
This problem will occur if ntDomain and ssoDomain parameters  are set in the XenMobile Session Policies
Some sites are accessible only if the 'client hello' packet has SNI extension. In this case  Backend server SNI is not enabled in the gateway Virtual server (which is a new feature in 12.0 53.x) The 'client hello' sent to backend server do not have the SNI enabled and hence the connection fails with error "handshake failure"
https://docs.citrix.com/ja-jp/netscaler/11/appexpert/responder.html
Seamless logout from NetScaler Gateway and IDP is not supported at the moment. There is a enhancement request #646706 in place to make this work.
We saw the following errors on MAS under mps_afdecoder.log:154108:Thursday, 10 NOV 17 11:53:12 +0000 [Debug] [Main] [3] 10.10.4.5 netscaler is not configured for this appflow collector in ipfix_export_drecord160446:Thursday, 10 NOV 2017 11:54:19 +0000 [Debug] [Main] [3] In AfPacketHandler::DataHandler, data received from 10.10.4.5 with length as 321This means that for some reason MAS has lost the Insight information of the NetScaler and hence it needs to be re-added.
Identified as a bug and reference number is 694328
Configuring Split Tunneling:https://docs.citrix.com/en-us/netscaler-gateway/11/vpn-user-config/configure-plugin-connections/ng-plugin-split-tunneling-tsk.htmlHow do I configure Split Tunnel on NetScaler Gateway?https://support.citrix.com/article/CTX205285FAQ: Citrix Secure Hub for Mobile Devices and MicroVPN Technology:https://support.citrix.com/article/CTX136914SSO and Proxy Considerations for MDX Apps:https://docs.citrix.com/en-us/xenmobile/server/advanced-concepts/xenmobile-deployment/sso-proxy-mdx-apps.htmlReverse Split Tunnel Used Case in XMS/NetScaler integration.https://support.citrix.com/article/CTX227491
Crash is happening while dreferncing the nsb, since nsb is not accessible and dreferencing it is causing segmentation vioaltion. Crash is duplicate of TSK0694195.
It is confirmed SSL certificate has been changed on “citrixservices.citrix.com” since 11/16, which is not installed to NetScaler. The issue started happening since then.
EPA client needs the user to have local administrator rights to be able to access the machine certificate store for certificate check
The certificates file names were identical
This is caused due to the incorrect Certificate template selected while generating the Certificate from the Internal Certificate Authority server(Active Directory)
When Gateway is tunneling FTP (port 21), the Gateway parses the data to support active FTP. In case of FTP over SSL, these data is all encrypted/SSL handshake data. This causes parsing to fail. When NetScaler parse packet for FTPS traffic, packets are truncated, thus client cannot recognize the truncated server responses. Client does not respond and connection times out.After comparing the capture of via SSLVPN and direct access, packet length is decreased via NetScaler.Below is the Wireshark screen capture, which shows the difference in the packet lengths when received and forwarded to client
CTX220730 - How to Confirm HDX Enlightened Data Transport Protocol is ActiveCTX220732 - How to Configure HDX Enlightened Data Transport ProtocolCTX230011 - EDT Session Connection/Reconnection Attempts using UDP and TCP in ParallelCTX230010 - Windows OS VDA 7.16 Schannel library support for DTLSCTX230012 - EDT Security using DTLSCTX231821 - How to Configure EDT when using VPN solutionsCTX231528 - Enlightened Data Transport Not working with Double Hop DMZ scenarioCTX226014 - Application Launch Fails with "Unknown client error 1110" When Using EDT/DTLS on NetScaler GatewayCTX224373 - XenDesktop 7.x Unable to launch published desktop with Adaptive transport policy enabled
Default IE version in sharefile plugin is 7.0. This is not supported on NetScaler.But sharefile plugin 5.1 has default IE version as 11In the given workaround, we are manually setting the IE version on Sharefile plugin to 11.
NetScaler has HSM gateway binary which runs on management core. It takes requests from PE and forwards it to HSM (via hardserver). That binary always assumes that it will only receive socket connection from PE. When the Qualys scan runs on management IP, it will find gateway’s port open and it will connect to it and try to send some data. Since that binary only understands the data from PE, it will not be able to interpret Qualys data and NetScaler Gateway is not reachable / accessible over port 443
Synopsys
add authentication loginSchema <name> -authenticationSchema <string> [-userExpression <string>] [-passwdExpression <string>] [-userCredentialIndex <positive_integer>] [-passwordCredentialIndex <positive_integer>] [-authenticationStrength <positive_integer>]
Arguments
name
Name for the new login schema. Must begin with an ASCII alphanumeric or underscore (_) character, and must contain only ASCII alphanumeric, underscore, hash (#), period (.), space, colon (:), at (@), equals (=), and hyphen (-) characters. Cannot be changed after an action is created.
The following requirement applies only to the NetScaler CLI:
If the name includes one or more spaces, enclose the name in double or single quotation marks (for example, "my action" or 'my action').
authenticationSchema
Name of the file for reading authentication schema to be sent for Login Page UI. This file should contain xml definition of elements as per Citrix Forms Authentication Protocol to be able to render login form. If administrator does not want to prompt users for additional credentials but continue with previously obtained credentials, then "noschema" can be given as argument. Please note that this applies only to loginSchemas that are used with user-defined factors, and not the vserver factor.
userExpression
Expression for username extraction during login
passwdExpression
Expression for password extraction during login
userCredentialIndex
The index at which user entered username should be stored in session.
Minimum value: 1
Maximum value: 16
passwordCredentialIndex
The index at which user entered password should be stored in session.
Minimum value: 1
Maximum value: 16
authenticationStrength
Weight of the current authentication
Minimum value: 0
Maximum value: 65535
Output From aaad.debug
We can see here that the radius verification happens before ldap regardless of the order at the login page.
root@ns# cat aaad.debug
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[1082]: process_kernel_socket 0-64: call to authenticate
user :administrator, vsid :10366, req_flags 2
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[3820]: start_cascade_auth 0-64: starting cascade authentication
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/radius_drv.c[772]: continue_radius_auth 0-64: RADIUS auth: Starting RADIUS authentication for user administrator @ 10.107.141.174
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/radius_drv.c[2116]: process_radius 0-64: RADIUS auth: RADIUS authentication successful for user: administrator from server 10.107.141.174
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/radius_drv.c[2118]: process_radius 0-64: extracted group string :(null)
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[2969]: send_accept 0-64: sending accept to kernel for : administrator
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[845]: process_kernel_socket 0-65: partition id is 0
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[1082]: process_kernel_socket 0-65: call to authenticate
user :administrator, vsid :10746, req_flags 2
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[3820]: start_cascade_auth 0-65: starting cascade authentication
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/ldap_drv.c[107]: start_ldap_auth 0-65: Starting LDAP auth
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/ldap_drv.c[131]: start_ldap_auth 0-65: attempting to do ldap auth for administrator @ 10.107.141.167
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/ldap_drv.c[133]: start_ldap_auth 0-65: LDAP referrals are OFF
receive_ldap_user_bind_event 0-65: User authentication (Bind event) for user administrator succeeded
Wed Nov  1 16:35:35 2017
/home/build/rs_120_53_3_RTM/usr.src/netscaler/aaad/naaad.c[2969]: send_accept 0-65: sending accept to kernel for : administrator
Wed Nov  1 16:35:37 2017
Check the SSL profile/ SSL parameters if OCSP stapling is enabled.
SSL hanshake might fail if server cert ocsp response cache is not found and another client request is served by Vserver before receiving ocsp response from the OCSP responder for server certificate.
In this condition, with OCSP stapling enabled, the NetScaler can send incorrect Server Hello to the client, causing the client to generate the SSL alert.
This would be the case of DNS record not found for the internal network resource, NetScaler is trying to contact the DNS servers which are externally/internally hosted and no response from DNS server is observed
There can be multiples causes of the issue
gateway is out of licenses, causing MAM enrollment to fail. macro configured ‘SEND_LDAP_ATTRIBUTES’.LDAP is configured with UPN and with Global Catalog. For e.g. the Domain ‘test.abc.local’ is managed with alias ‘xyz.ab, xyz-test-racing.ab, xms.com’ Users are login with alias like ‘user@xyz.ab’ .
For customizing the logon page on NetScaler 12.0, refer to Citrix Documentation - Creating a new Portal Theme.For customizing the logon page on NetScaler 11.x, refer to Citrix Documentation - Creating a new Portal Theme.
This issue is because we pass “as is” the password received from client, to the LDAP server. In some cases we need to convert password from Unicode-codepoints to UTF-8 to fix this issue.
Unicode codepoints for the range 0x00000000 - 0x0000007F pose no trouble: for characters in this range, codepoint == UTF-8 encoding. All ASCII numerals, English alphabets fall in this range. This is the reason why plain English usernames/passwords are interpreted correctly by the receiving auth(LDAP) server.Conversion is needed for characters in the range beginning with 0x00000080. Umlauts (like ä, ë, ï ) and Arabic characters fall in this range. For these characters, codepoint != UTF-8 encoding. So we need to convert the codepoint to UTF-8 before passing on to auth server.
For list of NetScaler supported ciphers, see Citrix Documentation - Ciphers Supported by the NetScaler Appliance
How to Configure Authentication at StoreFront using NetScaler Gateway – Requirements and LimitationsHow to Configure Authentication at StoreFront using NetScaler Gateway - NetScaler ConfigurationFAQ - Configuring Authentication at StoreFront using NetScaler Gateway
How to Configure Authentication at StoreFront using NetScaler Gateway – Requirements and LimitationsHow to Configure Authentication at StoreFront using NetScaler Gateway - StoreFront ConfigurationFAQ - Configuring Authentication at StoreFront using NetScaler Gateway
The management CPU is tasked with performing some periodic functions such as compress the log files that cause high CPU utilization which is by design.
Custom port blocked on the External Firewall.
0694638
Media classification got enabled after upgrade due to which NetScaler was buffering the HTTP response before forwarding to the client
as of today 22 September 2017 ,this issue has  been recorded under a defect 0694970 and being worked for a fix by engineering , this id can be checked for Release-Notes of upcoming releases
1. We can see authentication bearer header in POST request from client to server when the client is trying to read the word document.Due to this Authorization Header value being Bearer, the backend server was sending 401 Unauthorized error to the client and hence the client was being prompted to enter in the credentials again.2. To strip off the same we used the rewrite policy on CS vserver and after that we are not seeing that header in POST request to backend.3. However still it prompts for username and password whenever we are trying to read the downloaded file.We are seeing 401 NTLM Negotiate however NetScaler is not sending the credentials to backend instead its requesting credentials from client again.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
macOS High Sierra has introduced a new feature that prompts the user to approve new third-party kernel extensions.
Self singed certificate created with an old NS version. The old certificate was replaced by a new one after an upgrade therefore is not longer valid.
Netscaler Mis-configuration.SecureHub uses Windows/MAC OS X plugin type to connect to Citrix resources.
Citrix has identified that the error is due to a third-party-dependent SDK used for smart card authentication that is not compatible with iOS 11.
Configuration change.
Expected behavior with a VPN vip used on a lb as a service.
IIS SSL settings in CA Server was not configured to accept SSL certificate for authentication
The expression (REQ.HTTP.HEADER User-Agent CONTAINS CitrixReceiver/CitrixVPN ) was missing.
https://docs.citrix.com/en-us/netscaler/12/aaa-tm/authorization.htmlhttps://docs.citrix.com/en-us/netscaler-gateway/11/authentication-authorization/configure-authorization/ng-authorize-config-policy-tsk.html
VPN Vserver configured with basic AAA session.
LB VIP On Prem that had the ACNODEID LB persistence rule had no server ID configured.
> Redirect URL is missing a forward slash at the beginning, that is causing the current Secure Web logic to add an additional base URL, which causes the 503 error.
Current: Response.Redirect("logon_funct.asp?.")Expected: Response.Redirect("~/logon_funct.asp?.")
> iOS Secure Web redirect logic takes into consideration that “/”, which adds the additional base URL in the redirection URL
Currently this configuration is not supported by product.
The SSL profile creation using GUI in version NetScaler 11.1 build 54.14 (and Build 54.16) contains the option "Strict Signature Digest Check" which cannot be configured at the time of creating a profile.
This option is not available in the configuration of any other build of NetScaler. When creating the profile using CLI, this option is not used and hence the error is not seen - https://docs.citrix.com/en-us/netscaler/11-1/ssl/ssl-profiles1.html
DNS record had duplicate entry
Citrix Documentation - AlwaysON
When exporting the pfx file from the Windows server the option "Include all files in the certificate" makes the certificate pair and issuer to show a missmatch from the Netscaler SSL side.To avoid this issue export PFX without selecting this option.
Wrong Configuration.Plug-in Type under session policy was using Java.
SSO Failure due to domain mismatch.
This behaviour can arise when XenMobile server is set to use CBA (Cert Based Authentication) but the NetScaler Gateway vServer is configured for Domain+LDAP and not CBA configured.
This is a known issue and it was tracked as #630667 and #689552
How to Configure HDX Enlightened Data Transport Protocol :  https://support.citrix.com/article/CTX220732Configuring NetScaler Gateway to Support Enlightened Data Transport : https://docs.citrix.com/en-us/netscaler-gateway/12/hdx-enlightened-data-transport-support/configuring-netscaler-gateway.htmlEDT How do I: https://support.citrix.com/pages/xaxd-how#EDTHow to Configure EDT when using VPN solutions: CTX231821
SSO user expression not honoured for domain information in domain\username format.The NetScaler will use complete Domain in FQDN format during SSO to backend servers.NetScaler will prefer the Domain obtained during Login to the Authentication Vserver.If SSO user expression is used to obtain user in Domain\Username format, Domain information is ignored in favour of the login Domain.As in the above, the Domain information is in FQDN form and is the Login Domain
Status of the certificate or how many days are left for certificate expiry can be verified from GUI - NetScaler > Traffic Management > SSL > SSL Certificates.
Citrix Documentation - Certificates and Keys FAQsCTX109711 - How to Update an SSL Certificate on NetScalerCitrix Documentation - Adding or Updating a Certificate-Key PairCTX122521 - How to Replace the Default Certificate of a NetScaler Appliance with a Trusted CA Certificate that Matches the Hostname of the ApplianceCTX114146 - How to Install and Link Intermediate Certificate with Primary CA on NetScaler Gateway
Points to Note
If the server certificate is not placed first in the PEM file, then the following error appears:	Server certificate must be placed first in the certificate bundle file.
It is not recommended to include the Root Certificate Authority (CA) certificate in the certificate bundle as the CA certificate would be linked. When the Server certificate is bound to a virtual server on the NetScaler appliance, the complete SSL chain of certificates is sent to the client as part of the SSL handshake. Therefore, negating any validation of Certificate Authorities as part of the SSL handshake.
Always include a carriage return at the end of the PEM file and/or key, as shown in the following screen shot:
Converting from PKCS7 (P7B) or PKCS12 (PFX/P12) formats to PEM using OpenSSL might not result in the certificates in the PEM file being in the correct order, this must be validated before proceeding.
The following is a sample layout of a PEM file with Server certificate, private key and two intermediate CA certificates for your reference:
-----BEGIN CERTIFICATE-----
MIIEnzCCA4egAwIBAgICFDEwDQYJKoZIhvcNAQEFBQAweDELMAkGA1UEBhMCQUUxXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXPuAVCo+NoXprg5maEDsVBiZXBSq3Ffvg3KBo9WKgN2/QrUo=
-----END CERTIFICATE-----
-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA2S/Z0APwlguIP98ez7447STJNRqb9UKYL2TAxA4KhRFt7+XtXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXWpDzEMFyGZh/ONpIBY3jmZoPFU5vfTFmec8fB4FjtU9tGgDKaDuPDw==
-----END RSA PRIVATE KEY-----
-----BEGIN CERTIFICATE-----
MIIEWTCCA0GgAwIBAgICBAIwDQYJKoZIhvcNAQEFBQAwdjELMAkGA1UEBhMCQUUxXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXjAZCgo3v1YkSX713zg==
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIEWTCCA8KgAwIBAgIEBAAD8TANBgkqhkiG9w0BAQUFADB1MQswCQYDVQQGEwJVXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXN0K3XhD5ROczKe5iRQ==
-----END CERTIFICATE-----
A bug (issue ID#686774) in NetScaler DTLS layer caused the drop of DTLS frames fragmented in IP layer which resulted in the loss of EDT data.
Though there may probably multiple reasons, we have found that the above errors show up when the TLS v1.2 is not enabled on the NetScaler Gateway VIP. Please make sure you have the TLS v1.2 enabled and try again.
EPA scan is not supported with Secure Hub
2017-06-21T13:09:43.134-0500     <CAMAUTH>    INFO (4)    +[CAMAsyncHTTPImpl debugLogHTTPResponse:data:error:requestID:]    Response #4 error: Error Domain=com.citrix.Receiver.AuthManager Code=11 CAMAuthManErrorCodeHttpError" UserInfo={com.citrix.Receiver.AuthManager.DiagnosticDescription=An SSL error has occurred and a secure connection to the server cannot be made. 2017-06-21T13:09:43.136-0500     <MAM>    INFO (4)    __50-[AccountDiscoveryManager_New detectGatewayAtUrl:]_block_invoke.351    Call to detect Gateway failed 2017-06-21T13:09:43.137-0500     <MAM>    INFO (4)    __76-[AccountDiscoveryManager_New getAccountInfoForStoreId:WithCompletionBlock:]_block_invoke.483    Error getting account service recordRelease Notes for Build 53.13 of NetScaler 11.1 ReleaseIf you receive a response code other than HTTP 200 for an OCSP request, the NetScaler appliance dumps core memory and restarts.[# 673265, 675865, 678915, 677699]
As MAC plugin will forward all the DNS requests to netscaler, if netscaler is not configured with proper DNS name server then netscaler will respond with ip address 0.0.0.0Same behavior is observed even if we use 'Split DNS' mode as local or Both.
NetScaler version previous to 11.1 build 54.14 does not support SHA384 and SHA512 on the back-end.
This is a problem with the NetScaler configuration.
During the initial Client Hello, the client sends TLS protocols and cipher suites the user browser can support. The NetScaler then responds with a Server Hello and agrees on the TLS Protocols and cipher suites that they both can support. At this junction, the NetScaler requests the Client Certificate. However, the Client responds with a Client Length: 0.  Indicating that no certificate was sent to the NetScaler from the client. Since the NetScaler had configured Client Certificate Authentication to Optional, no second request is sent out to the Client. This causes the SSL Handshake to fail.
Host Header containing additional random bytes in the request forwarded to backend server
GET / HTTP/1.1
Host: 148.106.160.5:8080..x
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-GB,en;q=0.5
Accept-Encoding: gzip, deflate, br
Referer: https://abc.com/cgi/setclient?wica
Cookie: clientBrowserName=Firefox; clientBrowserVer=53; clientBrowserFullVer=53.0; clientOS=Windows 7 (64-bit); icaClientVer=Not detected; theUserName=;
Connection: keep-alive
Upgrade-Insecure-Requests: 1
X-Citrix-Via: abc.com
X-Citrix-Via-VIP: x.x.x.x
X-Forwarded-For: y.y.y.y
The Receiver for Windows 4.7, Receiver for Mac 12.5, Receiver for Linux 13.6 and newer versions are going to validate the root certificates even if it trusts the intermediate, which is not the case with the browsers. If the browser trusts the intermediate, it trusts the server certificate, without going down to the root certificate and will display the newer version of the root from its certificate store and not the actual root certificate sent by the server or NetScaler Gateway.In Receiver for Android 3.12.2, joint server certificate validation is turned off by default. If this policy is enabled in the Receiver without the correct set of certificates configured on the server/gateway, users may see the error message.
Certificate + LDAP authentication on the NetScaler (two-factor) was disabled.The NetScaler Gateway is out of licenses
The semicolon (;) is causing brake in the way the GUI executes commands.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
http://discussions.citrix.com/topic/312982-how-set-new-password-for-nsroot/
Secure Mail sync over a STA connection does not function properly with NetScaler 12.0 Build 41.16
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The packet was being dropped in the packet engine when an internal call was made by the AAAD module of the NetScaler with Appflow enabled.This was triggerred only for users with a large number of group memberships as the packet size exceeds the default MSS of 1460.
This issue appears under the following circumstances- On-prem NetScaler in place for gateway connections- Hosted NetScaler for XenMobile LB and CS.- Web Links for HTTP sites.The Content Switch on the hosted NetScaler as "SSL Redirect" enabled by default
Whenever the Back-end Server DNS Response Exceeds 512 Bytes , Truncate flag is SET in the DNS Response , Which forces the Client to try the DNS Request over TCP .But in case of VPN GET /cs Request is Sent to the DNS Server which has a Non-Existent IP. As a Result the DNS Request Fails
Know issues#675983
CTX113250 - Required Ports for Citrix NetScaler Gateway in DMZ SetupCTX101810 - Communication Ports Used by Citrix Technologies
Summary: This behavior is expected as per the current Design where we are using Session Username which is also the Server Logon Attribute for performing SSO to File shares. Analysis: POST /fs/login HTTP/1.1Accept: */*Accept-Language: en-usReferer: https://<FQDN>.htmlAccept-Encoding: gzip, deflateUser-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.3; Creative AutoUpdate v1.41.07)Host: HostnameContent-Length: 100Connection: Keep-AliveCache-Control: no-cacheCookie: WINGDevice="CTX_DeviceId#WI_UNqMYF9jSASe1OZvV"; NSC_AAAC=804fb5701efc8ef8b643a200dff584a10c3a01eab45525d5f4f58455e445a4a42; NSC_FSSO=1; wp10900=UTCTTDDDDDDIHIVMMJM-VCMX-XWHV-HJXZ-BTLXAUVJIKKZDYWYYHCLK-CXUI-XZCK-BKUJ-YLWKWYZLYXVVDJHssplhg_Jht; __utma=41964343.908169125.1439831399.1439831399.1439834976.2; __utmz=41964343.1439831399.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __unam=c03a8e3-14f3ca39fd0-325b0a19-3FSSSO: _login=username&_password=userpassword_domain=userdomainWINSIP: 0.0.0.0FSIP: 10.x.x.xnsc_nonce: KR6fJ0kNd1xXznng server=%5C%5Cservername.local%5Ccommon&login=&password=&domain=&nsc_nonce=KR6fJ0kNd1xXznng
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
CTX221693 - What is the difference between Negotiate and NTLM authentication?CTX221696 - How does the NetScaler use Kerberos for Single Sign On?CTX222453 - How to Configure the NetScaler for Kerberos ImpersonationCTX222386 - How does Negotiate authentication work on an AAA-TM vServer for Internal Clients?CTX222568 - How does Negotiate authentication work on an AAA-TM vServer for External Clients?CTX222443 - How does Client Certificate Authentication work with KCD Single Sign On?CTX222444 - How does LDAP Authentication work with Kerberos Impersonation SSO?
CTX221693 - What is the difference between Negotiate and NTLM authentication?CTX221696 - How does the NetScaler use Kerberos for Single Sign On?CTX222454 - How to Configure the NetScaler for Kerberos Constrained DelegationCTX222386 - How does Negotiate authentication work on an AAA-TM vServer for Internal Clients?CTX222568 - How does Negotiate authentication work on an AAA-TM vServer for External Clients?CTX222443 - How does Client Certificate Authentication work with KCD Single Sign On?CTX222444 - How does LDAP Authentication work with Kerberos Impersonation SSO?
LDAP server certificate configuration is necessary
WI version mismatch with netscaler version can be found under /var/log/wicmd.log
The Device Cert Authentication Fails with Green Bubble theme because of the fact that we do not retain the NSC_EPAC Cookie since the above 2 request results in a 302 Redirect from the NetScaler which eventually resets the NSC_EPAC Cookie  as shown below. GET /media/Screen_shadow_top.png HTTP/1.1Host: FQDNUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:28.0) Gecko/20100101 Firefox/28.0Accept: image/png,image/*;q=0.8,*/*;q=0.5Accept-Language: en-US,en;q=0.5Accept-Encoding: gzip, deflateReferer: https://fqdnCookie: NSC_EPAC=a9e4ea61badd278b6fd18837c7ba87cdConnection: keep-alive   HTTP/1.1 302 Object MovedLocation: /vpn/index.htmlSet-Cookie:NSC_EPAC=xyz;Path=/;expires=Wednesday, 09-Nov-1999 23:12:40 GMT;SecureSet-Cookie:NSC_FSRD=xyz;Secure;HttpOnly;Path=/;expires=Wednesday, 09-Nov-1999 23:12:40 GMTConnection: closeContent-Length:534Cache-control: no-cache, no-storePragma: no-cacheContent-Type: text/html <html><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"><script type="text/javascript" src="/vpn/resources.js"></script><script type="text/javascript" language="javascript">var Resources = new ResourceManager("/vpn/resources/{lang}", "REDIRECTION_BODY");</script></head><body><span id="This object may be found "></span><a href="/vpn/index.html"><span id="here"></span></a><span id="Trailing phrase after here"></span><script type="text/javascript" language="javascript">Resources.Load();</script></body></html>  GET /media/Screen_shadow_bottom.png HTTP/1.1Host: fqdnUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:28.0) Gecko/20100101 Firefox/28.0Accept: image/png,image/*;q=0.8,*/*;q=0.5Accept-Language: en-US,en;q=0.5Accept-Encoding: gzip, deflateReferer: https://fqdnCookie: NSC_EPAC=a9e4ea61badd278b6fd18837c7ba87cdConnection: keep-alive   HTTP/1.1 302 Object MovedLocation: /vpn/index.htmlSet-Cookie:NSC_EPAC=xyz;Path=/;expires=Wednesday, 09-Nov-1999 23:12:40 GMT;SecureSet-Cookie:NSC_FSRD=xyz;Secure;HttpOnly;Path=/;expires=Wednesday, 09-Nov-1999 23:12:40 GMTConnection: closeContent-Length:534Cache-control: no-cache, no-storePragma: no-cacheContent-Type: text/html <html><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"><script type="text/javascript" src="/vpn/resources.js"></script><script type="text/javascript" language="javascript">var Resources = new ResourceManager("/vpn/resources/{lang}", "REDIRECTION_BODY");</script></head><body><span id="This object may be found "></span><a href="/vpn/index.html"><span id="here"></span></a><span id="Trailing phrase after here"></span><script type="text/javascript" language="javascript">Resources.Load();</script></body></html> Since there is no NSC_EPAC Cookie in the subsequent request NetScaler Provides a new Cookie and expects the device cert to be sent again but we never do the device cert authentication again and use the new cookie in the POST /cgi/login request which results in 403 forbidden error as shown below. POST /cgi/login HTTP/1.1Host: fqdnUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:28.0) Gecko/20100101 Firefox/28.0Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8Accept-Language: en-US,en;q=0.5Accept-Encoding: gzip, deflateReferer: https://fqdnCookie: NSC_EPAC=460bf477eb6a5abcefba8120dda987cdConnection: keep-aliveContent-Type: application/x-www-form-urlencodedContent-Length: 28login=user&passwd=passwd  HTTP/1.1 403 Access ForbiddenConnection: closeContent-Length: 29Content-Type: text/htmlCache-Control: no-cache,no-storePragma: no-cache Error: Not a privileged User.
Issue was found in one of the functions used to store / duplicate password strings in a structure used by authentication module.When using that function and later encrypting given password, the resultant encrypted string sometimes contained a pattern that caused some bytes of the password not copied, and resulted in wrong string passed into internal ldap password change function.
CTX218929: Unable to launch application from Chrome via Netscaler Gateway with client selective trust (CST) enabled
https://docs.citrix.com/en-us/netscaler/11-1/aaa-tm/saml-authentication/netscaler-saml-idp.htmlhttps://docs.citrix.com/en-us/netscaler/11-1/aaa-tm/saml-authentication/netscaler-saml-sp.html
SSL 3.0 on Windows machine was enabled. The following error was found in the event viewer:A fatal error occurred while creating a TLS client credential. The internal error state is 10013.
NetScaler EPA logs shows the following error:Error 12029 A connection with the server could not be established
Error 12029 is related to WinINET process as described in following link - https://msdn.microsoft.com/en-us/library/windows/desktop/aa385465%28v=vs.85%29.aspx
SSO is not supported for an HTTPS site published or part of the homepage in a full VPN setup. The challenge here is when the URL reaches the client, an end to end SSL session is created. Since it is HTTPS there is no way in which Netscaler can decrypt or see the back end communication.
The user does NOT have permission to access the requested resource. Where the Admin bind Request will Result in Failure with Invalid user Credentials .
CGP Signature Split Across Multiple SSL Records is not Handled by NetScaler .Working Android Receiver : We can see the CGP Signature(1a 43 47 50 2f 30 31) is part of the Same SSL Record for the Android Receiver.Non-Working Windows Receiver : ---à we see that the  CGP Signature is Split and the Value (1a) is received first SSL Record.  the Rest of the Signature(43 47 50 2f 30 31) is coming in the Second SSL Record.
Signing Private Key on Mac needs Access Control set to "Allow all applications to access this item".
The following is the preauthentication policy for domain check:EPA Domain Check CLIENT.SYSTEM('DOMAIN_SUFFIX_anyof_<domain>[COMMENT: Domain check]') EXISTS
There is a known issue documented in the release notes of NetScaler Gateway 10.5, that NetScaler VPX cannot be directly imported into Hyper-V on Windows Server 2012 R2 using the "Import Virtual Machine" function of Hyper-V Manager. The release notes can be found at the bottom of the NetScaler Gateway download page.
CTX220875 - XenMobile 10.5: SmartAccess to HDX - Introduction and RequirementsCTX220877 - XenMobile 10.5: SmartAccess to HDX - How to configure SmartAccess Policy on XenApp and XenDesktop CTX220964 - XenMobile 10.5: SmartAccess to HDX - How to Configure Compliance Automated Actions in XenMobile CTX220967 - XenMobile 10.5: XenMobile Server and SmartAccess FAQ CTX220876 - XenMobile 10.5: SmartAccess to HDX - How to Configure the XenMobile SAML Certificate to the StoreFront Store
During installation, the NetScaler may not have unpacked all of the packages.
Misconfiguration on AG vserver- receiver session policy in "Web interface address"
http://discussions.citrix.com/topic/358101-thin-client-connectivity-via-netscaler-gateway/
This is a  known issue and  Clientless Mode url encoding need to be Transparent on the Session action.
Change in IE User-Agent string.
Credential Wallet Service not Running on StoreFront Server .
https://docs.citrix.com/en-us/netscaler/10-5/ns-tmg-wrapper-10-con/ns-ssl-wrapper-con-10/ns-ssl-monitor-cert-status-with-ocsp-con.html
-Gateway session cookie was inserted when customer was trying to access Gateway from Okta homepage. Request was redirected to /cgi/samlauth and forwarded to the IIS server since Session cookie matched with an existing connection.-Responder or rewrite policies were ignored due to AAA processing in the NetScaler packet flow take precedence of those feature, bypassing its functionality
DNS on AWS not working
SSO domain not correct on Netscaler Gateway session profile.
-- The NetScaler Gateway is supported on a cluster only when the VPN virtual servers are bound to node groups that have a single cluster node.
On the StoreFront Server, the Store that was configured for External access was hidden using the option Hide Stores under Configure Store Settings.
- The wrong root certificate was installed (serial mismatch).
The problem was occurring because the SSO Name Attribute was incorrectly set to cn.
If the user authrnticates using “sAMAccountName”, Netscaler sends only username suffix without sending domain which is expected. Here’s how it works!User enters domain\username in netscaler login pageNetscaler uses username and domain that user entered during NTLM SSOUser enters sAMAccountNameNetscaler uses only username in NTLM. It picks domain from type2 of the server. If server does not send anything, it uses default NETSCALERIf user enters UPN, netscaler uses UPN with empty domain field.
If an IIP (Intranet IP), is enabled and bound to NetScaler Gateway, NetScaler will only map one IP per user connection for an user account on that Gateway.So if the user is authenticated and accessing resources on one device and attempts authenticate and access resources on another device with the same account. One of those devices will loose access to the resources due to the auth cookie being valid for only one user that is mapped to one IP.
The Issue is with Windows Phone receiver 1.2.2 not handling HTTP 302/301 redirects
Tested the database files in lab and able to see the problem with the new database. The reason this is not working is because in the new DB(GeoIP-142_20150804), the ISP entry's length exceeds 32."213.x.x.0","213.y.y.255","TR","Example1 Example1 example3 net"
In the older DB, GeoIP-142_20140401, the entry for the same is:"213.x.x.0","213.y.y.255","TR","Example1 Example1 example3 org"
Further we tried the Responder policy with new DB GeoIP-142_20150804, for entries where this length doesn't exceed 32, and that is working fine.
As of now ISP string length to maximum 32 bytes only is supported. We need to modify entries which have length more than 32 bytes/characters.
To check for the Windows update date on client machine, go to Control panel > Windows update > check the date beside Most Recent check for updates:
As per Microsoft, the " The Automatic updates" will update the Last Search Success Date results. Since Windows update was not set to " Automatic" on client machine, the Last Search Success Date results was not updated. Thus EPA fails.
MDM enrollment were failing because Client Authentication was disabled under the SSL Parameters for the MDM LB vServer on port 443.This is causing the backend XenMobile server to fail to recognize the client's identity during enrollment, and sending an HTTP 417 Selective Wipe back to client, which terminates the enrollment process, followed by a selective wipe happening on the Secure Hub client.
Receivers are unable to trust the connection if certificate chain is incomplete.
Devices getting authentication prompt (ldap username and password) too often due to the session timeout on the NetScaler Gateway being configured low (2 hours).
NetScaler Trace showed the Mail Server was responding with a "HTTP Error 503. The service is unavailable"OPTIONS /Microsoft-Server-ActiveSync HTTP/1.1Host: "ExchnageFQDN"User-Agent: Secure Mail/10.4.1 iPad/10.0.1Authorization: Basic ampvbmVzOg==Content-Length: 0Accept-Encoding: gzipConnection: keep-aliveHTTP/1.1 503 Service UnavailableContent-Type: text/html; charset=us-asciiServer: Microsoft-HTTPAPI/2.0Date: Fri, 18 Nov 2016 16:33:38 GMTConnection: closeContent-Length: 326<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd"><HTML><HEAD><TITLE>Service Unavailable</TITLE><META HTTP-EQUIV="Content-Type" Content="text/html; charset=us-ascii"></HEAD><BODY><h2>Service Unavailable</h2><hr><p>HTTP Error 503. The service is unavailable.</p></BODY></HTML>
The prompt for the certificate comes up while launching the application/ desktop because the SSL Proxy Host that is added by the StoreFront Server is pointing to the NetScaler Gateway virtual server that has Client Authentication enabled.
Unable to resolve DNS entriesDNS servers showing downresolv.conf files missing amazon DNS
Incorrect configuration on Netscaler Gateway.
Citrix Documentation - Create a single FQDN to access a store internally and externally
PNAgent legacy mode enabled in StoreFront.
Policy missing on NetScaler.
The Admin account had expired due to which the login for the actual user was also failing.The Administrator account is bound before the actual user bind occurs while authenticating a user through LDAP.
SalesForce as the Service Provider expects InResponseTo as empty for IDP-init Browser POST Profile
https://docs.citrix.com/en-us/netscaler-gateway/11/whats-new.html
Insight Center does not display does not Display HDX Data, as time zone was misconfigured on Insight Center.
Private Key Format
Wireshark can decrypt SSL traffic provided that you have the private key. The private key has to be in a decrypted PKCS#8 PEM format (RSA). You can open and verify the key file. If it is in binary, then it is likely to be in a DER format, which cannot be used with Wireshark.
You can use OpenSSL to convert the key. For example, converting a PKCS#8 DER key to a decrypted PKCS#8 PEM format (RSA) key.
At the $ prompt enter the following command:openssl pkcs8 -nocrypt -in der.key -informat DER -out pem.key -outformat PEM
Where:der.key is the file name and path to the DER key file.pem.key is the file name and path to the PEM key file output.
The decrypted PKCS#8 PEM format (RSA) key must be similar to the following screen shot:
Notice that the key begins with:-----BEGIN RSA PRIVATE KEY-----
If it begins with:-----BEGIN ENCRYPTED PRIVATE KEY-----
Then the key is encrypted and needs to be decrypted with the right passphrase. You can again use OpenSSL to do this.
At the $ prompt, issue the following command: openssl rsa
If you issue this command without arguments, you are prompted as follows: read RSA key
Type the name of the key file to be decrypted.	You can type the openssl rsa command with arguments if you know the name of the private key and the decrypted PEM file.	For example, if the private key filename is myprivkey.pvk and the decrypted filename is keyout.pem, the command is: openssl rsa –in myprivkeypvk -out keyout.pem
Helpful Links
CTX232735 - How to Ensure NetScaler Traces will DecryptDownload WiresharkWireshark SSL WikiWireshark - Display Filter Reference: Secure Sockets LayerOpenSSL - RSA DocumentationSourceForge - GnuWin
Citrix Documentation - Managing User Sessions
After replicating the issue in house Engineering team has confirmed that this is working as per design, SAN cert is not supported for WIonNS callback URL. since the WI code has been EOL’ed. We will not be able to take any new enhancements as we won’t be able to modify the WI code
There have been many SSL Certificate changes made in 11.1, the GUI –Wizard has issue.
LINphone client tries to makes an outgoing call the PBX rejects the call. The (tcpdump) from PBX shows immediately after SIP INVITE from LINPhone, PBX replies “PROXY AUTHENTICATION REQUIRED” and rejects the call after 3 attempts. However post removing the auth code it works as expected.
Issue is seen only with Receiver for Mac which needs code level fix.
The issue is caused due to the handshake failure with NPN extension on MPX with TLS1.0.
By default each packet engine can only handle 1,00,000 AppFW session at a given time. So if the sessions are crossing 1,00,000 per PE than this issue is seen.
flash/nsconfig/rc.conf file had wrong hostname specified.
Refer to the following articles for more details on configuring and troubleshooting LDAPS authentication:For specific instructions on how to configure LDAP Servers and policies: How to Configure LDAP Authentication on NetScaler or NetScaler Gateway For information on how to troubleshoot authentication/password change failures: How to Troubleshoot Authentication Issues Through NetScaler or NetScaler Gateway with aaad.debug Module
this was caused due to a bugwhich has been fixed  now
This is due to BUG 643558, where multicast packets over the VPN tunnel causes the MUX channel to go down.
As NetScaler Gateway code does not properly handle the UDP packets destined to Multicast IPs (224.* to 239.* network), and as a result, it closes the MUX connection with vpn-plugin.
So which ever client machine in your environment happens to send Multicast UDP packets, runs into the issue.
CTX128655 - How to Record Network Packet Trace on NetScaler ApplianceCitrix Documentation - nstrace Command ReferenceCTX205282 - How Do I Configure Perfect Forward Secrecy (PFS) on NetScaler?
This is a memory leak issue caused due to SSO using KCD as enabled in traffic action which is invoking the MEM_SSLVPN
NetScaler currently does not handle the broadcast packets directed to the IIP subnet.
The issue is caused by unsupported SFP being used on NetScaler.
Checked the Storefront configuration and did not find callback url defined. We configured it and now its working fine.
Issue is caused due to some code level issue which will be fixed in upcoming 11.0 build.
SNMP-Specific Trap config was not added.
None - Misconfiguration
http://support.citrix.com/proddocs/topic/ns-faq-map-10-5/ns-faq-ssl-ref.htmlhttp://man.he.net/man1/pkcs7https://www.openssl.org/docs/man1.0.2/apps/openssl.html
Since netscaler is in DMZ, netscaler was talking to backend storefront/xenapp servers over a natted IP. When DDC was giving IP address of XA server (application host server), its giving internal IP of the XA server instead of the natted IP.Netscaler cannot communicate with the internal IP and has to go through natted IP.
The issue is caused due to nsload.exe component of VPN signed by SHA2 from 11.1 onwards which is not supported by Win7 RTM unless customer's have installed security patch KB3033929 on that user's Windows machine.
This is a known issue with Storefront 3.0.1+. By default if the Optimal Gateway feature is enabled on Storefront, it will generate an internal ICA file with IP address of internal XenApp server instead of STA ID which will cause launch failures through Netscaler Gateway
We can see from the logs for the User a colon(:) is appended  and this is the issue as per Engineering Team."<134> 10.102.x.40 05/12/2011:09:30:09 GMT ns PPE-0 : SSLVPN CLISEC_CHECK 33636331 :  User nsroot - <Client IP> - Vserver <IP>  - Client_security_expression CLIENT.APPLICATION.PROCESS(notepad.exe) EXISTS - Client_security_check failed - User not allowed to login"25/08/2016:09:17:35 GMT NSCALER 0-PPE-0 : default SSLVPN CLISEC_CHECK 117963934 0 :  User: niblettr - <Client IP> - Vserver <IP>  - Client_security_expression "CLIENT.REG('HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Services\\\\Tcpip\\\\Parameters_Domain').VALUE == 'domain.com'" - Client security check failed - User put in quarantine group MSOfficeAllowed - Error message Browser - Client is not a domain member
SSL libraries used by the Receiver 4.3/4.4 had issues.
Known issue as reported in issue id 635939
This is a known issue tracked with issue ID 0628662.
The AAA Authentication Cookies are set at the very beginning of first-factor authentication, hence subsequent request always carry the COOKIES which is evaluated to True and hence NetScaler succeeds with the authentication of the user.
A known bug in 11.0-66.11nC tracked under ISSUE ID: 0656437
Plotting of graph cannot be of more granular.
A known issue fixed in 11.0 release
Tracked under Issue ID : 0631144
Persistency was not maintained.
known issue
issues with beacons .
This is a code level fix for GUI issue.
Issue ID 634480
Application Firewall blocking the request for netscaler gateway.
show vpn parameter        VPN UI Theme: CUSTOM        Client cleanup options: Once this parameter is set to custom. Symbolic link changes from (var/netscaler/gui) DEFAULT LINK to (var/ns_gui_custom/ns_gui) CUSTOM LINK
All the customization is configured under ns_gui_custom
What files are present under ns_gui folder of ns_gui_custom directories?total 8drwxr-xr-x  12 1003  513   512 Dec 22  2015 admin_ui/   -----------------------à  This folder contains the Netscaler admin UI filedrwxr-xr-x   8 1003  513  1536 Dec 22  2015 vpns/drwxr-xr-x   5 1003  513   512 Dec 23  2015 epa/drwxr-xr-x   6 1003  513   512 Dec 23  2015 vpn/root@ns# Now suppose we have configured the customization in 10.1 Netscaler
We have modified the file of 10.1 Netscaler which includes admin file of 10.1 build.
After upgradingNetscaler version is changed to 10.5. However the admin file still points to 10.1 version since we have set the parameter to “CUSTOM” This is causing the issue wherein the admin page is getting broken.
From the NetScaler traces it is seen that TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 cipher is exchanged and agreed, then later TCP  Zero Window is sent by NetScaler to server.
There is window leak issue in 11.0 65+ builds with TLS1.2 and TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 cipher.
The following options will lead to this issue:
StoreFront servers are load balanced on NetScaler.Load balancing IP used to load balance StoreFront servers is a non-routable IP. This means that you cannot reach the load balancing VIP from client machine or any other machine, or there is no route added on NetScaler for Load balancing VIP. For example if a NetScaler is in 10.x.x.x subnet and you configure the load balancing VIP in 192.x.x.x.subnet for which there is no route on the NetScaler.NetScaler Gateway session profile pointing to load balancing VIP under "Published Applications" tab.
This issue is seen because of a design change from NetScaler 11.0-67+ builds, where when you add StoreFront URL in NetScaler Gateway session profile, NetScaler will internally try to probe the load balancing VIP that is added.
In few cases the probe will fail as NetScaler is not able to find the source IP for probing non-routable load balancing VIP.
In previous NetScaler builds it was working as the load balancing VIP was not probed. This behavior was changed since the previous design occasionally led to crashes.
In  Netscaler Release 10.5, when a client VPN plugin attempts to establish the connection, it will handle the initial request for the services.html page, which, by design is an HTTP request on port 8080. The services.html page will then redirect to either the portal homepage or to the configured homepage in the session profile.If the VPN connection is taking longer than expected, the plugin will not be able to send the request over the VPN on port 443 and so will result in the page stuck on :8080/vpns/services.html.
Citrix Documentation - Enabling Proxy Support for User ConnectionsCitrix Documentation - Configuring AuthorizationCitrix Documentation - Configuring Authorization PoliciesCitrix Documentation - Setting Default Global Authorization
Due to the fix done in below Issue ID to address the issue this change was made from 11.0-65+ builds:NetScaler Insight Center might intermittently become unresponsive and not populate any reports.[# 618370, 622539]
https://docs.citrix.com/en-us/netscaler-gateway/10-5/ng-configuration-mgmt-wrapper-con/ng-authen-authoriz-wrapper-con/ng-authorize-config-con/ng-authorize-config-policy-tsk/ng-authorize-ldap-extraction-con/ng-authorize-config-nested-ldap-tsk.htmlhttp://support.citrix.com/article/CTX123795
The issue was caused for the backend website where SSO was not working as it was listening on port 90 and protocol as HTTPSSO doesn't work on non custom HTTP ports.
In the browser policy,  Published Applications > ICA Proxy was set to OFF.
http://discussions.citrix.com/topic/350219-mac-conflict/
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Firewall rules can be the cause of the issue.
The issue was caused due to high sessiontimeout set on traffic management session actions of 480 minutes.
Issue ID 617267 fixed in 11.0-65+, 10.5-62+ and 11.1-30+Below is the confirmation from Release notes:In the GUI, on the GSLB statistics page, the local site MEP state is always displayed as DOWN instead of as a blank field.[# 617267]https://www.citrix.com/content/dam/citrix/en_us/documents/downloads/netscaler-adc/NS_11_0_65_35.html
BUG0678282​VPN plugin fails to establish tunnel on select few systems. It gives following error
1012: The NetScaler Gateway Plug-in could not start. For more information, see the connection log. (18)
OCSP server information is added on the code level with Default TD 0 - that is why Netscaler attempts to communicate with OCSP server from SNIP in TD 0This behavior is according to the current design (as OCSP is not supported in non-default Traffic Domain)
ICA sessions are launched after enumeration, and make a separate connection to the NetScaler.  When the client makes a connection to the Gateway for application launch, the session policies are not read.
The timeout values in session policies apply to the StoreFront or Web Interface connection, and VPN and CVPN connections, where the initial client connection to the Gateway which the session profile applies to will be maintained.
The NetScaler Gateway is denying access and returning a NSC_VPNERR cookie with value 4002.The issue was with the LDAP authentication policy bound to the NetScaler Gateway, which wasn't fetching the AD user information correctly. This is causing the NetScaler session to be terminated.Logs are showing:07-29 15:37:50.210 D/"Secure Hub"(21203): "DETAIL    ( 5)","AuthMan:AGLegacyAuthImpl.processPostCredentialsResponse"07-29 15:37:50.210 D/"Secure Hub"(21203): "DETAIL    ( 5)","AuthMan:AgeeLogon.extractAuthenticationResult"07-29 15:37:50.210 D/"Secure Hub"(21203): "DETAIL    ( 5)","AuthMan:NSC_VPNERR cookie received 'NSC_VPNERR=4002' (LoginNotPermitted)"07-29 15:37:50.210 D/"Secure Hub"(21203): "DETAIL    ( 5)","AuthMan:AuthManException.gatewayErrorFromVpnCookie: The gateway response contained an NSC_VPNERR cookie with value '4002' (LoginNotPermitted)"07-29 15:37:50.210 D/"Secure Hub"(21203): "DETAIL    ( 5)","AuthMan:AgeeLogon.destroySession gatewayUrl='https://gateway.fqdn.com' proxyMode=ENTCVPN"
The "Authorization" header coming from the client side is being tampered by NS when forwarding to the backend server due to which authentication is failing. The current behavior of NS is that if it sees that client is sending the authorization information directly it would strip that off when sending to backend when the SSO is enabled on the NetScaler session profile.This behavior remains the same for AAA-TM virtual server and CVPN as well.
Known issue in 11.1-47.14 build when Enterprise license is installed on Netscaler.
With iOS log comparison for NetScaler 11.0, StoreFront replies "HTTP error 404" during AGServices discover; but for NetScaler 10.5, it replies HTTP 200:
NetScaler 11 iOS log:
2016-07-25T17:07:14.031+0800AsyncHTTP.mDEBUG1 (6)currString https://agxa78.ctxpoc.com/AGServices/Discover currFileLength 315 totalFileLength 315.2016-07-25T17:07:14.038+0800AsyncHTTP.mNWREQUESTDETAIL (5)    "Content-Type" = "text/html; charset=us-ascii";      Date = "Mon25 Jul 2016 09:07:12 GMT";    Server = "Microsoft-HTTPAPI/2.0";   }.   Response HTTP body: <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd"><HTML><HEAD><TITLE>Not Found</TITLE>  <META HTTP-EQUIV="Content-Type" Content="text/html; charset=us-ascii"></HEAD><BODY><h2>Not Found</h2>   <hr><p>HTTP Error 404. The requested resource is not found.</p> </BODY></HTML>
NetScaler 105 iOS log:
2016-07-26T09:33:49.072+0800AsyncHTTP.mDEBUG1 (6)currString https://agxa78.ctxpoc.com/AGServices/Discover currFileLength 24 totalFileLength 24.2016-07-26T09:33:49.097+0800AsyncHTTP.mNWREQUESTDETAIL (5)    "Content-Encoding" = gzip;       "Content-Length" = 141;       "Content-Type" = "text/plain; charset=utf-8";       Date = "Tue26 Jul 2016 01:33:44 GMT";      Server = "Microsoft-IIS/8.5";       Vary = "Accept-Encoding";   }.   Response HTTP body: https://ddc78.ctxpoc.com."Activecom.apple.main-threadc072016-07-26T09:33:49.097+0800AccountDiscoveryManager.mDEBUG1 (6)Got HTTP_OK_200. Return body.
2. With capture comparison for NetScaler 11, the host field is with NetScaler Gateway URL; for NetScaler 10.5 the host field is StoreFront FQDN:NetScaler 11 Capture：GET /AGServices/Discover HTTP/1.1Host: agxa78.ctxpoc.comAccept: */*X-Citrix-Gateway: https://agxa78.ctxpoc.comUser-Agent: CitrixReceiver-iPad/3 CFNetwork/758.4.3 Darwin/15.5.0Accept-Language: zh-cnAccept-Encoding: gzip, deflateConnection: keep-aliveX-Citrix-Via: agxa78.ctxpoc.comX-Citrix-Via-VIP: 172.16.151.205X-Forwarded-For: 172.16.3.29 HTTP/1.1 404 Not FoundContent-Type: text/html; charset=us-asciiServer: Microsoft-HTTPAPI/2.0Date: Tue, 26 Jul 2016 02:11:41 GMTConnection: closeContent-Length: 315 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd"><HTML><HEAD><TITLE>Not Found</TITLE><META HTTP-EQUIV="Content-Type" Content="text/html; charset=us-ascii"></HEAD><BODY><h2>Not Found</h2><hr><p>HTTP Error 404. The requested resource is not found.</p></BODY></HTML> NetScaler 10.5 Capture：GET /AGServices/Discover HTTP/1.1Host: ddc78.ctxpoc.comAccept: */*X-Citrix-Gateway: https://agxa78.ctxpoc.comUser-Agent: CitrixReceiver-iPad/3 CFNetwork/758.4.3 Darwin/15.5.0Accept-Language: zh-cnAccept-Encoding: gzip, deflateConnection: keep-aliveX-Citrix-Via: agxa78.ctxpoc.comX-Citrix-Via-VIP: 172.16.151.205X-Forwarded-For: 172.16.3.29 HTTP/1.1 200 OKCache-Control: privateContent-Type: text/plain; charset=utf-8Content-Encoding: gzipVary: Accept-EncodingServer: Microsoft-IIS/8.5Date: Tue, 26 Jul 2016 01:42:30 GMTContent-Length: 141
3. If you define hostname in IIS site binding, then IIS will check the HTTP Host header for http request. If the Host filed does not match then it will reply HTTP error.
Microsoft security advisory: Availability of SHA-2 code signing support for Windows 7 and Windows Server 2008 R2: March 10, 2015
https://support.microsoft.com/en-us/kb/3033929Windows was unable to support higher than SHA1 on signed drivers.
We checked the NetScaler traces and in that we were not noticing a delay in sending 200 Ok for the Get /cfg request. So we used Microsoft NetMon and then verified the traces and in that we could see there was delay. Customer had configured a EPA policy in the global settings. The Post EPA check policy was inducing the delay. It was configured for domain check DOMAIN_SUFFIX_anyof_xxxxxxxxxxx.com.
Customer has an external NetScaler on which the traffic would land and in the session profile of this NetScaler they had pointed the StoreFront LB VServer as Web Interface address and that LB Vserver is hosted on an internal load balancer. After the authentication when the external NetScaler tries to send the StoreFront discover request to the internal NetScaler we see that the SSL connection breaks. That is because when the External NetScaler sends a client hello, in response we are seeing "continuation" with HTTP data in it due to which external NetScaler is resetting the connection with bad SSL record reset code. There is a firewall between the external NetScaler and internal NetScaler that was creating this problem.
For the Receiver for web traffic, the traffic is coming to external NetScaler and to reach internal NetScaler it is using a different network path rather than what was being used for the Receiver and in that path there is no firewall. So the Receiver for web was working fine.
The "show ns hardware" command output also shows the number of cards present as well, 2*CVM N3 1400210 represents 2 SSL cards in the system. For other details on the product specification please refer NetScaler Datasheet https://www.citrix.com/content/dam/citrix/en_us/documents/data-sheet/netscaler-data-sheet.pdf
User attempted to customize logon page and the default files at /netscaler/ns_gui/ was missing, modified, or corrupted.
The following configuration setting configures the NetScaler to utilize public/private key authentication for HA synchronization, in lieu of normal RPCNode passwordsset ns param -internaluserlogin DISABLED.
If the public/private key files are missing, damaged, or do not have the proper permissions, HA synchronization using public/private key authentication will fail.
Software BUG investigated under issue ID :[# 524055, 576330, 576582]
From Release Notes:  https://download.citrix.com/content/dam/citrix/en_us/documents/downloads/netscaler-adc/NS_10_5_59_11.html
Some AAA bindings are not found in the running configuration on rebooting VPX on ESX platform. However, these bindings are present in the ns.conf configuration file. This happens when the VPN virtual server's parameter UITHEME is set to CUSTOM. This issue is specific to VPX on ESX only.
This issue was reported internally by dev test team.
Issue with DNE driver
Fast Ramp option needs to be enabled for processing the large download data.
NetScaler Gateway connections require that the SSL handshake terminate at the NetScaler Gateway. This is enforced by the ica client.
Referenced in Hotfix AAC450W004
The following is the list of events that occur in the scenario when the error appears:
Chrome Web browser opens multiple TCP sessions to the Access Gateway Enterprise Edition site, when the user logs on for the first time. Access Gateway Enterprise Edition appliance sets a cookie.
When the User clicks the red box on the Chrome Web browser, the browser still leaves three connections open with the appliance.
When the user tries to log on again, Chrome Web browser opens new TCP sessions to Access Gateway Enterprise Edition site, and the appliance sets a new cookie.
Chrome Web browser tries to reuse the three old connections, but with the new cookie.
The appliance responds with HTTP 404 error for the new connections. The first request using the new cookie in the reused connection is for /cgi/setclient?wica.
CTX118734 - How to Mitigate Keyloggers with a Virtual Keyboard in NetScaler Gateway 10.x
The components used in this article are based on the OpenSource code provided by GreyWyvern and are free for commercial and non-commercial use under the BSD License.
You can find additional keyboard layouts and advanced customizations at http://www.greywyvern.com/code/javascript/keyboard.
The issue was with 'Dynamic DNS Update’. when Windows VM is starting, VirtualBox is sending Dynamic DNS update for windows-VM IP which is creating the problem
This is due a known issue with Receiver for MAC 12.As it doesn't send traffic for CRL Revocation Check to Internet through proxy and fails.Citrix Receiver Team is working on the official fix as of now, but can provide a workaround to fix this issue for the time being.
Compatibility issue with VPX 25 license.
Root Cause:- This Problem happens with the Chrome browser.- This happens if the plugin version belongs to 10.1 NetScaler ( e.g 2.1.3 ) old version.- The old VPN plugin( < 3.x version) depends on NPAPI, and chrome has disabled the NPAPI support which is why this issue
"Microsoft Enhanced Cryptographic Provider" does not support the SHA256 algorithm required for TLS_1.2 Certificate Verify message.This is why we see the empty signature in the returning "Certificate Verify" message (RCVR => NetScaler) in the WireShark
DNS Views not invoked for internal netscaler calls,Had to configure GSLB Domain with a different subdomain.Add a CNAME to the DNS Delegator
DH encryption was configured on the backend Apache server. This is not a problem usually, except that the Apache server was using a 4096 bit DH key to perform a key exchange. This is currently not supported on NetScaler.
AAA behavior change in generating Cookies for security reasons
NetScaler 11 seems to corrupt the Authorization header and failing to preform SSO actions.This causes NetScaler to send another login prompt to the clientIn SSL VPN sessions, client should be preforming all the SSO actions using the Kerberos ticket.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
A broker from a new XenApp farm was affecting authentication. There was an unspecified error on the event viewer coming from the XML server, the error is found on the StoreFront server.
In a full VPN scenario a client would establish the SSL VPN and then load the home page that has been configured on the NSG session profile. In this case for the home page they have configured kerberos authentication. As it is full VPN the external client would be considered part of the network once the tunnel is established and when the backend server sends a 401 with negotiate to external client then the external client would talk to the AD(KDC) directly and obtain a service ticket which he will inject as part of the HTTP GET request and send it back to NSG. Now NSG will have to forward this request to the backend server. In the 10.5 release builds the above mentioned flow is happening as expected and we can see that NSG sends the request as it is with the authentication information(that contains the kerberos service ticket) to the backend server that is hosting the home page URL.In the 11.0 release when NSG is getting the GET request from client that has the authentication information, NSG is tampering the authorization header and sending to the backend server. As the header is tampered the backend server would not be able to read the kerberos service ticket and due to that authentication is failing and the server explicitly asks the user to do a forms based authentication.
STA's were missing on Netscaler Gateway
You can use http://support.citrix.com/article/CTX121840 for the NS firmware release timelines and http://support.citrix.com/article/CTX111618 to understand the subscription advantage.
Citrix Blog - Announcing StoreFront 3.5
CTX207162 - Error: "Cannot Complete Your Request" When Connecting to StoreFront
CTX134965   - Error: "Your logon has expired. Please log on again to continue." when Users Logon to StoreFront 1.2
CTX116019  - How to Reset root Password for XenServer Host
Platform license expiration has caused the Netscaler to transition to demo mode (depending on model/platform, limiting all traffic [including management] to a total across all interfaces of less than 1Mbps).
Enhanced Authentication feedback is not enable by default.
The RADIUS was not set to "PAP" and a set token with the value of "Qwert1234%" was used.
DNS parameters were set to OnlyAquery. In order for the NetScaler to resolve IPV6 addresses the DNS parameters would need to be configured as AthenAAAA.
iOS devices perform proper security checks and would not allow any connection to complete until its trusted.
The issue is caused due to difference in Xpath support in IE11. The javascript issue <META http-equiv="X-UA-Compatible"content="IE=EmulateIE9"/> was fixed quite long back in 10.5 release but the customized files which the customer is using seems to be outdated and doesn’t have the fix
Citrix Documentation - Mobility Experts: Troubleshooting Secure Mail for iOS
The NetScaler is flagged for vulnerability likely because probes against the NetScaler NSIP using tools like nmap might still result in a report that the NetScaler is using vulnerable SSH ciphers. Typically, quick security scans will not actually attempt to explicitly verify the undesired cipher and can be successfully utilized for an actual SSH connection and subsequent exploit. The scan result might also include an additional flag for enabled weak MAC algorithms (based on md5 or 96-bit) but without trying to use the weak algorithms either.
Be aware that this is not a Citrix issue. The issue is caused by using a CSP that is not compatible with TLS_1.2. These CSP do not support the SHA256 algorithm required for TLS_1.2 Certificate Verify message.  This is why you see the empty signature in the returning "Certificate Verify" message (RCVR => NetScaler) in the WireShark traces:
> In SF 3.5, optimal get may get enabled by default
> Which causes application launch issues through netscaler gateway by creating an ICA file which includes internal Xenapp server's IP instead of STA ticket.> Client machine fails to connect to XA server's internal IP.
This is a known issue with Citrix Receiver for iOS 6.0.1 and NetScaler 11 builds.
Customer had issues with enrolling the IOD device in MDM mode only via DEP.When looked into XMS and Xcode we found out below logs :Issue was identified to be:1) Configuration requirement on NetScaler with way SSL redirect was being handled and suggested to enable SSL redirect on NetScaler for MDM Load balanced Vserver. 2) Enable “Wait for configuration to complete setup” on XMS under “Setting> iOS Bull Enrollment>Enrollment Setting” to make sure supervised IOS device not exit MDM configuration setup until all MDM polices are deployed
Upon checking on XenMobile console, it was  observed that enrollment was successful (i.e. MDM communication) however, communication fails when device tries to connect to XMS for the Store (i.e. MAM communication). Looking at parallel traces on NetScaler along with XMS, it was observed the NetScaler SNIP (IP address: 10.98.80.34) is sending “/Citrix/Roaming/accounts” (via Firewall interface) to fetch store information that contains all the published Apps, to XMS server (IP address: 10.98.94.81). Here is the snippet of above conversation.However, this packet (IP id: 0Xd225) is not observed reaching to the XMS However it was observed, other communication like MDM enrollment (HTTP request) traffic reaching XMS, and receiving response.  As it’s seen the HTTP request in packet#397547, wherein NetScaler SNIP is sending request to XMS IP with IP Id# 0Xd1e8 And same reached XMS server as expected (IP id#0Xd1e8): Based on above observations it seems evident that MAM HTTP request (“/Citrix/Roaming/accounts”) is getting lost post going out of NS interface. NS traces show packet marked as TX on the interface.The difference between the MDM and MAM mode is mainly with respect to additional HTTP Headers added in the request (X-Citrix-Gateway, X-Citrix-Via, X-Citrix-Via-VIP, X-Forwarded for) As XMS was behind Paulo Alto firewall, suggested customer to check with firewall team to confirm in case Firewall  is looking / modifying HTTP data which might be affecting communication at MAM level.
Wireshark captures show Netscaler sending a RST.Problem is with the SSO auth sent to the RDP host.
This issue is because we pass “as is” the password received from client, to the LDAP server. In some cases we need to convert password from Unicode-codepoints to UTF-8 to fix this issue.Unicode codepoints for the range 0x00000000 - 0x0000007F pose no trouble: for characters in this range, codepoint == UTF-8 encoding. All ASCII numerals, English alphabets fall in this range. This is the reason why plain English usernames/passwords are interpreted correctly by the receiving auth(LDAP) server.Conversion is needed for characters in the range beginning with 0x00000080. Umlauts (like ä, ë, ï ) and Arabic characters fall in this range. For these characters, codepoint != UTF-8 encoding. So we need to convert the codepoint to UTF-8 before passing on to auth server.
At the time of sending request to KDC to get a TGT, we are setting user realm as UPN (user@domain.com) instead of the part of the UPN name (domain.com).We can see the KCD error go up at issue time:root@ns200# nsconmsg -d stats | grep -i kcd11239       0                11 aaa_tot_kcd_failuser realm and service realm are not calculated correctly.  This is a code level issue.
Refer Edocs for more info http://docs.citrix.com/en-us/netscaler-gateway/11/vpn-user-config/receiver-integration/decouple-receiver.html
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
This issue required code level fix.
Internal beacon is resolving from the outside on port 443, Receiver believes it is connecting from the inside and is trying to discover the store using the wrong path.
When accessing NetScaler Gateway from Citrix Windows Receiver with two-factor authentication, users are seeing dual password field in the first authentication itself. As users have not yet received the Passcode due to challenge based authentication hence users should not be asked for Passcode. This is due to the way the index.html page is rendered for the users and also dependent on the Receiver version.
Certificate trust issue. StoreFront server does not trust the certificate of the NetScaler.
CGP/Session reliability was disabled in XA/XD policies
Looking through the newnslog messages we see the following entries:
2155 14856 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 17:41:53 2016
2165    21 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 17:42:19 2016
2195  2032 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:19:15 2016
2202     7 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:23:20 2016
2203     7 PPE-0 DBSMonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:23:25 2016
2210   231 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:27:18 2016
2222     0 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:46:43 2016
2223    14 PPE-0 DBSMonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:46:53 2016
2275    28 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:49:28 2016
2333   168 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 19:04:02 2016
2335   196 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): UP; Last response: Success - Probe succeeded. Tue Mar  1 19:07:20 2016
2337    70 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 19:08:30 2016
2349     7 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 19:08:47 2016
2350    28 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): UP; Last response: Success - Probe succeeded. Tue Mar  1 19:09:12 2016
2352     7 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 19:09:22 2016
2375    14 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 19:11:43 2016
2377   315 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): UP; Last response: Success - Probe succeeded. Tue Mar  1 19:16:54 2016
As you can see, the probes are failing more often than every hour. We do not get a reason for the probe failing though.
I also checked the nsumond.log and there are a lot of entries for the script nssf.pl failing for different reasons:
Wed Mar  2 20:54:52 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Wed Mar  2 20:54:52 2016: /netscaler/monitors/nssf.pl Exit Reason : (404 Not Found) (Partition ID: 0)

Wed Mar  2 21:05:22 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Wed Mar  2 21:05:22 2016: /netscaler/monitors/nssf.pl Exit Reason : (Citrix Peer Resolution Service CitrixConfigurationReplication CitrixCredentialWallet CitrixDefaultDomainService CitrixSubscriptionsStore WAS W3SVC stopped running.Degraded Services.) (Partition ID: 0)

Fri Mar  4 14:15:23 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Fri Mar  4 14:15:23 2016: /netscaler/monitors/nssf.pl Exit Reason : (200 OK) (Partition ID: 0)
However the main reason for the failure is this:
Wed Mar  2 19:34:38 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Wed Mar  2 19:34:38 2016: /netscaler/monitors/nssf.pl Exit Reason : (500 Can't connect to 192.168.200.135:443) (Partition ID: 0)
Wed Mar  2 19:34:43 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Wed Mar  2 19:34:43 2016: /netscaler/monitors/nssf.pl Exit Reason : (500 Can't connect to 192.168.200.135:443) (Partition ID: 0)
Wed Mar  2 19:34:58 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Wed Mar  2 19:34:58 2016: /netscaler/monitors/nssf.pl Exit Reason : (500 Can't connect to 192.168.200.134:443) (Partition ID: 0)
Wed Mar  2 20:07:49 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Wed Mar  2 20:07:49 2016: /netscaler/monitors/nssf.pl Exit Reason : (500 Can't connect to 192.168.200.135:443) (Partition ID: 0)
It is a known issue with early builds of NS10.5 SVM firmware and is resolved in 10.5 59.x and onward
USIP is enabled and traffic cannot return from Storefront back to the Netscaler for proxy to client.
Notice when tracing, and filtering for either the client IP or server IP, you will find that Netscaler is sending SYN from the client IP to the server IP, and no SYN/ACK is returned.
AAA-TM has a logout feature where it inserts the logout script going to client based on config. However, if the server responds with HTTP chunked data, Netscaler after evaluating the response coming from backend server is not rechunking after script insertion which causes failures at browsers.
Fixed Issue
This issue is not with the number of groups instead it is with number of characters in the group name that lead to the problem. As per the logs permissible length for attributes is 1225.​In the NS logs we see the following log during the issue:Sep 11 11:46:06 <local0.info> 127.0.0.2 11/09/2015:11:6:06  amu321 0-PPE-0 : default AAATM Message 587749 0 :  "SAMLIDP: SendAssertion: Extracted attribute's length is greater than permissible length, 1225
This can be caused by split DNS being set to BOTH. In this configuration, DNS is attempted via both the client and the NetScaler. This is not desirable for a Split Tunnel OFF configuration.
The issue can be caused due to many reasons. Some of the common reason of getting this error are:a) Reachability issue from Netscaler to Storefront server.b) Expression in the Content Switching Vserver is not correct, due to which it never hits the Gateway Vserver.
When checked on NetScaler Gateway, we can see Intranet IP (IIP) was enabled and user were getting an IP assigned after authentication on NetScaler GatewayIf IIP is enabled NetScaler Gateway (NG) will only  map one IP per user connection for an user account, so if same user account is used to login from different mobile device, NG will not assign IP as the same user account is already assigned with an IP and has a connection on NG.
When wizard creates the name then the Vserver name starts with _XD_Vserver name or _XM_Vserver nameIn config we noticed the vserver name was not starting with _XD. Later we found customer manually changed the vserver name.Netscaler wizard understand this wizard from the _XD or _XM nameIf the vserver name is changed and the name doesn't contain _XD then wizard won't be able to find it and it will fail
Update version doen't work.GUI: Security > Application Firewall > Signatures > *Default Signatures > Update Version --> Error in accessing the URL!
The entire path for the application nsauto.exe is C:\program files\citrix\secure access client\nsauto.exeThe plugin when accessing this location uses a shortcut name for.e.g 'progra~1' for 'program files'. There could be a problem with the shortcut name for 'secure access client' and hence the plugin is not able to find this file.There is a microsoft document for this: https://technet.microsoft.com/en-us/library/cc959352.aspx
Country code should be less than 2 characters in openssl.conf file.
The issue is caused because TLS1.1/1.2 support got added in latest NetScaler builds which is used for backend StoreFront traffic.
The issue can be caused if there are 2 static default routes on Netscaler.
DNS servers was out of service. NetScaler was not able to resolve address of StoreFront server.
This issue is caused due to TCP retransmissions not occurring on the server side connection between NetScaler and RDP server when there is packet loss.
CTX139319 - How to Configure NetScaler Gateway with StoreFront and App Controller
Manual setup was done for Android receiver thus Android receiver will try to access /config.xml instead of discovering store.
Receiver 4.1 only supports SSL v3 and TLS v1.0.Installed Receiver 4.4
The issue is caused due to ESNS cookie being sent by Netscaler in Set-Cookie header for appflow "clientsidemeasurement" option in appflow action which Android receiver is not handling well.We have 2 separate functionalities : page tracking and client side measurements for Appflow: Page tracking is for showing the waterfall chart for the webpage. We insert a cookie for page tracking when appflow is enabled. Enabling/Disabling appflow will not affect cookie sending part. Till version 10.5, page tracking could be disabled by disabling clientSideMeasurements param in appflow action. From version 11.0, page tracking was separated from client side measurements.So, cookie is always inserted if appflow is enabled. Receiver will have to handle this new cookie along with NSC_AAAC  cookie.
Service conflicting with the Site IP / MEP TCP Ports (3009/3011) causing MEP communication failure.
Dependency of session timeout on the Netscaler rather than just XMS sever properties.
This Happened after google release an update removing SSLv3 and RC4 on their browser.
LOM firmware 2.x can cause the Netscaler to hang during reboots.
When user re-logon's to NetScaler gateway portal, post the AD authentication NS is picking the credentials of user from cache which is corrupted and then sharing it with the web interface due to which SSO is failing. If we capture a trace on the NetScaler then we can see that the first logon request that is sent from NS to WI will have the username and password. Then the next request would generate for agesso.aspx where in WI will respond with HTTP 401 and for this NS would pass on the user credentials in basic authentication format. When the user log's in first time this works fine and user can see the applications and once the user log's off the connection and then again tries to login, at this stage post the LDAP auth when NS has to pass the logon credentials to WI it picks these details from the cache which is corrupted and shares a garbage password to the WI due to which authentication to WI fails, the SSO breaks, and we get the error.
The root cause of this issue is a memory leak in nsaaad daemon that builds up over time and causes nsaaad to consume a lot of memory and stop responding as it does not have memory to complete an authentication attempt.
This leak occurs for any LDAP authentication failures which contains an error string from the server.
This error is usually observed when preauthentication policy or NetScaler Gateway plug-in is in correctly configured.
This issue is occurring due to port allocation failures which   is causing due to port assigned to IIPs are not being released by NS and unable to allocate the ports to DNS query. In this case we cans see that client was able to send the DNS query to NS but no DNS request initiated by NS.In the logs we can see below port allocation failure counter increasing.nsconmsg -K newnslog -g ip_err_portalloc_failed -d stats | moreDisplaying current counter value informationNetScaler V20 Performance DataNetScaler NS11.0: Build 63.16.nc, Date: Oct  4 2015, 08:25:25 reltime:mili second between two records Wed Jan  6 13:22:10 2016Index reltime     counter-value symbol-name&device-no    1       0            333985 ip_err_portalloc_failed NetScaler_0.0.0.1
Upgraded to NetScaler Gateway 11 with custom themes applied. Uitheme was not set to default.
http://support.citrix.com/article/CTX122930http://support.citrix.com/article/CTX130006http://support.citrix.com/article/CTX126733
1) NTP server and/or time synchronization is slightly off.2) AppFirewall feature of NetScaler is blocking automatic redirection after authentication
This issue known issue which is tracked with issue ID #565938.
RTO occurs when the sender misses too many acknowledgments. A calculation is then made to wait before resuming transmissions. After some amount of time, usually at least one second, the sender slowly starts transmitting again. RTO causes delays that can be many seconds to several minutes.
Some back-end servers configured not to use SSL 3.0 have issue handling RFC complaint SSL handshake request from NetScaler with record layer header version SSL 3.0 even if the handshake layer contains highest supported TLS 1.2.
TLS 1.1 and TLS 1.2 is supported in the backend in MPX 7500 from 10.5 59+ onwards. However it is not supported with StoreFront server 2.6. TLS 1.1 and TLS1.2 is supported on Storefront 3.5: https://docs.citrix.com/en-us/storefront/3-5.html
Refer to the following RDP proxy articles if you run into any issues:http://support.citrix.com/article/CTX208324http://support.citrix.com/article/CTX207025Note: RDP proxy with SSO is tested and supported on Windows 2008 R2, Windows 7, Windows 8 and Windows 10. RDP proxy with SSO is not tested/supported on Windows 2008.
To get more information on HDX Insight, see document -  https://www.citrix.com/content/dam/citrix/en_us/documents/products-solutions/hdx-insight-powered-by-citrix-netscaler-insight-center.pdf
For information on how to deploy NetScaler Insight Centre, see document -  https://www.citrix.com/content/dam/citrix/en_us/documents/products-solutions/netscaler-insight-center-deployment-and-sizing-guide.pdf
Refer to "NetScaler: How Do I?" page for more easy to implement articles on commonly used features of NetScaler.
Refer to "NetScaler: How Do I?" page for more easy to implement articles on commonly used features of NetScaler.
Issue was caused due to asymmetric routing in the network. Firewall received SYN/ACK from NetScaler on different interface than on interface on which it had sent TCP SYN. Since firewall by default has a setting to disallow asymmetric routin, it drops SYN/ACK sent by NetScaler. This caused connection failure.
Request from same subnet does not pass via firewall hence there was no issue from within subnet.
Refer to "NetScaler: How Do I?" page for more easy to implement articles on commonly used features of NetScaler.
NetScaler is sending lot of skipflow data record.  These skipflow records are received whenever Netscaler is not able to parse the appflow packet of ICA connection
Configuration
Option "Accept all SSL certificates" is not checked or NetScaler Gateway server certificate is not linked.
The issue was related to using a Load Balance vserver to load balanced StoreFront and not applying the Client IP Header value "X-Forwarded-For" To set this value open the Load Balancing service node -->advanced tab-->Settings. Enable the Client IP Header option and within the value box enter X-Forwarded-For.
The administrator bind DN password was updated on Active Directory
OPSWAT library in NetScaler 10.5 and earlier does not support Windows 10.
The HTTP response is sent by the backed server to the NetScaler, but NetScaler did not transfer any data to the browser and users see the error "Page cannot be displayed". Other pages (for example http://test.com/test1) on the same webserver are accessible without any problem. Accessing the root page directly (without NetScaler) works as well.
The problem is with the backend server sending more than “Content-Length” bytes (There is 2 bytes of more data sent by backend as compared to what is specified in Content-Length header) in the response in all cases where the RST is being sent by NS.
Call Back URL configured on Web Interface is unable to reach the NetScaler Device.
The NetScaler Gateway EPA may fail if a high number of EPA scans are configured. The issue is caused due to the EPA encryption level on the plugin installed on client which is fixed in NetScaler Gateway 10.5-60.x and 11.0-64.2+ builds.
Host Agent  IP was not created on RSA server
In ns.logs it was observed that other parameters are also getting set while making changes to the inteface Alias from GUI.The parameter which was failing was the set ha monitor ON parameter.Logs:------ns.log.0:Sep 15 15:59:04 <local0.info> 127.0.0.2 09/15/2015:20:59:04 GMT NLR-A-NS01 0-PPE-0 : default GUI CMD_EXECUTED 139 0 : User nsroot - Remote_ip 10.1.1.6 - Command "set interface 0/1 -speed AUTO -duplex AUTO -flowControl OFF -autoneg ENABLED -haMonitor ON -mtu 1500 -tagall OFF -state ENABLED -lacpMode DISABLED -lagtype NODE -ifAlias MANAGEMENT -throughput 0 -linkRedundancy OFF -bandwidthHigh 0 -bandwidthNormal 0 -intftype "Hyper v" -ifnum 0/1 -lldpmode NONE -lrsetPriority 1024" - Status "ERROR: Operation not permitted"This an expected behaviour as per Issue Id: TSK0312538When VPX is installed on top of a hypervisor – the interfaces are registered based on what the hypervisors expose.There will be several parameter given back to VPX when it tries to register - physical link state being one of them.The way the drivers are written specific to each hypervisor is different – and in case of Hyper-V the physical link state information is not passed through the virtual interface, unlike Xenserver which passes on this information.As a result since VPX does not have link state information in case of Hyper-V it will flag this information and on execution of the HAMON set command rejects as it does not apply in this scenario.
This is a code related issue on the 10.5 and 11.0 builds wherein the logic with respect to how the destination IP is evaluated has changed from 10.1 release. In working scenario from 10.1 build, destination IP is evaluated to IP provided in Web Interface/StoreFront -wihome option, where as in 10.5 version the destination IP is always evaluated or matched against NetScaler Gateway vserver IP. So ideally in 10.1 code we are updating destination IP based on server side PCB(SNIP/MIP  to WI/SF ip address), where as in 10.5 code destination IP information is updated using client side PCB (client to ag vserver ip ).
Bug
Citrix Documentation - Configuring Preauthentication Policies and ProfilesCitrix Documentation - Configuring Endpoint Analysis ExpressionsCitrix Documentation - Configuring Custom Expressions
The Store information is cached at the NetScaler level, and is not updated after the update to XenMobile Server 10.3
After the Netscaler failover , the NS policies were not reverted correctly to the Secondary Node.
There was no way to handle for LR (Redundant links) in nsvlan. From 11.0-64+ builds this feature is added.
Syslog message generated by user action was logged as Error message level.There is no impact on the traffic or user's connections via Netscaler appliance.Code has been changed so the syslog messages generated during aaa session removal are categorised as debug rather than error or informational loglevel.Example:11/20/2015:05:15:51 GMT  Debug 0-PPE-1 : default SSLVPN REMOVE_SESSION_DEBUG 6588 0 :  Sessionid 368 - User user1 - Client_ip fd73:2039:5849:101::100 - Nat_ip "Mapped Ip" - Vserver_ip fd73:2039:5849:101::86 - Errmsg "user initiated vpn ica session remove"
Missing DNS suffix of XMS FQDN on Netscaler Gateway
NetScaler Gateway version 10.x and above includes a modification in the transparent interception proxy configuration. When using a customized site name, NetScaler declines WICA mode and prevents the connections from using a PNA style connection.
Citrix Documentation - How Clientless Access Policies Work
“DNS-TCP” is not supported in a DNS Forward Proxy Deployment and any DNS Queries triggered through the VPN Module. The UDP to TCP switching happens only for the Queries generated by NetScaler mainly for resolving Domain Based Services(KDC resolution is one such example).Basically it not because the request is forwarded, it is because once the DNS API return truncated flag the cvpn module doesn’t know how to process the request in TCP format.The queries made through the vpn module for name resolution is always UDP and  a DNS response with a Truncated Flag is ignored in the DNS Module itself for  the VPN Context. Hence an enhancement request needs to be raised for the same.
Root CA certificate was using the RSASSA-PSS signature algorithm, though the client certificate issued were using sha256.SSL handshake was failing with NetScaler because of the signature algorithm.
Manual customization of Gateway login page in 11.0
The ns.log warning msg   “<local0.warn> BRRNL406 [1104]: Error = 80000004 in nsagg_process_stat_request”  -- is present because nscollect module tried requesting  more than 256 counters value  in one request to aggregator.Nscollector module request for the counter values  based on the counter information defined in ‘nscollectmap.xml’  file.  The nscollectormap.xml   doesn’t change based on configuration. This file is generated under few condition,
If the nscollectmap.xml file is missing or corrupted  in  /var/log/db/default/ location.If there are more new counters defined,  or  xml version mismatch
CTX118657 - How to Add Drop-Down Menu with Domain Names on Logon Page for NetScaler GatewayCTX131978 - How to Add a Drop-down Menu with Domain Names on Logon Page of NetScaler Gateway with Symphony ThemeCitrix Documentation - Customizing the User Portal
The issue is Caused when URL transformation policies bound globally.It is important to note that this issue occurs irrespective of whether the client is licensed for App Firewall feature or not. Also even if the feature is enabled the issue occurs.
Reason:
=======
Features such as URL transform, CVPN, Rewrite use the Appfw code path and covertly use a dummy appfw profile.
In case you are using a browser then you can refer to one of the Citrix Blogs on customization which work with the browsers.
The vulnerability scanning product is expecting the header X-FRAME-OPTIONS in the HTTP response.
CTX138110 - How to Configure the SmartAccess feature on Access Gateway Enterprise Edition Appliance for Use with XenApp
Citrix Documentation - How SmartAccess Works for XenApp and XenDesktop
CTX101990 - Error: "The server certificate received is not trusted (SSL Error 61)" for Receiver UsersCTX108800 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." on Receiver for MacCTX200836 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." When Launching Apps with Citrix Online Plug-in
Windows Receiver 4.2 only support TLS1.0.
With Google chrome NPAPI protocol disabled, StoreFront 3.0+ now supports External Protocol handler with latest Receiver 4.3.100.10+.
StoreFront base URL is HTTPS however on NetScaler Gateway the URL is defined as HTTP.
NetScaler Gateway website in 10.1 was customized. It was not changed back to Default before upgrade. As a result it did not display correctly after upgrade.
The port for the STA was not specified on the WI server
Citrix Discussions - NS 11 - adding Link to buttom of logo page
Citrix Documentation - Customizing the User Portal
Citrix Discussions - NetScaler 11 Theme Customization - How to Add Links and Verbiage
NetScaler Gateway Portal Theme has some known issues which will be addressed in an upcoming release.
The behaviour is a known issue and limitation in Receiver for iOS, version 6.1.1.
CTX200707 - How to Deploy NetScaler with StoreFront and XenDesktop
CTX140153 - Troubleshooting Methodology for NetScaler, StoreFront with XenApp and/or XenDesktop
Alternatively you can run the following command from the shell to generate SHA2 CSR:#openssl req -config /etc/nsssl.conf -newkey rsa:2048 -sha256 -nodes -out test.csr -outform PEM
The "nsssl.conf" file is a NetScaler OpenSSL configuration file.
Run the following command to confirm the SHA algorithm used:#openssl req -text -noout -verify -in test.csr
This is an expected behavior. Several browsers (Chrome, Firefox, Internet Explorer) have implemented to ignore the functionality of autocomplete = off as per the web-forms standard. Because to this change made by browsers , autocomplete=off does not stop the password mangers from working and the password manager always prompts for saving the password and requires user interaction to save and ensures no security issues.
So as a best practice users should not save the password.
CTX211878 - How Do I Set Up RSA Keys/Public SSL Certificate on NetScaler?Citrix Documentation - Installing and Managing CertificatesConfiguring Server Certificates in IIS 7
CTX200287 - How to Configure NetScaler Gateway 10.5 to use with StoreFront 2.6 and XenDesktop 7.6
The response from the RADIUS server takes about 15-19 seconds, and the natpcb idle-timeout is reached resulting in closed socket.Note: You should also investigate your network to see what is causing the delay of the response packets. The users might complain of slowness while authenticating.
A misconfigured rewrite expression caused NetScaler to take longer time to process the request and eventually not perform the action.
In this case the rewrite response body had HTTP.RES.BODY(2000000000) as target to choose. This large body check will take longer and might fail in some cases.
Time settings and session timeouts does not match across servers.
After verifying session profile in NetScaler Gateway setting it was observed that users from thin clients connect to load balanced virtual server and Receiver users connect to App Controller and see application enumeration. In this case the persistence configured is source IP. As per the connection table, all connections are made to load balanced VIP using Subnet IP. This is because connections are made to NetScaler Gateway and then Subnet IP communicates to load balanced Virtual Server. Since the communication is made through the SNIP the source IP will always be same in this case and this is the reason why all connections are going to the same server.
CTX101990 - Error: "The server certificate received is not trusted (SSL Error 61)" for Receiver UsersCTX203362 - Error: "The server certificate received is not trusted (SSL Error 61)" on Receiver for LinuxCTX200836 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." When Launching Apps with Citrix Online Plug-in
CTX223794 - NetScaler Theme and Customization Troubleshooting
When NetScaler Gateway determines that a session is idle for certain duration, the following are the things that can happen:
If there is an alive TCP connection on that session, it would check again in 5 minutes. That is, if session timeout is too short, say 2 minutes, and TCP idle timeout is 3 minutes, at the 2nd minute NetScaler Gateway sees that there is a timeout. But it also sees that there is an active connection. So, it goes back to wait for 5 minutes to check again at the 7th minute.
If there is no active TCP connection, then there is "multi-core" processing that happens to synchronize actions.
The following points provides more information on the sequence of these events:
One of "n" cores is designated as owner to every session.
Let us say there is a timeout of 10 minutes configured and it is started simultaneously on all cores.
When non-owner times out, it sends a notification to the owner. When all non-owners say that they timed-out and if owner is also timed-out by then, session is removed.
Let us say all of them timeout at the 10th minute (assuming session timeout of 10minutes).
If the owner core’s event is processed first, it sees that the session is active on some non-owner cores, so it checks back again in 5 minutes. that is, it checks again at the 15th minute.
If all cores timeout by then, then at the 15th minute session goes away.
There are some known issues with NetScaler 10.5-55.8 on AWS.
The StoreFront server did not trust the NetScaler Gateway certificate.
Primary Authentication policy expression for RADIUS is configured incorrectly.
Issue ID(s): 576063Feature: NetScaler GatewayComponent: LicensingFound in release: 11.0Found in build: GA Build
More about NPAPI deprecation can be found here: http://support.google.com/chrome/answer/6213033?hl=en
Communication Flow
The following sections explains how the communication process works.
Logon Process
The NetScaler Gateway packet flow (the second NetScaler will not come into the picture till the apps are enumerated).
The user starts a browser and connects (through hostname) to the external IP address of the NetScaler Gateway FQDN of the first hop. The NetScaler Gateway will authenticate and sends it to the StoreFront.
The StoreFront in the second DMZ receives the request.
StoreFront will validate the user based on their credentials.
The StoreFront on the second DMZ sends the credentials to a server on the internal network hosting the XML Service.
The XML Service authenticates the user and receives a list of published applications that the user has access to. This list will be sent back to the StoreFront.
The StoreFront generates a page with the published apps and sends the page through the NetScaler in first DMZ back to the user.
Starting Process
The user clicks an application and the request is forwarded to StoreFront.
The StoreFront again contacts the XML Service to determine which XenApp server will handle the request. The XML Service returns the IP address.
The StoreFront then contacts the STA to switch the IP address for a Session Ticket. The STA saves the IP address and sends a session ticket to the StoreFront (the XML and STA server do not have to be the same server).
The StoreFront generates an ICA file with the STA session ticket and the FQDN of the NetScaler Gateway in the first DMZ. This ICA file is sent back to the user through the NetScaler Gateway in the first DMZ. As you can see the application clicked was Mozilla Firefox and the FQDN is of the first hop.
The plugin on the machine of the user reads the ICA file and initiates an ICA connection with the Session Ticket to the first hop NetScaler in the first DMZ.
The NetScaler in the first DMZ sends the Session Ticket through the NetScaler in the second DMZ to the STA for validation. As you can notice the first NetScaler sent the same ticket to the 10.104.23.83 which is the IP of the second hop NetScaler and notice that the request has the host header of 10.104.23.149 which is the STA server. Based on this host header the second hop will understand that it needs to send the request to this STA server (because the second hop does not have any STA configuration).
The STA validates the ticket and sends the IP address of the XenApp server to the NetScaler in the first DMZ.	You can see that the packet 36455 is the same decrypted packet sent by the first NetScaler is received on this NetScaler and this second NetScaler made a request to the original STA server 10.104.23.149 in the next packet 36456.
In the next packet on the same second hop you can notice that a response is received from the STA server that the XenApp server is 10.104.23.149 on port 1494 and the same request is forwarded to the first hop NetScaler in the next packet 36461. Note: In the lab environment both the XenApp server and STA are same and that is the reason why you are seeing the same IP 10.104.23.149.
The NetScaler in the first DMZ establishes an ICA connection to the IP address of the XenApp server. These connections will be sent/proxied to the second hop NetScaler and the first hop NetScaler will not try to make connection to XenApp directly. As you can see the first hop DMZ proxied all ICA connections to the second hop 10.104.23.83 and the second hop NetScaler will forward the ICA traffic to the actual XenApp servers.
In the following trace taken on second hop you can notice in Green color that the traffic is coming to this hop 10.104.23.83 and this NetScaler is actually making connection to the actual XenApp server 10.104.23.149 as shown in Pink color.
The XenApp server sends an acknowledgement back to the second hop NetScaler (acting as proxy) which will be sent to the first hop NetScaler. Then the SSL/TLS handshake between the NetScaler Gateway in the first DMZ and the XenApp client will be completed. The ICA session is established and all traffic will flow.
Netscaler uses the NSIP as a source IP to contact an authentication server. If those servers are configured as a LB service/ Service group and a Load Balance virtual server is used, the Netscaler usese the SNIP to communicate those back-end servers.
CTX233023 - [NetScaler Gateway Trace Study] – Secure LDAP Password Change
Port 139 was not open on the firewall. NetScaler always uses the port 139 for SMB traffic.
A config file on the Web Interface server was still referencing the old SSL certificate thumbprint.C:\Program Files (x86)\Citrix\DeliveryServices\ProtocolTransitionService\ Citrix.DeliveryServices.ProtocolTransition.ServiceHost.exe.config
SSL error 76 occurs when a certificate is revoked and it is part of a Certificate Revocation List (CRL). If the revoked certificate is still in use, the ICA client displays this error.
However, even after replacing the certificate with a valid one, the error could still occur. This might happen because of cached CRLs in the user’s profile or machine cache that still identify the certificate as revoked.
CTX126206 -  How to Customize NetScaler Gateway Logon Page for Various NetScaler Versions
NetScaler is not configured to bypass proxy settings.
Citrix eDocs - NetScaler Insight Center Troubleshooting Tips
CTX126991 - Troubleshooting XenDesktop Launch IssuesCTX226014 - Application Launch Fails with "Unknown client error 1110" When DTLS is EnabledCTX101997 - FAQ: Citrix Secure Gateway/NetScaler Gateway Secure Ticket AuthorityCTX227354 - "Unknown Client Error 1110" error when launching Desktop using FirefoxCitrix Discussion - Failed with status (1110)
For license issues, always examine the /var/log/license.log.Occasionally, there is an issue with having two entries of the hostname in the /nsconfig/rc.conf file. You should have this entry only once. For example, hostname=\"access.company.com\"
Citrix Documentation - NetScaler Licensing OverviewCTX126049 - How to License a NetScaler Gateway ApplianceCTX121062 - How to License NetScaler Appliances Using Manage Licenses ToolCTX133147 - How to Allocate NetScaler VPX Licenses
The customizations performed on the NetScaler Gateway caused this issue.
Administrators have configured  a PNAgent site on Web Interface through NetScaler Gateway which is NOT a supported configuration.
The NetScaler was unable to contact the STA listed in the configuration causing the application launch to fail.
Citrix Documentation - Disabling Endpoint Analysis for Mobile Devices
This is a known issue caused by Windows 2012 Update 1.
From nstrace Perspective
In configuration CVPN must be set to ALLOW because in nstrace you can observe the Receiver with CVPN requests.
When CVPN is OFF you will observe that the NetScaler does not send the following request from Receiver to the back end but sends a "403:Not a privilege user" error right away to the client:
After CVPN is set to ALLOW in session profile you will observe that the NetScaler sends the request from Receiver to the back end and gets a 200 response, which is sent to the client.
The issue was observed because the certificate on the appliance was not trusted by Web Interface. When this happens on a Web browser, with the correct security settings, a warning message is displayed by the Web browser. However, Web Interface has no means to display a warning message, and chooses not to communicate with an untrusted SSL certificate.
Safari blocks the connections to SSLv3 sites because of the SSLv3 Poodle vulnerability.
Ticket mismatch occurs at the time of reconnection after idle time.
The following are the causes for this issue:
Session policies are set incorrectly on the NetScaler Gateway virtual server.
NetScaler Gateway virtual server does not have STA from StoreFront bound.
NetScaler Gateway virtual server is set to smart access mode while it is licensed for basic mode.
The issue is caused by an incorrect persistency configured for load balanced virtual server on NetScaler Gateway and missing external beacon.
Behavior change from NetScaler 10.1 to NetScaler 10.5 version.
Troubleshooting Mehodology
Logged on to NetScaler through SSH and ran shell, cat /tmp/aaad.debug. Observed the output. You should receive an "accept to kernel for: username" message. LDAP authentication is good.
Receiver logs show that the certificate is not trusted and IP is used instead of the hostname.
Added a host entry for a FQDN that matches the certificate however still failed to connect successfully through VPN.
Added Intranet applications on the NetScaler which resolved the issue.
2598 is the port used for application launch when Session Reliability is used. The AppFlow setting on the NetScaler prevents users to reconnect over port 2598.
The host names of the two NetScalers in High Availability are the same which caused the licensing issue on the secondary NetScaler.
The virtual server modes in the NetScaler is set to SmartAccess Mode but the NetScaler Gateway is licensed for Basic Mode.
Some of the certificates have the same serial number issued by the same certification authority.
The RADIUS server is rejecting the data being sent from the NetScaler.
The Active Directory group which was set as primary group is not used for group extraction. All the other groups associated with the user account are extracted. This is not a bug or issue on a NetScaler appliance. This is as per  Active Directory design. Active Directory does not return its primary group as a group therefore the primary group cannot be extracted by a NetScaler appliance. This is true even if you make the Department group as a primary group instead of Domain users. In the search filter on the NetScaler LDAP search filter column you might have to modify the search rule as follows:memberof=CN=domain users,dc=lab, dc=sumagee, dc=com
Because the primary group is dept only, Domain Users group is extracted by the NetScaler appliance.
Troubleshooting Methodology
While configuring the NetScaler Gateway VIP unable to find Enterprise Store Settings in the NetScaler Gateway Wizard.
Click the NetScaler Gateway Wizard.
The Gateway VIP settings are displayed. Modify the existing configurations if any, or configure a new VIP.
Under Advanced, expand Enterprise Store Settings to configure it.
However on NetScaler version 10.5 build 52.11.nc, Enterprise Store Settings is not available under Advanced.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
The installation of Microsoft hotfix KB3025390 changes how IE 11 views certain objects and thus causes this issue.
To identify the problem, take a network trace (nstrace) on NetScaler Gateway. if you see only username is being returned from the Entrust server, then it is not NetScaler Gateway issue.
Citrix Documentation - Creating Device Certificates for Authentication
CTX202097 - How to Configure NetScaler 11 to use with Web Interface 5.4 and XenApp​Click on the link to download the latest version of NetScaler GatewayClick on the link to download the latest version of XenDesktop
Currently NetScaler Gateway does not have the capability to handle parentheses "()" in the body of an expression. In this case "(x86)" is part of the expression which represents the location of the programs folder in a 64-bit client and this is causing the issue.
This issue is most commonly seen when the FIPS Key originated from another device's private key that was subsequently imported into the FIPS NetScaler appliance. Commonly, private keys from other devices are imported as password protected PFX files. PFX files are converted on the FIPS NetScaler into PEM files that contains both the certificate and the private key.
After the PEM file is imported as an FIPS Key, the administrator will attempt to install new certificate definition using the existing PEM file and the new FIPS Key imported from the PEM file. The administrator provides the PFX file password when attempting to install the certificate definition using either of the following:
NetScaler administration utility (GUI): Traffic Management > SSL > Certificates > Install
Terminal session (CLI): add ssl certkey
The administrator might incorrectly include the PFX file password when installing the new certificate definition. However the password is not required for an FIPS Key imported as the private key exported from the PFX file to the PEM file will not be encrypted.
For the procedures covered in this article, you need not enable the –clientAuth (mandatory/optional) parameter at the SSL VServer level. Additionally, the web browser displays the Client Certificate selection dialog box after the user enters the credentials in the Access Gateway Enterprise Edition VServer login page.
CTX124420 - How to Configure Radius Authentication/Authorization on Windows 2008 for Use on Citrix Access Gateway Standard Edition
The backend servers were responding to the source IP address because the customer had enabled the USIP mode on the appliance. Therefore, the default route did not point to the NetScaler appliance. The response from the servers was never sent to the client through the NetScaler appliance. Additionally, the route on the server was changed for the production network traffic. Therefore, the NetScaler appliance had multiple open connections to the backend servers. As these connections were not get replied on time, the connections started to collect in the surge queue.
The cause of the issue is FQDN and port mentioned in the ICA file. You can find the FQDN and PORT to which the client will connect to using Receiver.
After the GET request for the ICA, the client again tries to do an SSL handshake with the same virtual server (because of the SSLProxy HOST defined in the ICA file) which will prompt user for the client certificate as shown in the following screen shot.
If the /nsconfig/hosts file exists, it must also include the following line:127.0.0.1  localhost
If the localhost line is not there, licensing breaks.Note: You must ensure that the global authentication settings are set. By default, the global authentication is set to local authentication with a maximum of five users. If this number is not increased then not more than five users can connect at a time.
Refer CTX138108 - Error: You have exceeded the maximum amount of licenses
CTX112930 - Citrix Application Firewall Guide
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
License versions allocated after November 4, 2011 use the latest Citrix licensing version and do not appear in the Gateway Management Console.
CTX200129 - How to Force Connections through NetScaler Gateway Using Optimal Gateways Feature of StoreFront
The Java version installed on the machine is not compatible with the Netscaler Software Version
Citrix Documentation - Configure optimal NetScaler Gateway routing for a store
CTX139963 - How to Configure NetScaler Gateway with StoreFront
CTX133855 - How to Configure Desktop Pass-Through with StoreFront and Receiver
How to enable LDAP over SSL with a third-party certification authority
For assistance with the initial configuration of NetScaler, including licensing, SSL certificates, authentication, and an overview of how the component works, see NetScaler for the XenDesktop\XenApp Dummy. Though this blog refers to an older version of the NetScaler, all of the basic concepts still apply to version 10.1.
Citrix Reference Architecture for XenMobile 8.5
Refer to the following links for configuration utility changes in NetScaler 10.1 and NetScaler 10.5:
Citrix Documentation - NetScaler 10.1 Configuration Utility Changes
Citrix Documentation - NetScaler 10.5 Configuration Utility Changes
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
The following is the sample output from the /tmp/aaad.debug file.
The user is first authenticated:
"Mon Jun 25 14:05:10 2007
/usr/home/build/rs_80_45_3/usr.src/usr.bin/nsaaad/../../netscaler/aaad/naaad.c[ 359]: process_kernel_socket call to authenticate user :shoosoo, vsid :86
Mon Jun 25 14:05:10 2007
/usr/home/build/rs_80_45_3/usr.src/usr.bin/nsaaad/../../netscaler/aaad/tacplus_ drv.c[273]: start_tacplus_auth attempting to auth shoosoo @ 172.16.1.200
Mon Jun 25 14:05:10 2007
Mon Jun 25 14:05:10 2007
/usr/home/build/rs_80_45_3/usr.src/usr.bin/nsaaad/../../netscaler/aaad/naaad.c[ 1142]: send_accept sending accept to kernel for : shoosoo"
Each command is authorized by the ACS:
Mon Jun 25 14:05:10 2007 /usr/home/build/rs_80_45_3/usr.src/usr.bin/nsaaad/../../netscaler/aaad/naaad.c[ 394]: process_kernel_socket call to authorize user :shoosoo, command:shell, vsid:86
Mon Jun 25 14:05:10 2007/usr/home/build/rs_80_45_3/usr.src/usr.bin/nsaaad/../../netscaler/aaad/tacplus_ drv.c[224]: start_tacplus_authorize attempting to auth shoosoo: @ 172.16.1.200
Mon Jun 25 14:06:02 2007 /usr/home/build/rs_80_45_3/usr.src/usr.bin/nsaaad/../../netscaler/aaad/naaad.c[394]: process_kernel_socketcall to authorize user :shoosoo, command:show ns runningConfig, vsid:86
Mon Jun 25 14:06:02 2007 /usr/home/build/rs_80_45_3/usr.src/usr.bin/nsaaad/../../netscaler/aaad/tacplus_drv.c[224]: start_tacplus_athorize attempting to auth shoosoo: @ 172.16.1.200Mon Jun 25 14:06:02 2007
The authentication is passed from Wireshark:
The authorization request and response for commands:
Note: The user is first authenticated by the TACACS+ server. Each command is authorized prior to execution. Because each command is authorized by the TACACS+ server, no group extraction exists.
When the incorrect Content-Type header is assigned, the CVPN engine does not parse the URL appropriately and the engine is unable to rewrite the URL.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Retain Customization Changes After Restart
All files in /netscaler/portal/ are overwritten upon a restart or power cycle. You must create a script that runs at startup to copy the modified files back to this location. The nsafter.sh or rc.netscaler shell scripts can be created or modified to accomplish this.For example:
> shell
# mkdir /var/mods
# cp /netscaler/portal/templates/homepage.html /var/mods/homepage.html.mod
# echo cp /var/mods/homepage.html.mod /netscaler/portal/templates/homepage.html >> /nsconfig/rc.netscaler
See also CTX118305 ‑ How to Customize Access Gateway Enterprise Edition Logon Page
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
CTX202444 - How to Customize NetScaler Gateway 11.x Logon Page with LinksCTX200920 - How to Create Custom Theme for Logon Page of NetScaler Gateway 10.1 and 10.5CTX223794 - NetScaler Gateway Theme and Customization Troubleshooting
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
This is a known issue.
Microsoft TechNet - Configure Trusted Roots and Disallowed CertificatesMicrosoft TechNet - Error Message: This Security Certificate Was Issued by a Company that You Have Not Chosen to TrustInstalling the Root & Intermediate CertificatesCTX128539 - How to Link an Intermediate Certificate to the Server Certificate in NetScaler/NetScaler GatewayCTX200836 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." When Launching Apps with Citrix Online Plug-inCTX203362 - Error: "The server certificate received is not trusted (SSL Error 61)" on Receiver for LinuxCTX108800 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." on Receiver for Mac
Citrix Discussions - SSL Error 61
Citrix Discussions - Citrix ICA Client: SSL Error 61: You have not chosen to trust "VeriSign", the issuer to the server's security certificateCitrix Discussions - Unable to launch applications SSL Error 61
Citrix Documentation - Configuring Intermediate Certificates
The 0.0.0.0 network is defined and therefore all network traffic is pulled through VPN tunnel.
Usually caused by an incorrect host name on license file.
The %username% environment variable works with Access Gateway Enterprise Edition software release 9.2 build 47.11 and later.The following are sample screen shots of this configuration:Logging on to the File Transfer Window using Clientless VPN access using a Windows 7 based computer:
The File Transfer Window:
By default, the requireTokenConsistency attribute is set to false in the StoreFront application store.
Enable this setting to allow SmartAccess conditions to be passed from StoreFront 1.2 server to the XML brokers for XenApp or XenDesktop.
You can associate this certificate to an SSL or Access Gateway Enterprise Edition virtual server and also import the certificate to the clients as a Trusted Root certificate. Below is the self signed certificate showing SAN names:
Upgrade to NetScaler software release 10.1 to resolve this issue.
Citrix Documentation - Creating or Changing an RPC Node Password
Citrix Documentation - Resetting the Default Administrator (nsroot) Password
The following is a transcript of the complete procedure to recover the password of NetScaler appliance:
<snip>
Console: serial port
BIOS drive C: is disk0
BIOS drive D: is disk1
BIOS 637kB/1046500kB available memory
FreeBSD/i386 bootstrap loader, Revision 0.8
(murray@builder.FreeBSD.org, Tue Sep 18 10:05:43 PDT 2001)
Loading /boot/defaults/loader.conf
ns-6.1-86.1 text=0x4b6260 data=0x64908d0+0x5b50f4
<snip>
Press [Ctrl-C] for command prompt, or any other key to boot immediately.
Booting [kernel] in 9 seconds.
Ctrl + C
boot -s
<snip>
Copyright (c) 1992-2003 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
The Regents of the University of California. All rights reserved.
FreeBSD 4.9-NETSCALER-6.1 #0: Tue Dec  6 00:52:06 PST 2005
build@amber.netscaler.com:/usr/obj/usr/home/build/rs_61/usr.src/sys/NETSCALER
Calibrating clock(s) ...
<snip>
Mounting root from ufs:/dev/md0c
da0 at ahc0 bus 0 target 0 lun 0
da0: <SEAGATE ST336607LW 0007> Fixed Direct Access SCSI-3 device
da0: Serial Number 3JA9380Z00007453SCPE
da0: 160.000MB/s transfers (80.000MHz, offset 63, 16bit), Tagged Queueing Enabled
da0: 35003MB (71687372 512 byte sectors: 255H 63S/T 4462C)
md0: invalid primary partition table: no magic
start_init: trying /sbin/init
Enter full pathname of shell or RETURN for /bin/sh:
$
$ /sbin/fsck /dev/ad0s1a
ad0s1: type 0xa5, start 32, end = 500735, size 500704 : OK
** /dev/ad0s1a
** Last Mounted on /flash
** Phase 1 - Check Blocks and Sizes
** Phase 2 - Check Pathnames
** Phase 3 - Check Connectivity
** Phase 4 - Check Reference Counts
** Phase 5 - Check Cyl groups
7594 files, 178477 used, 64114 free (7250 frags, 7108 blocks, 3.0% fragmentation)
***** FILE SYSTEM MARKED CLEAN *****
$ /sbin/mount /dev/ad0s1a /flash
ad0s1: type 0xa5, start 32, end = 500735, size 500704 : OK
$ cd /flash/nsconfig
$ df
Filesystem  1K-blocks   Used Avail Capacity  Mounted on
/dev/md0c      100750  86088 12648    87%    /
/dev/ad0s1a    242591 178477 44707    80%    /flash
$ grep -v "set system user nsroot" ns.conf > new.conf
$ mv ns.conf old.ns.conf
$ mv new.conf ns.conf
$ reboot
Waiting (max 60 seconds) for system process `vnlru' to stop...stopped
Waiting (max 60 seconds) for system process `bufdaemon' to stop...stopped
Waiting (max 60 seconds) for system process `syncer' to stop...stopped
syncing disks...
done
Uptime: 17m53s
Rebooting...
<snip>
Hit [Enter] to boot immediately, or any other key for command prompt.
Booting [kernel] in 2 seconds...
Booting [kernel] in 1 second...
Booting [kernel]...
<snip>
Feb 28 20:15:40 10.178.35.81 02/28/2006:20:15:35 GMT ns : EVENT STATECHANGE : Device "self node 10.178.35.81" - State UP
nssyslog nsvpnlog daemon
nsconmsg:Netscaler Syslog Daemon Starting....
nsconmsg:Netscaler Syslog Daemon Starting....
Displaying accesslogs information
Performance Data Record Version 2.0
Started
Feb 28 20:15:52 ns netscaler: self node 10.178.35.81: UP
login: nsroot
Password:
Last login: Tue Feb 28 13:33:47 from 10.153.38.125
Done
set system user nsroot <New_Password>
The GUI of the NetScaler appliance uses the management communication that includes the Web front end and the Java Applet. The following table lists the various secure and non secure ports used by the Web front end and the Java Applet:
Port
Type
Use
Secure
80, TCP
HTTP
GUI Web front end
Non-secure
443, TCP
HTTPS
GUI Web front end
Secure
3010, TCP
HTTP
GUI Java Applet
Non-secure
3008, TCP
HTTPS
GUI Java Applet
Secure
If you have installed an application Firewall through which the traffic passes before reaching the NetScaler appliance and the ports mentioned in the preceding table are not open, any attempts to log on to the appliance fails.
CTX126206 – How to Customize the Logon Page of a Access Gateway Enterprise Edition Release 9.2 Appliance
The base MAC address that is assigned either at global or instance level must have the left most byte and the right most bit in that byte has to be 0 and the second most bit from the right has to be 1 (for example, 0000 0010). If not, the following error message is displayed in Modify Interface:
Citrix NetScaler Deployment Guide for Microsoft Exchange 2010
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Authentication Policy Configuration
If dual authentication is required on NetScaler Gateway (such as RSA SecurID and Active Directory) and there are no qualifying expressions defined in authentication policy other than "ns_true", RSA SecurID authentication must be defined as the default primary authentication type. Active Directory authentication must be the secondary authentication type.
RSA SecurID uses a RADIUS server to enable token authentication.
For more information refer to CTX125364 - How to Configure Two-Factor Authentication on NetScaler Gateway for Use with Mobile/Tablet Devices.
Citrix Documentation - Configure Access Gateway Enterprise Edition for Citrix Receiver for iOS
Citrix Documentation - To configure Access Gateway Enterprise Edition for Citrix Receiver for Android
# Please note that using Windows Receiver with Web Interface (including WI on NS) at the Backend is not supported at the NetScaler gateway level.
CTX200287 - How to Configure NetScaler Gateway 10.5 to use with StoreFront 2.6 and XenDesktop 7.6CTX101997 - FAQ: Citrix Secure Gateway/NetScaler Gateway Secure Ticket AuthorityCTX140153 - Troubleshooting Methodology for NetScaler, StoreFront with XenApp and/or XenDesktop
The scanning product is misinterpreting the HTTP to HTTPS relative redirect as vulnerable.
Following is an example for such request made by security scanner:
GET /null.htw?CiWebHitsFile=/<script>xss</script>.aspx&CiRestriction=none&CiHiliteType=Full HTTP/1.1
User-Agent: curl/7.21.0 (i486-pc-linux-gnu) libcurl/7.21.0 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.15 libssh2/1.2.6
Host: vip.domain.com
Accept: */*
HTTP/1.1 302 Object Moved
Location: https://vip.domain.com/null.htw?CiWebHitsFile=/%26lt;script%26gt;xss%26lt;/script%26gt;.aspx&CiRestriction=none&CiHiliteType=Full
Content-Type: text/html
Cache-Control: private
Connection: close
Date: Fri, 02 Aug 2013 15:47:44 GMT
With the introduction of new features in NetScaler software release 10, additional configuration settings are required for the existing setup to work after upgrading from NetScaler software release 9.x to 10.x.
Binding Multiple VLANs to an Interface
To bind multiple VLANs to the same interface, the VLANs must be tagged either with the VLAN-to-interface binding, or by using the -tagall or –trunk ON interface option.
High Availability Considerations
When making VLAN changes on NetScaler appliances in a High Availability configuration, it is recommended to temporarily disable failovers by forcing the STAYPRIMARY and STAYSECONDARY modes on the respective NetScaler appliances, by using the NetScaler GUI. You can also use, set ha node - hastatus STAYPRIMARY or set ha node -hastatus STAYSECONDARY commands.
After all VLAN assignments are complete, use the show ha node command to ensure that you receive the heartbeats on all critical interfaces before re-enabling HA failovers.
High Availability heartbeats are always untagged and on the native VLAN, unless the NSVLAN is configured using the set ns config -nsvlan command or the interface is configured with the -trunk ON option. The tagall interface option tags all VLAN traffic for an interface except the native VLAN. For more information, see CTX122921 - Citrix NetScaler Interface Tagging and Flow of High Availability Packets.
Useful Resources
CTX214033 - NetScaler Networking and VLAN Best PracticesCTX136121 - How to Open a Console Session to a NetScaler SDX InstanceCTX117345 - Error Binding Multiple IP Addresses to an Interface of a NetScaler ApplianceCTX122921 - Citrix NetScaler Interface Tagging and Flow of High Availability PacketsCTX115575 - FAQ: The Trunk or Tagall Option of the NetScaler ApplianceCTX123172 - NetScaler NSVLAN CommandCitrix Documentation - Configuring a VLAN
CTX109260 – How to Generate and Install a Public SSL Certificate on a NetScaler Appliance
CTX108858 – How to Import Existing Certificates and Keys to a NetScaler Server
The OpenSSL Project
For EPA installation issues logs:-C:\ProgramData\Citrix\AGEEnsinst2.txt and nsinst.txtC:\Users\<user>\AppData\Local\Citrix\AGEEthis is  more specific to EPA scan failuresCitrix Documentation - Deploying the NetScaler Gateway Plug-in from Active DirectoryCitrix Documentation - Endpoint Analysis Requirements
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
CTX120164 - How to Implement Single Sign-on with Access Gateway Enterprise Edition 9.x and Web Interface 5.x
Citrix Discussion - No Usable Ciphers
The XML port specified for the STA in Web Interface does not match the XML port specified for the same STA server configured in Secure Gateway.
The issue might be caused by a misconfiguration of VPN parameters or session profile settings where HTTP port is set to 443.
This issue exists if the server certificate associated with NetScaler Gateway virtual server is an internal self-signed certificate that is not trusted by the browser.
In the new version of NetScaler Gateway software release, the user cannot connect to the back end server if the SSL certificate is not trusted.
If the common name on the certificate does not match with the hostname in the URL, or if the certificate is a self-signed certificate that the browser does not trust by default then users cannot connect to the back end server.
This error appears without prompting the user to accept the certificate; instead the connection attempt would automatically fail.
Caveats
If you want to use web Interface on NetScaler, you must import the CA Certificate as a trusted root in the Web Interface java keystore, for use with callbacks.
If you want to connect to virtual servers that use the self-signed certificate from Android, Mac, iPhone, or iPad devices, then you must import the CA certificate into the device as a trusted root. There is no option on these devices to temporarily accept an SSL Certificate that was signed by a non-trusted Root.
CTX130435 – How to Troubleshoot Web Interface on NetScaler when the Client Connections are Unresponsive on the agesso.jsp Page
The user cannot establish an RDP session by using port 80 after establishing VPN tunnel because of non-port 80 network traffic on port 80.
The user was trying to access Microsoft terminal service mstsc by using port 80 which is RCP on port 80. After the tunnel is established Access Gateway Enterprise Edition appliance was waiting on a GET request for a non-HTTP request, assuming that the request is HTTP the appliance waits on /r/n for the HTTP header to finish.
The Access Gateway Plug-in 2.1.2 for Mac OS X and earlier is not supported on Mac OS X version 10.8 (Mountain Lion).
Citrix Documentation - Accessing an Appliance by Using SSH Keys and No Password
CTX109008 – How to Create a Key Pair for SSH Authentication by Using the ssh-keygen Utility
CTX109009 – How to Create a Key Pair for SSH Authentication by Using the PuTTYgen Utility
CTX114020 – The SSH authorized_keys Are Not Working
CTX121051 – How to Configure an SSH Access from a Primary NetScaler Appliance to a Secondary NetScaler Appliance with Private-Public keys
CTX120804 – How to Access the NetScaler Appliance by using the SSH Keys
This issue is observed when the NetScaler Gateway plug-in is not installed on the client computer. The NetScaler Gateway plug-in must be installed before performing EPA scans. The NetScaler Gateway plug-in installer includes a fragment of the EPA components. The installer registers this fragment with the 32-bit EPA COM server (nsepa.exe) and the NPAPI plugin DLL, 32-bit or 64-bit, as appropriate.
If a Gecko-based web browser, such as Firefox is already installed, the NPAPI plugin DLL is copied to the Mozilla Plugins folder under the application data folder of the user. For example, the plugin DLL is copied to the C:\Documents and Settings\<username>\Application Data\Mozilla\Plugins folder. If a Gecko-based web browser is not installed, Citrix plugins are registered to ensure that the plugins are discovered by the browser when it is installed.
Refer to the latest CloudBridge Documentation for additional details on SSL compression as it applies to ICA Proxy.
This issue appears if Web Interface is being accessed using an HTTPS URL address.
Single Sign On works at the HTTP layer but an SSL connection is end to end, that is; there is encrypted SSL tunnel between the client and destination server (proxy in this case) and thus Access Gateway cannot even decrypt the HTTP traffic passing through the tunnel.
The only way to make it work is to break the SSL tunnel at the Access Gateway (the client opens the SSL connection to Access Gateway Enterprise Edition and then it opens the connection to the proxy/server). This happens using clientless access and ICA proxy mode.
If the /nsconfig/hosts file exists on the appliance, then you must include the following entry:127.0.0.1 localhost
Note: Ensure that the global authentication settings are set. By default, the global authentication is set to local authentication with a maximum of five users. If this number is not increased, then not more than five users can connect at a time.
Ensure that the maximum number of users is set to the number of licenses you have purchased on NetScaler Gateway appliance at the virtual server level. Alternatively, you can set the maximum number of users on the NetScaler Gateway virtual server level to 0, which allows the maximum number of users specified in the global authentication settings.
In NetScaler software release 10.1 and 10.5, the configuration utility has a new look. The navigation tree is reorganized and grouped according to the major features of the appliance.
Citrix Documentation - NetScaler 10.1 Configuration Utility Changes
Citrix Documentation - NetScaler 10.5 Configuration Utility Changes
CTX108876 - How to Configure LDAP Authentication on NetScaler
CTX113640 - How to Implement RSA Authentication for NetScaler Gateway
Citrix How To: Create a Site for Web Interface on NetScalerCitrix Documentation - Installing and Configuring the Web Interface
Points to Note:
For changes in Web Interface on NetScaler 10.5 refer to Citrix Documentation - OpenJDK version for Web Interface on NetScaler (WIonNS).When you install Web Interface on NetScaler for a high availability setup, ensure that the same files are installed on the secondary and primary appliances.In a high availability setup, only the virtual IP address and not the NSIP address should be referenced in the NetScaler Gateway or other configurations.In "install wi package" command there is maxSites option which is used to control the number of sites that can be created. The maxSites option has a default value of 25. Therefore, if no value is specified, then you can create 25 Web Interface sites.The number of Web Interface sites that you can create depends on the free memory available on the NetScaler MPX appliance or VPX instance.You need to reserve minimum of 768 MB free memory exclusively for Web Interface. If the required amount of free RAM is not available, then the "install wi package" command fails indicating the maximum number of sites that can be configured on the NetScaler appliance. The following table lists the minimum memory requirement to create Web Interface sites:

Web Interface Sites
Memory Required (MB)
3
192
25
768
50
1280
100
2560
200
5120
500
12800
If you allocate more memory for Web Interface, then the number of concurrent Web Interface sessions supported for each site will also increase.The following table lists the recommendations for NetScaler VPX when maxSites value is set to 25:

Number of Web Interface Sites
Maximum Sessions Recommended
10
2000
5
4000
3
10000
Therefore, as the number of Web Interface sites increase, more memory is used for Web Interface sites and the memory available for concurrent sessions reduces. This results in lesser number of concurrent session that can work.
Useful CLI Commands
install wi package [-jre <URL>] [-wi <URL>] [-clearsites] [-maxsites <maxSites>]add wi site [-sitepath] [-agurl] [-wiauthenticationmethods ( Explicit | Anonymous )] [-sitetype ( XenAppWeb | XenAppServices )] [-publishedresourcetype <publishedResourceType>] [-kioskmode ( ON | OFF)]rm wi site [-sitepath]set wi site [-sitepath] [-agurl <string>] [-staurl <string>] [-sessionreliability ( ON | OFF )] [-usetwotickets ( ON | OFF )] [-secondstaurl <string>] [-wiauthenticationmethods ( Explicit | Anonymous )] [-authenticationpoint ( WebInterface | AccessGateway)] [-publishedresourcetype <publishedResourceType>] [-kioskmode ( ON | OFF )]bind wi site [-sitepath] [-farmname] [-xmlserveraddresses] [-xmlport <positive_integer>] [-transport <transport>] [-loadbalance ( ON | OFF )]unbind wi site [-sitepath] [-farmname]show wi site [-sitepath]
When client certificate authentication is set to Mandatory in the SSL Parameters of the VPN virtual server, the appliance prompts the connecting client for the list of client certificates in the personal store.
Client Certificates set to Mandatory in the SSL Parameters in the VPN virtual server:
When connecting to the Web Interface server through SSL VPN, if authentication is set for Gateway Direct, the Web Interface server performs Web Interface callback to VPN virtual server to ensure that the requesting user has been granted the access. When the Access Gateway Enterprise Edition appliance is configured in a single-arm deployment, the Web Interface server can only perform callback to one VPN virtual server and subsequently gets prompted to present a client certificate. Because the WI-callback is not interactive, it cannot present a client certificate and authentication using Web Interface callback fails with the Web Interface server returning the generic HTTP 401 error.
In this example, Client Certificate Authentication is enabled and set to Mandatory. An authentication server and policy are configured for the Subject:CN. A second authentication server and policy are set up for LDAP authentication. The SSO credential is set for primary authentication policy in the Client Experience tab of the Session Profile.
Primary Authentication Policy

Secondary Authentication Policy

Single Sign-on is enabled in the Client Experience tab and Credential Index is set to PRIMARY, as shown in the following screen shot:
For an application on a 32-bit computer, there is only one registry to access. However, a 64-bit computer has two registries, the regular registry and 64-bit registry. The EPA needs to access an appropriate registry for the scan to be successful.
This issue can occur if the Deterministic Network (DNE) driver fails to install during installation of NetScaler Gateway plug-in. The DNE driver might fail to install because of changes in the operating system networking components made during previous software installation or uninstallation routines, or incompatible third party software.
To restore the original CVPN homepage.html or homepage2.html file, remove the rc.netscaler script, or remove the executable flag for the script and restart the appliance.
For help with the initial configuration of NetScaler, including license, SSL certificates, authentication, and an overview of how the components work, refer to CTX202097 - How to Configure NetScaler 11 to use with Web Interface 5.4 and XenAppIf you are trying to implement XenMobile along with StoreFront, then refer CTX139319 - How to Configure NetScaler Gateway with StoreFront and App Controller.​For information on "Seamless upgrade by means of Content Switching" refer to page 11 of XenApp 7.6 Upgrade Guide.​CTX200287 - How to Configure NetScaler Gateway 10.5 to use with StoreFront 2.6 and XenDesktop 7.6For assistance with troubleshooting authentication issues, refer to CTX114999 - How to Troubleshoot Authentication with Aaad.debug​
To create an Authentication Server and policy for an Access Gateway Enterprise Edition virtual server, complete the following steps:
Create an Authentication Server
Create an Authentication Policy
Bind the Authentication Policy to the Virtual Server
Create an Authentication Server
Expand the Access Gateway node in the Configuration utility.
Expand the Policies node and select the Authentication node.
Activate the Servers tab and select Add.
Add the IP address of the Secure LDAP virtual server with port 636 and security type SSL.
Create an Authentication Policy
Expand the Access Gateway node in the Configuration utility.
Expand the Policies node and select Authentication node.
Activate the Policies tab and select Add.
Ensure that you bind the new Secure LDAP Authentication Server to the policy.
Bind the Authentication Policy to the Virtual Server
Expand the Access Gateway node in the Configuration utility.
Select the Virtual Servers node.
Double-click the required virtual server.
Activate the Authentication tab and select Insert Policy.
Select the secure LDAP Authentication Policy.
Run the following commands to complete the preceding procedures from the command line interface of the NetScaler appliance:
Create the services for the secure LDAP servers with Protocol SSL_TCP and Port 636: add service ldaps_service svr_red.31 SSL_TCP 636 -gslb NONE -maxClient 0 -maxReq 0 -cip DISABLED -usip NO -useproxyport YES -sp OFF -cltTimeout 9000 -svrTimeout 9000 -CKA NO -TCPB NO -CMP NO
Bind the Root CA to the service: bind ssl service ldaps_service -certkeyName corp_root -CA -ocspCheck Optional
Create the Load Balancing virtual server with Protocol SSL_TCP and Port 636 and bind the Secure LDAP service just created: add lb vserver ldaps_vip SSL_TCP 10.54.88.149 636 -persistenceType NONE -cltTimeout 9000	bind lb vserver ldaps_vip ldaps_service
Bind the server certificate for the Secure LDAP virtual server: bind ssl vserver ldaps_vip -certkeyName "*.corp.example.com"
Create an Authentication Server: add authentication ldapAction ldap_vips -serverIP 10.54.88.149 -serverPort 636 -ldapBase "DC=corp,DC=example,DC=com" -ldapBindDn Administrator@corp.example.com -ldapBindDnPassword mypassword -encrypted -ldapLoginName samAccountName -groupAttrName memberOf -subAttributeName CN -secType SSL -ssoNameAttribute UserPrincipalName -passwdChange ENABLED
Create an Authentication Policy: add authentication ldapPolicy ldaps_vip_pol ns_true ldap_vips
Bind the new Authentication policy to the Access Gateway Enterprise Edition virtual server: bind vpn vserver vsrv_agee -policy ldaps_vip_pol -priority 100
CTX135092 - How-To Video: How to Create SSL_TCP Secure LDAP Virtual Server for a NetScaler and Access Gateway Enterprise Edition Appliance
The issue is caused when Client Choices is enabled in Session profile on Netscaler
Citrix Discussions - Citrix NetScaler Gateway Enterprise VPX - License not working
Citrix Discussions - Access Gateway VPX - Unable to launch apps Socket operation on non socket
Citrix Documentation - NetScaler Gateway License Types
Citrix Blog - NetScaler Gateway Licensing Demystified
Citrix Documentation - How SmartAccess Works for XenApp and XenDesktop
Citrix Documentation - Configuring the Secure Ticket Authority on NetScaler Gateway
Citrix Blog - How to apply the Symphony Theme for NetScaler Access Gateway Enterprise Edition
CTX118657 - How to Add a Drop-down Menu with Domain Names on Logon Page for NetScaler Gateway with Carbon ThemeCTX203873 - How to Add Drop-Down Menu with Domain Names on Logon Page for NetScaler Gateway 11.0 64.x and Later
The set vpn parameter -httpport command is used to specify which ports are used for web traffic. It helps the appliance understand when the HTTP processing logic must start during VPN traffic processing.
The following sample configuration describes gpupdate was failing:
set vpn parameter -httpPort 80 88 8080 -splitDns BOTH -splitTunnel ON -localLanAccess ON -defaultAuthorizationAction DENY -proxy OFF -forceCleanup none -clientOptions all -clientConfiguration all -SSO ON -windowsAutoLogon ON -wihome "http://example.com/Citrix/XenApp" -wiPortalMode NORMAL -ClientChoices ON -ntDomain example.com -clientlessVpnMode ON
In the preceding configuration, port 88 is added to the list of HTTP ports, because few of the internal websites are running on port 88 and must be treated as HTTP. The following errors, were observed in the network packet trace with the preceding configuration:
HTTP/1.1 400 Bad Request
Content-Length:54
Connection: close
Cache-Control: no-cache,no-store
Pragma: no-cache
<html><body><b>Http/1.1 Bad Request</b></body> </html>
Port 88 is usually reserved for Kerberos. Several Windows functions, such as Gpupdate and Domain password changes, depend on this port.
The preceding configuration activates the port 88 for HTTP processing code on Access Gateway Enterprise Edition appliance. Some of the Kerberos packets were modified by the appliance for optimization, because of which the Domain Controller rejected them.
Note: This article is also applicable if Domain password changes going through the full VPN client are failing, as the underlying mechanisms depend on the same protocol as Kerberos to work.
Troubleshooting Outlook Disconnection Issue Through NetScalerNetScaler Configuration for Exchange 2013Citrix NetScaler Deployment Guide for Microsoft Exchange 2010 Troubleshooting Steps for AAA Issues on Exchange OWA Through NetScaler
CTX108881 - How to Configure the SSH Daemon to Listen to a Non-default Port on a NetScaler Appliance
CTX123359 - Transport Layer Security Renegotiation Vulnerability for more information.RFC 5746 - Transport Layer Security (TLS) Renegotiation Indication Extension for more information.
The NetScaler IP (NSIP) address of the appliance is configured for Secure Access Only that is, it requires HTTPS for GUI login or GUI Disabled. NetScaler Insight requires Nitro API or GUI Access to the NSIP and does not currently support Secure Socket Layer (SSL) Encryption of this connection.
WinSCP download: http://winscp.net/eng/download.php PuTTY download: http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html
CTX131223 - Enabling Smart Card PIN Pass-Through on Windows Vista or Windows 7 Citrix Session
If this workaround is not applied, a PIN prompt is displayed by the browser.
And a PIN prompt from the XenApp plug-in when launching an application.
If you require to enable SmartAcess on Storefrront 1.2, refer to CTX136669 - SmartAccess Access Control Filters Fail to Apply to StoreFront 1.2.
Connection Log Location
On the client computer, if Citrix Receiver framework is installed on NetScaler Gateway VPN plug-in, then the connection log is found under Advanced Preference > NetScaler Gateway Settings > Show Connection Logs.
Connection Log Options
The following are the options for connection log:
Auto-scroll: Always displays the latest information being logged by scrolling to the bottom of the dialog capture section.
Verbose Mode: Captures additional details for VPN logs.
Show Gridlines: Helps view the log information displayed.
Always on Top: This dialog is maintained above all other windows on the desktop.
Collect Logs from Receiver
To collect the logs/view from Receiver, go to Advanced Preference > NetScaler Gateway Settings > Configure NetScaler Gateway > Trace. From here you can view the logs and copy them to local device.
CTX214874 - How to Create and Use Client Certificates on NetScaler Appliance with Firmware 10.1 and Above​
This error might occur in any of the following scenarios:
If you initiate the connection from the Chrome browser and not the Citrix Receiver.
If you did not copy the custom index.html file to the /netscaler/ns_gui/vpn directory, then refer to CTX131906 - Receiver for Chromebook Users Cannot Log On to Access Gateway Enterprise Edition.
CTX135910 - How to Configure Citrix AppController and StoreFront
When the Access Gateway Standard appliance is working as ICA proxy, it sends the keep-alive packet to 2598 port periodically to monitor the 2598 port availability, as the result of this the status of XenApp session does not change to disconnected.
Citrix Documentation - NetScaler Gateway License Types
The Web Browser accessing the appliance uses a JAVA client which requires access to the NetScaler appliance port 3010 or 3008.
See OpenSSL documentation for complete options and details.
CTX131978 - How to Add a Drop-down Menu with Domain Names on Logon Page of NetScaler Gateway with Symphony ThemeCTX203873 - How to Add Drop-Down Menu with Domain Names on Logon Page for NetScaler Gateway 11.0 64.x and LaterCitrix Documentation - Customizing the User Portal on NetSaler Gateway 11.0Citrix Blog - Re-Branding NetScaler 11 with the StoreFront 3.0 Portal Theme For information on customization option available on NetScaler 10.0 and 10.1, refer to Citrix Blog - Citrix Access Gateway – UI Theme Customization.
The following is a logon page with the domain name:
CTX121713 – How to Delegate Subdomains in Microsoft DNS or BIND for Global Server Load Balancing on a NetScaler Appliance CTX122619 - How DNS(Domain Name System) works with GSLB feature on NetScalerCTX111081 – Understanding Metric Exchange Protocol and Monitors for Global Server Load BalancingCTX130155 - How to Configure the GSLB Static Proximity Feature in a NetScaler ApplianceCitrix Blog - Global Server Load BalancingCitrix Docs - Configuring Global Server Load Balancing (GSLB)
CTX111079 – How to Configure a NetScaler Appliance for Active Directory Group Extraction for LDAPCTX214588 – Understanding Session Policy Priority on Different Bind PointsCTX114999 – How to Troubleshoot Authentication Issues Through NetScaler or NetScaler Gateway with aaad.debug ModuleCitrix Documentation - To configure LDAP authentication by using the configuration utilityCTX123795 - Example of LDAP Nested Group Search Filter Syntax
The session does not end after logoff because the client is unable to send the final logout.aspx request to StoreFront.	Root cause for this is the final logout.aspx request seems to be an additional cookie added by Access Gateway Enterprise Edition appliance.	Set-Cookie: NSC_AAAC=ea647f0624dc85b6959f17f697868ee900904327145525d5f4f58455e445a4a42.
The following table describes the parameters used to create an SAML action:
add authentication SAMLAction <name> -samlIdPCertName <certname> -samlRedirectUrl <IDP URL> -samlUsernameField –samlSigningCert <certname> -samlIssuerName <issuer_name> -samlRejectUnsignedAssertion <TRUE/FALSE>
Parameter
Description
certname
It is the public key corresponding to the private key at the IdP. It is required for decrypting or verifying the SAML assertion. This can come in the assertion as keyInfo, but is not currently used. You must add this information to the NetScaler appliance using the add certkey command.
Redirect url
It is the url of the authentication end point (IdP). Unauthenticated users are redirected to this URL.
Username field
It can be used to extract the username if the IdP sends the username in other than <NameIdentifier> tag of <Subject> tag. In most scenarios, this need not be configured. Depending on the use cases, this can be removed.
signingCertname
It is the private key of the NetScaler Traffic Management virtual server that is used to sign the authentication request to the IdP. If signingCertName is not configured, then assertion is either sent unsigned or authentication is rejected as per the samlRejectUnsignedAssertion parameter.
samlIssuerName
It is the string to be used in sending the authentication request. Every IdP expects a unique name in the issuer field to signify the authority which sent this assertion. A few IdPs ignore this but a few rely on this field to search the metadata corresponding to this Service Provider.
samlRejectUnsignedAssertion
It is a knob to accept or reject unsigned assertions from the IdP. This parameter gives flexibility to administrator or user to verify the connectivity or basic functioning of the Service Provider and IdP. This knob is also used when sending the authentication request out. If signingCert is not configured and if this knob is false, the unsigned authentication request is sent. Otherwise, the SAML authentications are rejected and fall back to forms-based authentication.
Disabling session reliability in XenApp or XenDesktop Access Gateway Enterprise Edition setting breaks all connections. This forces all connections to use port 1494.
The user has changed the UID of the Secure Ticket Authority (STA) server to an invalid value (such as upper and lower case letters and or special characters). This might be a result of cloning the server.Note: The UID of the STA server can only contain uppercase letters, numbers and a maximum of 15 characters.
Citrix Documentation - ns config
Authentication is working, but authorization fails. Access Gateway appliance contacts the LDAP server with search requests for the various groups the user belongs to. The following screen shot is an excerpt of the network packet trace:
After the request gets to a group that exists in another domain, the LDAP server responds with a referral.
Access Gateway software release 5.x does not support following the LDAP referrals to extract groups.
The OpenSSL tool used in this article is available on most Linux and Unix workstations, as well as on NetScaler Shell. OpenSSL can also be downloaded for Windows users.
Citrix TV contains the following video for this article: http://www.citrix.com/tv/#videos/5875	Duration: 0:48 minutes Note: This video requires the Adobe Flash player plug-in for the Web browser.
CTX112930 - Citrix Application Firewall Guide
MAC's MAC addres filter in EPA will be as below
CLIENT.SYSTEM(MAC-MAC_ADDR_anyof_<MAC-addr>[COMMENT: MAC Address]) EXISTS

where as for Windows it appears as
MAC_ADDR_anyof_<MAC-addr>[COMMENT: MAC Address]
For assistance with troubleshooting authentication issues, refer to CTX114999 - How to Troubleshoot Authentication with Aaad.debug​ ModuleTo configure LDAPS in order to allow expired password changes from NetScaler Gateway, refer to CTX217719 - How to configure NetScaler Gateway to change expired LDAP passwordsCTX233027 - [NetScaler Gateway Trace Study] – LDAP Authentication
When creating a Direct Mode PNAgent site and using the default Site Path syntax /Citrix/PNAgent/, the NetScaler appliance does not respond to the letters in upper case when mobile devices are requesting the PNAgent site from the Citrix Receiver.
To resolve this issue, Web Interface on NetScaler 10 and later has the Make site Path Case Insensitive option:
The following network packet trace, when using NetScaler software release 9.3 indicates that there is an HTTP GET /citrix/pnagent/config.xml, after that the appliance responds with a 404 Not Found.
IP Information	10.0.1.73 - Client-IP (iPhone)	10.0.1.4 – NSIP	10.0.1.6 - SNIP	10.0.1.11 – Web Interface or XenApp	10.0.1.49 – Load Balancing Virtual IP address
HTTP Status 404: /citrix/pnagent/config.xml	Status report: /citrix/pnagent/config.xml	Description: The requested resource (/citrix/pnagent/config.xml) is not available
From the user perspective, after entering the account credentials, 'Invalid Path' appears, as shown in the following screen shot:
After creating the Direct Mode PNAgent site and changing the Site Path syntax to /citrix/pnagent/, the results are successful. A 200 OK result appears with the xml information and you can successfully add a mobile account by typing the hostname.
CTX122907 - Case Study: How Spillover Works if Persistence has also been Configured on the Load Balancing vServer
CTX120606 - How to Configure the NetScaler to Keep a Virtual Server Down once Spillover has been Triggered
When IT Administrators created a XenApp Services on Web Interface with a custom path name, such as /Citrix/CustomPNA/config.xml, Receiver for WinRT 1.2 tries to connect to /Citrix/PNAgent/config.xml instead.
Though the NetScaler Access Gateway session profile settings have been correctly configured with the specific path URL, Receiver for WinRT does not honor this rule and instead tries to connect to /Citrix/PNAgent/config.xml.
From the NetScaler Access Gateway, users are authenticated as expected.
The IIS logs from Web Interface report the following errors stating Receiver for WinRT cannot find the path /Citrix/PNAgent/config.xml
2013-03-14 13:05:47 172.16.0.26 GET /AGServices/discover - 80 - 172.16.0.76 CitrixReceiver+WindowsRT/1.0+AuthManager/3.0.0.0+(Release) 404 0 2 1727
2013-03-14 13:05:47 172.16.0.26 GET /Citrix/Store/discovery - 80 - 172.16.0.76 CitrixReceiver+WindowsRT/1.0+AppReceiver/1.2.0.136 404 0 2 62
2013-03-14 13:05:47 172.16.0.26 GET /Citrix/PNAgent/Config.xml - 80 - 172.16.0.76 CitrixReceiver+WindowsRT/1.0+AppReceiver/1.2.0.136 404 0 2 108
CTX202444 - How to Customize NetScaler Gateway 11 Logon Page with LinksCTX123121 - How to Use Rewrite to Customize the Access Gateway Enterprise Edition Logon Page.CTX200686 - How to Customize NetScaler Gateway ThemesCTX126206 - How to Customize NetScaler Gateway Logon Page
CTX114355 - NetScaler Gateway Ports Configuration on FirewallCitrix Documentation - Integrating NetScaler Gateway with XenApp or XenDesktop
One of the XML brokers had been shut down and was waiting for input as to the reason for the shutdown. After the reason for restarting the server was entered, applications were able to be launched.
Verify if NetScaler Gateway has Insufficient User Licenses
If this error occurs while attempting to open a published application, verify the following:
The appliance has sufficient NetScaler Gateway Users licenses.

The maximum number of users are adjusted to match the number of licenses.
To troubleshoot further, complete the following steps:
After SSL Error 38 appears, log on to the appliance using a secure shell (SSH).Run the following command to launch an opened application until you receive an SSL Error 38 again: nsconmsg -d stats | grep ica_license_failure When the error appears run the following command again: nsconmsg -d stats | grep ica_license_failure If the counter increased, then the error is indeed caused by license allocation.
This issue occurs when you upgrade the NetScaler appliance to the latest build or downgrade to a previous build.
You must bind a certificate key pair to the VPN virtual server for the status of the virtual server to be Up. Else, by design the status of the virtual server is Down.
The Graphical User Interface (GUI) of NetScaler appliance indicates that the status of the virtual server is Down without any reason.
However, the command line interface of the appliance displays the reason the virtual server is Down, as shown in the following screen shot:
The above is one of the reason  and solution if this still doesn't work, please open a support case for further investigation
The dual STA ticketing architecture currently applies only to NetScaler Gateway 10.5 e. You should not enable this feature in Web Interface if you are using Secure Gateway or Access Gateway Enterprise Edition version 9.x or earlier.
CTX123444 - Protocol Driver Error Appears when Launching Applications from a Web Interface 5.2 or Later Site
Citrix Documentation - Configuring High Availability Nodes in Different Subnets
Citrix Documentation - NetScaler Policy Expression Reference
The native NetScaler software release 9.x volumes are created in a format that is not compatible to boot on XenServer 6.1.
CTX214463 - How to Mitigate Keyloggers with a Virtual Keyboard in NetScaler Gateway 11.x
The components used in this article are based on the OpenSource code provided by GreyWyvern and are free for commercial and non-commercial use under the BSD License.
You can find additional keyboard layouts and advanced customizations at http://www.greywyvern.com/code/javascript/keyboard.
Citrix Documentation - Configuring Settings for High AvailabilityCTX127455 - How to Upgrade Software on NetScaler Appliances in High Availability SetupCTX138748 - File Synchronization in NetScaler High Availability SetupCTX109013 - Troubleshooting the NetScaler High Availability IssueCTX115853 - FAQ: NetScaler High Availability Pair
This issue occurs when a change is made in the webinterface.conf file and the Web Interface on NetScaler is unable to process the change.
CTX124374 - How to Modify the RSA Token Prompts Displayed by Access Gateway Enterprise Edition
These software applications are provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
Check the /var/wi/tomcat/log/localhost.x file, when you have any issues with loading the Web Interface page. Check the RADIUS authentication server log for any information related to authentication.
In a DSR configuration, the NetScaler appliance does not replace the load balancing virtual server IP address with the destination server IP address. Instead, the appliance forwards the packets to a service by using the server MAC address, which the appliance obtains from the monitor bound to the service.
However, monitors which use scripts stored on the NetScaler appliance, do not learn the MAC address of the server. If you use only script-based monitors in a DSR configuration for each request the virtual server receives, then the appliance attempts to resolve the destination IP address to a MAC address by sending ARP requests. Because the destination IP address is a virtual IP address configured on the NetScaler appliance, the ARP requests always resolve to the MAC address of the NetScaler interface. Consequently, all traffic received by the virtual server is looped back to the appliance.
NSIP (EIP) access is denied by the Virtual Private Cloud (VPC) environment because the security setting available when creating the NetScaler VPX instance might not be allowed for port 22, 80, or 443 access.
The NetScaler Gateway plug-in installation on the workstation is corrupted.
The NetScaler appliance might not allow new connections after the limit for maximum number of connections are reached, even if some users have logged out. The management CPU might spike to 100 percent because of an orphan command line interface process. When there are many orphan command line interface processes, the error "CFE limit exceeded" is logged to the nslog file.
CTX121291 - FAQ: NetScaler VPX
Citrix Discussion - Stylebook with existing Server errors out
This is caused due to a known GUI Issue.
Though having valid license, every 30 mins VIPs Messages - Count Mismatch - 4 out of 90 discovered virtual server are not managed. It is due to 4 VIP's configured as 0.0.0.0, in NetScaler MAS. There is an issue with Auto-licensing if some of the non-addressable VIPs are licensed. This can result in addressable VIPs not getting licensed in auto selection mode.
NetScaler MAS could not locate\connect to the email server.
Citrix Documentation - User View Reports and Metrics
Citrix Documentation - Configuring Groups on NetScaler MAS
Citrix Documentation - Upgrading NetScaler MAS
Citrix Documentation - NetScaler MAS Analytics
Citrix Documentation - How to Create SNMP Traps, Managers, and Users on NetScaler MAS
Citrix Documentation - Configuring Geo Locations for Security Insight ReportsCitrix Documentation - How to Configure Sites for Geomaps in NetScaler MAS
This is known issue with NetScaler MAS 12.0 which is tracked with issue ID 0702074.
Citrix Documentation - How to Enable Analytics on Instances
Citrix Documentation - NetScaler MAS AnalyticsCTX215130 - HDX Insight Diagnostics and Troubleshooting Guide
Citrix Documentation - How to View Auditing Information of NetScaler MAS
Citrix Documentation - NetScaler MAS High Availability Deployment
Citrix Documentation - How to Poll NetScaler Instances and Entities in NetScaler MASCitrix Documentation - NetScaler MAS Architecture and and Communication Process
The NetScaler MAS has more virtual servers than license limit allocated.
Citrix Documentation - Adding an Instance to NetScaler MAS
Citrix Documentation - NetScaler MAS Analytics
The issue could be an incorrect DNS server specified on the SDX that caused the backups to fail.
HTTPS connection may not get establish between NetScalerMAS and director due one of the below reasons.
SSL certificates for NetScalerMAS are not trusted in app director.
The issue is with the report generation when report is run for 1 hour. This has been identified as an issue with GUI while fetching the information into report.
The /var/ partition did not have enough free space on the NetScale being upgraded.
Known issue as the ULFD config doesn't clean up even after removing from the configuration and NetScaler has to be rebooted to get the Web Insight data flowing out of NetScaler for MASonly if the ULFD mode/server has been removed/disabled anytime during configuration/testing, we need to restart NetScaler for the webinsight data to be presented on MAS 11.1.50.x onwards and 12.0.14.x onwards
We saw the following errors on MAS under mps_afdecoder.log:154108:Thursday, 10 NOV 17 11:53:12 +0000 [Debug] [Main] [3] 10.10.4.5 netscaler is not configured for this appflow collector in ipfix_export_drecord160446:Thursday, 10 NOV 2017 11:54:19 +0000 [Debug] [Main] [3] In AfPacketHandler::DataHandler, data received from 10.10.4.5 with length as 321This means that for some reason MAS has lost the Insight information of the NetScaler and hence it needs to be re-added.
Citrix Documentation - NetScaler MAS Licensing
Showing VPX(1) for a pooled license, is a cosmetic issue in NetScaler firmware 11.1.x.
Citrix Documentation - Security Insight
This is a known issue which is tracked with issue ID 0692898.
IP Reputation supported from 11.0 but Security Insight support is there from 11.1 and above. It is recommended to upgrade the Netscaler to latest 11.1 release - 11.1-55.10.Due to a known issue, Netscaler will not send profile names for inbuilt Appfw profiles. Hence, the IP reputation violations won’t be listed in NMAS reports. As a workaround it is required to use User defined appfw profile.
Public mail servers do not accept mails from all the sources as per its securtiy standards. Hence, email alerts are not received from NetScaler MAS.
VServer is not listed as it is not currently managed by MAS and hence will not be available for selection.
Should you choose to remove the new disk from NetScaler MAS VM, the /var/mps_archive directory will be renamed to /var/mps, so that the system can be in the state as it was before the new disk was attached. Otherwise, /var/mps_archive will be not used and can be deleted if needed. The folder will be recreated during next boot but will not contain any files.
This is a known issue on 11.1.51.21 and below wherein Inventory and Config processes are both creating these backups.
The issue occurs as the HA nodes in NetScaler MAS have some additional fields within the database. When the database is attempted to be restored the process fails when it cannot add these additional fields into the database.
Usually this is caused by attempting to restore a backup from another appliance from a different version or when attempting to restore a HA node on a standalone unit.
This happens when the restore process attempts to add additional database entries for the version or HA node which are not usually included on the standalone or version currently running.
This is a known issue on NetScaler MAS 11.1 build 49.16.
The following is the release notes for NetScaler MAS 11.1 build 49.16 - https://docs.citrix.com/en-us/netscaler-mas/11-1/release-notes/known-issues.html
This is what the release notes states: Geo location does not resolve from maxmind data base file GeoCity.dat. [#655636]
This happens when a configured user is a part of group other than 'Owner' group. There is a known issue wherein if the IP address of the added NetScaler instance goes beyond a certain range, then no logs are read for that instance.
This is known issue in this build and has been fixed in fixed in 11.1 MR2 build. Starting from this build you can add NetScaler MAS with HTTPS enabled.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
Single step-upgrade was not completed
https://support.citrix.com/article/CTX226234#Reachability%20Test
https://support.citrix.com/article/CTX226234#Dynamic%20Routing%20Prevents%20Routes%20From%20Learning:
https://support.citrix.com/article/CTX226234#MTU%20issue
Best practice to configure WAN Links in the SD-WAN appliance
Forceful power off NetScaler SD-WAN appliance causes SVM DB corruption issue.
MCN has WANOP enabled even though it is an SD-WAN SE box.
Customer Network Issue - Asymmetric routing was seen in the WANOP logs.WANOP cannot operate while asymmetric routing is present.
The loop is caused by the branches talking to both Primary and Secondary MCNs and received different configuration signatures.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
The issue is caused because of a Bug. A fix for this issue is targeted in upcoming 10.0.1 release.
Configuration
Protocol version between Win 10 to Win 2016 is SMB 3.1 which we don’t support at present
NetScaler SD-WAN follows the RFC for DHCP. Per design, the very first attempt to renew the IP address will occur at 50% of the lease time. However, if there is a need for renewal of IP address before the above said time, then it needs to be done manually.
The NetScaler SD-WAN NITRO which is used by NetScaler MAS to get system info was not working because of which NetScaler MAS was not able to fetch the information to complete the discovery process. Changes have been made for APIs used by NetScaler MAS for 210s and 410s to fix this in the builds 9.3.3 and 10.0.0.
Certificate on MCN/Branch got corrupted.
We have LOM in NetScaler SD-WAN 410 but is intended for internal/support use. Some NetScaler SD-WAN 410 appliances were shipped with LOM DHCP address enabled.
It was due to the UI which is sending the wrong arguments to the backend.
Link quality is bad.
Software bug
NetScaler SD-WAN 10.0 includes a new centralized licensing feature to accomodate large scale deployments. New sites or license changes must generate their license through the MCN. The MCN hands down licenses to client nodes through their RCN using the control data path. If for whatever reason (e.g. when real license expires, connectivity is broken, user removes license, system boots up first time with no license etc) the client is unable to obtain a license from the MCN, it will be issued with a Grace License. This provides a grace period of 45 days.
The Grace License bandwidth will be the license rate selected in site configuration.
WANOP Plug-in FAQ's: https://docs.citrix.com/en-us/cloudbridge/7-4/cb-faq-wrapper-con/cb-plugin-faq-con.html
Reference: https://docs.citrix.com/en-us/cloudbridge/7-4/cb-reference-con/br-gui-comm-using-grap-user-inter-con/br-gui-config-wrapper-con/br-gui-sysmaint-wrapper-con/br-gui-sysmaint-diag-ref.html
The help command lists the options available for the show techsupport command. The default behavior is to collect all available options.admin> help show techsupportSyntax: show techsupport        [-collect [-all-releases] (traces, cores, logs, crashes, drives)]        [-priority "priority"]This command executes a script that will gather data and store the resulting information in the form of a compressed file, so that the data can then be provided to Citrix Support.The default behavior is to collect just current core and crash files, but the -collect option can be used to collect from one or more areas of interest, as well as across all releases.  traces   = Traces (current, or all releases)  cores    = Cores (current, or all releases)  logs*    = Application Logs (current release, or all releases)  crashes* = Kernel Crash Dumps  drives*  = Drive Status and S.M.A.R.T. diagnostics*NOTE : Logs, Crashes and Drives options are for the Linux-based appliance only.The -all-release flag is for the Linux-based appliance only, and is used to also gather applicable information from 'all'/any prior releases.The -priority setting is for Linux-based appliances only, and can allocate fewer or more system resources to the collection operation, which can impact every other running process.
Refer to this document for configuration of "Dynamic NAT with port forwarding"https://docs.citrix.com/en-us/NetScaler-sd-wan/9-3/stateful-firewall-nat-support/network-address-translation/dynamic-nat-with-port-forwarding-configuration.html
1.) Packet arrives from Internet Service and Firewall is exercised in frame processing. During the firewall processing, it lookup the route for the packet, create/update the flows, and set a flag in the packet descriptor that Firewall is done.2.) Egress II Processing is performed.3.) Packet is sent to IP forwarder where FW processing is done a second time. However, since the FW flag is set in the descriptor, it just lookup the route and return. During this second lookup, it match a conduit route instead because the Internet service is now dead. Unfortunately, it skipped all flow processing so the Ingress processing will still try to send the packet to the Internet service. The bad lwl_id comes from the initial ingress conduit processing.To prevent the issue, we can “Ignore WAN Link Status” on the Internet Service. However, this will not avoid all instances of the issue. It recommend to “Ignore WAN Link Status” on any Intranet service in the network as well.
Upgrade from 9.0.0 to any versions above 9.1.0 is unsupported.Customers will need to first upgrade to 9.0.1-1000
The issue is related to HA only. The bug can only happen if an HA switch occurs on an MCN while Change Management is distributing an update, branch appliances may have a stuck transaction that does not clear on its own. The root cause of the failures is a bug in our transfer application that deletes records based only on a non-unique record ID. If the active and standby MCN happen to be using the same ID for a transaction (which is reasonably likely) and there is a stuck transaction on the branch, we may end up in a situation where we erroneously delete a database record for the wrong transaction which causes package validation to fail.
NetScaler AGEE 11.06611 uses low DNE compared to WANOP Client Plug-in.
Troubleshooting
If there is no Update Software link present, then you are using an earlier version of the management service. Update the management service to release 7.4, and then run the update process.
If the graphical user interface seems dysfunctional after the update, clear your browser cache. You might also need to wait for all features to initialize.
The update process is a post-provisioning process. It does not function properly on a new system or after a factory reset if you run it before running the Configuration Wizard.
The update process can fail for a variety of reasons, including a corrupted or truncated update file, an appliance using versions that are not in its supported range, and other issues. If the update process fails, it displays an error message.
If you need to run the update process again, you must upload the update file again.
SD-WAN uses SMBv1 for windows domain join, the protocol should be enabled on the DC it communicates to.
Issue identified with SVM 10.5 version.
Downloaded software .upg file is corrupted.
NetScaler SD-WAN 4000 Disk mapping
Bay number
SR name
1
BR-SSDsdf
2
BR-SSDsdc
3
BR-SSDsdb
4
BR-SSDsdd
5
VPX-SR
6
Local storage
NetScaler SD-WAN 5000 Disk mapping
Bay number
SR name
1
BR-SSDsdc
2
BR-SSDsdd
3
BR-SSDsde
4
BR-SSDsdf
5
BR-SSDsdg
6
BR-SSDsdh
7
VPX-SR
8
Local storage
Known issues in NetScaler SD-WAN version 9.2.1.23.
A system error could cause storage management to switch active storage.
Local license server Host ID did not match with the Host ID on NetScaler SD-WAN.
When using NMI reset button method, the recovery image from eUSB (sdb) used for re-programming SATADOM (sda), sometimes deviates from its actual path and lands in BOX1 and Box 2 Mfg 48 hrs testing. This now requires manual interruptions to break the chain and complete the process.
Each CloudBridge appliance has limited number of links that can be defined when operating on CloudBridge software release 6.x and later. This limitation is because of the resource constraints on each platform.
When a Repeater appliance joins a domain, it is expected to remain as part of the domain indefinitely. The Repeater appliance keeps a shared secret key which it uses to rejoin the domain. The domain administration credentials are not saved on the Repeater appliance. Therefore, to leave the domain the Repeater appliance must be connected to the domain.
https://docs.citrix.com/en-us/netscaler-gateway/10-1/ng-configuration-mgmt-wrapper-con/ng-authen-authoriz-wrapper-con/ng-authorize-config-con/ng-authorize-radius-group-extraction-con.html
Configuration issue.
Keystore Status is in Closed State .
The certificate that customer was using appears to only work as SSLserver. It needs to be able to work as SSLclient too.  If we open the certificate and under the "Details" tab we see "Enhanced Key Usage" is set as below:When you do verification of certificate it does a 2 way SSL handshake. In a 2-way SSL connection, where the client (on the initiating end of the connection) presents a certificate back to the server, it must have the Client extended key usage. Enhanced Key Usage in the certificate needs to contain the Server Authentication OID (1.3.6.1.5.5.7.3.1) and Client Authentication OID (1.3.6.1.5.5.7.3.2) both.
There is a known issue with 7.4.3 software version
Issue with underlying XenServer code.
XenServer log shows bridge port (eth4/5) goes down ~6 sec after missed heartbeat, but the state machine never transition to FTW_FSM_ST_FTW_BYPASSING_TO_WAN.
CloudBridge version 7.x includes a much larger UI load due to larger built-in javascript libraries.
The .TAR file was installed first when the device was in 8.x version.
This issue requires code level fix and is fixed in CB version 7.4.6
By the error message, the system seems to have run out of disk space.
Password sync issue on the CB instances and we could see this in the access logs. The instance might have been directly accessed and the password might have been changed.Instance with issue{ "_id" : ObjectId( "568a8c4a52012d3ad1672a14" ), "contactperson" : "", "description" : "", "device_family" : "br", "encoded_serialnumber" : "", "gateway" : "169.254.0.20", "gateway_deployment" : false, "geo_support" : false, "hostname" : "CB5-33ca11ac", "instance_state" : "Down", "ip_address" : "169.254.0.25", "location" : "", "model_id" : "", "name" : "CB5-33ca11ac", "netmask" : "255.255.255.0", "ping_state" : -1, "profile_name" : "br_admin_profile_cb", "reason" : "", "seq_no" : 1.451920458452088e+16, "serialnumber" : "", "status" : "Inventory from CloudBridge Instance failed", "sysservices" : -1, "systemname" : "", "type" : "br", "user_driven" : false, "version" : "7.4.3.14.476182" }In the access_log.txt we see the below: 169.254.0.10 - admin [04/Jan/2016:07:15:07 -0800] "GET /br_ui/nitro/nitro.php/v1/stat/alert_count?count=yes&format=json HTTP/1.1" 401 257169.254.0.10 - admin [04/Jan/2016:07:15:13 -0800] "GET /br_ui/nitro/nitro.php/v1/stat/alert_count?count=yes&format=json HTTP/1.1" 401 116
WCCP Cluster Service Group Status is displayed as “Operationally shutdown. Please Disable/Re-enable the SG status to restore SG” under Configuration >> Appliance settings >> Advance Deployments >> WCCP.This is because the cache(s) had gone down three times in 10 seconds and is operationally down.
We can notice that there are stalled connections present on the device. An example for reference: 7409::7408 Thu Oct 22 10:49:58 2015 TCP RST by Local Side , 172.18.124.156:49741(SLOW) (RTT = 516.820 mSec) <- CB -> 172.18.98.182:2598(FAST) (RTT = 6.606 mSec). LAN RX, TX: (278032B, 68625B). WAN RX, TX: (81374B, 239856B). Connection Active for: 586.887 Sec. SLOW last RX, TX Delta: (1.380 Sec,49.972 mSec). FAST last RX, TX Delta: (522.199 mSec,1.380 Sec). Slow, Fast RTOs: (14,0). Slow, Fast TCP Zero Win: (0,0) , Reset Cause: Connection 172.18.124.156:49741<->172.18.98.182:2598 has stalled, endpoint 172.18.124.156:49741 is no longer responding.. SC: Name = ICA ,Compression = DBC. FI: CPSProtocol = CGP.Engineering team has created a hotfix so that we can enable profiling in customer deployments so that we can get more debug information at the issue time to identify the exact root cause for this issue.
The CloudBridge was not able to release the idle connections because of very large “Connection Timeout”, these connections are not being closed.
The error message "The file doesn’t contain PCACPs or not a valid file name” is displayed only when the trace file selected does not contain a PCAP file, which can happen when there are no accelerated connections in the data path during the interval in which tracing was ON.
The transfer account password is not the default nsroot. You can change back to default with command:  set access -type transfer -password nsroot
External Authentication is configured (TACACS), this issue is only happening when logged in using TACACS username who has no admin privilege.
On the DC side CB4K at the issue time we were seeing “ERROR: ### process_auto_config: Invalid ica_index=15” errors. This relates to ICA failures due to some parameter mismatches.
CTX135522 - How to Upgrade a Branch Repeater Appliance From the Command Line InterfaceCTX130886 - How to Install License File for the Citrix Branch Repeater
CTX135522 - How to Upgrade a Branch Repeater Appliance From the Command Line Interface
The CA and Cert/Key credentials are not matching between the 2 CloudBridge appliances or the CA Certification Path is missing one CA certificate
HDD partitions are not synchronized
The bootup would show that below logs:kernel: ata_piix 0000:00:1f.2: BAR 0: can't reserve I/O region [0x1f0-0x1f7] kernel: ata_piix 0000:00:1f.2: failed to request/iomap BARs for port 0 (errno=-16) kernel: ata_piix 0000:00:1f.2: BAR 2: can't reserve I/O region [0x170-0x177] kernel: ata_piix 0000:00:1f.2: failed to request/iomap BARs for port 1 (errno=-16) kernel: ata_piix 0000:00:1f.2: no available native port
This means that the HBA card did not correctly initialize.
Here is what a normal HBA card and drive initialization looks like:May 25 11:52:14 kuatwal-build kernel: ata_piix 0000:00:1f.2: MAP [ P0 P2 P1 P3 ]May 25 11:52:14 kuatwal-build kernel: scsi0 : ata_piixMay 25 11:52:14 kuatwal-build kernel: scsi1 : ata_piixMay 25 11:52:14 kuatwal-build kernel: ata1: SATA max UDMA/133 cmd 0xb000 ctl 0xac00 bmdma 0xa480 irq 23May 25 11:52:14 kuatwal-build kernel: ata2: SATA max UDMA/133 cmd 0xa880 ctl 0xa800 bmdma 0xa488 irq 23May 25 11:52:14 kuatwal-build kernel: ata1: SATA link up 3.0 Gbps (SStatus 123 SControl 300)May 25 11:52:14 kuatwal-build kernel: ata1.00: ATA-8: ST3500514NS, SN11, max UDMA/133May 25 11:52:14 kuatwal-build kernel: ata1.00: 976773168 sectors, multi 16: LBA48 NCQ (depth 0/32)May 25 11:52:14 kuatwal-build kernel: ata1.01: ATA-8: ST3500514NS, SN11, max UDMA/133May 25 11:52:14 kuatwal-build kernel: ata1.01: 976773168 sectors, multi 16: LBA48 NCQ (depth 0/32)May 25 11:52:14 kuatwal-build kernel: ata1.00: configured for UDMA/133May 25 11:52:14 kuatwal-build kernel: ata1.01: configured for UDMA/133May 25 11:52:14 kuatwal-build kernel: ata2: SATA link up 3.0 Gbps (SStatus 123 SControl 300)May 25 11:52:14 kuatwal-build kernel: ata2.00: ATA-8: ST3500514NS, SN11, max UDMA/133May 25 11:52:14 kuatwal-build kernel: ata2.00: 976773168 sectors, multi 16: LBA48 NCQ (depth 0/32)May 25 11:52:14 kuatwal-build kernel: ata2.01: ATA-8: ST3500514NS, SN11, max UDMA/133May 25 11:52:14 kuatwal-build kernel: ata2.01: 976773168 sectors, multi 16: LBA48 NCQ (depth 0/32)May 25 11:52:14 kuatwal-build kernel: ata2.00: configured for UDMA/133May 25 11:52:14 kuatwal-build kernel: ata2.01: configured for UDMA/133May 25 11:52:14 kuatwal-build kernel:   Vendor: ATA       Model: ST3500514NS       Rev: SN11May 25 11:52:14 kuatwal-build kernel:   Type:   Direct-Access                      ANSI SCSI revision: 05May 25 11:52:14 kuatwal-build kernel: SCSI device sda: 976773168 512-byte hdwr sectors (500108 MB)May 25 11:52:14 kuatwal-build kernel: sda: Write Protect is offMay 25 11:52:14 kuatwal-build kernel: SCSI device sda: drive cache: write backMay 25 11:52:14 kuatwal-build kernel: SCSI device sda: 976773168 512-byte hdwr sectors (500108 MB)May 25 11:52:14 kuatwal-build kernel: sda: Write Protect is offMay 25 11:52:14 kuatwal-build kernel: SCSI device sda: drive cache: write backMay 25 11:52:14 kuatwal-build kernel:  sda: sda1 sda2 sda3May 25 11:52:14 kuatwal-build kernel: sd 0:0:0:0: Attached scsi disk sdaMay 25 11:52:14 kuatwal-build kernel:   Vendor: ATA       Model: ST3500514NS       Rev: SN11May 25 11:52:14 kuatwal-build kernel:   Type:   Direct-Access                      ANSI SCSI revision: 05May 25 11:52:14 kuatwal-build kernel: SCSI device sdb: 976773168 512-byte hdwr sectors (500108 MB)May 25 11:52:14 kuatwal-build kernel: sdb: Write Protect is offMay 25 11:52:14 kuatwal-build kernel: SCSI device sdb: drive cache: write backMay 25 11:52:14 kuatwal-build kernel: SCSI device sdb: 976773168 512-byte hdwr sectors (500108 MB)May 25 11:52:14 kuatwal-build kernel: sdb: Write Protect is offMay 25 11:52:14 kuatwal-build kernel: SCSI device sdb: drive cache: write backMay 25 11:52:14 kuatwal-build kernel:  sdb: sdb1May 25 11:52:14 kuatwal-build kernel: sd 0:0:1:0: Attached scsi disk sdbMay 25 11:52:14 kuatwal-build kernel:   Vendor: ATA       Model: ST3500514NS       Rev: SN11May 25 11:52:14 kuatwal-build kernel:   Type:   Direct-Access                      ANSI SCSI revision: 05May 25 11:52:14 kuatwal-build kernel: SCSI device sdc: 976773168 512-byte hdwr sectors (500108 MB)May 25 11:52:14 kuatwal-build kernel: sdc: Write Protect is offMay 25 11:52:14 kuatwal-build kernel: SCSI device sdc: drive cache: write backMay 25 11:52:14 kuatwal-build kernel: SCSI device sdc: 976773168 512-byte hdwr sectors (500108 MB)May 25 11:52:14 kuatwal-build kernel: sdc: Write Protect is offMay 25 11:52:14 kuatwal-build kernel: SCSI device sdc: drive cache: write backMay 25 11:52:14 kuatwal-build kernel:  sdc: sdc1May 25 11:52:14 kuatwal-build kernel: sd 1:0:0:0: Attached scsi disk sdcMay 25 11:52:14 kuatwal-build kernel:   Vendor: ATA       Model: ST3500514NS       Rev: SN11May 25 11:52:14 kuatwal-build kernel:   Type:   Direct-Access                      ANSI SCSI revision: 05May 25 11:52:14 kuatwal-build kernel: SCSI device sdd: 976773168 512-byte hdwr sectors (500108 MB)May 25 11:52:14 kuatwal-build kernel: sdd: Write Protect is offMay 25 11:52:14 kuatwal-build kernel: SCSI device sdd: drive cache: write backMay 25 11:52:14 kuatwal-build kernel: SCSI device sdd: 976773168 512-byte hdwr sectors (500108 MB)May 25 11:52:14 kuatwal-build kernel: sdd: Write Protect is offMay 25 11:52:14 kuatwal-build kernel: SCSI device sdd: drive cache: write backMay 25 11:52:14 kuatwal-build kernel:  sdd: sdd1May 25 11:52:14 kuatwal-build kernel: sd 1:0:1:0: Attached scsi disk sddMay 25 11:52:14 kuatwal-build kernel: ACPI: PCI Interrupt 0000:00:1f.5[B] -> GSI 19 (level, low) -> IRQ 23May 25 11:52:14 kuatwal-build kernel: ata_piix 0000:00:1f.5: MAP [ P0 -- P1 -- ]May 25 11:52:14 kuatwal-build kernel: scsi2 : ata_piixMay 25 11:52:14 kuatwal-build kernel: scsi3 : ata_piixMay 25 11:52:14 kuatwal-build kernel: ata3: SATA max UDMA/133 cmd 0xa000 ctl 0x9c00 bmdma 0x9480 irq 23May 25 11:52:14 kuatwal-build kernel: ata4: SATA max UDMA/133 cmd 0x9880 ctl 0x9800 bmdma 0x9488 irq 23May 25 11:52:14 kuatwal-build kernel: ata3: SATA link up 1.5 Gbps (SStatus 113 SControl 300)May 25 11:52:14 kuatwal-build kernel: ata3.00: ATAPI: DV-28S-W, 1.2A, max UDMA/100May 25 11:52:14 kuatwal-build kernel: ata3.00: configured for UDMA/100May 25 11:52:14 kuatwal-build kernel: ata4: SATA link down (SStatus 0 SControl 300)May 25 11:52:14 kuatwal-build kernel:   Vendor: TEAC      Model: DV-28S-W          Rev: 1.2AMay 25 11:52:14 kuatwal-build kernel:   Type:   CD-ROM                             ANSI SCSI revision: 05
http://docs.citrix.com/content/dam/docs/en-us/cloudbridge/7-3/downloads/en.cloudbridge.cb-wrapper-73-con.pdf
This is expected as it was the very last instance that rebooted and generated a core file
Proxy ARP is not checked/enabled on the Branch side CB-VWAN.
Proxy Port option to indicate whether source port has to be changed or not is available only in NS version 11.0, it is not yet available in NS version10.5.e. This feature is planned for CB4000/C5000 platforms  in the future maintenance release.
This is the expected behavior when selecting Private CA under Secure Peering Certificate and Keys
Downgrade is not entertained in CB 4000 and 5000.
NS instance /var disk is fullNS instance password is different from the SVM and CB broker
/var full directory in the NS is full
Command Center is monitoring the CB /broker instance with a new user account and password. Command Center will have admin rights and will change current transfer password to the new password configured on the Command Center profile. SVMUsername: nsrootPassword:  newpassword CB brokerUsername: adminPassword:  newpassword NS instanceUsername: nsrootPassword:  nsroot CB transferUsername: transferPassword:  newpassword  à Command Center changed this password to otherpassword  Command Center monitoring CB broker instanceUsername: CCPassword:  otherpassword
From the screenshots capturing the issue, it’s clear that the delegate user adding is failed because of the time difference between the domain controller and appliance.
This symptom is also present when there is a potential HDD issue (as depicted on http://support.citrix.com/article/CTX202396)
When a CB4000/5000 appliance is provisioned on version 7.2.2 all CloudBridge instances will be provisioned irrespective of the license. If a license upgrade is needed in the future i.e from a CB4000-310 (2 CloudBrige instances) to a CB4000-100 (6 CB instances) customer can just upload the new license to the appliance.
Outlook/MAPI servers were not added under the delegate user in Active Directory
The password of the transfer account was changed and was different from the SVM (nsroot/nsroot) and CB instance (admin/nsroot) passwords.By default the SVM, CloudBridge instance and transfer account passwords are:-SVM              Username: nsrootPassword:  nsroot -CloudBridge instanceUsername: adminPassword:   nsroot -Transfer account      Username: transferPassword: nsroot
Verify that this CloudBridge appliance is correctly licensed to support Plug-in clients.Under the Licensing Section go to Licensed Features. The following screenshot depicts a CloudBridge 8820 that has 0 (zero) CloudBridge Plug-in Licenses Allocated to the appliance:Once a CloudBridge plug-in license was allocated (based on the host-id of the appliance) and installed the correct number of Plug-in licenses are displayed:
The message indicates that a DBC SSD is plugged into a different slot, not the one it was originally plugged in.  A user should be able to correct this by one of the following:
Put the SSD back to the original slot.  If the user does not remember, please use option #2.Format the SSDs via SVM GUI (Factory Reset the appliance via SVM).  Please be aware that all DBC history may need re-established for this option.
After Factory Reset make sure to use the correct/corresponding CloudBridge and NetScaler images
The CloudBridge 4000/5000 software is stored on the solid-state drive (SSD).The solid-state drive (SSD) needs to be RMA’ed and replaced using the instructions depicted under: http://support.citrix.com/proddocs/topic/cloudbridge-73-brsdx-map/ns-hardware-ssd-ref-sh.html
-If we open the certificate with a text editor we can see that it is in PEM format:
-----BEGIN CERTIFICATE-----  -----END CERTIFICATE-----
-If we open the private key it is definitely not PEM formatThe private key was generated on a NetScaler with a FIPS module. Regrettably we can’t convert a FIPS key as an external key (PEM format) IF the private FIPS-key was created on the NetScaler itself.If the FIPS key was created/imported from an external device then we can install the “original PEM key” and certificate on the CloudBridge. The workaround is to create an RSA key on the Netscaler outside of the FIPS card (in the /nsconfig/ssl directory; like a non-FIPS unit) or on an external device. Then import it inside the FIPS card as a FIPS key, using the "import fipskey" command and build a new request/certificate off that. The external key which will be in clear-text (.PEM format) can then be provided and installed on the CloudBridge.
Connect to the appliance via serial console
Connect a serial null modem cable to the appliance’s console port.Connect the other end of the cable to the serial COM port of a computer running a terminal emulator, such as Microsoft HyperTerminal, with settings 9600,N,8,1, p.In the HyperTerminal output, press Enter. The terminal screen displays the logon prompt.
Note: You might have to press Enter two or three times, depending on the terminal program you are using.
At the logon prompt, log on to the appliance with the following default credentials:
Username: nsrootPassword: nsroot
At the $ prompt, run the following command to switch to the shell prompt of the appliance:
$ ssh 169.254.0.10
Enter Yes to continue connecting to the management service.Log on to the shell prompt of the appliance with the following default credentials:
Password: nsroot
At the logon prompt, run the following command to open the Management Service Initial Network Address Configuration menu:
# networkconfig
Verify if the Netmask and Default Gateway are configured, if yes make sure they both match the data you are entering on the Configuration Wizard
The authentication and privacy password for snmp trap destinations can consist of 1 to 31 characters, including letters, numbers, and the hyphen (-), period (.) pound (#), space ( ), at (@), equals (=), colon (:), and underscore (_) characters.
It does not support “!” and other special characters.
This behavior is expected: Secure Peering won’t be displayed immediately as established (True-Connected Available) under Monitoring > Partners > Secure Partners when the “Connect To” field is left blank and Auto-Discovery is enabled.It will be displayed as (True-Connected Available) once SSL traffic is sent to be optimizedCloudBridge client-side appliance (CB broker 10.217.145.113)CloudBridge server-side appliance (Primary port 10.217.145.29)-“Connect To” filed configuration is optional: http://support.citrix.com/proddocs/topic/cloudbridge-73/br-adv-to-conf-secure-sign-tunn-con.html   -If Secure Peering is configured specifying “Listen On:” and “Connect To:” then Secure Peering is displayed immediately as established (True-Connected Available) under Monitoring > Partners > Secure Partners without sending any traffic to be optimized.
Since it is not generating a core dump file after each reboot you need to enable the windows dump option in order to generate a core dump file next time the CloudBridge 700 appliance reboots and tech support will be able to analyze it and determine RCA. Links for reference:
https://www.sophos.com/en-us/support/knowledgebase/111474.aspxhttps://support.microsoft.com/en-us/kb/969028
1. Delete and reconfigure WCCP SG on the CloudBridge appliance2. Disable WCCP SG 51 on the router and re-enable it/ Manually reset WCCP on the Router/
-Secure Partnership by default is pre-populated using Citrix well-known port 2312.-Port 443 is a well-known port for HTTPS traffic and may be processed differently across the environment.
eDocs - http://docs.citrix.com/en-us/cloudbridge/7-3.html
To resolve this issue reset/refresh the Firefox browser by following the instructions from Firefox support forum - Firefox 31.0 (OSX) Sites with untrusted certificate won't load.
After resetting the Firefox browser you will be able to access the LOM UI of CloudBridge4000/5000 running LOM firmware 3.32 and above (recommended/shipped from factory is 3.38) using Firefox browser.
Cloud Bridge inserts its own TCP Options for auto-detect and to apply acceleration rules. If TCP Options are stripped by Intermediate devices like firewalls , Cloud Bridge Devices cannot accelerate TCP connections.
CloudBridge acceleration parameters are sent in the TCP options header during the initial TCP three-way SYN, SYN-ACK, ACK handshake.
CloudBridge TCP options operate in the range of 24 to 31 (decimal). Certain firewalls block this range by default. This prevents the CloudBridge to accelerate the network traffic, and accelerated connections are blocked.
CloudBridge GUI did not accept the name and extension of the original file (.cer).
This issue has been addressed in version 7.3.3 branch, this is a link for reference - CloudBridge 7.3.
As a  workaround (if you an immediate upgrade to version 7.3.3 is not possible ) the max size value can be changed from 1 GB to 100MB under parameters:Access the SVM and edit the URL to go to support: https://SVM_IPaddress/admin_ui/svm/html/repeater/support.htmlGo to Parameters and change the default value from 1GB to 100 MB
This can also be accomplished via the “Generic Settings” feature under the Tuning page:
Issue may be related to increased amount of logging resulting on very big files eventually causing timeout or crashDev team confirmed that the fix for the issue on Support file collection causing a crash/core file on CloudBridge instances is fixed on version 7.3.4 and 7.4.0.
When an SMB3 aware client (Windows 8.x) connects to an SMB2 aware file server with certain settings enabled in the environment, the CloudBridge optimization can be seen as a MITM and the connection is closed prematurely.
Complete the following steps to resolve the issue:
Verify if the delegate user is configured correctly on the domain controller. Refer to Citrix eDocs - Configuring a CloudBridge Appliance to Optimize Secure Windows Traffic for information on Creating a Delegate User Account, Enabling Delegation for a User, and Associating the Delegate User with CIFS and Exchange Services.
Verify if the date and time is accurate on CloudBridge appliance by confirming if a valid NTP server is configured from System > Configuration > System > NTP Servers > Server Name / IP Address.
Verify if the date and time is accurate from System > ConfigurationSystem Information > System Time.
Verify if the host name is alpha numeric, between 3-15 character length, and unique within the windows domain. Using the default host name of "hostname" is likely to cause problems. The host name can be found from System > Configuration > System page under System Settings > Change Hostname.
After confirming the Domain Name, Domain Controller IP address(es), and DNS server IP address, verify if the CloudBridge appliance can successfully communicate with:
Domain Controller IP address(es) (TCP 88)
NTP server (UDP 123)
DNS server IP address (UDP 53)
The ping and traceroute utilities are not available on the accelerator instance, as they are on other CloudBridge products. Instead, you can use the equivalent features on the NetScaler instance, using the Diagnostics page as shown in the following screen shot. These features work over your external network and on the appliance’s internal subnets.
Verify if the DNS server has:
Forward lookup zone; name server should be able to resolve domain name (host or nslookup).
Reverse lookup zone; name server should be able to reverse lookup Windows domain IP.
Server record for kerberos (_kerberos._tcp.domainname).
Server record for LDAP (_ldap._tcp.domainname).
Ensure that the instances are up by navigating to System > Configuration > CloudBridge > Instances > Instance State.
If all the instance states are up, and add delegate user fails then navigate to any individual instance by using https://ip:4001 (for instance #1, port 4002 for instance #2, and so on) and follow the same steps as in article CTX200537 - CloudBridge Troubleshooting Guide: Unable to Successfully Add Delegate User for Non-CloudBridge4000/5000 Models.
If a particular instance fails then navigate to that particular individual instance by using https://ip:4001 (for instance #1, port 4002 for instance #2, and so on) and follow the same steps as in article CTX200537 - CloudBridge Troubleshooting Guide: Unable to Successfully Add Delegate User for Non-CloudBridge4000/5000 Models
Complete the following steps to resolve the issue:
Citrix recommends following the flowchart in Citrix eDocs - CIFS, SMB2, and MAPI for any issues related to secure acceleration. This flowchart provides a high level coverage of all the operations needed for domain join and add delegate user, hence can be quickly used to isolate the problem.
If available, use the Pre Domain Check utility to find out if there are any issues with the appliance joining the domain. The Pre Domain Check utility is available using the following steps:

Log on to the CloudBridge appliance.
Navigate to the CloudBridge > Configuration > Appliance Settings > Windows Domain page.
Under Pre Domain Join Check, click Check Domain Join, as shown in the following screen shot:
Verify if the host name is alpha numeric, between 3-15 character length, and unique within the windows domain. Using the default host name of "hostname" is likely to cause problems. The host name can be found from CloudBridge > Configuration > Appliance Settings > Network Adapters page under Common Management Settings > Hostname.
After confirming the Domain Name, Domain Controller IP address(es), and DNS server IP address, verify if the CloudBridge appliance can successfully ping:
Domain Controller IP address(es)
DNS server IP address
The ping utility can be found from CloudBridge > Configuration > System Maintenance > Diagnostics page > Ping tab.
Verify if the DNS server can successfully resolve the domain name (host or nslookup).
Verify if the user account used to join the domain has administrative access or domain join rights.
If the issue persists, collect the following data:

Screen shots from the following directory: Configuration > Appliance Settings > Windows Domain Monitoring > Appliance Performance > Logging
Validation log from [support.html] > Windows Domain
Collect the Techsupport file. Refer to CTX135546 and CTX133765 for more information.
Detailed network topology clearly depicting all the devices (switches, routers, firewalls, IPs, servers) and connectivity points between the devices.
Complete the following steps to resolve the issue:
Citrix recommends following the flowchart in Citrix eDocs - CIFS, SMB2, and MAPI for any issues related to secure acceleration. This flowchart provides a high level coverage of all the operations needed for domain join and add delegate user, hence can be quickly used to isolate the problem.
Verify if the delegate user is configured correctly on the domain controller. Refer to Citrix eDocs - Configuring a CloudBridge Appliance to Optimize Secure Windows Traffic for information on Creating a Delegate User Account, Enabling Delegation for a User, and Associating the Delegate User with CIFS and Exchange Services.
If available, use the Check Delegate User utility to find out if there are any issues with the appliance adding a delegate user from the domain. The Check Delegate User utility is available using the following steps:
Log on to the CloudBridge appliance.
Navigate to the CloudBridge > Configuration > Appliance Settings > Windows Domain page.
Under Kerberos Support, click Check Delegate User, as shown in the following screen shot:
Verify if the date and time is accurate on both CloudBridge appliances and Domain Controller. The appliances should use an NTP server that is closely synchronized to the time on the Windows domain server. Ideally, the appliances and the Windows domain server are all clients of the same NTP server. The time and date can be verified from Configuration > System Maintenance > Date/Time settings > Current Time.
Verify if the host name is alpha numeric, between 3-15 character length, and unique within the windows domain. Using the default host name of "hostname" is likely to cause problems. The host name can be found from CloudBridge > Configuration > Appliance Settings > Network Adapters page. Under Common Management Settings > Hostname.
After confirming the Domain Name, Domain Controller IP address(es), and DNS Server IP address, verify if the CloudBridge appliance can successfully communicate with:
Domain Controller IP address(es) (TCP 88)
NTP server (UDP 123)
DNS Server IP address (UDP 53)
The ping utility can be found from CloudBridge > Configuration > System Maintenance > Diagnostics page > Ping tab.
Verify if the DNS server has:
Forward lookup zone; name server should be able to resolve domain name (that is, host or nslookup).
Reverse lookup zone; name server should be able to reverse lookup for Windows domain IP.
Server record for kerberos (that is, _kerberos._tcp.domainname).
Server record for LDAP (that is, _ldap._tcp.domainname).
If the issue persists, collect the following data:
Screen shots from the following directories: Configuration > Appliance Settings > Windows Domain Monitoring > Appliance Performance > Logging
Validation Log from [support.html] > Windows Domain
Collect the Techsupport file. Refer to CTX135546 and CTX133765 for more information.
Detailed network topology clearly depicting all devices (switches, routers, firewalls, IPs, servers) and connectivity points between the devices.
There can be multiple reasons for a failed domain join. The following are some of the common potential causes:
Configured DNS server is not reachable from CloudBridge.
Lookup zones for domain are not configured on DNS server. The domain servers must be fully reachable, with both forward and reverse lookups for all the IP addresses of the domain controllers configured on the DNS servers.
Domain is not reachable from CloudBridge.
Host Name is not configured correctly. The host name of CloudBridge should be alpha numeric, between 3-15 character length, and unique within the windows domain. Using the default host name of "hostname" is likely to cause problems.
There is a large date/time difference between the CloudBridge and the domain.
The user account used to join the domain does not have administrative access or domain join rights.
Citrix Documentation - Deployment Worksheet of CloudBridge 4000/5000 appliance
Citrix Documentation - Adding a Static Route
A large difference of number of users between the branch offices might cause uneven distribution of traffic within the instances of a CloudBridge4000/5000 models.
Redirect statements are configured incorrectly.
Misconfiguration of ACLs.
Misconfiguration of NetScaler.
Because of certain actions taken by an administrator, the CloudBridge instance can end up with a different password for the admin account. The SVM continuously tries to use it's known password, and fails as a result of incorrect credentials. Eventually the account is locked out from logging on for up to 3 minutes after each successive logon failure.
The following are the troubleshooting steps to resolve this issue:
Ensure Network Connectivity Between CloudBridge and WCCP Router
The CloudBridge and the WCCP router should be accessible from each other. You can either ping the CloudBridge from the WCCP router, or ping the WCCP router from the CloudBridge’s diagnostics page.
On non-CloudBridge4000/5000 GUI, navigate to Configuration > System Maintenance > Diagnostics > Ping:
On CloudBridge4000/5000 connect through SSH to NetScaler and utilize the ping command. Or from the CloudBridge4000/5000 GUI, navigate to System > Configuration > NetScaler > Instances > Click the IP address of NetScaler instance (this opens a new browser window for NetScaler) > Configuration > System > Diagnostics > Utilities > Ping:
If the ping fails, examine NAT settings on the NetScaler:From the CloudBridge4000/5000 GUI, navigate to System > Configuration > NetScaler > Instances > Click the IP address of NetScaler instance (this opens a new browser window for NetScaler) > Configuration > Network > Routes > RNAT:
Or, SSH into the NetScaler and verify NAT settings from the NetScaler CLI:
Verify WCCP GRE and Offnet WCCP Router Settings
On non-CloudBridge4000/5000 appliance:If the Service Group (SG) is configured to use WCCP GRE and the WCCP router is not in the same subnet, then that WCCP router should be reachable through the gateway on that interface. In the SG configured, the WCCP communicates on the apA interface, and a proper gateway should be configured for apA.
On CloudBridge4000/5000 appliance:If WCCP GRE and the WCCP router are not in the same subnet, a static route should be added on NetScaler through GUI. From the CloudBridge4000/5000 GUI, navigate to System > Configuration > NetScaler > Instances > Click the IP address of NetScaler instance (this opens a new browser window for NetScaler) > Configuration > Network > Routes > Basic:
Or follow Citrix eDocs - Configuring Static Routes to configure from the NetScaler CLI.
Verify if WCCP Router IP Address is Set Correctly
For example, the WCCP router IP should be: 172.56.3.1, but it was entered as 172.56.3.11 by mistake. The CloudBridge logs shows that CloudBridge does not get any reply from IP 172.56.3.11, which is the incorrect IP.  Go to WCCP configuration page and fix the router IP using one of the following Citrix eDocs as reference:
Non-clustered WCCP for CloudBridge400/800/2000/3000
Non-clustered WCCP for CloudBridge1000, CloudBridge2000WS
Non-clustered WCCP for CloudBridge600, Branch Repeater 8520, 8540, 8820
Also keep in mind that for the router IP, use the IP configured on the router interface facing the CloudBridge and not the router’s management IP, router ID or HSRP IP.
Verify if Service Group Number is Configured Correctly
In the preceding example, SG=101 is used. Log on to the WCCP router, and verify whether the WCCP feature is enabled and whether SG 101 is enabled. In the following show running-config output, it does not show SG number 101, which indicates that SG 101 is not enabled.
Enter config mode and enable SG 101:
Examine if there is Another Cache Using the Same Service Group Number
Having known that the router IP is correct and SG number is enabled, if there is still no reply from the WCCP router then verify the SG details on the WCCP router with the command show ip wccp 101 detail:
The preceding output shows that the cache 172.56.3.97 is connected on SG 101.
The SG configuration on CloudBridge1 172.56.3.97 is:
The SG configuration on CloudBridge2 172.56.3.96 is:
CloudBridge1 and CloudBridge2 are configured with different protocol- UDP vs TCP. After CloudBridge1 is connected to the WCCP router on SG 101, CloudBridge2 does not get a reply from the WCCP router. Change the configured protocol to make them match.
A different priority setting can also trigger this problem. For example, the following two CloudBridges are configured the same except the different priority. If one of the CloudBridge is already connected to the router, when the second CloudBridge has its WCCP configuration enabled, it will show the "not get reply" error in log.
Verify if the Passwords Match
Verify if there is a password set for the SG number on the WCCP router.
The following CloudBridge is not configured with a password:
However, there is a password set for SG 101 on the WCCP router. Enter the password to CloudBridge’s WCCP configuration to fix this problem.
In the preceding example, the password string is "test". The "0" before the password indicates that this password is clear text, not encrypted (on some different router IOS versions, the "0" is not shown). You can verify whether the encryption is enabled at the beginning of show running-config command:
On some routers, the password might be encrypted, like the one shown in the following example:
The password will not be shown in clear text. The same password "test" might show up like "071B245F5A". 7 represents its encryption method.
Verify if Multicast Settings are Configured Accurately
On non-CloudBridge4000/5000 appliance:In the following example, the CloudBridge is configured to use multicast in single cache mode. The following is the SG configuration on the CloudBridge:
The following are two configuration changes needed on the WCCP router:
The SG should be configured to recognize the multicast address. It is specified using "group-address". The IP should be a valid multicast address.
After the configuration change, the following is the output of show running-config command:
The WCCP router interface facing the CloudBridge should be configured to listen to multicast messages on the specified SG number.
If the router and CloudBridge are on the same subnet, TTL=1 within the CloudBridge configuration is good. But if there is another router between the WCCP router and this CloudBridge, TTL should be 2, and the intermediate router needs to have multicast routing enabled.
On CloudBridge4000/5000 appliance:Multicast is not supported on CloudBridge4000/5000 appliances.
The following is a list of potential causes for this issue:
Redirect statements configured incorrectly.
Asymmetric routing in user network.
The following are potential causes for this issue:
Primary CloudBridge unable to detect the secondary CloudBridge because SSL certificate verification fails.
Misconfiguration of the custom certificates on CloudBridge boxes.
The following is the potential cause:
Secure Peering with partner CloudBridge is not configured correctly.
The following are the potential causes:
Different CloudBridge hardware, version, license or deployment.
Different interfaces are used (for example: apA and apB are used for HA pair).
VRRP ID discrepancy or conflict where the same VRRP ID is used in other network devices.
VRRP heartbeat fails when the primary CloudBridge is under heavy load.
Configuration exchange messages fails between the partners.
The following is the potential cause:
Secure Peering with partner CloudBridge is not configured correctly.
The parameter "IP.EnforceTTL" should be disabled on the CloudBridge instance when BGP traffic is running. To disable this parameter, complete the following steps:
Access the SVM and select CloudBridge.
Edit the last part of the URL from main.html to support.html.	For example, from https://a.b.c.d/admin_ui/svm/html/repeater/main.html to https://a.b.c.d/admin_ui/svm/html/repeater/support.html.
Select Parameters.
Search for IP.EnforceTTL and set it to off.
Test the connection again.
When routing information is sent using BGP on TCP port 179, the Time-To-Live (TTL) for the packet is usually set to 1 and CloudBridge automatically decrements the TTL value of packets that pass through it. When the TTL equals 0, it is dropped. If the TTL value of the BGP packet is set too low, it can be dropped from the network when CloudBridge is introduced.
The following is a list of potential causes:
Different CloudBridge hardware, version, license, or deployment.
Incorrect cabling.
Different interfaces are used (for example, apA and apB are used for HA Pair).
No HA SSL certificates are installed.
Discrepancy in SSL common name.
VRRP ID discrepancy or conflict where same VRRP ID is used in other network devices.
In certain Juniper switches, if STP is enabled it will cause bridge ports to stay down. Note: In any CloudBridge HA deployment, it is recommended that STP is disabled on switch ports connecting to CloudBridge ports.
The following are the potential causes of this issue:
Redirect Statements configured incorrectly.
Misconfiguration of ACLs.
CTX138485 - How to Capture Network Packet Trace on a Linux or Windows CloudBridge Appliance
Customer Service Contacts
CTX131540 - FAQ: Configuration of WAN/LAN Ports and Links on Citrix Branch Repeaters Version 6.0 and Later
In the preceding example, when management request come from the WAN side of the appliance, the NetScaler instance will still load balance the management traffic.  This typically is not an issue when using the reduced management IP scheme where the internal CloudBridge instances do not have separate management IP address for each instance. The reduced IP scheme is a feature introduced in CloudBridge 7.1 release. To bypass NetScaler load balancing of this traffic, you must create ACLs on the NetScaler to bypass IP addresses that are not owned by the NetScaler instance.
add ns acl inlinemgmt_acl2 BRIDGE -srcIP 192.168.1.131-192.168.1.133 -priority 16
add ns acl inlinemgmt_acl1 BRIDGE -destIP 192.168.1.131-192.168.1.133 -priority 17
Notes:
Newly added ACLs are not lower in priority than the default allow all ACL with priority 35 (BR_ACL ALLOW -priority 35).
There is no need to add an ACL for the NetScaler management IP, nor the NetScaler Signaling IP.
Citrix Downloads - LOM Firmware UpgradeCitrix Documentation - Lights Out Management Port of the NetScaler ApplianceCitrix Documentation - NetScaler Secure Deployment Guide
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
CloudBridge appliances are supplied with blue and orange colored Ethernet cables. Blue is identified as straight-through or patch cable, while orange is a crossover cable.
Some orange Ethernet cables were found to be of straight-through cable type.
If this defective cable is used for crossover cable applications, this becomes an issue for few devices that do not have auto MDI-X functionality to automatically detect the cable used to ensure the connection is correctly configured.
Complete the following steps to set the correct date, time and time zone through the CloudBridge UI:
Log on to the CloudBridge GUI using the IP Address (<http://Ipaddress>).
Go to CloudBridge  > System Maintenance > Date, Time Settings.
Enter the IP Address of the NTP Server so that the date and time will be synchronized with the NTP Server or manually enter the Date, Time, Time Zone and click Update.
GUI Navigation Changes
Refer to the latest CloudBridge Documentation for additional details on SSL compression as it applies to ICA Proxy.
After the process is complete you will have access to the CloudBridge appliance with factory default settings. The Management SVM should now be accessible by using the default IP address192.168.100.1 for initial configuration.
MTU: Defines the maximum number of bytes for IP packets including IP header, protocol headers such as, TCP or UDP, and data payload. Protocol headers can be combination of different headers. For example: IPSec has TCP or UDP, AH, and ESP headers.
MSS: Defines the maximum number of bytes after the protocol headers. In other words, MSS is the maximum size of the data payload.
The MSS settings on CloudBridge appliances should be the same on all CloudBridge appliances (lower of the bunch). It is not negotiated but only advertised.
Let us say after finding maximum transmissions, we find the following results:branch A <> DC has MSS at 1350branch B <> DC has MSS at 1320branch C <> DC has MSS at 1310
All branches + DC need to have it set at 1310 (which is the lowest of the total).
http://support.citrix.com/article/CTX137970
0694638
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
This issue can be seen if there are discrepancies between the Site assignment of the Target Device, the PVS Servers and the Store and vDisk.If there are multiple Sites in a Farm, a Target that belongs to Site-A must:
Acquire a bootstrap from a Server in Site-ALogin to a PVS Server in Site-ABe assigned a vDisk served from a PVS Server in Site-A
If adGroupsEnabled is set to 0 and it will not show Active directory option.
Join us on Discussions to ask questions or provide feedback about this Smart Check. http://https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. http://https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check.http://https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check.http://https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
This issue can occur if the Stream Service is stopped, possibly due to a timing issue at startup. The Stream Service is responsible for keeping all critical services running and monitors the database and storage. If StreamProcess terminates automatically to avoid a crash, the Stream Service will attempt to restart it.
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Smart Check has detected that the Provisioning Services console is not installed on the target machine.
In PVS console, on the Target Device Properties, there are no vDisks assigned to the target.
Provisioning Services Server has multiple NICs, and streaming and management NICs were switched around when running the Configuration Wizard
When any PVS target boot up, it gets the Domain and Domain controller related information from the PVS Server. Along with this, it also gets the Machine account password, which is copied locally to pvs-ad.config file  and the Password reset interval, which has been set on the PVS Console. On the Linux Targets, this script "ad_change_pw.sh" keeps checking the password reset interval. When this counter reaches "0", it initiates a password reset by executing another script "winbind_change_pw.sh". This script resets the password in AD but fails to update the PVS Server (SQL - Site Database) with the new password.Now when the Linux PVS Target reboots, the old password from the PVS SQL Site database is sent to the target and the target copies it to pvs-ad.config file. Now when the Linux PVS Target uses this password to access any domain resource the Kerberos Authentication fails due to password mismatch, hence the Linux PVS Target fails to join the domain.
The PVS Servers are missing the appropriate .Net Framework version.
This issue can be seen when the Target Device uses a BOOT.ISO created with a version of the Provisioning Services Server software older than the currently installed version of the Provisioning Services Server software.When a Target Device uses BOOT.ISO to boot, it goes through the TSB (Two Stage Boot) process.In the first stage of the TSB process the executable code inside the BOOT.ISO is loaded and executed. This code then downloads a second piece of code from the Provisioning Services Server in the form of a file named TSBBDM.BIN.In the case the Provisioning Services Server software is upgraded, there will be a new version of the TSBBDM.BIN file on the server.If the version of the BOOT.ISO is different than the version of the TSBBDM.BIN file, it can cause issues such as very slow boot times.
This issue can be triggered by stale XML Manifest files with old entries that do not exist anymore.It could also happen due to corrupt XML Manifest files.The best practice is to only have the XML Manifest file required for the current operation in the Store directory.
This issue might be seen when there are disparate versions of the PVS components installed on the PVS Server.The issue is even more likely to happen if the Database Schema version is not consistent with the version of the PVS Console and the other components.
Vdisk created with ower PVS computer account by default. So we need to add full control permissions for PVS server computer account to vDisk store after moving vDisk from local disk to file server.
This issue can happen if the 3rd party software RES One Workspace is installed in the vdisk.During the boot process of the Machine, the default network adapter is changed.Originally, the default network adapter is the Microsoft Legacy Network adapter (Legacy Hyper-V NIC).This will be changed to the Microsoft Network Hyper-V adapter (Synthetic NIC), during the boot process. This is described in the following Citrix Doc article.This is an issue with RES One Workspace and the vendor is committed to fixing the issue in a future release. More info here - https://community.ivanti.com/docs/DOC-63880
The SQL native client version (11.0.2100.60) installed with PVS will not support TLS 1.2 (Was enabled on SQL server)
As per the setting description when the policy is set to the default value (disabled/unconfigured) the target device is attempting to discover all of the private networks/subnets in the corporate domain.
As per Microsoft Support, For Windows Network Isolation automatic discovery, the setting is for windows store applications. It will contact domain to get the domain information about sites and subnets. Then filters for the subnets and app will be created and will not be shown under firewall rules. The more subnets you have in the domain, the more filters will be created.
After enabling this policy, it will use the range configured in policy. If you do not use windows store application, it will not have any impact on your environment, even you do not set any range in the policy. But no filter will be added to your environment.
Citrix Personal vDisk will scan and process all 3rd party files and folders unless excluded explicitly.
With multiple NIC's on the PVS server, appropriate Network Interface wasn't pointed in the TFTP configuration file (Tftpcpl.cpl) for TFTP servicing, which caused the issue.
This issue can happen when SQL Database mirroring is selected in the configuration wizard but database mirroring is not configured correctly on the SQL server side.The root cause for the issue is that the account used to run the configuration wizard has access to the primary SQL Server, but that same account does not have access to the second SQL Server.When the Configuration Wizard fails to connect to the second SQL Server in the mirror, the entire process fails.
https://support.citrix.com/article/CTX202159 - How to Perform Reverse Image in Provisioning Services to upgrade Target Device software versionhttps://support.citrix.com/article/CTX125740 -How to Image a Target Device Using the Imaging Wizard
Likely due to AppSense being installed on the Vdisk.
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Refer : https://developer-docs.citrix.com/projects/provisioning-services-powershell-object-programming-guide/en/latest/#installation-of-powershell-snap-in
[Possible Cause#1]After executed new-vm PowerShell command to create new vm, XDSW will run Get-SCLibraryShare command to get location of VMM Library Share, and try to copy necessary data(BDM template, writecache vhd(x), PvsGen2.cr etc.) into VMM Library Share.If PVS user has no access permission on VMM Library Share folder, XDSW is not able to get location of VMM Library Share, then new VM will not be generated due to all necessary data is not available.  [Possible Cause#2]If PVS and DDC are separated into different subnet, and there're multiple hosting resources have been added for the same SCVMM Connection within DDC server, XDSW does not work properly.
In PVS 7.15, the Console tries to enumerate all the group membership of the user and then filter it to the PVS Site\Farm\Server admin groups. Based on the groups the user is part of, access to certain or all nodes in PVS Console will be granted.During the enumeration process, it queries the Active Directory for group membership in current domain and its parent domains as well.Above enumeration process may take unusually long time if any one of the following is true:1) Unreachable Domains: Console is trying to enumerate the groups from a domain that's not reachable. Hence a timeout may occur.2) The group membership of the user is very large: Since the console needs to enumerate all the group membership of the user logging into the console, this may take time. Hence a timeout may occur.
Cache Type = "Cache on device hard disk"
The block reservation of "Cache on device hard disk" is ONLY 4KB, and it's random I/O.
Cache Type = "Cache on device RAM with overflow on hard disk"
Since "overflow on hard disk" is vhdx format, the block reservation is 2MB & required for sequential I/O, which will provide better performance than legacy local write cache, but it will consume more filesystem usage.  Hence if there's heavy IOPS occurred on target device, and RAM cache is running out of range, "overflow on hard disk" cache will be generated, which may grow very fast.
CTX138742 - How to Mount and Unmount a vDisk Version from the Command Line Interface
Target VM's was unable to send the TFTP request properly because the next-server IP Address was not set correctly on the DHCP appliance.
Unreachable domains in a multiple domain infrastructure.
Previous PVD settings are incorrect“Restart” “Shadow” ”Reset Profile” and “Reset PvD” buttons status are controlled via GetFMAResourceActionAuthorizationAndAvailabilityDataIf this component returns 500 then all the buttons controlled by it will be gray buttons.
Disclaimer:All the screenshots being used in this article are taken from our internal lab, none of them contains our customer's data
Understanding the Boot process in PVS:==========================================
When a target device starts it needs to somehow be able to find and contact a provisioning server to eventually stream down the appropriate vDisk.This information is stored in a so-called Bootstrap file named ARDBP32.BIN. It contains everything that the target devcie needs to contact a pVS server so that streaming process can be initialized.
The boot strap file be delivered through a TFTP server, this also partly applies to the alternative BDM(Boot Device Manager)approach. There are some distinct differences between TFTP and BDM
TFTP
When using TFTP , target device needs to know how and where it can find the TFTP server to download the bootstrap file  before connecting PVS server. TFTP can be configure in HA through Netscaler to avoid single point of failure. Provisoning services has its own built-in TFTP server. However, we are free to use whatever you prefer.
One of the most popular approach in delivering TFTP server address to your target devices is through DHCP, but there are other option as well..
BDM(Boot Device Manager)
There are actually two different methods to make use of the Boot Device Manager.
Let start with PVS, PVS offers a quick wizard which will generate a relatively small .ISO(around 300KB). Next , you configure your Target devices to boot from this .ISO file, using their CDROM/DVD players. This method uses a two-stage process where the PVS server location will be hardcoded into the bootstrap generated by BDM. The rest of the information like the (PVS device drivers) is downloaded from the PVS server using a TFTP protocol (UDP port 6969), here TFTP will still be used.
As of XenDesktop version 7.x, when using XenDesktop setup wizard we can create and  assign a small BDM hard disk partition, which will be attached to the virtual machine as a separate virtual disk. Using this method the above mentioned two-stage approach is no longer needed  because partition already contains all the PVS drivers. This way all the information needed will be directly available without the need of PXE,TFTP & DHCP.
Note:
As and added advantage using the BDM method will also  decrease the boot time by around 5 to 10 sec since we don’t have to wait for PXE and TFTP

Provisioning Services Boot Process Diagram
https://support.citrix.com/content/dam/supportWS/kA460000000CcClCAK/Provisioning_Services_Boot_Process.pdf
While running CDFcontrol.exe, all data would be cached into device RAW, which would cause vDiskdif.vhdx growing into a quite big size,
Streamprocess will load pvp file to prevent performance issues during boot storm.The pvp file handle may not be released when deleting the file.
Explorer.EXE need to call IRP_MJ_CREATE function to remove file. If file handle has not been closed by CloseHandle function, delete file action will encounter SHARING VIOLATION or ACCESS DENIED error.
ESXi VM Hardware version 10 and 11 include a SATA controller for CD/DVD Media by default. If the SATA and SCSI controller are present on the PVS Target Device, the target will fail to boot. PVS relies on the SCSI controller, SATA is the only one that can be removed
Configuration/Product Design
PVS vDisk is not configured for Active Directory Password management
https://support.microsoft.com/en-us/help/3135244/tls-1-2-support-for-microsoft-sql-server
When WEM Agent machines are streamed using Provisioning Services, a timing issue can occur with the WEM Agent causing it to not properly sync with the WEM Broker upon login and thus cannot check in properly and pull down any/all configurations.
[16:21:46:745] Error: Exception while creating farm: [16:21:46:745] Error: MODIFY FILE failed. Specified size is less than or equal to current size. MODIFY FILE failed. Specified size is less than or equal to current size.
The Auditing feature is off by default, the issue occurs if Auditing is enabled.
Mounting a vDisk remotely is not supported.If you configure store/site as below, the entire remote version Promotion process is not supported entirely:- A vDisk on another Site.- A vDisk on a store to which this PVS Server is not assigned.- A vDisk that has Load Balancing disabled and it's assigned to another server.
Corruption with vDisk .vhd since it was handled incorrectly by customer file.
- After the Target Device(VDA) is moved from one Site to other, studio shows it as unregistered.- After few minutes Delivery Controller sends a shutdown message to the target device.- As the target device is cloned from existing VDA,  the VDA has old ListOfDDCs present under:C:\Program Files\Citrix\PvsVm\Service\PersistedData\BrokerAgentInfo\SavedListOfDdcsSids.xml
Inside the WEM Database, within the dbo.VUEMAgents table, the HardwareID (MAC Address) for each machine in question was the same as all other machines in the problematic group.WEM Agents are uniquely identified by by the WEM Broker using this HardwareId which is the Mac Address of first connected Network interface on any computer/VM where the WEM Agent is installed.The WEM Broker was unable to distinguish between any 2 machines in this group since each machine had the same Network Interface with the identical MAC address attached as the first interface.
Microsoft Updates were not installed properly before sealing the vDisk and promote it to production.
There was one target device that was shown as Active and connected to the vDisk when the VM on the Hypervisor was actually down already.
Possible Cause 1:
Windows 2012 R2 Datacenter edition OS layer in Hyper-V hit the Windows boot error "0xc000000e A required device isn't connected or can't be accessed" after the third reboot during Windows setup.
Using an Italian language pack and never followed the NLS boot disk steps.Possible Cause 2
Caused by the boot manager and boot loader device being set to "unknown": https://support.microsoft.com/en-us/kb/2261423Possible Cause 3
When you perform a new installation of Windows Server 2008 R2 from a DVD to unallocated space, two partitions are created. During a recovery operation, the contents of the Boot folder are first restored from the ASR Writer backup and then restored again from the backup on drive C. This double restore action causes an inconsistency in the drive GUID definitions within the Boot folder data. This inconsistency leads to the boot error.Possible Cause 5
PVS server ran out of storage space.Image on vDisk became corrupt.Possible Cause 6:
NLS file (international code page) that Windows wants is not on the boot image, which means Unidesk didn't recognize it during our boot analysis. When you import an OS layer, Unidesk reads the list of drivers and services to determine what needs to be on the boot image and what can wait until layers are available. Unfortunately, NLS files are not recognized.  We automatically include only US and Western Europe code pages.
Possible Cause 7:
Corruption on old vDisk version
The log and wireshark traces show that the failing target finished login, got the vDisk information, and started reading from the vDisk by bootstrap. After login, the only meaningful bootstrap function is the Int13 redirector that redirects disk IO to network IO and it's driven by NT-loader. If server doesn't reply to a read request, it will retry 10 times at 5 sec interval and then stop (the OS loading stops). So our focus at this point at least should not be on the bootstrap (which is well beaten to be good for the Int13 handler). The question is likely that the vDisk may contain some software that, during NT-loading, its driver is loaded into memory, and in certain network environment (e.g. some traffic hits this device) the driver reacts and cause corruption to the network stack.
https://technet.microsoft.com/en-us/sysinternals/pstools.aspxhttps://technet.microsoft.com/en-us/sysinternals/dd996900.aspx
Issue is due to the use of a Comma in the DataCenter name. This causes the DataCenter name to be truncated because the resources enumerated from XenDesktop are contained in a "comma delimited string".
Neither MCS created vms, or PVS targets created using SVMSW encounter this error when using same hosting connection or configured storage.XDSW parses multiple storage locations configured in XD host connection using commas.If commas are specified in an individual storage location, the storage path will not be possible to interpret using XDSW.If planning on using PVS  XDSW,avoid using commas while naming storages configured in XD host connection
When each Target Device boots up the OS is not aware of the Write Cache and writes to the logical disk that it is presented (the vDisk). The PVS driver then redirects this data at the block level to the write cache which in your environment is held on the PVS server.
When our BNIStack driver (our transport stack for communicating with the PVS server) is then initialized,  it will pull down chunks of the vDisk as and when they are needed from your vDisk store which is on your PVS server also. The BNIStack driver will also access the write cache directly when it needs to issue additional writes from the target device.  The communication in relation to the above is carried out between the BNIStack driver on the target device and the Stream Service on the PVS server.
The Target Device BNIStack driver is also responsible for retries (because UDP does not). The base timeout for a packet timeout is 10 seconds. If the server responds quickly, this value is reduced by half all the way down to 1 second.
Correspondingly, if the server responds slowly the timeout will double all the way up to 10 seconds.
A retry timeout of 1 second or less may cause excessive I/O retries, leading to slow response and hanging of target devices which will then ultimately lead to a stream service failure.
The Target Device that is used to boot to the vDisk in Read/Write mode and make changes has a different Hardware (or Virtual Hardware) configuration than the Production Target Devices.The differences in Hardware (or Virtual Hardware) can range from a different Storage Controller type to the amount of CPUs or any other differences in Hardware.In the case of Virtual Machines, the differences can also be on the VM version. For example an ESX Version 8 Virtual Machine vs a Version 10 Virtual Machine.
This behavior is very uncommon and should not be caused by the PVS Software.There are countless environmental variables that can lead to this behavior, including third party software that could corrupt the NTFS file systemAny potential cause for this behavior on a NON-PVS machine can also be a cause for the behavior in a PVS vDisk.It is a common practice to have "sealing scripts" that perform last minute cleaning actions on a vDisk, before changing the vDisk to Read/Only mode.As a  troubleshooting step, temporarily disable any "sealing scripts" or cleanup actions, including Anti Virus scans, before changing the vDisk to Read/Only mode.The issue needs to be treated as an Operating System issue that is not related to the PVS software.
This issue can happen when the bnistack driver is unable to open, or use a previously available, network socket.The most common cause for this issue is releasing or changing the IP address of the Network Adapter being used to communicate with the PVS Server.Hardware related problems with the Network Adapter itself can also cause this problem.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
ESXi VM Hardware version 10 and 11 include a SATA controller for CD/DVD Media by default.If the SATA and SCSI controller are present on the PVS Target Device, the target will fail to boot.PVS relies on the SCSI controller, SATA is the only one that can be removed.The customer in this instance had a SATA CD/ROM on Template and Target Devices.
Product Document Provisioning Services 7.9 - Configuring a vDisk for Microsoft Volume Licensing
MAC address property of the selected master template is set as "Manual".
XenServer PVS-Accelerator Introduction and Requirements  XenServer PVS-Accelerator Cache Storage ConsiderationsHow to change control domain memory using XenCenter in XenServer 7.1 and higherHow to Configure XenServer PVS-AcceleratorHow to troubleshoot XenServer PVS-Accelerator
XenServer PVS-Accelerator Introduction and Requirements  XenServer PVS-Accelerator Cache Storage ConsiderationsHow to change control domain memory using XenCenter in XenServer 7.1 and higherHow to Check PVS-Accelerator Cache Status
Write-cache is out of space.
New Remote Monitoring client ( Teramind )installed on the Master image seems to have caused the issue. After activating the monitoring software the VDAs started to freeze.
The Write cachedisk was formatted at GPT not MBR - which PVS does not support.
This issue can happen if the PVS Server does not have Write Access to the Storage where the Targets are being created.As part of the process of creating the Targets, PVS needs to perform the following tasks:
Verify that the folder where the Virtual Machine and Local Hard Disk for Write Cache or BDM will be created actually exists and is writableIn case of Targets with BDM Partition, PVS will need to copy the BDM vDisk to the Storage
If the PVS Server does not have Write Access to the storage, the XenDesktop Setup Wizard process will fail.
Network traces in the customers non working environments showed network packets above ~1300 bytes were being fragmented In the working environment there was no packet fragmentation.Based on the maximu packet size observed in network traces, it was determined to set the PVS server MTU to match networking conditions.
Write cache exhaustion during PVD update stage.
Reboot or shutdown action sends the command to the hypervisor. Hypervisor will locate the machine and perform the reboot or shutdown accordingly.When we send a boot signal, it tries to directly reach the VM, which fails if the complete address of the host is not entered.
This file is used to mark the PVD drive and so that the PVS bnistack driver skips it as a candidate for picking up write cache drive.
This error indicates that when TCP/IP sent out an ARP for its IP address, it got a response from another machine indicating a duplicate IP address. When Windows is starting a network, this is a fatal error.
The Kaspersky Agent was not installed using the documented parameters for compatibility with the PVS Target Device Software.
PVS servers were pointing to secondary SQL server.
The VMware tools contain network adapter drivers. While installing these drivers the PVS Target will lose its network connectivity and as a consequence be dropped from PVS. In order to update the VM-Ware tools on PVS Targets refer to  Best Practices for Upgrading a Hypervisor Tools Version in a Citrix Provisioning Environment.
Citrix Documentation - Balancing the Target Device Load on Provisioning Servers
Corrupt/out of date manifest files.
The Service Account used in the host connection did not have the Clone template and Clone Virtual Machine permissions configured.
This issue occurs when Inventory service is unable to query data after validation when attempting a vMotion and occurs either due to lack of space or a possible corruption on the Inventory service database.
By default Citrix MPPVS agent uses basic authentication to access Citrix PVS. In case if Citrix PVS uses Kerberos authentication, MPPVS agent has to be reconfigured to use Kerberos authentication too.
Wake On LAN feature interfering with BNIStack and preventing the network boot. Microsoft does not support this feature on a guest OS running on a virtual machine.
The machines were not able to boot up with the existing vdisks and were getting in to BSOD even in private image mode.
Skipping the RIMS function appeared to be at fault.
The MSI is unable to locate the path of installation directory
Telemetry service on VDA 7.8 and 7.9 uses a windows virtual account. (Every service since Windows Vista has a virtual account, whether it uses it or not). Part of using service virtual account is that at service start up, folders and files are populated in user account directory for that virtual account.
Microsoft policy below to remove old user profile folders and files, creates an operating system stop at start up, if the user profile for service virtual account qualifies for deletion and the service is set to automatic start up.
Policy:
"Computer Configuration\Administrative Templates\System\User Profiles\Delete user profile older than a specified number of days on a system restart"
The service account was locked under which PVS services were running.
VMs are using the cached registry information to send a renewal request to the DHCP servers as they come up.50% of the time the DHCP server responds within the expected time and issues it a new address.The other 50% of the time the DHCP server doesn’t respond within the expected time frame so the client enters a rebinding state, broadcasting a DHCPDiscover message to any available DHCP servers to update its current IP address lease.While it waits for responses it is using the cached registry information for it’s address.As PVS streaming is happening over this address it conflicts with other VMs that are also experiencing the issue and kicks out to a blue screen before the DHCP server can sort out the mess ( DHCP is pretty good at this – but if it doesn’t do it quick enough it will be too late as the PVS target device has already failed.
The values of Device and OSDevice under Windows Boot Manager is unknown.
vDisk was not promoted sucessfully
XenServer has a PV disk, and this disk is known by the system to be sitting on a piece of (virtual) hardware with a device_id of 0002. If you delete the device_id configuration (essentially setting it to 0001) after the reboot, there is a new piece of virtual hardware, 0001 (which won't have anything installed on it because the system hasn't booted yet) The place where windows expects to find the disk (0002) has gone missing (specifically in your scenario) . Which means Windows can't continue to boot up (and so the drivers can't reinstall onto device 0001) [and you get the 7B bluescreen]-This is basically xentools behavior-Xenbus is the driver which handles itSo, removing the device_id will help xenbus to boot with expected device_id field which lets the windows to boot properly without any issues . The device_id value of a VM determines how certain hardware is emulated and presented the VM.  Changing the device_id will result in different devices being reported in lscpci (Linux VMs) and Device Manager (Windows VMs).So, in this case , the hardware was being emulated and presented to the VM incorrectly even though the VM definition was the same .
Provisioning Services is looking for the bootmgr file in the second hard disk on the machine being captured.
To update a vdisk when PvD is present you need to perform the update on a VM that does not have a PvD disk attached as this prevents PvD from running. When a vdisk with PvD is  changed from read/write (maintenance or private) to read only (test, production) the DDC needs to be notified because the PvD inventory will run causing longer boot times which means the VM does not register with the DDC in a timely manner.  The notification extends the time the broker waits for the VM to register. For PVS to notify the DDC via PowerShell, the PVS service account must be an XD Administrator
DHCP discover issue.
This issue can happen when the Cisco "IP Device Tracking" feature is enabled.This feature sends an ARP packet that causes Windows to crash with a Duplicate IP Blue ScreenThis issue is well documented on the Cisco web site on the following link: http://www.cisco.com/c/en/us/support/docs/ios-nx-os-software/8021x/116529-problemsolution-product-00.html
This issue can occur if a previous version of the Citrix SCOM Management Pack for Provisioning Services is installed on the SCOM Server, and the earlier version cannot be upgraded to the version you are trying to install.The reason you might not see the Management Pack in the SCOM Operations Manager Console, is because the Management Pack was not imported.
A PVS failover cluster, an NFS share, or other type of remote share is currently being used, where the vDisk store is presented to PVS as a volume mount point inside a local drive, partition or a Windows folder.Although a mounted volume may work for streaming and storing vDisks and vDisk versions, it is not supported for merging vDisk versions. During a merge, PVS calls a Windows API function that reports the incorrect available free space to perform the merge process. The free space reported is the one where the mounted volume shortcut exists, as opposed to the free space in the mounted volume itself. if PVS cannot reliably get the size of the free space on the mounted volume, there could be corruption issues.
"Interrupt Safe Mode" was configured in the bootstrap settings or while creating a BOOT.ISOThe "Interrupt Safe Mode" configuration is a special setting designed to handle bad PXE implementations that do not comply with PXE standards or have bugs.The setting forces a reset on the UNDI Interface after sending every packet into the Network. This causes a considerable delay in communications and it's only meant to cope with buggy PXE implementations.Note: The PXE implementation itself is not a PVS component. The PXE code resides in the Hypervisor or Physical NIC Firmware.
Known issue with VMware Vsheild driver, Engineering has been able to determine that this behavior is being caused by the mountmgr.sys file in the Windows 7 OS causing a deadlock. MS also reports that this affects 2008 machines as well.
The Streamprocess.exe was consuming high CPU on all the PVS servers. The Perfmon suggested sustained spike in Kernel mode and process dumps revealed that we were waiting for the Packet Send & Receive.
Known issue with VMware Vsheild driver, Engineering has been able to determine that this behavior is being caused by the mountmgr.sys file in the Windows 7 OS causing a deadlock. MS also reports that this affects 2008 machines as well.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Issue could come up due to improper use of count of VM storage location to index array of PVD storage.
PVS server was configured to use the E1000 NIC while the target devices were using VMXNet3
AutoCAD requires the better GPU performance, the vm default GPU is a simple low level virtual GPU which doesn't satisfy with AutoCAD application.
If principle host crashed, and sql native client didn't receiver current Principals/failover partner information, it takes more time to obtain Principals/failover information.
The storage platform hosting the PVS vdisk uses 4k disk sectors. When we switch between private and standard mode we perform a mount of the vdisk.Official statement from Microsoft.Effect when hosting VHDs on native 4K disksThe VHD driver today assumes that the size of the physical sector of the disk is 512 bytes and issues 512-bytes IOs. This makes the VHD driver incompatible with these disks. Therefore, the VHD stack does not open the VHD files on physical 4 KB sector disks. So on server 2008 R2 this is an OS level restriction with mounting vhd files on 4k disks. You can verify the disk types using the command fsutil.exe fsinfo ntfsinfo e: as in the below screenshot.As per the above statement the vhd driver will assume that 512 is in use so you will need to upgrade to PVS 7.7 and convert the vdisks to vhdx format using the reverse imaging process. PVS 7.7 introduced support for Vhdx, which includes 512E or Advanced Format support.
On the Provisioning Services Console, the vDisk store path should show status "Valid". If there is more than one server on the farm, they should all be listed and have a valid path, and the vDisk needs to be active on the store of all servers in the farm.
VM which is migrated to new Vcenter 6 is still pointing to the old Host connetion (Vcenter 5.1) through PVS
Host Connection Settings on the PVS Server.
Lack of permissions on the stored procedures is causing the database to cycle between a dboffline/dbonline state which likely causes inconsistencies in the database
Provisioning Service Requirements
CTX120080 - Service Account Configuration for Accessing SQL
The default lifespan of ARP cache entries was lowered from 10 minutes in Windows Server 2003 to a random value between 15 and 45 seconds in Vista/W2K8. As a result, the Provisioning Services bootstraps are 20 times more likely to experience a timeout during a Vista/W2K8 boot.
Appears to be a Microsoft bug, and potentially reproducible outside of using telemetry service.Microsoft policy below to remove old user profile folders and files, creates an operating system hang at start up, if the user profile for service virtual account qualifies for deletion and the service is set to automatic start up. Policy: "Computer Configuration\Administrative Templates\System\User Profiles\Delete user profile older than a specified number of days on a system restart" VDA 7.8 and 7.9 have the telemetry service, which uses a windows virtual account. (Every service since windows vista has a virtual account, whether it is used or not). Part of using service virtual account is that at service start up, folders and files are populated in user account directory for that virtual account.
The user that is being used to run the Configuration Wizard needs to have Admin rights to PVS farm The information about these access rights is stored in the database table dbo.AuthGroup
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Provisioning Services supports Broadcom and Intel NIC teaming drivers.Teaming of multi-port network interfaces is not supported with Provisioning Services.The NIC card used here has 2 ports.
The XenDesktop Setup wizard creates a new template each time when we add machines. The template that is created usually has a name starting with " __ " followed by the name of the actual template. In our scenario, the template was already present on the host, as a result the Stream Service was throwing an exception that there is already a duplicate template with the same name present on the host and it exits the wizard.
-Google update for chrome every hour.
No access to store for some PVS servers.
During an upgrade of PVS, the log file shows:CA_LOGGING                    StartDriver – startCA_LOGGING                    Service does not exist – cfsdep2CA_LOGGING                    Install – endYou can check from windows CMD line or Powershell if the driver is missing:driverquery /v | findstr /i citrixCheck if C:\Windows\system32\DRIVERS\CFsDep2.sys is on the list. Most likely it is missing.
When a Target Device shuts down, our drivers wait while the Windows OS unloads everything.Right at the end, our drivers send a message to the PVS Server to let it know that the Shut Down process finished successfully. Sometimes the Windows OS, or some other piece of Software, delays the shutdown process and it takes a long time.When that happens the PVS Server loses contact with the Target Device before the shutdown process finishes. Since PVS doesn’t know what exactly happened to the Target, it doesn’t remove the lock on the vDisk. This is because the Target might’ve aborted the shutdown process and needs to resume contact with another PVS Server, so the lock needs to be kept in place otherwise the Target Device will die.
What the Registry Value does is it instructs the PVS Server to wait longer, even after it had lost contact with the Target Device.This gives the Target Device enough time for the OS to completely shut down.
Pagefile was set to go to the C: Drive, BNI stack goes to the next available drive to write the page file. In this case the next available drive was the BDM partition (8MB) so it would failover to server.
Windows activation problem.
Some machines were moved out from the Device Collection to a different but it was not moved on the Machine Catalog resulting to a mismatch of the Device Collection on the PVS Console and the Machine Catalog on the XenDesktop Studio.
In Need of Microsoft Hotfix
VHD Chain of Differencing Disks - http://docs.citrix.com/en-us/provisioning/7-6/pvs-vdisks-lifecycle-wrapper/pvs-vdisks-update-wrapper/pvs-vdisks-vhd-chain-overview.htmlMerging VHD Differencing Disks - http://docs.citrix.com/en-us/provisioning/7-6/pvs-vdisks-lifecycle-wrapper/pvs-vdisks-update-wrapper/pvs-vdisks-vhd-merge.htmlPromoting Updated Versions - http://docs.citrix.com/en-us/provisioning/7-6/pvs-vdisks-lifecycle-wrapper/pvs-vdisks-update-wrapper/pvs-vdisks-update-promotion.htmlAssigning vDisks and versions to target devices - http://docs.citrix.com/en-us/provisioning/7-6/pvs-vdisks-lifecycle-wrapper/pvs-vdisks-update-disk-types.htmlManually Updating a vDisk Image - http://docs.citrix.com/en-us/provisioning/7-6/pvs-vdisks-lifecycle-wrapper/pvs-vdisks-update-wrapper/pvs-vdisks-update-manual.html
The secondary disk attched to the VM.
When PVS Console connects to PVS Server with local store, opening vDisk Properties refers to the local vDisk file on the PVS Server. Opening vDisk Properties on PVS Server #2 fails because there is no vDisk file on PVS Server #2. This is the design (limitation) of PVS Server with local store.There are 4 patterns in this case:Pattern 1: PVS Console #1 connected to PVS Server #1 -> CAN open vDisk PropertiesPattern 2: PVS Console #1 connected to PVS Server #2 -> CAN NOT open vDisk PropertiesPattern 3: PVS Console #2 connected to PVS Server #1 -> CAN vDisk PropertiesPattern 4: PVS Console #2 connected to PVS Server #2 -> CAN NOT open vDisk Properties
Statically assigned IP information on the master causes targets to try use this information and fail and will need to obtain new IP, this delay then causes group policies to fail to apply.
Target devices was booting from two different versions and the updated version was not set to test / production.
Issue is caused by ungraceful Power Actions done on the Hypervisor.When a Target is Powered Off or Reset ungracefully at the Hypervisor, PVS will not delete the lock inside the LOK file for that specific version.Issue can also happen to physical targets if there's an ungraceful Shutdown, such as a Power Failure.This behavior is by design.
PVS servers were not included in the PVS Store as providers.
In the vDisk Load Balancing window using option "Use this server to provide the vDisk".
When using a distributed vSwitch you exhaust available vEthernet ports for your DVPortGroup.
The port configured was incorrect.
Can't get object from vCenter, might be some environmental factor affected:==220,0,2015/11/18 16:17:03:04005,3800,5768,0,PVS_Dll_HypervisorPlatforms,_#dotNet#_,0,,5,CDF_NET_ENTRY,"PlatformESX: Begin IsVmAvailable()",""313,2,2015/11/12 10:40:35:29392,5692,1508,0,PVS_Dll_HypervisorPlatforms,_#dotNet#_,0,,5,CDF_NET_ENTRY,"ESX: FindVM swfc-shc-auto-t (parent Vim25Api.ManagedObjectReference)",""314,2,2015/11/12 10:40:35:29392,5692,1508,0,PVS_Dll_HypervisorPlatforms,_#dotNet#_,0,,4,CDF_NET_INFO,"FindObjects: objType (VirtualMachine) property (summary)",""315,2,2015/11/12 10:40:35:65497,5692,1508,0,PVS_Dll_HypervisorPlatforms,_#dotNet#_,0,,4,CDF_NET_INFO,"FindObjects: return 0 objects",""316,2,2015/11/12 10:40:35:65497,5692,1508,0,PVS_Dll_HypervisorPlatforms,_#dotNet#_,0,,1,CDF_NET_ERROR,"Error getting list of all VMs",""317,2,2015/11/12 10:40:35:69107,5692,1508,0,PVS_Dll_HypervisorPlatforms,_#dotNet#_,0,,5,CDF_NET_ENTRY,"PlatformESX: EndIsVmAvailable()",""==
The system is a virtual machine that was reversed to a previous snapshot, and as a result, its computer account password lost synchronization with Active Directory.
The actual bottleneck was in ICA session due to graphics enhancement from XenDesktop 5.6 to XenDesktop 7.6.
1.One of the PvDSvc threads as well as bunch of other threads (close to 100) belonging different processes like explorer etc., are blocked on a mutex object.The owner thread is waiting on an event within mountmgr!MigrateRemoteDatabase (MS component for assigning volume drive letters).Looking at the related mountmgr blocked threads, we can see the presence of Vsepfilt.sys, possibly obstructing the PvD sentinel file creation.
Ghost NICs on target device.
StreamProcess is crashing when executing StreamProcess!DbObjectRecord::GetName which indicates that there are some issues with communicating to database.
Active - Active NIC teaming.
Database server entry in registry of PVS servers contained jumbled letters and the PVS admin account being used did not have full acess to the PVS farm.
BNImage is a more efective tool for Reverse imaging.
So after we know that P2PVS volume to volume can’t handle the Boot partition that’s why it failed with error failed to load boot\bcd after it fully convert all the  system drive data.
The XenDesktop Setup Wizard accesses the Host resource and not the storage as an individual entity.It tries to place machines in round robin fashion on each one of the storage defined in the hypervisor connection .If any of the storage are not healthy during this, the wizard will fail to place VMs on it.
Corrupt version and insufficient space.
http://www.wisdombay.com/hidedrive/  calculate the datahttps://technet.microsoft.com/en-us/library/cc938267.aspx​
Target boot from incorrect network adapter
Lack of proper permisisons in Vmwaqre for the Hypervisor Service account. The following permissions were not granted:
VirtualMachine.Config.Settings
Virtual machine > Configuration > Settings
This error is caused by the differences between the templates.
Issue authenticating to the database when using a different account but the Network account
When a user logs in to a PVS server console, the PVS SOAP Server queries all Active Directory groups to which the user belongs in order to establish what permissions the user has.If the environment has Windows Server 2012 domain controllers and at least one Windows Server 2008 Provisioning Server, the issue will only occur when the user tries to log in to one of the 2008 PVS servers console because the following user groups' security identifiers (SIDs) cannot be resolved on the 2008 Servers:S-1-18-1 - Authentication authority asserted identityS-1-18-2 - Service asserted identityThis can be seen on CDF traces, which show that one of the user group's SID fails to be identified when querying AD:
,"Exception System.DirectoryServices.AccountManagement.PrincipalOperationException: An error (1301) occurred while enumerating the groups.  The group's SID could not be resolved.",""
Configuration Wizard not run on both the PVS servers.
Inappropriate permission on database level.
Connection loss between PVS and SQL Server.
This issue can happen if one or more of the Hosts in the Cluster cannot access the Template Files.
How to disable IPv6 or its components in Windows
Timeout locating the PVD disk on the VM.
Citrix Documentation - Upgrading vDisks by reverse imaging
Presence of Antivirus software on master image while installing Target device software. Also, IPV6 was enabled.
Firmware update changed the NIC teaming from from Automatic (Recommended) to Dynamic Load Balance.
In SCCM in the customer Device Settings dialog the "Additional software manages the deployment of applications and software updates" setting has to be set to YES.
The following are some scenarios that cause the cache to redirect to the PVS server:
Improper formatting of the write cache drive.
Drive not meeting the minimum required size.
Windows 2012 target devices appear to take a longer time to initialize the disk and bnistack.
Machine Account creation is failing when a when communicating with VMware API to create Preparation VM image. The configured vSphere user does not have necessary privileges to execute.
The dump file was not created because the capacity of the pagefile was less than the RAM.
The Microsoft Documentation for SQL Server AlwaysOn Requirements can be found at: Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups (SQL Server).
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The issue is happening because Provisioning Services Console is timing out in attempt to read all available vDisk (.vhd) files for import.
CTX131239 - XenDesktop/Provisioning Services Hypervisor Citrix Product SupportCitrix Interoperability Validation
The issue is caused when the logon account for the Soap Server Service does not have the appropriate permissions to read the Active Directory properties of the account that is launching the PVS Console.The Soap Server Service needs to know if the user that is launching the PVS Console is a member any of the groups designated as Admins in the PVS Database.In order to do this, the logon account for the Soap Server Service needs to have the following minimum permissions over the user account launching the PVS Console:
Read public informationRead general informationRead group membershipRead remote access Information
This issue may occur due to timing issue with BNISTACK using multiple write threads.
Permissions can be denied because of misconfiguration or a competing group membership that would deny access.
The third party library log4cxx is used for generating log files in Provisioning Services. Due to the limitation of log4cxx, the maximum number of backup log files is limited to 13.
Vdisk files were replicated between the PVS stores using Windows Copy/Paste and the file attributes were not copied over.  The "Created" date of the Vdisk files were different and were seen as different files in the eyes of Provisioning Services.
To deal with activation after you have vDisks, target devices, Catalogs and so on, refer to the following:
KMS ActivationCTX128276 - Configuring KMS Licensing for Windows and Office 2010 and 2013  Citrix Blog - Demystifying KMS and Provisioning Services
MAK (not supported for PVS and Microsoft Office):CTX129105 - How to Use Multiple Activation Key (MAK) Activation with Automatic Updates
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Click the following link for more details:Citrix Provisioning Services 7.x Issues Fixed in This Release.
The replication status might fail to display the remote Provisioning Servers within a farm. This happens when there is a large number of vDisks and versions in a farm with two or more servers. [#LA3518]
The issue may occur because:1 - The target device has been deleted from the PVS Database or has not been added.You can check the Device Collections using PVS Console.You can also run MCLI query:C:\Program Files\Citrix\Provisioning Services Console> MCLI.exe get device -p deviceMac="XX-XX-XX-XX-XX-XX"2 - The MAC address has been changed on the Hypervisor3 - Another server is responding to DORA boot request of PXE Client. This can be seen in the Network Trace.
This error might occur if the SOAP service lost communication to the database and was not able to authenticate the account to make changes.
To resolve the issue connect to the ESXi console and view the size of some key directories. Look for common suspects (for example, logs that are not rotating properly).
Note: If you are unable to PuTTY into the host, move all the VMs off ESXi Host and reboot.
This error can be caused by some modern Network Card Drivers which have a lengthy initialization cycle. This causes the NIC miniport instance to not be ready when initializing the BNIStack driver.
This error may occur if the PVS drivers are missing after the initial installation.The issue can be detected by using the following Microsoft Windows built-in tool driverquery: driverquery /v | findstr /i citrix > Drivers.txtThis creates a text file with all the Citrix drivers in the system.
When this behavior occurs on a PVS Server, the Driver CFsDep2 will be missing from the list created by running the command driverquery.
An active device in the collection is associated with a MAC address that is not assigned to a VM.
CTX124792 - Citrix Provisioning Services 5.6 SP1 Administrator's GuideCTX124791 - Citrix Provisioning Services 5.6 SP1 Installation and Configuration Guide
The new SATA Controller within vSphere 5.5 is not supported on Provisioning Service 7.1.
The behavior appears when the Stream and Soap services are configured to run under a user account and the Domain is configured with the FQDN.
Note: There have been reports of same behavior when using a Network service account instead of a user account.
In the following example, the Domain is configured with its FQDN mydomain.local:
Citrix Documentation - Active DirectoryCitrix Documentation - Provisioning Services 7.6
Provisioning Service requires Citrix License Server to be at equal or greater than the recommended requirements.For example, Provisioning Services 7.6 requires Citrix Licensing Server 11.12.1 and later.
The inconsistency of vDisk information occurs in PVS servers because of some notification issues.
This bug is fixed in .NET Framework 4.5, which is a highly compatible, in-place update to .NET Framework 4.
CTX130458 - Teamed NICs Used for Non-Provisioning Services Traffic Fails
CTX119000 - vDisk Inactive State with Broadcom Network Cards
Taking a dump of a VM running on Hyper-V
Citrix Discussions - PVS 7: Disk not found error
In a pre-boot environment, there is nothing to filter packets for a PXE dependent application (like Citrix Provisioning Services, Altiris, and Microsoft Windows Deployment Services) to acquire an IP address so that the client can contact the server application.  Filtering of packets does not occur until the operating system is completely booted.
VMware vSphere 5.5 requests a certificate to authorize access to a third party tool or console.
In Citrix PVS 6.0/6.1, a bug (BUG0267296) causes the following commands to fail in a Multi-Homed Environment when the first NIC in the binding order is a Non-Streaming NIC:
Create/Delete vDisk
Configure BootStrap
Rebalance Devices
Set Server Logging
Get/Set vDisk Properties
As a workaround for this issue, create the following registry key to force the Manager to use the Streaming NIC to send the messages to the Stream Process:
HKEY_LOCAL_MACHINE\Software\Citrix\ProvisioningServices\Manager
Name: GeneralInetAddr
Type: REG_SZ (String Value)
Value: IP of the Streaming NIC and port. For example 192.168.1.20:6909.
The issue has been fixed in Hotfix CPVS61E001 and Hotfix CPVS60E013. After applying the hotfix or a later hotfix, the registry key GeneralInetAddr is not required.
If BNNS.sys attempts to bind to a NIC before it has fully initialized, then the target device stops responding at the Windows splash screen.
This issue was originally seen with Broadcom NetXtreme II Gigabit Ethernet controllers.
This issue occurs because the vDisk chain is copied and imported after renaming of the vDisk.Note: Citrix does not support renaming the vhd chain while adding or importing a vDisk.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This issue may occur if NFS client intermittently cannot reconnect to NFS server in Windows 7 SP1 or Windows Server 2008 R2 SP1.
CAUSE 1 &3:Following are the two possible causes for this error message:
The target device in the PVS console does not exist or the MAC address is invalid.
In a High Availability (HA) environment with Trivial File Transfer Protocol (TFTP) service running on both PVS, if one of the PVS Server goes offline and the IP address is still configured in the bootstrap file, any device sending a request for bootstrap to the offline server, generates the error message.
CAUSE 2:VM imaged with Sata controller during the installation ESXi VM Hardware version 10 and 11 include a SATA controller for CD/DVD Media by default. If the SATA and SCSI controller are present on the PVS Target Device, the target will fail to boot. PVS relies on the SCSI controller, SATA is the only one that can be removed. The customer in this instance had a SATA CD/ROM on Template and Target Devices.
This error is generated by Provisioning Services Target auto update (Xip.ClientService). The service runs every hour to check for an update; if update is not available then it generates the error.
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
This issue might occur if the vDisk files are not replicated correctly across the PVS Servers.
A previously working connection with the DB is no longer successful. The database server is responding to pings and the normal SQL health checks on the database server pass. The account trying to connect to the DB has DBowner permissions and is not locked out but still connection to the DB fails.  This can be caused by the SQL port being changed unexpectedly.
Driver Verifier
CTX106970 - How to Enable User Mode Stack Trace Database for IMA Service to Detect Memory Leaks
How to use the special pool feature to isolate pool damage
When multiple Datacenters exist within vCenter, the wizard might fail to enumerate the hosts in the cluster that the user is trying to use, causing the wizard to fail with the following error message:
“Cannot connect to the hypervisor at <hypervisor_name>: Object referenced not set to an instance of an object.”
This error might occur because Windows takes longer than usual to enumerate the volumes after P2PVS mounts it's Virtual Hard Disk (VHD).
Advanced Memory Support: This setting enables the bootstrap to work with newer Windows operating system versions and is enabled by default. Disable this setting only on older XP or Windows Server operating systems, 32-bit versions that do not support Physical Address Extension (PAE) by default, or if your target device is hanging or behaving erratically in the early boot phase.
This issue can occur if there are two different PVS hotfix levels across two or more PVS servers.
To verify, on the PVS servers, go to Control Panel > Programs and Features.
Product Downloads - Provisioning Services
Product Documentation - Provisioning Services 7.x
The vDisk from which the TDs are streaming have not yet been updated to reflect the correct time. This is causing any new booting TDs or previously running TDs, which were rebooted, to show a system time that is normally skewed by one hour. The TD operating system is being provisioned by a vDisk that had its system time last updated prior to DST.
When running the Show Connected Devices command from the PVS console, it sends the request to each interface that is bound to the stream service, to each Target Device, with a default timeout of 5000 milliseconds, twice for each NIC, resulting in a search time of 10 seconds per device, per NIC.
Example
5 NICs, 1 Target Device currently connected would return the Show Connected Device in 50 seconds.
You can clearly see this behavior in the stream log that it is searching each IP address assigned to the streaming service:
2012-05-25 10:05:24,614 [0x00000fdc] DEBUG CManagerConfig::GetRelayedRequestTryTimes -- <RelayedRequestTryTimes> = 22012-05-25 10:05:24,614 [0x00000fdc] DEBUG CManagerConfig::GetRelayedRequestReplyTimeoutMilliseconds -- <RelayedRequestReplyTimeoutMilliseconds> = 50002012-05-31 14:47:46,470 [0x00000e7c] DEBUG CManagerConfig::GetServerIpGroupTryTimes -- <ServerIpGroupTryTimes> = 22012-05-31 14:47:46,470 [0x00000e7c] DEBUG CManagerConfig::GetServerReplyTimeoutMilliseconds -- <ServerReplyTimeoutMilliseconds> = 500002012-05-31 14:47:46,470 [0x00000e7c] DEBUG in CManagerReplyReceiver:SendMessageToServer, requestId = 0
2012-05-31 14:47:46,486 [0x00000e7c] DEBUG in CManagerReplyReceiver:TryEachIpAddressIteratively
2012-05-31 14:47:46,486 [0x00000e7c] DEBUG will try sending request to ip address = 2887140615, port = 6911
2012-05-31 14:47:46,486 [0x00000e7c] DEBUG in CManagerReplyReceiver:sendMessageAndWaitForResult
2012-05-31 14:47:46,501 [0x00000e7c] DEBUG added future for request id 0
2012-05-31 14:47:46,501 [0x00000e7c] DEBUG to <172.22.69.7:6911>, about to send 80 bytes
2012-05-31 14:47:46,501 [0x00000e7c] DEBUG sent 80 bytes of 80 byte message
2012-05-31 14:47:56,516 [0x00000e7c] DEBUG futureResult.get failed with err = 121
2012-05-31 14:47:56,516 [0x00000e7c] ERROR remote request timed out
2012-05-31 14:47:56,532 [0x00000e7c] DEBUG for requestId = 0, returning result = -32718 (RemoteRequestTimedOut). Done waiting.
2012-05-31 14:47:56,532 [0x00000e7c] DEBUG number of entries in the futureMap = 0
2012-05-31 14:47:56,532 [0x00000e7c] DEBUG will try sending request to ip address = 2887140359, port = 6911
2012-05-31 14:47:56,532 [0x00000e7c] DEBUG in CManagerReplyReceiver:sendMessageAndWaitForResult
2012-05-31 14:47:56,532 [0x00000e7c] DEBUG added future for request id 0
2012-05-31 14:47:56,532 [0x00000e7c] DEBUG to <172.22.68.7:6911>, about to send 80 bytes
2012-05-31 14:47:56,532 [0x00000e7c] DEBUG sent 80 bytes of 80 byte message
2012-05-31 14:48:06,547 [0x00000e7c] DEBUG futureResult.get failed with err = 121
2012-05-31 14:48:06,547 [0x00000e7c] ERROR remote request timed out
2012-05-31 14:48:06,547 [0x00000e7c] DEBUG for requestId = 0, returning result = -32718 (RemoteRequestTimedOut). Done waiting.
2012-05-31 14:48:06,547 [0x00000e7c] DEBUG number of entries in the futureMap = 0
2012-05-31 14:48:06,547 [0x00000e7c] DEBUG will try sending request to ip address = 2887140103, port = 6911
2012-05-31 14:48:06,547 [0x00000e7c] DEBUG in CManagerReplyReceiver:sendMessageAndWaitForResult
2012-05-31 14:48:06,547 [0x00000e7c] DEBUG added future for request id 0
2012-05-31 14:48:06,547 [0x00000e7c] DEBUG to <172.22.67.7:6911>, about to send 80 bytes
2012-05-31 14:48:06,547 [0x00000e7c] DEBUG sent 80 bytes of 80 byte message
2012-05-31 14:48:16,562 [0x00000e7c] DEBUG futureResult.get failed with err = 121
2012-05-31 14:48:16,562 [0x00000e7c] ERROR remote request timed out
2012-05-31 14:48:16,562 [0x00000e7c] DEBUG for requestId = 0, returning result = -32718 (RemoteRequestTimedOut). Done waiting.
2012-05-31 14:48:16,562 [0x00000e7c] DEBUG number of entries in the futureMap = 0
2012-05-31 14:48:16,562 [0x00000e7c] DEBUG will try sending request to ip address = 2887139847, port = 6911
2012-05-31 14:48:16,562 [0x00000e7c] DEBUG in CManagerReplyReceiver:sendMessageAndWaitForResult
2012-05-31 14:48:16,562 [0x00000e7c] DEBUG added future for request id 0
2012-05-31 14:48:16,562 [0x00000e7c] DEBUG to <172.22.66.7:6911>, about to send 80 bytes
2012-05-31 14:48:16,562 [0x00000e7c] DEBUG sent 80 bytes of 80 byte message
2012-05-31 14:48:26,577 [0x00000e7c] DEBUG futureResult.get failed with err = 121
2012-05-31 14:48:26,577 [0x00000e7c] ERROR remote request timed out
2012-05-31 14:48:26,577 [0x00000e7c] DEBUG for requestId = 0, returning result = -32718 (RemoteRequestTimedOut). Done waiting.
2012-05-31 14:48:26,577 [0x00000e7c] DEBUG number of entries in the futureMap = 0
2012-05-31 14:48:26,577 [0x00000e7c] DEBUG will try sending request to ip address = 2887139591, port = 6911
2012-05-31 14:48:26,577 [0x00000e7c] DEBUG in CManagerReplyReceiver:sendMessageAndWaitForResult
2012-05-31 14:48:26,577 [0x00000e7c] DEBUG added future for request id 0
2012-05-31 14:48:26,577 [0x00000e7c] DEBUG to <172.22.65.7:6911>, about to send 80 bytes
2012-05-31 14:48:26,577 [0x00000e7c] DEBUG sent 80 bytes of 80 byte message
2012-05-31 14:48:36,592 [0x00000e7c] DEBUG futureResult.get failed with err = 121
2012-05-31 14:48:36,592 [0x00000e7c] ERROR remote request timed out
2012-05-31 14:48:36,592 [0x00000e7c] DEBUG for requestId = 0, returning result = -32718 (RemoteRequestTimedOut). Done waiting.
2012-05-31 14:48:36,592 [0x00000e7c] DEBUG number of entries in the futureMap = 0
2012-05-31 14:48:36,592 [0x00000e7c] DEBUG will try sending request to ip address = 2887139335, port = 6911
2012-05-31 14:48:36,592 [0x00000e7c] DEBUG in CManagerReplyReceiver:sendMessageAndWaitForResult
2012-05-31 14:48:36,592 [0x00000e7c] DEBUG added future for request id 0
2012-05-31 14:48:36,592 [0x00000e7c] DEBUG to <172.22.64.7:6911>, about to send 80 bytes
2012-05-31 14:48:36,592 [0x00000e7c] DEBUG sent 80 bytes of 80 byte message
2012-05-31 14:48:37,247 [0x000030fc] DEBUG in CManagerReplyReceiver::dispatchPacket
2012-05-31 14:48:37,247 [0x000030fc] DEBUG header opcode = -2147221501, request id = 0
2012-05-31 14:48:37,247 [0x000030fc] DEBUG handling a ManagedServer reply
2012-05-31 14:48:37,247 [0x000030fc] DEBUG in CRemoteManagedServer::handleReply
2012-05-31 14:48:37,247 [0x000030fc] DEBUG handling reply for request id = 0
2012-05-31 14:48:37,263 [0x000030fc] DEBUG found future for requestId
2012-05-31 14:48:37,263 [0x000030fc] DEBUG converting reply status for a rebalance reply, successful by default
2012-05-31 14:48:37,278 [0x000030fc] DEBUG in CRemoteManagedServer::harvestReplyDataFromMessage
2012-05-31 14:48:37,278 [0x000030fc] DEBUG reply is for a rebalance request, requestId = 0
2012-05-31 14:48:37,278 [0x000030fc] DEBUG value from reply is 21
2012-05-31 14:48:37,278 [0x000030fc] DEBUG entry added to data result map for requestId = 0
2012-05-31 14:48:37,294 [0x00000e7c] DEBUG futureResult.get succeeded for requestId = 0, actualResult = 0 (Success). Done waiting.
Any environmental DHCP solution which can supply 2 different ip addresses to a single pvs target device, at pxe dhcp request stage and windows dhcp request stage, can result in PVS targets having 2 ip address assigned to a single network adapter.
DHCP solution using split scopes
There is no method to ensure only one dhcp server will respond to dhcp request from individual target devices.This will allow target devices to recieve different ip address at pxe dhcp request stage, and the windows dhcp request stage, and result in 2 ip addresses.Configuring dhcp server ipv4 scope advanced options to include a delay does not prevent double ip addresses, and is not a suitable configuration, split scope remains unsupportted for PVS environments.
DHCP solution InfoBlox
InfoBlox assigns IP addresses based on DHCP discover/requests and includes the Client Identifier (UID) in the DHCP packet.
PXE boot does not populate DHCP packets with the UID (PXE implementation is independent on PVS design)Windows populates the Client Identifier field.Different IP addresses to be assigned by the InfoBlox device during the pxe dhcp request stage and windows dhcp request stage.
PVS does not support IP change, at any stage for a target device over individual boot cycles.
PVS uses the technology that exists for machines to PXE boot (It is probably outside of PXE boot specification to populate the Client Identifier field).

InfoBlox Stateme​nt on this Behavior
This is not really a known issue but more an additional feature implemented in NIOS 6.6. The feature "ignore uid" allows DHCP to provide a lease irrespective of the client's UID. As the PXE boot does not have a UID and the DHCP lease, once the OS is running and has a lease the machine gets two separate IPs unless the "ignore uid" feature is enabled. This is not possible to implement on 6.4.9 and 6.4.10 and requires an upgrade to at least 6.6, preferably 6.6.10. It is also required to review the admin guide on limitations of this feature with regards to DHCP fail over if this is being used because ignore UID can only be set on a member or grid level.
When upgrading PVS Server 5.0 to PVS Server 5.1, two entries of Citrix PVS Server x64 will appear in Add/Remove Programs. On clicking the Click here for support information link on either Citrix PVS Servers x64, Citrix PVS Server will appear with two different versions.
When attempting to uninstall Citrix PVS Server x64 5.0.0, error message 1722 appears and the product will not uninstall.
Complete the following steps to fix the issue:PVS
Open vDisk > File Properties > Options.Ensure to select the Enable Active Directory machine account password management option, as shown in the following screen shot. From the Provisioning Services Console, ensure that the device experiencing the issue is shut down.Right click the affected device and select Active Directory.​Select Reset Machine Account, as shown in the following screen shot.
​XenDesktop
Open the Delivery Services console on the Desktop Delivery Controller (DDC). You have to recreate the desktop group or Catalog and add the machine accounts again.
The issue is caused by un-synchronized licenses. If the licenses are correctly synchronized, the Provisioning Services (PVS) listed on the License Administration Console will show an active Subscription Advantage date on the license server.
CTX129292 - How to Enable the Dedicated Dump File Feature in Provisioning Services 6.x
CTX127871 - Memory Dump File Not Being Generated on Provisioned Target
How to use the DedicatedDumpFile registry value to overcome space limitations on the system drive when capturing a system memory dump
How to generate a kernel or a complete memory dump file in Windows Server 2008
Configure memory dump files for Server Core installation options of Windows Server 2008
Dedicated dump files are unexpectedly truncated to 4 GB on a computer that is running Windows Server 2008 or Windows Vista and that has more than 4 GB of physical memory
A dedicated complete memory dump file may not be successfully generated if the volume that stores the dedicated dump file has insufficient free space
The Configuration Wizard tries to modify the pre-existing SQL database and specifies a file size that is smaller than the initial size of the database.
If a target device running the Provisioning Services 6.0 software on Windows Vista, Windows 7, or Windows 2008 R2 releases the IP address or changes its IP address during use, it causes the target to stop responding.
Veeam interferes with the communication of a PVS for few minutes during snapshot. The stream process cannot log data. During this same time period, target device cannot connect to the problem PVS Server. Restarting stream process restarts the active connections to the PVS.
http://msdn.microsoft.com/en-us/library/windows/hardware/ff567603(v=vs.85).aspx
http://technet.microsoft.com/en-us/library/cc770877(v=ws.10)
Advanced Memory Support setting enables the bootstrap to work with newer Windows operating system versions and is enabled by default. Disable this setting only on older XP or 32-bit Windows Server operating systems that do not support Physical Address Extension (PAE) by default, or if the target device is hanging or behaving erratically in the early boot phase.
The features of Symantec 12.1 are preventing communication between the target using the vDisk and the Provisioning Services Server.
For additional information on Provisioning Services 7.0, refer to Automating vDisk Updates.
In Provisioning Services 5.6, DEBUG or TRACE level logging is configured in the Server properties and the Stream log processes information on the Automating vDisk Update.
Log Location:  C:\Documents and Settings\All Users\Application Data\Citrix\Provisioning Services\Log
Example log: The following entries indicate the four targets that were updated from vDisk XP01 to XP01update:
2010-12-22 13:29:46,673      [0x00000a24]      TRACE      CSSServerCache::DispatchAutoUpdateRequest  Recv: LS_AUTO_UPDATE_REQUEST from device at IP:AC102865
2010-12-22 13:29:46,673      [0x00000a24]      DEBUG      CSSServerCache::DispatchAutoUpdateRequest  autoupdate request function = 1
2010-12-22 13:29:46,673      [0x00000a24]      TRACE      CSSAutoUpdate::TriggerImmediateAutoUpdate  AutoUpdate:  TriggerImmediateAutoUpdate called
2010-12-22 13:29:46,673      [0x00000a24]      TRACE      CSSServerCache::DispatchAutoUpdateRequest  Send: LS_AUTO_UPDATE_REPLY
2010-12-22 13:29:46,673      [0x0000078c]      DEBUG      In DoServerGetAllDiskPaths, for serverId = xxxxxxxx-eeee-aaaa-wwww-zzzzzzzzzzzzzz
2010-12-22 13:29:46,673      [0x0000078c]      TRACE      handing out connection = 0
2010-12-22 13:29:46,673      [0x0000078c]      DEBUG      In CServerDbAccess::DoGetAllDiskPaths
2010-12-22 13:29:46,689      [0x0000078c]      DEBUG      harvested storePathPair, storeId = 1dedd544-a53b-4c21-a057-dcc2b73d6600, path = <F:\IMGStore>
2010-12-22 13:29:46,689      [0x0000078c]      INFO       CSSAutoUpdate::PerformImmediateAutoUpdate  Immediate Auto Update process started.
2010-12-22 13:29:46,689      [0x0000078c]      DEBUG      In DoServerGetAllDiskLocators, for serverId = xxxxxxxx-eeee-aaaa-wwww-zzzzzzzzzzzzzz
2010-12-22 13:29:46,689      [0x0000078c]      TRACE      handing out connection = 0
2010-12-22 13:29:46,689      [0x0000078c]      DEBUG      In CServerDbAccess::DoGetAllDiskLocators
2010-12-22 13:29:46,705      [0x0000078c]      DEBUG      harvested DiskLocatorListItem, storeId = 1dedd544-a53b-4c21-a057-dcc2b73d6600, diskLocatorName = <XP01update>, diskLocatorId = 0ab9a18b-5c87-4182-b782-59ce5a1d67b6
2010-12-22 13:29:46,705      [0x0000078c]      DEBUG      harvested DiskLocatorListItem, storeId = 1dedd544-a53b-4c21-a057-dcc2b73d6600, diskLocatorName = <XP01>, diskLocatorId = 3065b3bc-b496-4f63-b887-d956286b274e
2010-12-22 13:29:46,705      [0x0000078c]      DEBUG      In DoDeviceDiskLocatorUpdateDiskLocatorId
2010-12-22 13:29:46,705      [0x0000078c]      TRACE      handing out connection = 0
2010-12-22 13:29:46,736      [0x0000078c]      DEBUG      CSSProtocolModule::DoTraceEvent  Auto Update: scheduled update of 4 devices from disk 'XP01' to disk 'XP01update'.
2010-12-22 13:29:46,736      [0x0000078c]      DEBUG      In DoUserGroupDiskLocatorUpdateDiskLocatorId
2010-12-22 13:29:46,736      [0x0000078c]      TRACE      handing out connection = 0
2010-12-22 13:29:46,767      [0x0000078c]      INFO       CSSAutoUpdate::PerformImmediateAutoUpdate Immediate Auto Update process finished.
In this example, the error occurred in a simple 2-server PVS Server farm configured with the local storage, as shown in the following image:
This method of creating a vDisk is not supported when having a simple 2 PVS Server configuration with local storage. This is because of the fact that the stores are not able to synchronize between each other.
Offload parameters are not compatible with the Provisioning Server network stack. Citrix recommends disabling features such as TCP Offload on the network adapter for the target device.Configuration differences between PVS servers of the same farm
This error may occur because when PVS Server and the Lakeside software Systems Management Agent are installed on the same Windows 2008 Server, the StreamProcess.exe cannot load in the operating system.
The observed cause of this issue is the inability of the router to pass the PXE broadcast to other subnets in order for the target device to discover a DHCP server that is on a different subnet and acquire an IP address.
In general, most antivirus product defaults are configured to scan all files IO and\or processes on a disk. Like an operating system that runs locally to its hardware, all PVS streaming IO operations are subject to real-time scanning until specified otherwise. If an antivirus program scans the continuously active data stream that consists of the operating system, then this impedes the normal operation of PVS by causing disk IO delays and read-write failures, HA problems, and so on. In extreme cases, the PVS target device and server can consume more resources than necessary or become inactive.
When a virtual disk is running in standard image mode and needs to be restarted, it can potentially re-download all the previously loaded virus definitions; best practice would be to update just the master target device. This is a common scenario that causes serious degradation when target devices are restarted in mass, often causing bandwidth bottlenecks for a brief period of time.
By default, PVS creates all target devices on Volume 1. PVS does not redirect to another volume even after the volume runs out of space.
The original template was created before XenServer Hotfix 009 and XenServer Hotfix 10 were available. Therefore, the template looks for a different position in the XenServer from where the Network Interface Card (NIC) is located, though the vDisk shows that the latest tools are installed.
For additional information see http://docs.citrix.com/en-us/provisioning/7-6.htmlUsing the Imaging Wizard - http://docs.citrix.com/en-us/provisioning/7-6/pvs-install-wrapper/pvs-vdisks-image-wizard.html
This error can occur if the filename of the vDisk that you are importing has a period (.) anywhere before the .vhd extension.
For example:
Test_VDisk.NewVersion.vhd
Test_VDisk.1.vhd
If you have a support case open with Citrix Technical Support, upload your traces to http://taas.citrix.com.
There is a feature on several NIC vendors stack called “Virtual Machine Queues” to support the VMQueue implementation of the Microsoft Windows 2008R2 and newer operating systems, which is said to improve the overall networking subsystem performance for virtual machines running on HyperV v2.
VMware ESX incorrectly writes over the memory allocated to the bootstrap, deleting the computer name information provided by the Provisioning Services server. The operating system by default changes the name to the MAC addresses of the virtual machine.
Citrix eDocs - Importing Target Devices into a Collection
MSDN SQL Server 2005 Tools and Utilities Reference article for BCP: http://msdn.microsoft.com/en-us/library/ms162802(SQL.90).aspx
Additional example queries (if using with BCP, ensure to prefix the tables listed in the FROM clause with the name of the database followed by a period as seen in the example):
Export only the Devices that are members of the Collection Desktops:
SELECT D.deviceName, D.deviceMac, S.siteName, C.collectionName
FROM dbo.Device D, dbo.Collection C, dbo.Site S
WHERE D.collectionID = C.collectionID AND C.siteID = S.siteID AND C.collectionName='Desktops'
ORDER BY S.siteName, C.collectionName, D.deviceName
Export Devices from all Sites and Collections within a Farm whose name begins with XD:
SELECT D.deviceName, D.deviceMac, S.siteName, C.collectionName,
FROM dbo.Device D, dbo.Collection C, dbo.Site S
WHERE D.collectionID = C.collectionID AND C.siteID = S.siteID AND D.deviceName LIKE ‘XD%’
ORDER BY S.siteName, C.collectionName, D.deviceName
Export Devices from all Sites and Collections within a Farm that belong to a View named XSP:
SELECT D.deviceName, D.deviceMac, S.siteName, C.collectionName
FROM dbo.Device D, dbo.Collection C, dbo.Site S, dbo.SiteView V, dbo.SiteViewDevice Z
WHERE D.collectionID = C.collectionID AND C.siteID = S.siteID AND S.siteID = V.siteID AND V.siteViewID = Z.siteViewID AND D.deviceID = Z.deviceID AND V.siteViewName=’XSP’
ORDER BY S.siteName, C.collectionName, D.deviceName
Group Policy is enabled to force the bitLocker Driver Encryption on the pagefile on the system drive.
"HKLM\System\CurrentControlSet\Control\Session Manager\Memory Management\PagefileOnOsVolume=dword 1"
The boot strap timeout was manually modified incorrectly.The Stream Service service is not running.
A Windows Server 2003-based computer stops responding when the registry is used extensively. A memory dump or post mortem debug on the computer that does not respond, indicates abnormally high resource contention involving the Microsoft system registry lock, nt!CmpRegistryLock. Multiple threads belonging to different process spaces trying to access the registry causes derogated system performance and the operating system or application stops responding.
Complete the following steps to mount Provisioning server vDisk:
From XenCenter console, create a new virtual machine based on the target device properties. In this scenario, the target device is a Windows 7 x64 virtual machine with one (1) vCPU and 2048MB RAM. Click Next.
Type a name for the virtual machine and click Next.
Specify the location to the Provisioning Services ISO image and click Next.

Select a home server for the virtual machine and click Next.
Allocate the required number of vCPUs and the amount of memory and click Next.
Modify the default storage by selecting Properties.  Enter a name for the virtual disk and select the Location for the NFS storage repository. click Ok and then Next.
After assigning the correct virtual network interface(s), click Next.
Clear the option to Start VM automatically and click Create Now.
To mount the NFS storage repository, you need to install the Client for NFS feature. Go to Programs and Features and click on Turn Windows features on or off.  	After that, go to the command line to mount the NFS storage. Type command: mount \\<NFSStorageIPAddress\NFSfolder <letter>: 	Where NFSStorageIPAddress is the IP address for the NFS storage, NFSfolder is the name of the storage folder, and letter is the letter you want to assign to the NFS share.
Browse to the NFS share using Windows Explorer. Note: During the process of mounting the NFS storage repository using XenCenter, a folder was created with a Globally Unique Identifier (GUID).
Ensure that vDisk that requires updating is not in use by any devices.
Copy the vDisk to XenServer folder specified in step 10.
This folder should already contain a *.vhd file that was created and assigned to the virtual machine created earlier. The file name is represented by a GUID.
Rename the copied vDisk to match the name of the vhd file created by XenServer from Step 13.
Start the newly created virtual machine.
When the virtual machine starts into the operating system, uninstall the current version of the provisioning target device software.
Restart the virtual machine.
Install the new version of the provisioning target device software.
Restart the virtual machine.
Shutdown the virtual machine.
Copy the vDisk back to the original Provisioning Server share location.
Rename the vDisk to its original name.
The vDisk is now ready to be deployed to the devices with the updated device target software.
From Cisco Understanding Storm Control - “Storm control prevents traffic on a LAN from being disrupted by a broadcast, multicast, or unicast storm on one of the physical interfaces.”
The server running Provisioning Server and the Client communicate using Unicast UDP. If the storm control threshold on the Cisco switchport interface is set too low or stricter than the necessary operating packet throughput required by Provisioning Server, this behavior can be experienced.
CTX122650 - Machine Account Password Fails to Update
Scenario 1
This issue occurs when the ICA listener configuration GUI is set to All network adapters configured with this protocol in the Network adapter tab, as shown in the following screen shot.
Multiple IP address will be listed in Citrix AppCenter, as shown in following screen shot.
The preceding configuration can result in the application launch ICA file containing the wrong IP address; the one that is not being used for ICA traffic.For example, in a Provisioning Server environment where one NIC is enabled with an IP address for PXE boot and another NIC is set with an IP address to handle the network traffic for ICA, the ica file might contain the PXE boot IP address causing the ICA application launch to fail.Changing the binding order to correct this issue might cause XenApp server to fail to start.
Scenario 2
When the ICA listener configuration GUI is set to NIC with an IP address to handle the network traffic for ICA network adapters in the Network adapter tab, as shown in the following screen shot.
No IP address is listed in Citrix AppCenter, as shown in following screen shot.
vSphere 5.0 Virtual Machines that get the blue screen when starting from the Provisioning Services vDisk image have a different ethernet pciSlotNumber than the Virtual Machine used to create the master image.
Complete the following steps to troubleshoot the error:
Follow the steps in article CTX127922 - IMA Service Fails to Start and MFCOM Service is Unresponsive in a Starting State..	Confirm that the IMA and MFCOM Services have started.
If the distributed transaction coordinator (DTC) service does not start, open a command prompt with admin privileges and run msdtc –resetlog.	Confirm that the IMA and MFCOM Services have started.
Follow the steps in CTX130882 - Local and Remote Discovery Fails for One XenApp Server but the Farm Functions as Normal.	Confirm that the MFCOM service is able to start.	Correct the IMA and MFCOM services error in HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\MFCom\Image Path. The value should be “%systemdrive%\Program Files\Citrix\System32\mfcom.exe,” where “%systemdrive%” is your system drive, such as drive C or M.
Run the commands in CTX127922 - IMA Service Fails to Start and MFCOM Service is Unresponsive in a Starting State again and Confirm that the IMA and MFCOM Services have started.
The behavior occurs because the Registry Size Limit (RSL) has been reached.Registry data is stored in the paged pool, an area of physical memory used for system data that can be written to disk when not in use. The RegistrySizeLimit value establishes the maximum amount of paged pool that can be consumed by registry data from all applications. This value is located in the following registry key:
HKLM\System\CurrentControlSet\Control
By default, the registry size limit is 25 percent of the paged pool.
Note: The default size of the paged pool is 32 MB, so this is 8 MB.
The system ensures that the minimum value of RegistrySizeLimit is 4 MB and the maximum is approximately 80 percent of the PagedPoolSize value. If the value of this entry is greater than 80 percent of the size of the paged pool, the system sets the maximum size of the registry to 80 percent of the size of the paged pool. This prevents the registry from consuming space needed by the processes.
Note: Setting this value does not allocate space in the paged pool, nor does it assure that the space would be available if needed.
The paged pool size is determined by the PagedPoolSize value in the following registry key:
HKLM\System\CurrentControlSet\Control\SessionManager\ MemoryManagement
As per http://support.microsoft.com/kb/300510, the RSL has been removed from Windows XP and later but is applicable for backward compatibility with some applications.
The kernel has detected corruption on a critical data structure.
For information on logging with Provisioning Service 7.x, refer to Knowledge Center article CTX138698 – How to Enable Continuous CDF Tracing in Provisioning Services 7.0
If you do not utilize PVS vDisk versioning, it is possible to apply the policy in your base vDisk image by shutting down all workers utilizing the vDisk and then placing the vDisk in Private mode in order to boot the worker and update the image.
Note: Catalogs deployed with MCS do not require these additional steps as policies are cached on the worker’s identity disk.
PVS catalogs that utilize a persistent write back cache modes such as Cache on device hard drive persisted and Cache on server persisted also do not require these additional steps to implement HTML5 connections.
This issue may occur if the hardware is different on the master target device and on the target device.
CTX137707– Hotfix CPVS61018 (Version 6.1.18) - For Citrix Provisioning Services 6.1 - English
Provisioning Services 6.1 requires License Server version 11.10 or newer.
The vDisk might not be available for the following reasons:
Wrong vDisk configuration when Imaging the Master Image
Boot order is wrong
Wrong NIC order is selected.
Antivirus software not configured correctly
Symantec Network Threat Protection is installed
Additional Network drivers in the stack
Additional Filter Drivers with a higher altitude than PVS drivers
CTX133190 – vDisk Cannot PXE Boot on vSphere 5.0
CTX131239 – XenDesktop/Provisioning Services Hypervisor Citrix Product Support
CTX131239 - XenDesktop/Provisioning Services Hypervisor Citrix Product SupportCitrix Interoperability Validation
This is a failure caused by a potential previous failed install or upgrade. During the upgrade, registry entries are made that negatively affect future installs as they are not removed during rollback of the previous install.
The error occurs only when the SOAPServer.exe or Citrix SOAP Service is running with NT AUTHORITY\Network Service account. The console passes a request to prepare the vDisk for KMS, which requires the SOAP service to update the vDisk file system and registry entries. This update requires the vDisk to be mounted. The Network Service account does not have SE_MANAGE_VOLUME_NAME privilege which causes an “access is denied” error when it tries to mount the vDisk.
CTX123642 – How to Recover Windows Kernel Level Dump Files from Provisioned Target
How to use the DedicatedDumpFile registry value to overcome space limitations on the system drive when capturing a system memory dump
Imaging Wizard and P2PVS require the source virtual machine to have both Volume Shadow Copy and Microsoft Software Shadow Copy Provider services enabled to perform an imaging operation. If either or both of Volume Shadow Copy and Microsoft Software Shadow Copy Provider services are set to Disabled, the imaging operation fails.
From these steps, it can be inferred how the vDisk that exists on your Provisioning Services store is an exact copy of the master VM created for Provisioning. This allows to move this vDisk back to the hypervisor and use it as it never left the original machine. It also demonstrates a secondary method to get the VM's disk to the Provisioning Services server for provisioning.
If using other hypervisors, which do not use VHD formats, there are free tools available on the web that convert VHD files to other formats such as VMDK.
Note: Hyper-V also uses Microsoft’s native VHD format.
From 1 PVS server .VHD files become outdated and on the second (other) PVS server, the properties (.PVP) files become outdated
The MAPI uses CSV format. The data is exported from the Database in a CSV format.If the description of the vDisk contains 'next line', the export fails.
When copying and pasting the description from the notepad, the ‘next lines’ will be updated in the database for the record of the vDisk.
In this case, the issue was caused by a hidden network adapter.
This error may occur if the Boot Device Manager boots the virtual machine to the local hard drive.
There is a limitation of Hyper-V synthetic network cards.
In addition, the behavior has been caused by Hyper-V virtual hard disk associated with another Hyper-V virtual machine.
Microsoft is aware of the behavior and it is explained in the article:http://blogs.technet.com/b/jhoward/archive/2008/07/22/hyper-v-why-is-networking-reset-in-my-vm-when-i-copy-a-vhd.aspx
“The reason for this is that the “GUID” of the original network adapter was stored in the “lost” configuration. So when a new configuration is created, when a synthetic NIC is added, a new GUID is generated. When the virtual machine starts, plug-and-play see this new NIC, as a completely different NIC, just like as you would in a physical machine.”
With the release of Windows Vista, Microsoft introduced a security feature called Address Space Layout Randomization (ASLR). This feature randomized the memory address space of known Microsoft modules. When using the Write Cache on Target Hard Disk in PVS, applications and services have been found to randomly fail. There have been some known incompatibilities with the Microsoft Windows ASLR when using the Write Cache on Target Hard Disk option. This behavior can occur when data is written to the write cache and recalled into memory because of the method used by PVS to write the data to the write cache.
When using cache on device hard disk, PVS modifies the Memory Descriptor List (MDL) and then PVS writes the data to the local write cache. After the data is read by the Operating System, the ASLR triggers an exception due to the updated MDL.
To determine if the random crashes were experienced by the ASLR, perform the following test:
Change the write cache location to RAM cache, server side cache or persistent cache and attempt to reproduce the steps that lead to the crash.
OR
Change the vDisk mode to Private or boot to a new vDisk version that is in maintenance mode.
Note: A full memory dump can help determine the cause of the failed process.
The behavior within the article can be a result of a misconfiguration on the Boot ISO with the specifications of the Login Server.
The targets must initially acquire IP at the beginning of the boot process.  This is an issue with DHCP.
CTX119469 - Understanding Write-Cache in Provisioning Services ServerUsing Group Policy Objects to hide specified drives
By default, installing Microsoft SQL Express does not start the SQL Server Browser service (referred to by error: 26), and does not enable the Named Pipes protocol (referred to by error: 28). If both causes are present, error: 26 appears.
This behavior occurs when the server has been hardened for security purposes. Validate the registry key:
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\FipsAlgorithmPolicy]
"Enabled"= Dword:0000000x
If the enabled key is configured with the Dword 00000001, SQL Server and Reporting Services fails to connect to the databases and might display errors.
http://technet.microsoft.com/en-us/library/cc753703%28WS.10%29.aspx
Citrix Documentation - XenServer 6.2.0 Configuration Limits
Citrix Documentation - XenServer 6.1.0 Configuration Limits
Additional information about the Intel 82599 10 Gigabit Ethernet Controller can be found at - Intel® 82599 10 Gigabit Ethernet Controller
PCI-SIG SR-IOV Primer: An Introduction to SR-IOV TechnologyHow to Assign SR-IOV Enabled NICs with XenServer 6.xHow to Enable Single Root I/O Virtualization SR-IOV on XenServer
CTX117374 - Best Practices for Configuring Provisioning Server on a NetworkCTX123638 - Error: “Connection to Provisioning Services. Please wait…” Appears when Attempting to Boot using BDCTX119000 - vDisk Inactive State with Broadcom Network CardsCTX132133 - Provisioning Services 6.0 Targets Stop Responding at a Black Screen
NetQueue enabled on the ESX host has shown a significant increase in boot times of Provisioned Target Devices. While the operating system is streaming to the Target Device during single IO burst phase, (approx. 300-400MB per Device) a network trace will show at least 5-second gap between the PVS Server reply to a single Read disk IO Request and the Target Devices next request. These gaps, over time, account for the excess time to boot.
Some UDP ports on the PVS Server are being blocked for incoming traffic.
MAPI tries to resolve the hostname with IP addresses.
When the list of IP addresses are returned, MAPI uses the first available IP address.
DEBUG Mapi.MapiIPC - Resolving hostname 'PVS611'...
DEBUG Mapi.MapiIPC - Resolved 2 addresses in 0.000 seconds
INFO  Mapi.MapiIPC - PVS611 (192.168.2.112) <--> localhost (192.168.2.112)
INFO  Mapi.MapiIPC - PVS611 (192.168.11.37) <--> localhost (192.168.11.37)
In the example, the first IP address returned was the management IP address and not the streaming IP address.
The error message occurs when the Provisioning Services (PVS) Server is using Windows Authentication and the SQL Server instance is on different computer. Ensure that the account being used to access SQL Server is a domain account. If the account being used is a local account on the client computer, the error message occurs because the SQL Server and the Domain Controller cannot recognize a local account on a different machine.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
This issue occurs because the vDisk store E:\PVS_store on both the Provisioning Services servers did not have correct permissions.
This is the known issue with PVS Server 6.x (with VMware 4.1 and 5)  having either the VMXNET3 or the E1000 NIC driver.
Copying Databases with Backup and Restore
During template deployment or cloning, a new virtual hardware is created for the destination VM. Network interfaces are assigned a new MAC. For PCI Express devices, including the VMXNET3 virtual Ethernet adapter, a new serial number is generated.
Windows 2008 R2 and Windows 7 track the PCI devices based on the slot the device is connected to. Moving a PCI network interface between slots allocates a new set of settings for the Network Interface Card (NIC) because it is considered as a new device.
If replacing the PCI network interface with the same model, then it retains the previous settings. However, PCI Express devices are tracked by their serial number, which is derived from the MAC. When a VM is created by cloning or by template deployment, PCI Express virtual network interfaces of the new VM have different MAC addresses and serial numbers, and are detected as new devices.
The same behavior can be observed by deploying clones of Windows 2008 R2 or Windows 7 on new physical hardware with PCI Express network interfaces in the same slots.
Provisioning Services does not know how to handle Delay Acknowledgement.
System logs might display the following error messages:
“Error ID 39: Initiator sent a task management command to reset the target. The target name is given in the dump data.”
“Error ID 49: Target failed to respond in time to a Task Management request.”
“Target did not respond in time for a SCSI request. The CDB is given in the dump data.”
“Cannot reset the target or LUN and will attempt session recovery.”
This error indicates that when TCP/IP sent out an ARP for its IP address, it got a response from another machine indicating a duplicate IP address. When Windows is starting a network, this is a fatal error.Another potential cause for this issue is that if the vdisk was captured using BDM configured with a static IP and then was later changed to use DHCP when streaming to multiple targets.
https://docs.vmware.com/en/VMware-vSphere/6.5/com.vmware.vsphere.vm_admin.doc/GUID-E1D541D1-DF96-467A-89B7-E84F83B2563D.html
During the PXE boot process, the target device attempts to download ARDBP32.BIN from the TFTP service that resides on the Provisioning Services (PVS) server.
Target device sends the TFTP request from a XenServer or Hyper-V Virtual Machine and passes through Flex-10. The packets appear to produce an invalid UDP checksum and cause the packets to drop when the target device attempts to reach the PVS server.
When the PVS Server Target Device software starts, the Network Interface Card Driver must be in the first set of drivers loaded so that it can provide access to the PVS Server vDisk over the network.
Unlike most of other Network Interface Card drivers, the Broadcom NetXteme II VBD NIC has two drivers. The PVS Server Target Device can only bind to the first set of drivers that are loaded during startup. The second Broadcom Driver then gets loaded in the second set of drivers, which PVS Server has not hooked into. This then creates the failure condition with the symptoms as described above.
The following hardware can potentially exhibit this behavior:
IBM HS21 Blade Servers with the Broadcom NetXtreme II VBD Driver
HP ProLiant Blade Servers with the following NIC drivers:
HP NC-Series Multifunction Driver
HP NC-Series Broadcom Driver
HP NC7781 Gigabit Server Adapter
Recommendation: Depending on the type of Network Interface Card, use the minimum driver versions as follows:
HP NC-Series Multifunction Driver for Windows Server 2003. Version 3.0.7.0 (21 Mar 07).
HP NC-Series Broadcom Driver for Windows Server 2003. Version 10.24.0.0 (21 Mar 07).
The Streaming Network Interface Card (NIC) Binding order on the Provisioning Services (PVS) Servers might not be in the correct order.	Another possibility is the Streaming NIC is not selected and not placed at the top position in the Configuration Wizard.
Following are some scenarios that cause the cache to redirect to the PVS server:
Improper formatting of the write cache drive.
Drive not meeting the minimum required size.
Windows 2012 target devices appear to take a longer time to initialize the disk and bnistack.
While copying and importing the .vhd file to be used in another Provisioning Service vDisk store, the original file cannot be imported using the Add or Import Existing vDisks option. The .vhd file name must be renamed to be imported successfully.Another probable cause is a corrupted .pvp file, in which case it should be recreated.
The issue occurs when the PVS Server originally used to create the catalog is not reachable (for example, reconfigured on a different port other than 54321) or no longer exists.
The PVS Server that the DDC is attempting to reach can be confirmed through the PowerShell tab in Desktop Studio after the following error message is displayed:
“Set-PvsConneciton : ***Error, failed: Cannot connect to server:”
If you are using Database Mirroring feature, then the SQL native client is required on the server. If this client does not already exist, the option to install SQLncx64 or SQLncx32 is presented when the product software is installed.
Complete the following to verify if you are missing SQL native client:
Open Administrative Tools > ODBC Data Source Administrator.
Click the Drivers tab. SQL Server Native Client should be listed, as displayed in the following screen shot.
This error can appear when the SCVMM Console is not installed on the PVS Server and also if, while selecting the template in SCVMM, “Customization Not Required” option is not selected. This results in the template not being visible to the Provisioning Services server.
This issue is because of a VAMT 2.0 bug with regional settings.
Installing XenServer Tools or VMware Tools on an existing installation of the Provisioning Services Server Client software replaces the modified Network Interface Card (NIC) driver and removes the bnnf.sys file from its configuration. This replacement destroys the Citrix Network Stack and prevents the Virtual Machine from starting successfully.
This issue occurs when the individual virtual machine templates are spread across different storage repositories and the host connection on the Desktop Delivery Controller is not linked to all of them.
PVS Target Device needs two DHCP IP requests when booting:
PXE / UNDI requests an IP address from the DHCP server.
Network stack requests an IP address during the loading of the OS.
If DHCP server recognizes the second request that matches the previous PXE / UNDI request, then DHCP assigns the same IP address on the NIC.  Usually, Windows DHCP Server will give out the same IP address. However, some third party DHCP servers are using the second layer of device IP checking such as DHCP Client Identifier to confirm the device is the same.
In PVS 6.1 releases, Windows Log subsystem of the target device generates an error in the SOAP service because the user is not having proper permissions to generate the log messages. A security violation is returned from a Windows call and crashing the Simple Object Access Protocol (SOAP) service.
This issue occurs as a result of a vDisk footer corruption.
In the Provisioning Server Console log, the error is generated as:
EnterpriseAccess.HandlerBase - PvsStatusExceptionHandler
EnterpriseAccess.HandlerBase -   return code: 184
EnterpriseAccess.HandlerBase -   exception type: PvsStatusException
EnterpriseAccess.HandlerBase -   message: Not enough storage is available to complete this operation. Error number 0xE000000E.
EnterpriseAccess.HandlerBase -   source:
EnterpriseAccess.HandlerBase -   data:
EnterpriseAccess.HandlerBase -     value=0xE000000E
For further validation, the MgmtDaemon log displays the following event:
MergeDisk: VHD merge failure 0xE000000E: Not enough storage is available to complete this operation.
The database server hosting the Provisioning Services database goes offline.
Or
When the database server is not able to service the Provisioning Services requests within the time frame without completely going offline.
CTX128276  - Configuring KMS Licensing for Windows and Office 2010 and 2013
The Citrix XML Service is starting ahead of the Network Interface Card.
For I/O to vDisk, Provisioning Services network driver is loaded at the time of Operating System (OS) boot, and sends and receives packets. Most of NDIS filter drivers are loaded at Kernel initialization after OS start process. This interferes with the connection to Provisioning Services server and causes the failure of vDisk attachments.
Two parameters that control the failover time of the provisioning target are Packet Timeout and Retry Limit.  The default values of these parameters would give a failover time of about 50 seconds.  Provisioning Services Server starts with default values and has the logic to throttle the values lower if the network is found to support faster traffic; thus to support a faster HA failover.  However in some cases, the throttling might not occur because of unfavorable network condition or other unknown conditions.  In this case, you might want to change the default values to a lower value to reduce the failover time.
This error might occur because the PVS TFTP service can only be bound to one NIC.
The error message appears when the Only for me option is selected in the Customer Information dialog.
To resolve this issue, complete the following steps on the Image that is hosted on the VMWare Hypervisor:
Uninstall the Provisioning Services target device software from the virtual machine and restart.
Click Start > Run.
Type cmd and click OK to open a command prompt.
Run the following command:  set devmgr_show_nonpresent_devices=1
Run the following command from the same command prompt window to open the Device Manager:  devmgmt.msc
Click View > Show hidden devices.
Expand the Network adapter node. Locate the inactive icons, which indicate unused device drivers.
Right-click the inactive icon and click Uninstall for each icon to remove the unused device drivers.
Restart the virtual machine if prompted.
Re-install the Provisioning Server target device software and restart. You should now be able to connect to the virtual disk.
Note: Do not remove ghost Network Interface Cards (NICs) on XenServer target device VMs.
While the exact root cause has not yet been identified, the issue only occurs on the BL 460G7 servers, which use the HP branded Emulex NIC cards. NIC cards affected include but are not limited to the HP NC553i Dual Port 10gb Converged Network Adapter and HP NC522m Dual Port 10gb Multifunction Adapter.
Note: Servers using the Broadcom cards do not experience the issue.
This error can be caused by several factors and this article focuses on the most common factors:
Change in IP address
Introduction of a new Switch, Router or Firewall
PVS Database is not contactable
PVS Database is in Offline Mode
PVS SOAP Server service failed to start
http://support.citrix.com/article/CTX136378Cause 1: Citrix PVS TFTP Service was stopped, as displayed in the following screen shot:
Cause 2: An incorrectly configured DHCP server or router does not have the DHCP directive Next-Server configured. This assumes that the Citrix Provisioning Services server is not providing DHCP.
The following are some of the FAQs on DBOffline mode in Provisioning Services Farm:
Q: How long can targets stay booted in DBOffline mode?
A: It is a best practice to restore the database connection as soon as possible. The DBOffline mode is meant to deal with interruptions and not to be run without a database. You should be able to reboot the target when the PVS server is in DBOffline mode. The only feature that will not work is the PVS console and any interfaces, this is by design, you cannot modify the database if you cannot communicate with it.
Q: Is there a connection between write cache and DBOffline mode?
A: The write cache fill up has nothing to do with DBOffline mode. In fact depending on the workload, applications and system setup will determine the uptime of the target and if you allow the write cache to fill up, this would occur with or without DBOffline. The write cache never fills up, only the local hard drive that contains the write cache file fills up and only if it is not sized properly for the workload. This is why it is very hard to determine what the correct size of the local cache drive should be because every workload and usage of the applications in the workload is different.
Q: Is DBOffline state a viable method for dealing with WAN congestion, or is it strictly just to get around the database going down?
A: The DBOffline state is not a viable option for handling WAN congestion. The PVS relies on a network for its core functionality. The network should have the appropriate capacity to handle the traffic on it. There is a heavy dependency on the database, and repeated disconnections from the database will lead to errant behaviors (like hanging stream process). The DBOffline is a state to be avoided, and is really there as a last ditch, emergency effort.
If a time change on the Provisioning Services server occurs and it results in a five minute or more difference between the server and Active Directory, Kerberos authentication will be broken. This will prevent Provisioning Services from authenticating to the vDisk store and database.
Citrix is aware of this issue. A current manual workaround is in place.
System cryptography: Use FIPS compliant algorithms for encryption, hashing, and signing" security setting...
CTX138823 – Provisioning Services Database Unable to Configure
This is a known issue with streaming Microsoft Vista and Windows 2008 Server. During the password change, the LSASS service fails on the Target Device and a manual password reset is required through the Provisioning Services Server console or the Microsoft Command Line Interface.
This issue occurs because the operating system cannot correctly call the crash dump file creation feature in some cases after the update to Service Pack 1.
In the properties of the database, the EXECUTE permission is missing for the windows account used to start the stream process.
The streaming service starts ups successfully, but the stream process log in C:\ProgramData\Citrix\Provisioning Services\Log shows the following message:
Note: The log must be in debug mode for the following messages to appear.
2012-08-17 13:06:22,956   [0x00000988]            DEBUG          About to try initial connect with db connection string <INTDCPVS6\SQLEXPRESS@ProvisioningServices>2012-08-17 13:06:22,972   [0x00000988]            DEBUG          An initial connection to the database has been established2012-08-17 13:06:22,972   [0x00000988]            DEBUG          computerName_ = <INTDCPVS6>2012-08-17 13:06:22,987   [0x00000988]            DEBUG          Found database version 82012-08-17 13:06:22,987   [0x00000988]            DEBUG          Using server settings from override rather than from the database2012-08-17 13:06:22,987   [0x00000988]            INFO      initialSizeOfQueryPool_        = 12012-08-17 13:06:22,987   [0x00000988]            INFO      maxSizeOfQueryPool_            = 10002012-08-17 13:06:22,987   [0x00000988]            INFO      initialSizeOfTransactionPool_  = 12012-08-17 13:06:22,987   [0x00000988]            INFO      maxSizeOfTransactionPool_      = 10002012-08-17 13:06:22,987   [0x00000988]            INFO      refreshInterval_               = 02012-08-17 13:06:22,987   [0x00000988]            INFO      unusedDbConnectionTimeout_     = 3002012-08-17 13:06:22,987   [0x00000988]            INFO      busyDbConnectionRetryCount_    = 22012-08-17 13:06:22,987   [0x00000988]            INFO      busyDbConnectionRetryInterval_ = 252012-08-17 13:06:22,987   [0x00000988]            DEBUG          RefreshInterval set to zero; StreamDb monitor thread not started.  Restart to change settings.2012-08-17 13:06:22,987   [0x00000988]            DEBUG          Just used a higher connection number than previously in this session(maxIndexNumberAssigned_): 02012-08-17 13:06:22,987   [0x00000988]            TRACE          handing out connection = 02012-08-17 13:06:22,987   [0x00000988]            INFO  Database initialization complete, connection pools are established2012-08-17 13:06:22,987   [0x00000988]            TRACE          Setting dbIsAvailable_ flag to true2012-08-17 13:06:22,987   [0x00000988]            DEBUG          CSSProtocolModule::CreateNoEx Helper modules initialized and database connections opened2012-08-17 13:06:22,987   [0x00000988]            DEBUG          CSSProtocolModule::CreateNoEx DB access created2012-08-17 13:06:22,987   [0x00000988]            DEBUG          In Ardence::CStreamDbImpl::DoServerGetByName, name = IntDCPVS62012-08-17 13:06:22,987   [0x00000988]            TRACE          handing out connection = 02012-08-17 13:06:22,987   [0x00000988]            DEBUG          In CServerDbAccess::DoGetByName for serverName=<IntDCPVS6>2012-08-17 13:06:22,987   [0x00000988]            DEBUG          Translating exception, ex.NativeCode = 229, ex.ErrText = <The EXECUTE permission was denied on the object 'uspGetServerByServerName', database 'ProvisioningServices', schema 'dbo'.>2012-08-17 13:06:22,987   [0x00000988]            DEBUG          Database command failed with unexpected SAException:  number = 229, msg = <The EXECUTE permission was denied on the object 'uspGetServerByServerName', database 'ProvisioningServices', schema 'dbo'.>
The original vDisk was a copy from another and the affected target was configured to boot from the copy vDisk without the proper permissions. The Read/Write nature of a vDisk in standard mode put in evidence the problem with permissions.
The PVS Server that is running the PVS Console does not have access to the vdisk store or the Service account used for the PVS Streaming Service does not have access to the vdisk or vdisk location.
Install the full version of the Microsoft .NET Framework 4.0.
Note: When installed, an entry titled Microsoft .NET Framework 4 Extended appears in Programs and Features under Control Panel.
The account configured to be used by the PVS Stream service does not have the permission to Log on as a Service.
Because of the architectural changes in PVS 6.0 and later, PVS Servers must communicate with each other to import a vDisk. As the servers are located on different VLAN without routable path, the PVS Server cannot communicate with another PVS Server.
Citrix Documentation - Requirements and considerations for manufacturer's NIC teaming
The integration pulls files (e.g. Word, PDF) uploaded into Drive, not documents created using Google Docs.
The steps above pertain to customers utilizing a legacy RightSignature account (RS3).
This feature is not available on Personal, Basic, and Accounting RightSignature plans. See Plans & Billing for more information.
The Collect Payments feature enables signers to provide credit card payment information securely while they fill out and sign RightSignature documents. Signer’s credit card information is stored and processed securely by the online payment processing service Stripe, which is certified as PCI Service Provider Level 1.
Access Stripe's Pricing Page for more information on what they charge.
The app requires Android 5.0 or later: https://play.google.com/store/apps/details?id=com.citrix.rightsignature
What does KBA stand for and what is it?
"KBA" is an acronym for Knowledge-Based Authentication. RightSignature's KBA feature gives document senders the ability to enable knowledge-based authentication on a RightSignature document, effectively requiring the signers to verify their identity via a set of personal questions about the signer's identity before access to the document itself is granted.
The KBA feature was developed to support the identity verification requirements of the IRS guidelines on collecting electronic signatures on Forms 8878 and 8879.
Where can I find more information on the IRS guidelines for collecting electronic signatures on Form 8878 and 8879?
https://www.irs.gov/uac/electronic-signature-guidance-for-forms-8878-and-8879
Are the add-on integrations available to users on every RightSignature subscription level?Yes. The RightSignature add-on integrations can be used with every RightSignature account level, including free trial accounts. To enable an add-on integration, click Account followed by Integrations. Select the application of your choice and follow the specific instructions to enable the integration.If I enable an add-on integration as the Owner of the account, will all of my users be able to take advantage of the integration?No. Each add-on integration connects one RightSignature user account to one user account with the external application. Each user will need to individually enable the integration in the user’s account settings.
If you do not have a ShareFile account, please contact RightSignature Support to assist you with this change.
Note that if the 'Require passcode for documents' is turned on in the Account settings then all documents sent out will need to have a PIN entered in order to be accessed. There won't be a way to turn off the Passcode for individual documents.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
Custom CSR's created through Windows MMC don't include the Private Key
Upgrade from Secure Gateway 3.3.2 to version 3.3.4
Performance issue with Secure Gateway 3.3.0https://support.citrix.com/article/CTX202520 - Secure Gateway update version 3.3.4 https://support.citrix.com/article/CTX128991 - Secure Gateway setup guide
Checked the Storefront configuration and did not find callback url defined. We configured it and now its working fine.
Reported error is cosmetic and can be ignored
If you have built a website using one of the above vulnerable ASP.NET Framework versions, and relied solely on the included ValidateRequest Filter for Input sanitization, then you may be vulnerable. If, however, you securely coded your website, and employed additional custom filtering techniques, then you are likely not vulnerable, since sole reliance on the ValidateRequest Filter for input sanitization is the main risk.
Secure Gateway and Web Interface are only supported with SHA-1 certificate.
The Secure Gateway supports two main categories of Cipher suite: COM (commercial) and GOV (government). The ALL option includes both the Commercial and Government suites.
The COM Cipher Suites are:
SSL_RSA_WITH_RC4_128_MD5 or {0x00,0x04}SSL_RSA_WITH_RC4_128_SHA or {0x00,0x05}
The GOV Cipher Suite is:SSL_RSA_WITH_3DES_EDE_CBC_SHA or {0x00,0x0A}
Some organizations, including U.S. government organizations, require the use of government-approved cryptography to protect sensitive but unclassified data.
http://docs.citrix.com/content/dam/docs/en-us/archive/web-interface/en.web-interface-5-4.pdf
The site was configured as gateway direct however the installing the certificate on IIS directs the HTTPS traffic directly to the Web interface instead of the Secure Gateway.
A Configuration problem
Mismatched ports.
In Secure Access > Specify Gateway Settings, the port is misconfigured.
CTX101990 - Error: "The server certificate received is not trusted (SSL Error 61)" for Receiver UsersCTX203362 - Error: "The server certificate received is not trusted (SSL Error 61)" on Receiver for LinuxCTX200836 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." When Launching Apps with Citrix Online Plug-in
CTX200238 - Citrix Security Advisory for CVE-2014-3566 - SSLv3 Protocol Flaw
CTX114658 - How to Configure a Single Secure Gateway/ Web Interface Server with Port Redirection
Please refer following article to create and install a certificate on IIS:https://www.digicert.com/ssl-certificate-installation-microsoft-iis-7.htm
This issue is caused by Secure Gateway when used in combination with XenApp's Session Reliability (XTE) service.
Cause 1
The Server Certificates contained in the Local Computers Personal Store are queried.
The Private Key is not available.
See Page 17 and 95 of CTX112429 – Secure Gateway for Windows Administrator's Guide.Page 17 - Improved certificate selection. The Secure Gateway Configuration wizard prevents the selection of a certificate that does not have a private key.Page 95 - When you view the certificate, ensure that it contains a key icon and the caption “You have private key that corresponds to this certificate” at the bottom of the General tab. The lack of an associated private key can result in the CSG0188 error.
Cause 2
The permissions for MachineKeys folders (All Users Profile\Application Data\Microsoft\Crypto\RSA) are misconfigured.
Citrix Documentation - XenApp and Secure GatewayCTX101810 - Communication Ports Used by Citrix Technologies
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
This is an unsupported configuration. Secure Gateway does not support client certificate checking during the SSL handshake. It supports TCP tunneling so that the user's HTTPS stream reaches the web server unaltered.
This condition is true for the following:
Web Interface sites present on IIS servers that are manually configured to require client certificates.
Web Interface sites that are configured to use Smart Card authentication in any capacity.
Secure Gateway Server was installed on the same XenApp server, which caused a change to the “ServerRootPath” registry string value on the server.
Microsoft TechNet - Configure Trusted Roots and Disallowed CertificatesMicrosoft TechNet - Error Message: This Security Certificate Was Issued by a Company that You Have Not Chosen to TrustInstalling the Root & Intermediate CertificatesCTX128539 - How to Link an Intermediate Certificate to the Server Certificate in NetScaler/NetScaler GatewayCTX200836 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." When Launching Apps with Citrix Online Plug-inCTX203362 - Error: "The server certificate received is not trusted (SSL Error 61)" on Receiver for LinuxCTX108800 - Error: "SSL Error 61: You have not chosen to trust 'Certificate Authority'..." on Receiver for Mac
Citrix Discussions - SSL Error 61
Citrix Discussions - Citrix ICA Client: SSL Error 61: You have not chosen to trust "VeriSign", the issuer to the server's security certificateCitrix Discussions - Unable to launch applications SSL Error 61
Citrix Documentation - XenApp and Secure Gateway
This error might occur if the SSL Certificate in the certification path is not valid.
All certificates in the certification path must be valid and from a trusted source when connecting to Citrix XenApp Server through a Citrix Secure Gateway by using an SSL connection.
For more information about Enabling SSL/TLS Protocols refer to Citrix Documentation - Network and Authentication Protocols. Note that SSL Relay can as well be used to secure XML broker connections if this information is required to be encrypted. Refer to Citrix Documentation - Sample Deployment with SSL Relay and the Web Interface.
CTX101810 - Communication Ports Used by Citrix Technologies
Citrix Documentation - Configuring the Secure Gateway or Secure Gateway Proxy
Fix site display problems with Compatibility View
Citrix Receiver
CTX101997 - Citrix Secure Gateway Secure Ticket Authority Frequently Asked Questions
If the STA server is also used as a Web server for different Web sites, then you must indicate the new port number in each user HTTP addresses because Internet Explorer or the Web browser assumes that the HTTP port is 80.
To avoid this issue, complete the following procedure to create a new Web site for the STA component:
Note: For this section, it is assumed that the STA server is published on port 80.
Open the IIS snap-in.
Right-click the server name and choose New Web Site.
Provide a name to the Web site, for example, STA and click Next.
Change the port for the Web site as 6556 and click Next.
Browse to locate the c:\inetpub\wwwroot folder and click Next.
The Permission is selected by default. Click Next.
Click Finish.
Right-click the STA Web site you created and choose new virtual directory.
Type scripts as the alias name and click Next.
Browse to locate the c:\inetpub\scripts folder and click Next.
Clear all the check boxes to remove the permissions. Click Next.
Click Finish.
Right-click the Scripts folder and select Properties.
From the Virtual Directory tab, select Scripts and executables from the list of options for Execute permissions.
Click Apply and click OK.
Restart IIS.
CTX117576 – How to Allow Secure, User-friendly Application Delivery with Web InterfaceCTX112429 – Secure Gateway for Windows Administrator's GuideRefer to the appropriate Web Interface Administrator's Guide for instructions on how to set the Access Platform site as the default page in IIS.Configuring Server Certificates for SSL (IIS 6.0)
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
Browsers Compatible with ShareFileBrowser Requirements for reCAPTCHA
This issue is caused by incorrectly configured Firewall rules.
CTX234634 -  How to Update\Delete a Recurring ShareFile ReportCTX234635 -  How to Share a Recurring ShareFile ReportCTX234636 -  Different Type of ShareFile ReportsCTX234637 -  FAQ: ShareFile Reports
CTX234632 -  How to Create a Recurring ShareFile ReportCTX234635 -  How to Share a Recurring ShareFile ReportCTX234636 -  Different Type of ShareFile ReportsCTX234637 -  FAQ: ShareFile Reports
CTX234634 -  How to Update\Delete a Recurring ShareFile ReportCTX234632 -  How to Create a Recurring ShareFile ReportCTX234636 -  Different Type of ShareFile ReportsCTX234637 -  FAQ: ShareFile Reports
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
Known Issues:
Opening files that reside inside a long file path will depend on that application’s compatibility for long file paths. Some applications cannot open a file that resides in a long file path.Microsoft Windows Explorer may have limitations preventing users from renaming a file or folder.The ShareFile platform restricts a single filename to up to 181 characters.
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for Windows
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX208291 - How to Share a File Securely Using ShareFile "Email with ShareFile" Feature
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
CTX207796 -  How to Install and Use the ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
Under shared path \\Ip address\sharefile\Queue\listofQueuesThere was no value set: {"value":[]}
This issue is caused by incomplete user permissions on ShareFile control plane
This is a known issue.
Async jobs need to cancel at the backend if there us any.
Microsoft Office Online Server can't reach StorageZones Controller server endpoint
The login url has incorrect app name and hence it failed.
User management Tool uses Oauth Token based Authentication. The issue occurs because the User management Tool's administrator leaves the tool open and it keeps on using same expired OAuth token.The UMT log file includes following error:mm/dd/yyyy hh:mm:ss a.m. / p.m.:  API Call:  subdomainname.sharefile.com/rest/config.aspx  [ Timeout = 15,000 ms]mm/dd/yyyy hh:mm:ss a.m. / p.m ERROR:  Error Refreshing UMT Configmm/dd/yyyy hh:mm:ss a.m. / p.m      MEMBER: SaveConfigmm/dd/yyyy hh:mm:ss a.m. / p.m     ASSEMBLY: umtmm/dd/yyyy hh:mm:ss a.m. / p.m  SOURCE FILE: App.xaml.csmm/dd/yyyy hh:mm:ss a.m. / p.m       LINE #: 520mm/dd/yyyy hh:mm:ss a.m. / p.m.       DETAIL:System.Exception: Error Refreshing UMT Config ---> System.Exception: SF API Responded with Error:  System.Exception:  [AUTH] Invalid authid. Please log in again.   at ShareFile.Client.Windows.Umt.Core.Services.ShareFileDataProvider.SaveUmtConfig(String configjson)   --- End of inner exception stack trace ---   at ShareFile.Client.Windows.Umt.Core.Services.ShareFileDataProvider.SaveUmtConfig(String configjson)   at ShareFile.Sfadi.App.SaveConfig()mm/dd/yyyy hh:mm:ss a.m. / p.m.:  Application_ExitThe way authenticating with oAuth tokens works is that ShareFile first prompts you for your email address and password using a secure web form that is similar to the one used when you login to the web application. If using AD integration, we redirect you to configured IdP for the initial authentication. Once you have successfully authenticated, the secure web form provides the application with an oAuth token that is securely stored in the application. All subsequent access is done using this token you will not be asked for your credentials again until the token expires. The expiration for this token can be set by ShareFile administrators in Advanced Preferences. Documented at this article:https://support.citrix.com/article/CTX208317
The behavior is expected as the phone is connected to internet and it will show the file content from file version stored at ShareFile server and not the local copy or offline copy on the phone
Permission issue on Secure Form folder
SSO on Traffic Policy of NetScaler Gateway needs to be "OFF"to verify if the Bearer Header is present on Wireshark Trace.
Edit your signature in Microsoft OutlookEdit your signature in Gmail
You can find this : https://citrix.sharefile.com/app?/#/share/view/sd3ea408a4a34090b
The ShareFile Android Application will deny the connection if the intermediate certification is missing.
The steps above pertain to customers utilizing a legacy RightSignature account (RS3).
You may update your ShareFile plan in the web app, but not additional service add-ons (specifically: ShareConnect (non-Team), RightSignature, and Podio.) For info on adjusting add-ons, refer to:
CTX234584 - How to Modify ShareFile Add-On Services (ShareConnect, RightSignature, Podio)CTX234585 - How to Modify RightSignature or Podio Plan
The roles assigned to the sharefile SAML SP were missing for the particular user.
Allowed URLs not configured correctly.
Design change in XenMobile 10.
The error is thrown by ShareFile application when AppConroller tried to provision user. The creation of user directly in ShareFile should not have any impact as this is would behave as an existing user in ShareFile that is synced into AppC when ShareFile is configured.
Add ShareFile Users in Bulk or Import from Outlook or Google
How to Share a File Securely Using ShareFile "Get a Link" Feature
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
CTX234469 - How to Upload Files Using ShareFile Desktop App for WindowsCTX234470 - How to Download Files Using ShareFile Desktop App for WindowsCTX234471 - Download and Upload Behavior with ShareFile Desktop During Network InterruptionCTX234472 - How to Preview Files Using ShareFile Desktop App for WindowsCTX234473 - How to View Progress of Uploads and Downloads Using ShareFile Desktop App for WindowsCTX234474 - How to Request Files Using ShareFile Desktop App for WindowsCTX234478 - How to Manage Files Using ShareFile Desktop App for WindowsCTX234476 - How to Add Files or Folders to Favourites Using ShareFile Desktop App for WindowsCTX234479 - How to Move Files and Folders Using ShareFile Desktop App for WindowsCTX234483 - How to Create Folders Using ShareFile Desktop App for WindowsCTX234482 - How to Manage Folders Using ShareFile Desktop App for WindowsCTX234513 - How to Change Folder Permissions/Add User to Folder on ShareFile Desktop App for WindowsCTX234514 - How to Configure Files and Folders to be Available Offline on ShareFile Desktop App for WindowsCTX234515 - How to View Previous Versions of Files on ShareFile Desktop App for WindowsCTX234566 - How to Open and Edit Microsoft Office Files on ShareFile Desktop App for WindowsCTX234567 - How to Open and Edit PDF Files on ShareFile Desktop App for WindowsCTX234569 - How to Check In/Check Out Files on ShareFile Desktop App for WindowsCTX234571 - How to Access SharePoint and Network Shares on ShareFile Desktop App for WindowsCTX234572 - How to Access Personal Cloud Connectors on ShareFile Desktop App for WindowsCTX234573 - How to Use Start Menu Shortcuts on ShareFile Desktop App for WindowsCTX234575 - How to Upload an Outlook Attachment on ShareFile Desktop App for WindowsCTX234576 - How to Search Files on ShareFile Desktop App for WindowsCTX234579 - How to Access the Settings Menu on ShareFile Desktop App for WindowsCTX234580 - Sophos Antivirus Prevents ShareFile "Open and Edit" Functionality from Working Properly
1) NTP server and/or time synchronization is slightly off.2) AppFirewall feature of NetScaler is blocking automatic redirection after authentication
User has automatically provisioned to ShareFile from AppC and removed manually from Sharefile. AppC will not automatically provision this user account again.
If you modify the App ID or Bundle ID for ShareFile for iOS, you must register your unique ID with ShareFile to ensure compatibility with the ShareFile PDF annotation feature. To register your modified ID with ShareFile, go to ShareFile for iOS bundle identifer registration.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
CTX129182 - How to Configure Single Sign-On for Outlook Web Access 2007 on NetScalerCTX135875 - Troubleshooting Steps for AAA Issues on Exchange OWA Through NetScaler
CTX138988 - How to Configure SAML SSO Authentication between NetScaler Gateway and Load Balancing Virtual Servers
The login url has incorrect app name and hence it failed.
SSO on Traffic Policy of NetScaler Gateway needs to be "OFF"to verify if the Bearer Header is present on Wireshark Trace.
You can find this : https://citrix.sharefile.com/app?/#/share/view/sd3ea408a4a34090b
https://technet.microsoft.com/en-us/sysinternals/pstools.aspxhttps://technet.microsoft.com/en-us/sysinternals/dd996900.aspx
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
CTX221693 - What is the difference between Negotiate and NTLM authentication?CTX221696 - How does the NetScaler use Kerberos for Single Sign On?CTX222453 - How to Configure the NetScaler for Kerberos ImpersonationCTX222386 - How does Negotiate authentication work on an AAA-TM vServer for Internal Clients?CTX222568 - How does Negotiate authentication work on an AAA-TM vServer for External Clients?CTX222443 - How does Client Certificate Authentication work with KCD Single Sign On?CTX222444 - How does LDAP Authentication work with Kerberos Impersonation SSO?
CTX221693 - What is the difference between Negotiate and NTLM authentication?CTX221696 - How does the NetScaler use Kerberos for Single Sign On?CTX222454 - How to Configure the NetScaler for Kerberos Constrained DelegationCTX222386 - How does Negotiate authentication work on an AAA-TM vServer for Internal Clients?CTX222568 - How does Negotiate authentication work on an AAA-TM vServer for External Clients?CTX222443 - How does Client Certificate Authentication work with KCD Single Sign On?CTX222444 - How does LDAP Authentication work with Kerberos Impersonation SSO?
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
1) NTP server and/or time synchronization is slightly off.2) AppFirewall feature of NetScaler is blocking automatic redirection after authentication
The problem occurs from several sources, such as, trust domains, sharing SSON service, and NTFS central store. One of the domain administrators do not have the appropriate permission to the central store.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
Central Store has been upgraded during the discovery process while running a newer version of the management console. This can happen if you have a working Password Manager (SSO) 4.8 or earlier version and you run discovery on a XenApp 6.5 machine pointing to the central store.
The following warning is displayed:
“Would you like to upgrade your central store to work with this console?”
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
When you add the users to Active Directory, you must enter the First name, Last name, and E-mail in the user properties. If you do not configure the users in Active Directory with this information, then AppController cannot synchronize these users.
This exception is thrown when the WebAuth Service and the NTLM service attempt to read the proxy information in the httpd.conf file and finds there are no proxy accounts set after running the serviceconfigurationtool.exe.
After these settings are set, the settings must be written into the httpd.conf file. The proxy accounts must be set in this case as shown in the following screen shot:
The Domain Administrator rights is unavailable for users in the helpdesk AD.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
Naming convention disallows the use of underscore in the DNS names unless they are for SRV records
DC was not giving relevant attributes to the SF and was giving following response to the ldap search made by StoreFront Server.We collected network trace while restarting the service from StoreFront Server.
In the Network trace we saw below error:ErrorMessage: 00000070: LdapErr: DSID-0C041666, comment: A jet error was encountered, data fffffbbc, v1db1.Issue was due to invalid response from DC.
Roadblock is that we cannot change the Default value of NetScaler Gateway under Store's Remote Access Settings to https://cvwcntrap.cigna.com because that affects the external users as they don’t get the Passcode option and hence we need to figure out a way for both.
This issue can occur if Net.Tcp Port Sharing Service is not running on the StoreFront server(s). To learn more about Net.TCP Port Sharing, please see the following Microsoft article:Net.TCP Port Sharing
The PowerShell code is now signed with a different certificate. There are two new root certificates involved, one for the signature, and one for the countersignature (for timestamping).
In some environments, these root certificates are not installed automatically. This prevents the StoreFront management console from opening because the PowerShell code signature cannot be verified.
NetScaler Gateway & StoreFront Configuration: How Do I?
CTX138988 - How to Configure SAML SSO Authentication between NetScaler Gateway and Load Balancing Virtual Servers
This eventually leads to the following error:•    ShowMessageBox TopMost=False title= message=Your apps are not available at this time.  Please try again in a few minutes or contact your help desk with this information: Cannot contact Delivery group.",""
References for Configuring FAS:
https://docs.citrix.com/en-us/xenapp-and-xendesktop/7-12/secure/federated-authentication-service.html
Customizations were holding back the upgrade. Also customer didn't stop services for IIS and Citrix prior. Server Certificate didn't match thumbprint on the other StoreFront Server.
This issue can occur if the Receiver for Web URL is not added to the Trusted Sites list of the web browser on user's machine.
Microsoft explains that this is a known issue with .NET versions 4.6.x
This issue can occur if Citrix Default Domain Services is not started on the StoreFront server.
Windows Process Activation Service and World Wide Web Publishing Service are in a Stop and Disabled state.
Store names created earlier and deleted are still having cached information in subscription store and configuration files : C:\Program Files\Citrix\Receiver StoreFront\Services\SubscriptionsStoreService\Citrix.DeliveryServices.SubscriptionsStore.ServiceHost.exe.config
The Default appliance was not the Netscaler gateway.If using multiple farms, list the STA servers on each using a comma separated list:Also the STA servers were not added in proper syntax
Example: "http://xenapp-a.ptd.com/scripts/ctxsta.dll","http://xendesktop-a.ptd.com/scripts/ctxsta.dll" .
Citrix has identified that the error is due to a third-party-dependent SDK used for smart card authentication that is not compatible with iOS 11.
When socket pooling is enabled, StoreFront maintains a pool of sockets, rather than creating a socket each time and returning it to the operating system when the connection is closed.
The results of XML Service SID enumeration might be cached because of Kerberos ticket caching, causing a delay in changes to users’ group memberships being reflected in their available published resources. By default, the duration of this caching is 15 minutes
Issue is caused by Primary Storefront Server having a language difference to the others .
Citrix eDocs StoreFront 3.0
This can happen for a number of reasons. This article address the situations where the machine account password needs to be reset. These are the non-destructive methods for fixing the most common causes for the trust relationship issue. For example:
Machine was restored to a system restore point or to a snapshot that is old enough to have a different machine account password than the one currently in use by AD. More than one machine on a network with the same hostname.AD Machine account object corruption.AD policy that would disable a computer after x number of days of not authenticating.Computer object in AD is deleted.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
When we upgrade the Storefront files get deleted and recreated.  So any changes made to the files manually will be gone.
How to Configure HDX Enlightened Data Transport Protocol :  https://support.citrix.com/article/CTX220732Configuring NetScaler Gateway to Support Enlightened Data Transport : https://docs.citrix.com/en-us/netscaler-gateway/12/hdx-enlightened-data-transport-support/configuring-netscaler-gateway.htmlEDT How do I: https://support.citrix.com/pages/xaxd-how#EDTHow to Configure EDT when using VPN solutions: CTX231821
Active directory locked down.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
3rd party
This problem occurs because the script.exe and conhost.exe process registers for notification exits without first unregistering from the NSI service. Therefore, the registration leak in NSI causes the memory leak in the NSI service. Additionally, the NPP leaks memory in the NSI Proxy Contexts Tag NSpc (NSI.dll).
Storefront GUI does not give an option to configure the STA URLs .
This is affected by NPAPI changing of Firefox 52, Mozilla removed support for NPAPI in Firefox 52 and later version.
HTML 5 Receiver not configured to open in the same Tab
1) On the CA Failed Request logs you will see an error in the Failed request for the user "error verifying request signature or signing certificate"2) The issue was caused because of Changing the Signing algorithm on the CA server.3) The issue also will happen if you do not re-authorize FAS service after installing new certificate on the Certificate Authority Server.
There is a "<clear />" entry on web.config file for the defaultdocuments in the web.config file for the Receiver for Web Site.
https://technet.microsoft.com/en-us/sysinternals/pstools.aspxhttps://technet.microsoft.com/en-us/sysinternals/dd996900.aspx
We noticed that working scenario had only one default document named "Default.htm" and non-working environment had as shown below:
The versioning inside the configuration file of the Protocol Transition Service did not change and hence had to be updated manually. .
RPC access to the user domain is required
"Credential Wallet Replication Identity" certificate missing along with few other.
The client machines when connecting externally will not have access to the Issuing CA and Root CA certificate in the internal Network. The certificates should be manually imported to the client machine either through a GPO or copying the certificate and putting it in the "Trusted Root Certification Authorities" and "Intermediate Certification Authorities" respectively.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Receiver for Windows 4.7 adds functionality for Generic Client Input Method Editors (IME) which is configured by default to use the SHIFT + F4 hotkey sequence.
This error message indicates that the MPSF Probing User Account might not be configured in the Citrix StoreFront Management Pack Configuration tool. Or, the MPSF configuration (mpsf_config.dat) file might not be deployed on the StoreFront server where MPSF is installed. Or, the MPSF agent account might not have access to read the MPSF configuration file (mpsf_config.dat).
Subscription database corrupted or lost subscription information data
This problem is caused by 2008R2 inability to optimize ASP/IIS out of the box
For SF 2.6 - http://blogs.citrix.com/2015/05/11/setting-a-default-landing-folder-for-receiver-for-web/#comment-176306
CTX113250 - Required Ports for Citrix NetScaler Gateway in DMZ SetupCTX101810 - Communication Ports Used by Citrix Technologies
LDAP server certificate configuration is necessary
StoreFront 3.9:
https://docs.citrix.com/en-us/storefront/3-9.html
ADFS:
https://technet.microsoft.com/en-us/library/gg188612.aspx
FAS server:
https://docs.citrix.com/en-us/xenapp-and-xendesktop/7-9/secure/federated-authentication-service.html
Resource Accounts:
https://technet.microsoft.com/en-us/library/cc771972(v=ws.10).aspx
AVG web protection may change the certificate issuer to "AVG" instead of the actual Certificate Authority (e.g. Comodo, Symantec, etc.)
CTX218929: Unable to launch application from Chrome via Netscaler Gateway with client selective trust (CST) enabled
1. Services instances are not present 2. The local administrator does not have appropriate group membership
Registry entry from previous failed install of StoreFront causing issues with new StoreFront install.
If the store is configured with “Trusted Domains Only” and the probing user account is specified in sAMAccountName format (domain\username), the authentication to the store will fail.
Edge browser requires change in Web.config file
On the StoreFront servers, port 80 inbound was opened on the firewall however port 80 outbound was not.
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
For more information, please refer to the original blog post by Feng Huang - https://www.citrix.com/blogs/2014/03/27/pass-through-authentication-in-citrix-receiver-for-web/How to Manually Install and Configure Citrix Receiver for Pass-Through Authentication - https://support.citrix.com/article/CTX133982
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
A StoreFront feature class cannot be removed during upgrade while the Citrix SCOM Management Pack Agent service is running.
If the Citrix SCOM Management Pack Agent is installed on the StoreFront server and its windows service Citrix MPSF Agent is running when an upgrade is attempted, then in place upgrade will fail.  Failure to disable the service before attempting to upgrade the StoreFront server will result in the loss of all configuration on the StoreFront server.  Shutting down the service before starting the upgrade process is enough to prevent the upgrade failure and loss of StoreFront configuration.
Useful links to details of the Citrix SCOM management packs:https://www.citrix.com/blogs/2016/03/17/citrix-scom-management-bundle-now-available-for-platinum-customers/http://docs.citrix.com/en-us/scom-management-packs/storefront/1-9.htmlhttps://docs.citrix.com/en-us/scom-management-packs/xenapp-xendesktop/3-11.html
Since the thin clients are not part of the domain, they may not be able to resolve the FQDN of the delivery controller.
RSA uninstaller unable to remove all the components.
http://discussions.citrix.com/topic/358101-thin-client-connectivity-via-netscaler-gateway/
For additional information on the NetScaler XenApp/XenDesktop wizard click HERE.
To configure NetScaler as an idP, see the NetScaler documentation located here.
This error might be occurring because the application pool has started running which locks the file preventing the feature package from updating the web.config file.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
When Keyword filtering fails on Desktops and are not enumerated on StoreFront based on Keyword configuration specified on XenDesktop, it is generally based on Keyword being entered in the wrong field. When configuring / Creating or editing a Delivery Group in XenDesktop there are is another place in which a Description field is seen and that is under > Edit Delivery Group > User Settings. If Keyword is specified here StoreFront will not be able to read this, Therefore, Keyword will not be recognized and enumeration will fail depending on the settings specified for keyword filtering on the StoreFront Server.
StoreFront was unable to verify the certificate since the server did not have internet access.
The root of the problem is the same as CTX218815, where some of the PowerShell scripts used during the installation were not properly time stamped which are included in CU1 and CU2.When the problematic PowerShell command was executed in a custom action during install, the command execution aborts and causes the installation to fail.This custom action is not performed during StoreFront 3.0.0/StoreFront 3.0.1 upgrade, nor during the upgrade to  StoreFront 3.0.1000/3.0.2000 from StoreFront 3.0.0/StoreFront 3.0.1, therefore the problem can be worked around by a phased upgrade install.Any upgrades to StoreFront 3.0.1000 or 3.0.2000 will still have to perform the solution provided in CTX218815 after installation.
-If the upgrade fails from  3.0.1 StoreFront version to higher versions and we see the same error, then replace to 3.0.0.0
Changes have not been propagated to other existing StoreFront servers.
The System.Drawing.dll file is corrupt.
StoreFront MMC code change.
Site was not trusted on client end hence the automatic launching was not executed
Credential Wallet Service not Running on StoreFront Server .
AD Policy or password policy restriction limits the users from changing password immediately
The issue is a known issue with the IIS 8.5 version (Documented by Microsoft).https://support.microsoft.com/en-in/kb/2802568If IIS is not configured to use a CTL, SSL client certificate authentication will fail with the 403.16 error condition. This error occurs because SChannel.dll wrongly considers the client certificate to be untrusted. (NOTE: Having no CTL in use is the default configuration of IIS 8.0. This is configured by having no SendTrustedIssuerList present or by setting SendTrustedIssuerList=0).In this scenario, the IIS log typically shows a value of 2148204809 in the sc-win32-status field. This translates to error code 0x800b0109, which is defined as CERT_E_UNTRUSTEDROOT.
http://discussions.citrix.com/topic/367499-30-upgrade-fail-transforming-configuration-file-elementalreadyexists/
Username and Password were not added as an Authentication Method on the StoreFront ServerApplication Firewall was turned on , on the NetScaler.
Certificate issue to Citrix System Inc is missing from Trusted Publishes.
Unable to stop CitrixSubscriptionsStore service.
http://docs.citrix.com/en-us/storefront/3-5/advanced-configurations/sf-configure-pna-auth.html
SSO domain not correct on Netscaler Gateway session profile.
While configuring the SSPR on StoreFront, the users were unable to get the option to manage the account. We should see the 'Tasks' option in StoreFront to validate the configuration. If this option is not available, then it could be an issue with the configuration. And one of the reason could be that the users are accessing the URL using NetScaler.
StoreFront upgrade fails when trying to encrypt backed-up files if any is greater than 2GB. In case of large deployments subscription database may grow beyond this limit and as result the update might fail.
On the StoreFront Server, the Store that was configured for External access was hidden using the option Hide Stores under Configure Store Settings.
External client cannot resolve IP of the internal server.
Quote missing from web.config within the Citrix\Roaming folder on line 208 and 209
Inaccessible path in the web.config file for the receiver clients.
Some of the PowerShell scripts used by the StoreFront management console were not properly time stamped.
This can happen due to following things:1.Either IIS Default Web Site doesn't have a 443 binding, or if it has there is no certificate selected there.2.The Certificate is imported in Web Hosting Store of Certificate rather than Personal Store.
Citrix Documentation - Create a single FQDN to access a store internally and externally
PNAgent legacy mode enabled in StoreFront.
Misconfiguration on IIS.
Policy missing on NetScaler.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
1) By default Receiver's Preference is remote application.2) If local application shortcut is of same name then Receiver will discard local application
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
1. The new Base URL cannot resolve to anything by just changing it.2. We need to map this in DNS to the FQDN of the SF server.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
This article is based on the content from the following discussion linkhttps://discussions.citrix.com/topic/379389-customization-of-mobilephone-ui/#entry1934374
This is a known issue with Storefront 3.0.1+. By default if the Optimal Gateway feature is enabled on Storefront, it will generate an internal ICA file with IP address of internal XenApp server instead of STA ID which will cause launch failures through Netscaler Gateway
XML should be integrated with IIS when we install XA on the server, if it was not done at the initial stage this might be the issue. We might need to reinstall the XA with IIS shared. For this IIS should be installed before installing XA on the server.
During StoreFront startup, it tries to load form templates after compiling them into assemblies and saving to "C:\Windows\temp" directory so issue reading/writing to/from the folder will cause these symptoms. This can is usually caused by a permissions issue, however in this case the server was running out of disk space which is what caused the issue/prevented write access to the temp folder.
Receiver for Android Known Issues
Kind of a known issue in version 2.5
issues with beacons .
Any configuration entry which does not exist.
SAML authentication does not use a password and only uses the user name. Also, SAML authentication only informs users when authentication succeeds. If SAML authentication fails, users are not notified. Since a failure response is not sent, SAML has to be either the last policy in the cascade or the only authentication policy.
When you open "Configure XenApp Services Support" Console and click OK (even if you have not made and changes), it reads the store configuration for the password options and writes it to the web.config.
Before Change:
After change:
Due to the file scan in the "Trend Micro Deep Security", a file access conflict occurs during the StoreFront upgrade. This causes the failure in the StoreFront upgrade.
Workspace Control
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Internal Beacon address is not resolvable in DNS on the storefront server.
In .ini file of thin client the PNLite URL in the file had the switch "reconnectatlogon" = 0, hence the reconnect feature was disabled.
Unauthenticated store on StoreFront was breaking the authentication on thin clients.
There are no apps or desktops available
Having multiple GPO entries may cause the issue specifically if the GPO's don't have the correct details or format for Citrix reciever.
Special characters in the display name of farm.Issue with Storefront 3.5 only.
IIS issue, authentication service will timeout
Web.config file needed to be configured to terminate sessions when logoff button is clicked.
Customer didn't disable Classic Receiver Experience
Points to Note:
The setting in the style.css file will take precedence over the ctxs. *.css files.
When you change the appearance of the webpage through StoreFront management console, those changes take effect because of the modifications that it will do to this file.
It is recommended that you save any custom images in the custom or customweb folder, so that they are not tampered during a Citrix update.
When modifying the style.css file directly, be sure put your changes below these lines:
/* CITRIX DISCLAIMER: START OF MANAGED SECTION. PLEASE DO NOT EDIT ANY STYLE IN THIS SECTION */
/* CITRIX DISCLAIMER: END OF MANAGED SECTION. */
/* You may add custom styles below this line. */
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
This is a known bug.
Below are the behavioral changes in Xenapp 7.x as compared to Xenapp 6.x.
A user can have any number of desktop sessions (unless limited by configuration).A user can have only one application session per delivery group (per endpoint, depending on reconnect setting).If the user wants to have multiple applications launched from the same delivery group, the applications need to session share, and session sharing is possible only with seamless applications.If  the user wants to have multiple applications launched with each application in its own session (applications are not seamless, and so can’t session share), the applications needs to be published from different delivery groups.
Web Apps were present in IIS, even after uninstall of storefront
http://support.citrix.com/article/CTX139592 (How to enable Verbose Logging)
The cause of the issue is the attempt to launch the application (from same client and user) before the first application launch is complete and ready for session sharing and is therefore denied. A warning message is posted to the event log for informational purposes. This is as designed.
After upgrading from 2.5 to 3.5 unable to pass the Prelogin page.
A broker from a new XenApp farm was affecting authentication. There was an unspecified error on the event viewer coming from the XML server, the error is found on the StoreFront server.
Previously removed store not fully removed
STA's were missing on Netscaler Gateway
Citrix Blog - Learn how StoreFront 2.6 administration just got easier
Users were not able to resolve the FQDN of the delivery controllers.
This generally happens if the StoreFront is installed from XenApp/XenDesktop ISO and the default store that was created is removed.
SHA512 is disabled in Windows when you use TLS 1.2.About this update: After you apply this update, the signature and hash algorithm combinations for RSA\SHA512 and ECDSA\SHA512 are enabled for the Transport Layer Security (TLS) 1.2 protocol. This means that you can now use SHA512 certificates on your computer.If you currently use SHA512 certificates, and do not have this update installed, you may have problems in one or more of the following scenarios by using TLS 1.2:Internet Protocol security (IPsec) stand-aloneIPSec with DirectAccessMicrosoft Lync Server 2013Remote Desktop Services (RDP)SSL websitesSSL based VPNWeb applications
We didn't have permissions to modify web.config file in Roaming and Store folders.
We need either to comment out or remove the line <% Html.RenderPartial(“SaveCredentialsRequirement”, SaveCredentials); %> at inetpub\wwwroot\Citrix\Authentication\Views\ExplicitForms
Citrix Blog - Announcing StoreFront 3.5
CTX207162 - Error: "Cannot Complete Your Request" When Connecting to StoreFront
CTX134965   - Error: "Your logon has expired. Please log on again to continue." when Users Logon to StoreFront 1.2
Upgrading to Citrix Receiver for WindowsCitrix eDocs
Citrix Blog - Idle timeout Receiver for WebSecurity Token Services API - https://citrix.github.io/storefront-sdk/security-token-services-api/#request-token
When domain pass-through is used, IIS (on SF) contacts domain controller for user authentication. With the obtained token, it extracts the user SIDs , which are the group membership information of the authenticated user. Then SF includes these SIDs in the enumeration request and send the request out to XenApp. Then XenApp filters out user’s applications by comparing the SIDs granted access aganist each resource. Now the problems is the SIDs granted access to resources are ones from XenApp domain, while the SIDs in the enumeration request are the ones from Storefront domain. And the SF domain controller will not include the group SIDs of another forest during authentication (i.e. though the user being authenticated truly belongs to them). And that is when it fails.
iOS devices perform proper security checks and would not allow any connection to complete until its trusted.
IIS site had Require SSL option enabled however NetScaler communicates with StoreFront is an unsecured way and it does not use a Certificate to trust the site.
The Wyse thin client is using and old/modified version of Receiver.
logonMethod in Citrix StoreFront's configuration file (web.config) was not set correctly to allow Pass-Through Authentication (SSON).
When Remote Access is enabled, StoreFront will use the Beacons technology to determine whether the Receiver is attempting to access the resource from within the Internal Network or from outside the defined corporate network on an External network.If the Receiver is unable to resolve and receive a reply from the Internal Beacon, it will evaluate that the client device must not be on the defined Internal network and therefore will attempt to access the resources using an External Connection (i.e. via the NetScaler Gateway).If the Receiver is not permitted to reach the NetScaler Gateway from it's current location, the connection will fail and the defined error will be returned.
When the configuration of the StoreFront servers was reviewed it was noted that the following services were not part of the Local Admins group on the StoreFront server.
NT SERVICE\CitrixClusterService NT SERVICE\CitrixConfigurationReplication
Citrix Documentation - Disable detection and deployment of Citrix Receiver
> In SF 3.5, optimal get may get enabled by default
> Which causes application launch issues through netscaler gateway by creating an ICA file which includes internal Xenapp server's IP instead of STA ticket.> Client machine fails to connect to XA server's internal IP.
Optimal gateway routing might be enabled for direct access in external network as well.
You receive a SocketException when using WCF connection pooling (https://support.microsoft.com/en-us/kb/2607014)
Microsoft’s WCF is the technology leveraged to synchronize the data and although this is an issue with WCF, we have modified our product to catch the expired message and ignore the replicated request of the expired message. We believe that this authentication issue may occur due to delays on the network or clock skewing.
This was a configuration issue on Netscaler session profile and StoreFront.
Internal beacon is resolving from the outside on port 443, Receiver believes it is connecting from the inside and is trying to discover the store using the wrong path.
Certificate trust issue. StoreFront server does not trust the certificate of the NetScaler.
Looking through the newnslog messages we see the following entries:
2155 14856 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 17:41:53 2016
2165    21 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 17:42:19 2016
2195  2032 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:19:15 2016
2202     7 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:23:20 2016
2203     7 PPE-0 DBSMonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:23:25 2016
2210   231 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:27:18 2016
2222     0 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:46:43 2016
2223    14 PPE-0 DBSMonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:46:53 2016
2275    28 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 18:49:28 2016
2333   168 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 19:04:02 2016
2335   196 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): UP; Last response: Success - Probe succeeded. Tue Mar  1 19:07:20 2016
2337    70 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 19:08:30 2016
2349     7 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 19:08:47 2016
2350    28 PPE-0 MonServiceBinding_SRV-BE-DI-0135.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0135_SSL): UP; Last response: Success - Probe succeeded. Tue Mar  1 19:09:12 2016
2352     7 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 19:09:22 2016
2375    14 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): DOWN; Last response: Failure - Probe failed. Tue Mar  1 19:11:43 2016
2377   315 PPE-0 MonServiceBinding_SRV-BE-DI-0134.XXXXXXX.COM:443_(mon_storefront)(svc_srv-be-di-0134_SSL): UP; Last response: Success - Probe succeeded. Tue Mar  1 19:16:54 2016
As you can see, the probes are failing more often than every hour. We do not get a reason for the probe failing though.
I also checked the nsumond.log and there are a lot of entries for the script nssf.pl failing for different reasons:
Wed Mar  2 20:54:52 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Wed Mar  2 20:54:52 2016: /netscaler/monitors/nssf.pl Exit Reason : (404 Not Found) (Partition ID: 0)

Wed Mar  2 21:05:22 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Wed Mar  2 21:05:22 2016: /netscaler/monitors/nssf.pl Exit Reason : (Citrix Peer Resolution Service CitrixConfigurationReplication CitrixCredentialWallet CitrixDefaultDomainService CitrixSubscriptionsStore WAS W3SVC stopped running.Degraded Services.) (Partition ID: 0)

Fri Mar  4 14:15:23 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Fri Mar  4 14:15:23 2016: /netscaler/monitors/nssf.pl Exit Reason : (200 OK) (Partition ID: 0)
However the main reason for the failure is this:
Wed Mar  2 19:34:38 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Wed Mar  2 19:34:38 2016: /netscaler/monitors/nssf.pl Exit Reason : (500 Can't connect to 192.168.200.135:443) (Partition ID: 0)
Wed Mar  2 19:34:43 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Wed Mar  2 19:34:43 2016: /netscaler/monitors/nssf.pl Exit Reason : (500 Can't connect to 192.168.200.135:443) (Partition ID: 0)
Wed Mar  2 19:34:58 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Wed Mar  2 19:34:58 2016: /netscaler/monitors/nssf.pl Exit Reason : (500 Can't connect to 192.168.200.134:443) (Partition ID: 0)
Wed Mar  2 20:07:49 2016: /netscaler/monitors/nssf.pl Script failed. Exit code : 1 (Partition ID: 0)
Wed Mar  2 20:07:49 2016: /netscaler/monitors/nssf.pl Exit Reason : (500 Can't connect to 192.168.200.135:443) (Partition ID: 0)
USIP is enabled and traffic cannot return from Storefront back to the Netscaler for proxy to client.
Notice when tracing, and filtering for either the client IP or server IP, you will find that Netscaler is sending SYN from the client IP to the server IP, and no SYN/ACK is returned.
DHCP lease overwriting the 169.x.x.x address provided by PVS 7.6 on the Legacy Network adapter.
The DHCP/BootP lease was set to 8 hours, hence post 50% of the lease time period it would renew the lease and overwrite the APIPA address to a DHCP leased IP address.
We changed the lease to 30 hours to cure this for a longer duration of time.
The Display name of the Delivery Group in StoreFront contained a "."
changes to the style.css are required in some instances to clear this problem. In some instances, no changes are required. However, if problem is observed in environment is recommended to follow steps provided in solution
This access control list is not in canonical form and therefore cannot be modified.At C:\Program Files\Citrix\Receiver StoreFront\Management\Cmdlets\UtilsModule.psm
Both the storefront's were configured before adding to server group.
The files in c:\inetpub\wwwroot\Citrix\Storename\App_Data\CtxsWebProxyIconCache\ end up having a fully qualified file name of greater than 260 when copied to c:\ProgramData\Citrix\Storefront Install\3.0.0.44\Instances\InstanceId\App_Data\CtxsWebProxyIconCache which happens during the upgrade process.
Generally, when this problem is not resolved by using these values in the Web Config File, please ensure that Store you wanted to target was actually modified correctly and ensure that syntax was added in the right html tagThese changes will only be reflected on Windows Users, not on MAC users.
http://discussions.citrix.com/topic/325653-few-problems-with-storefront-12-and-viab-52/
There appears to be a problem with the update of the configuration file due to an unexpected XML entry. This entry was tested with Web Interface servers but not on StoreFront.
Reference to previous Web Interface setting: http://support.citrix.com/article/CTX117273.
There is a known issue with StoreFront 3.5 where, if there is period (.) or underscore (_) in the Display Name (Store > Highlight Store > Manage Delivery Controllers > Highlight Delivery Controller > Edit), users will see a "Cannot Start App" error.
unable to stop CitrixSubscriptionStore service.
Attempt to update from non beta StoreFront 3.x to beta version of StoreFront 3.1
StoreFront 3.0.1 and earlier versions only support TLS 1.0.  To resolve the issue, you have to enable TLS 1.0 on the registry on each of the StoreFront servers.
CTX139319 - How to Configure NetScaler Gateway with StoreFront and App Controller
TdICA events.
SSL Binding - https://technet.microsoft.com/en-us/library/hh831632.aspx#SSLBinding
Service group had netmask set to 255.0.0.0 in persistency settings that caused all users with all IPs to be sent to the same StoreFront server.
Issue with SF 3.0.1.56 not liking "&" symbol within group names.
If an specific Windows Update is installed on Windows 2012 R2, it changes the cipher priority order and the cipher exchange/negotiation between the NetScaler and StoreFront fails.
Farm display names in StoreFront "Manage Delivery Controllers" configuration is not similar on both StoreFront clusters.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
TLS 1.1 and TLS 1.2 is supported in the backend in MPX 7500 from 10.5 59+ onwards. However it is not supported with StoreFront server 2.6. TLS 1.1 and TLS1.2 is supported on Storefront 3.5: https://docs.citrix.com/en-us/storefront/3-5.html
There is a Windows group name mismatch between what is in the in the Protocol Transition feature package and what the group is actually called, CitrixPTServiceUsers vs CitrixStoreFrontPTServiceUsers. The name mismatch is likely to be the cause of the accounts not replicating.This is a bug documented in BUG0615101
Citrix Blog - StoreFront 3 Web Customization: Branding Your Deployment
The issue was related to using a Load Balance vserver to load balanced StoreFront and not applying the Client IP Header value "X-Forwarded-For" To set this value open the Load Balancing service node -->advanced tab-->Settings. Enable the Client IP Header option and within the value box enter X-Forwarded-For.
Audio has not be enabled on the Citrix Receiver for playback of multimedia files.
Windows firewall was enabled on the StoreFront servers and Delivery Controllers.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
NetScaler service by default uses TLS 1.2 for SSL service however StoreFront 3.0 does not currently support TLS 1.2.
Refer to Citrix Blog for more information.
Wrong XML port in use. Wrong protocol in use
Runtime tags create a conflict causing the upgrade to fail.
https://www.citrix.com/blogs/2014/10/14/customize-and-deploy-citrix-receiver/
It is a by default behavior, the uploaded logo picture will be half compressed.
Customer uses IP address to add account in Android Receiver, legacy site url is required.
Enhanced enumeration set to On in config.xml file. StoreFront 2.5 does not support both enhanced app enumeration and socket pooling enabled.
With Google chrome NPAPI protocol disabled, StoreFront 3.0+ now supports External Protocol handler with latest Receiver 4.3.100.10+.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The Set-BrokerAppEntitlementPolicyRule cmdlet modifies an existing application rule in the site's entitlement policy.
An application rule in the entitlement policy defines the users who are allowed per-session access to a machine to run one or more applications published from the rule's desktop group.
Changing a rule does not affect existing sessions launched using the rule, however if the change removes an entitlement to a machine that was previously granted, users might be unable to reconnect to a disconnected session on that machine.
This is a default behavior.
The behaviour is a known issue and limitation in Receiver for iOS, version 6.1.1.
focus opertaion has been performed before "reservedSpace" in StoreFront 2.6 JavaScript
CTX200707 - How to Deploy NetScaler with StoreFront and XenDesktop
CTX140153 - Troubleshooting Methodology for NetScaler, StoreFront with XenApp and/or XenDesktop
Citrix Discussions - Logon prompt to the Citrix Receiver for iOS App no longer appears after upgrading to NetScaler 11
Time settings and session timeouts does not match across servers.
After verifying session profile in NetScaler Gateway setting it was observed that users from thin clients connect to load balanced virtual server and Receiver users connect to App Controller and see application enumeration. In this case the persistence configured is source IP. As per the connection table, all connections are made to load balanced VIP using Subnet IP. This is because connections are made to NetScaler Gateway and then Subnet IP communicates to load balanced Virtual Server. Since the communication is made through the SNIP the source IP will always be same in this case and this is the reason why all connections are going to the same server.
The Framework.xml data prevents StoreFront from uninstalling.
The localization is incorrect.
The StoreFront server did not trust the NetScaler Gateway certificate.
During the upgrade process the Credential Wallet Service configuration file is incorrectly modified.
Detailed Explanation
The Credential Wallet Service uses a peer network to ensure that encrypted credentials are available on all the servers of a StoreFront Server Group. This mechanism uses certificate mutual authentication to secure the communication channels.The upgrade process has defined the client certificate, but not the server certificate leading to the mutual authentication failing.This is a configuration failure.
Diagnostics
The signature of this issue is the events, described above, appearing in the Event Log approximately every five minutes.
The folder \Web\Sites\AGService is empty.
A corrupted upgrade installation might cause this error.
Microsoft Framework might have caused the issue.
Citrix eDocs - Configure subscription synchronization
CTX126991 - Troubleshooting XenDesktop Launch IssuesCTX226014 - Application Launch Fails with "Unknown client error 1110" When DTLS is EnabledCTX101997 - FAQ: Citrix Secure Gateway/NetScaler Gateway Secure Ticket AuthorityCTX227354 - "Unknown Client Error 1110" error when launching Desktop using FirefoxCitrix Discussion - Failed with status (1110)
CTX133903 - How to Make StoreFront the Default Page within IIS
This issue can occur during the following scenarios:
The user is not assigned to any delivery group.	Check by opening Desktop Studio > Delivery Groups > Edit Delivery Group > Users and verify that the user that is launching the application is assigned to that Desktop or Application.StoreFront is setup to communicate using HTTPS (Port 443) with the Delivery Controller and the controller was not setup for HTTPs.A socket was closed on StoreFront server, preventing the user to contact the XML brokers and causing a timeout when enumerating the resources.
The following are the causes for this issue:
Session policies are set incorrectly on the NetScaler Gateway virtual server.
NetScaler Gateway virtual server does not have STA from StoreFront bound.
NetScaler Gateway virtual server is set to smart access mode while it is licensed for basic mode.
The issue is caused by an incorrect persistency configured for load balanced virtual server on NetScaler Gateway and missing external beacon.
A firewall was blocking the XML port between the XenApp server and the StoreFront server.
Microsoft APIs do not allow for selecting specific Ciphers, rather only specific protocols. Though Citrix supports only a subset of ciphers, the whole list for a particular protocol are sent during the SSL handshake. The Microsoft APIs are designed to limit ciphers by the configuration change done through registry.
The IIS setting on StoreFront server has the hostname in Default Website bindings which is causing the issue.Note: The symptoms indicate that this issue is either caused by certificate or IIS setting on StoreFront server.
The HTML5 Engine software was only for versions StoreFront 1.x as a separate installation.If a previous build had the HTML5 added separately, it must be removed before proceeding with the upgrade.
In Google Chrome 40 there is a change related to Content Security Policy Level 2 which breaks the connection if you are using Receiver for HTML5 1.3.
Netsh commands for HTTP
To identify the problem, take a network trace (nstrace) on NetScaler Gateway. if you see only username is being returned from the Entrust server, then it is not NetScaler Gateway issue.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
CTX202097 - How to Configure NetScaler 11 to use with Web Interface 5.4 and XenApp​Click on the link to download the latest version of NetScaler GatewayClick on the link to download the latest version of XenDesktop
This issue could occur if SSON/Pass-through is not enabled on the Citrix Receiver.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
Citrix Documentation - Configure optimal NetScaler Gateway routing for a store
CTX139963 - How to Configure NetScaler Gateway with StoreFront
CTX133855 - How to Configure Desktop Pass-Through with StoreFront and Receiver
This issue is caused by using ICA files instead of Citrix Receiver.
CTX119733 - Users cannot Access Applications when Alternate XenApp Server Addresses are used with Web Interface 5.0 or Web Interface 5.1CTX123839 -  SSL Error 29 Occurs after Upgrading to Web Interface 5.2CTX128436 - How to Enable DNS Address Resolution in XenApp 6.x
For assistance with the initial configuration of NetScaler, including licensing, SSL certificates, authentication, and an overview of how the component works, see NetScaler for the XenDesktop\XenApp Dummy. Though this blog refers to an older version of the NetScaler, all of the basic concepts still apply to version 10.1.
Citrix Reference Architecture for XenMobile 8.5
Refer to the following links for configuration utility changes in NetScaler 10.1 and NetScaler 10.5:
Citrix Documentation - NetScaler 10.1 Configuration Utility Changes
Citrix Documentation - NetScaler 10.5 Configuration Utility Changes
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
The working StoreFront server is trying to communicate with the decommissioned server and is not getting the expected responses; therefore cannot remove the server from the Server Group.
DeisredHRES and DesiredVRES can be set to any desired resolution, such as 800x600 or 1024x768.
If the application needs to run in a percent of screen size, then after TWIMode=Off, add the line ScreenPercent=90 which sets the screen to 90 percent.
This can also be done with the Program Neighborhood Agent site. Ensure that the corresponding file under the conf folder for that site (Inetpub\wwwroot\Citrix\PNAgent\conf) is edited.
If using the 10.x client, and editing the default.ica or template.ica file, then add only the TWIMode=Off line. It obtains the HRES and VRES settings from the published application properties. Otherwise, an error appears indicating duplicate entries in the ICA file when a user tries to launch the application.
This error will occur if you have Chrome browser version 30.0.1599.69. It is a known bug with this particular version of Chrome.Refer to: https://code.google.com/p/chromium/issues/detail?id=304319&can=1&q=citrix&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Fiddler Software
Cause 1
New restrictions on browser plug-ins, including the Citrix Plug-in used to access desktops and applications, were introduced in Firefox 26.
Cause 2
DLL files that are part of the Citrix Online Plug-in for Windows 12.x, or earlier versions, might have been altered or removed.
Cause-1
StoreFront communicates with the SQL server using NT\ANONYMOUS logon method instead of the computer account name of each member of the Server Group.
Cause-2
StoreFront is trying to communicate with the SQL Server Database and encountering an error with one or more tables.
By default, the requireTokenConsistency attribute is set to false in the StoreFront application store.
Enable this setting to allow SmartAccess conditions to be passed from StoreFront 1.2 server to the XML brokers for XenApp or XenDesktop.
User access was removed from the Allow log on locally policy on the StoreFront server.
The issue is caused because the Windows Firewall service is disabled under Windows Services.
During the process of creating an Authentication Service on Receiver StoreFront, it checks the current Windows Firewall rules enabled to ensure it has the appropriate network access for the application. Because the service is being disabled, Receiver StoreFront cannot complete the process of creating the Authentication Service.
For more information on Citrix StoreFront, refer to Citrix Documentation - StoreFront 3.0.
The Wyse Xenith with firmware prior to HF 2.0_104 is unable to process the config.xml provided by the StoreFront legacy PNA site resulting in authentication failure.
When the user authenticates, there is a separate Active Directory query to find the display name, which currently searches the global catalog for the user identity based on the samAccountName.
A user profile is created on the StoreFront Server when users authenticate to StoreFront. This login event creates a profile on the StoreFront Server. Note: These profiles are created as local profiles on the server by the operating system.
The Desktop Viewer Toolbar is not enabled by default in the StoreFront Services store.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
This issue is caused by SSL Relay being configured to use SSL v3 instead of TLS v1.
Configuring StoreFront Using the Configuration Files
For help with the initial configuration of NetScaler, including license, SSL certificates, authentication, and an overview of how the components work, refer to CTX202097 - How to Configure NetScaler 11 to use with Web Interface 5.4 and XenAppIf you are trying to implement XenMobile along with StoreFront, then refer CTX139319 - How to Configure NetScaler Gateway with StoreFront and App Controller.​For information on "Seamless upgrade by means of Content Switching" refer to page 11 of XenApp 7.6 Upgrade Guide.​CTX200287 - How to Configure NetScaler Gateway 10.5 to use with StoreFront 2.6 and XenDesktop 7.6For assistance with troubleshooting authentication issues, refer to CTX114999 - How to Troubleshoot Authentication with Aaad.debug​
Citrix Discussions - Citrix NetScaler Gateway Enterprise VPX - License not working
Citrix Discussions - Access Gateway VPX - Unable to launch apps Socket operation on non socket
Citrix Documentation - NetScaler Gateway License Types
Citrix Blog - NetScaler Gateway Licensing Demystified
Citrix Documentation - How SmartAccess Works for XenApp and XenDesktop
Citrix Documentation - Configuring the Secure Ticket Authority on NetScaler Gateway
This is because of Receiver for the Web component not sending the appropriate Gateway HTTP headers in all of its requests to the StoreFront Services component. Example:
Non-working scenario
Request data:  Remote Address:  X-Citrix-Via:  X-Citrix-Gateway:  X-Forwarded-For:
Working scenario
Request data:Remote Address:X-Citrix-Via: ag5.user.ctxX-Citrix-Gateway:X-Forwarded-For: 10.10.10.10
Citrix eDocs - Configure server groups
Application Initialization UI for IIS 7.5
Citrix Download - XenApp 6.5 Feature Pack 1 Enterprise Edition - Group Policy UpdatesCitrix Documentation - Receiver for HTML5
Corrupted performance counters.
The Windows Firewall Service is stopped.
CTX115230 - Understanding-Shift-F11-Key-Combination-Behavior
This is an issue with permissions caused when a different administrator run the Deploy Multiple Server Group configuration, compared to what was used to create the StoreFront SQL database.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Cause 1
StoreFront server is unable to resolve the name of the XML server(s) listed under Manage Server Farms.
The following error message is recorded on StoreFront server under Event Viewer > Applications and Security logs > Citrix Delivery Services:
Log Name: Citrix Delivery Services
Source: WebApplication
Date: <Date>
Event ID: 0
Task Category: (12346)
Level: Error
Keywords: Classic
User: N/A
Computer: ftlvstorefront.amc.ctx
Description:
The server name ftlvxa.amc.ctx cannot be resolved. The specified Citrix XML Service could not be contacted and has been temporarily removed from the list of active services.
Cause 2
StoreFront server is unable to contact the XML server(s) using the specified XML port number under Manage Server Farms.
The following error message is recorded on StoreFront server under Event Viewer > Applications and Security logs > Citrix Delivery Services:
Log Name: Citrix Delivery Services
Source: WebApplication
Date: <Date>
Event ID: 0
Task Category: (12346)
Level: Error
Keywords: Classic
User: N/A
Computer: ftlvstorefront.amc.ctx
Description:
An error occurred while attempting to connect to the server ftlvxa45.amc.ctx on port 81. Verify that the Citrix XML Service is running and is using the correct port. If the XML Service is configured to share ports with Microsoft Internet Information Services (IIS), verify that IIS is running. This message was reported from the XML Service at address. The specified Citrix XML Service could not be contacted and has been temporarily removed from the list of active services.
Cause 3
If using HTTPS or SSL Relay as the transport type, StoreFront Services server is unable to contact the XML server(s) using Secure Socket Layer (SSL).
Example of SSL Relay configuration
The following error message is recorded on StoreFront server under Event Viewer > Applications and Security logs > Citrix Delivery Services:
Log Name: Citrix Delivery Services
Source: WebApplication
Date: <Date>
Event ID: 0
Task Category: (12346)
Level: Error
Keywords: Classic
User: N/A
Computer: ftlvstorefront.amc.ctx
Description:
An SSL connection could not be established: You have not chosen to trust the issuer of the server's security certificate, amc-FTLVAMCDC-CA. This message was reported from the Citrix XML Service at address. The specified Citrix XML Service could not be contacted and has been temporarily removed from the list of active services.
Cause 4
Third-party network monitoring solutions (for example: firewalls, Intrusion Detection Systems (IDS), antivirus) might be blocking the XML traffic between StoreFront Services and the XML server(s).
Note: The use of an ICA file in your environment for anything other than troubleshooting purposes is further outlined in CTX200126 - Support for ICA files in XenApp/XenDesktop Environment
CTX136927 - How to Enable Logging for Receiver for Windows 8 and Windows RT
How To Videos for StoreFront 1.2 http://www.citrix.com/tv/#series/401
Note: This video requires the Adobe Flash player plug-in for the Web browser.
Clicking Generate Security Keys in the StoreFront console's Gateway node creates a new Roaming Delivery Services SSL certificate that is not trusted by the Authentication service. The thumbprint of the SSL certificate is not being updated in the Web.Config file under C:\inetpub\wwwroot\Citrix\Authentication.
Old Roaming Certificate thumbprint

New Roaming Certificate thumbprint
Web.Config file used by the Authentication service
You can notice in the following screen shot that it is still using old thumbprint. This must be changed to the thumbprint of the newly created Roaming Certificate.
CTX114355 - NetScaler Gateway Ports Configuration on FirewallCitrix Documentation - Integrating NetScaler Gateway with XenApp or XenDesktop
Configuring Custom Clientless Access Policies for Receiver
These issues are observed in environments that have global or local system lock down policies which restrict or remove the default trusted root certificates from a Windows-based domain or a Windows-based server. Removal of these “required” certificates might limit functionality of the operating system and can also cause the issues mentioned earlier with StoreFront.
Note: If any of these “required” system certificates are removed manually from the certificate store, it will result in the following warning message.
StoreFront requires the following VeriSign Class 3 Public Primary Certification Authority G5 certificate, which must be installed into the Local Computer Certificate store in Trusted Root Certification Authority.
The dual STA ticketing architecture currently applies only to NetScaler Gateway 10.5 e. You should not enable this feature in Web Interface if you are using Secure Gateway or Access Gateway Enterprise Edition version 9.x or earlier.
CTX123444 - Protocol Driver Error Appears when Launching Applications from a Web Interface 5.2 or Later Site
Windows PowerShell Basics
Citrix Documentation - Verbose tracing PowerShell commands
CTX200157 - How to Configure Citrix Receiver Pass-Through Authentication for StoreFront or Web Interface
When logging in, the duplicate subscriptions are created in the StoreFront database preventing the applications to enumerate. The applications and desktops which are subscribed using the older version of the Citrix Receiver create duplicate entries. For more information refer to Citrix Documentation - Installing, setting up, upgrading, deploying, or removing Receiver for Mac.
Citrix Documentation - Configure smart card authentication
If you are installing StoreFront on Windows Server 2012, note that non-self-signed certificates installed in the Trusted Root Certification Authorities certificate store on the server are not trusted when IIS is configured to use SSL and client certificate authentication. For more information about this issue, see Microsoft KB - Internet Information Services (IIS) 8 may reject client certificate requests with HTTP 403.7 or 403.16 errors.
Citrix Documentation - ICA Settings Reference
Caused by the change in the default java libraries version from the Base Operating system.Logstash software changed the default java libraries from the Base OS. Strict restriction with Java libraries installed as part of the Logstash software
The issue is with one of the configuration settings in Writable configuration file which needs to be enabled for proper Citrix session follow-up with users
Ran Get-MonitorConfiguration and found that the below settings were set to False:EnableDayLevelGranularityProcessUtilization                                                                             False                                                                                                                  EnableHourLevelGranularityProcessUtilization                                                                            False                                                                                                                  EnableMinLevelGranularityProcessUtilization                                                                             False
This is caused due to a known GUI Issue.
Configuration to export contacts was not enabled on XenMobile ServerCustomer did not see option to Sync Local Contacts after updating Secure Mail MDX policy
Bug in product.
If the local NTUSER.DAT* files are in use by another process while a user logs off, the files cannot be deleted. The next time the user logs on to the same client device, another local profile username.userdomain is created.
The reason for the issue could be the fact that the deletion of profiles takes longer than 2 minutes and sometimes, the users log back on to the desktop before the 2 minute interval, creating a conflict.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
This can happen for a number of reasons. This article address the situations where the machine account password needs to be reset. These are the non-destructive methods for fixing the most common causes for the trust relationship issue. For example:
Machine was restored to a system restore point or to a snapshot that is old enough to have a different machine account password than the one currently in use by AD. More than one machine on a network with the same hostname.AD Machine account object corruption.AD policy that would disable a computer after x number of days of not authenticating.Computer object in AD is deleted.
When the VDI In a box created desktops are destroyed or deleted manually, the folders for these VMs might be left behind at the storage level. This will result in the failure of creating the new desktops if the old names are reused again.
Known issue in 5.4.8
Corrupted image.cli file
Installed a hotfix for XenDesktop  VDA 7.1 on a VDI in a Box Agent
Communication issue between Draft Image and VDIManager.
Connection Issues during replication.
RC4 no longer supported by mainstream browsers.
The images were deleted from the hypervisor without removing the VDI in a box console.
Endpoint negotiating a lower quality for audio than prescribed by HDX policy.
Cert was not provided for the root of the certification path.
Wyse Client not configured for the VDI manager URL
The Symantec virus definition database might be too big for the default 2 GB VHD container that is shipped with the XenDesktop 5.6 Personal vDisk installer. The starting size of VHD is 2 GB (inherited from C:\ProgramData\Citrix\Personal vDisk\Settings\UserData.vhd)
The instance.cli file is the file that contains the list of machines that are registered as part of the grid. You will need to restore the contents on the instance.cli file to a desired state.
Solution 1: Restore from Backup
The best way would be to locate a backup copy of the instance.cli file which contains the “missing” machines. Each VDI manager should retain backups of the .cli files in the following location:home/kvm/kvm/log/tmp/The files here are generated periodically and the dates are contained within the file names.Find the instance.cli with the desired machines and copy it using WinSCP or similar software to all the VDI managers in the grid, renaming the old, “bad” .cli file to .old. In order to replace the .cli file, you will have to stop tomcat on all the VDI managers.
Solution 2: Recreate the individual records for each machine using metadata from a similar VDI
If no backup exists, one can use a reference machine to build a new instance record for the missing machine. You will be copying the metadata of a similar machine and replace only the data specific to the missing machines. Complete the following steps to resolve the issue:
Verify the contents of the Instance.cli files in the following location on all VDI Managers using Winscp.exe or similar software:	/home/kvm/kvm/install/servlet_container/webapps/dt/WEB-INF/etc/store
To avoid duplication of machines in VDI Manager, validate the "missing" VDIs are not in any of the instance.cli files across all VDI managers.
Copy the instance.cli file to your local machine for editing.
Obtain the metadata from an existing VDI machine created from the same Image/Template using the “bad” instance.cli file. You will see the following data or similar for each VDI currently in the grid:
Obtain the missing machines' machine ID (line 17) from the kmgr logs. Logs:	/home/kvm/kvm/log/kmgr
In the logs, search for the machine that is missing. You should be able to find a historical reference if the machine was functioning at some prior point.	For example, search the following text from the log: Lifecycle.start recorded instance Instance [1425380da75- 1220,1425380da75-1041,1466d024a35-1000,null,akrier,RUNNING,192.168.1.1,HOSTNAME]	The first three GUID numbers listed here are (in order from left to right) the Machine ID, Template ID and Resource ID.
Get the pvd.name from the Storage location.
Copy the metadata form the reference machine used in step and paste into the instance.cli file on your local machine. Ensure to leave a blank line in between the machines listed in the .cli file. Most of the metadata will be the same as the reference machine used in step 4. You will need to change the data for the following lines :
computernameidipaddressmacaddressnamepvd.nameusername
Replace old instance.cli file with your new instance.cli file for each hypervisor.
Stop the Tomcat service on all VDI manager server using the Console view from your hypervisor: tc_stop
Replace the instance.cli file using winscp.exe.
Start the Tomcat service: tc_start
Verify in the VDI Manager if the virtual machine appears in the list and a user is able to connect.
This behavior can be caused if the account that is configured to access the Hypervisor has changed or is wrong.
For more information on using shared storage to provide highly available personal desktops, see CTX136080 - Providing High Availability for VDI-in-a-Box Personal Desktops using Shared Storage.
The related knowledge base article is available at http://support.microsoft.com/?id=976494
VDI-in-a-Box 5.3 License service is very sensitive to changes, especially the etc/hosts and ect/sysconfig/network file. Any updates or modification of specifying a different hostname or IP Address to the etc/hosts and ect/sysconfig/network file produces this behavior and causes the license service to not start.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
Other key commands:
Type vdin from a command prompt and press Return to change the directory to c:\program files\citrix\vdi\inside.
Type start logs from a command prompt to open the logs directory in Explorer.
Type vdilogs from a command prompt to automatically start the logs directory.
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
The most common problem when applying a GPO is that either some, or all, of the settings are not applied to the virtual desktops. This can happen for any number of reasons, but we have found these to be the most common:
The user accounts and computer accounts reside in different OU’s, so the group policy is not applied. Loopback processing mode must be enabled. More information can be found through the following Microsoft links:

http://support.microsoft.com/kb/231287
http://social.technet.microsoft.com/wiki/contents/articles/windows-server-understand-user-group-policy-loopback-processing-mode.aspx
A security filter is applied to the GPO so it only applies to a specific user, group, or computer object. Some additional Microsoft links:

http://technet.microsoft.com/en-us/library/cc759506(v=ws.10).aspx
http://social.technet.microsoft.com/Forums/en-US/winserverGP/thread/bfdcf328-e7f9-4aba-b89d-455578bc82eb/
The virtual desktops were spun up before the GPO has been applied. A GPO can be forced to update on the domain controller through the gpupdate /force command, and then can be run on the virtual desktops. Some policies can only be applied after the user logs out so it might require desktops to be restarted or refreshed.
It is always important to test group policy results before rolling them into a production environment to ensure nothing breaks and that permissions are applied as you want them to. A nice tool to use is the Group Policy Modeling Wizard in Group Policy Management Editor console. This lets an administrator simulate the results of group polices without needing to guess-and-check on the actual desktops. More information about the GPMW can be found using the following links:
http://technet.microsoft.com/en-us/library/cc771389.aspx
http://www.petri.co.il/group-policy-object-modeling-windows-server-2008.htm
CTX131553 - XenDesktop FAQ - Personal vDisk
CTX130147 - Citrix Scout
Understanding Personal vDisk (PVD) Log Files Part 1
Com port redirection was previously enabled by default. In VDI-in-a-Box 5.3, COM Port Mapping is disabled by default.
The website uses Real Time Message Protocol (RTMP) for streaming the video. Because of the security measures, additional required ports are used to stream videos with RTMP and prevent Client Side Redirection to display the video as expected.
HDX ADGroup Policy Management (Citrix Group Policy Engine) download – http://www.citrix.com/downloads/vdi-in-a-box/product-software/vdi-in-a-box-5-1.html
CTX125152 - Citrix Group Policy Engine Facts in XenApp Version 6.x
The related knowledge base article is available at http://support.microsoft.com/?id=976494
CTX122544 - How to Enable or Disable Citrix Desktop Toolbar in Web Interface
Advanced Citrix Receiver Session Policy
To create advanced session policies, follow the instructions in Citrix Documentation - Creating a Session Policy and Profile for the NetScaler Gateway Plug-in.
The policy that is created using the Access Gateway wizard allows iOS and Android devices to connect to VDI-in-a-Box desktops through the web interface without any further configuration.
To allow iOS and Android devices to connect directly without going through the web interface, a separate session policy must be manually added using the following settings:
For the Web Interface Address field, use the VDI-in-a-Box Grid IP address in the following format (path is case-sensitive):
https://vdiGridIP/dt/PNAgent/config.xml
Type the AD domain into the Single Sign-On Domain field.
No additional authentication policy must be created.
Do the following to configure NetScalar to allow the users to connect to the VDI-in-a-Box directly through the Receiver:
On the session policy profile, configure the following settings:
Clientless Access: Allow
Clientless Access URL encoding: Clear
Plugin Type: Java
If the user has a large profile or the network connection to the User Store is slow, the shutdown mechanism of the desktop might terminate the network connection before Profile management completes writing the profile to the User Store. The result displays an incomplete version of the profile on the User Store.
By default, PNAgent is configured to Always prompt the user before starting a session.
Response from Microsoft
This error can occur in the following scenarios:
If an application or driver creates a registry key that contains more than eight kilobytes of data.
If an application or driver creates a registry key with incorrect or corrupt permissions.
Following are some of the possible causes:
Caution! Refer to the Disclaimer at the end of this article before using Registry Editor.
Installation of HP LasterJet 8150 driver which creates the following registry key:			HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Print\Providers\Client Side Rendering Print Provider\<sid string here>\Printers\Connections\<name of the printer type, location, etc.>!RemotePrinterCache
Installation of third party program that created and or modified the following registry key:			HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Installer\UserData\S-1-5-18\Products\00002109110000000000000000F01FEC\Features!VSTAIDEFiles
Installation of Daemon Tools created following registry key with incorrect permissions (Administrators and system did not have Full Control)			HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\sptd\Cfg
Installation of Lotus Notes or Lotus Communicator created the following registry key that was bigger than 8k.			HKEY_LOCAL_MACHINE\test\Microsoft\Windows\CurrentVersion\Installer\UserData\S-1-5-21-1928666829-3700675070-3932613355-500\Products\BF554AA4EEFBC374AAE0F4AD05F5F67B\Features!Sametime”
CTX132235 - How to Create SSL Certificate for VDI-in-a-Box Virtual Appliance
Desktop Receiver was not installed correctly.
A video configuration on the computer is incompatible with the Office 2013 feature set responsible for displaying the animations in an application.
This behavior is a Microsoft anti-piracy measure. Virtual Machines running Office are considered separate instances.
CTX132234 - How to Install SSL Certificate onto the VDI-in-a-Box Virtual Appliance
The following browsers are currently HTML5 enabled and supported:
Internet Explorer 10 (http connections only)
Safari 6 (not including Safari for iOS or Windows)
Google Chrome 27 and higher
Mozilla Firefox 21 and higher
Access through Google Chromebooks requires Chrome OS 27 or higher.
Refer to Citrix Documentation for the latest supported browsers: User device requirements.
This error might occur if there is a delay between the time HDX Connector Service receives a ticket validation request and the ticket is validated by the vdiManager Server.
This Delay is because of the following reason:
During the SSL connection, windows update is invoked to update the Root Certificates. This needs access to the Internet. If the machine is connected to Internet, no delay will be seen. If the machine is not connected, a 15 second delay is seen because that is the default timeout value for network retrieval of the updated Root Certificates.
This is as per design and not a bug according to the following KB article from Microsoft:
http://support.microsoft.com/kb/317541
http://support.microsoft.com/kb/279301
http://social.technet.microsoft.com/forums/en-us/winserverGP/thread/64D9A801-5281-487C-8D14-1B092C0DFFCF
http://www.windowsecurity.com/articles/Using-Restricted-Groups.html
http://www.symantec.com/connect/articles/using-restricted-groups-add-altiris-ns-service-account-workstations-local-administrators-gr
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
For more information on using shared storage to provide highly available personal desktops see: CTX136080 - Providing High Availability for VDI-in-a-Box Personal Desktops using Shared Storage
Incorrect permission assignment
EMF Viewer was trying to launch for every single letter which was causing the freezing issue.
https://technet.microsoft.com/en-us/sysinternals/pstools.aspxhttps://technet.microsoft.com/en-us/sysinternals/dd996900.aspx
The client machines when connecting externally will not have access to the Issuing CA and Root CA certificate in the internal Network. The certificates should be manually imported to the client machine either through a GPO or copying the certificate and putting it in the "Trusted Root Certification Authorities" and "Intermediate Certification Authorities" respectively.
Custom CSR's created through Windows MMC don't include the Private Key
ASP.NET is not registered in IIS.
RSA modules cause w3wp.exe crash.
RADIUS_NAS_IDENTIFIER  or RADIUS_NAS_IP_ADDRESS value was missing from the Web.Config file.
Policy missing on NetScaler.
If there is a time skew between the RSA server and the Web Interface server, the authentication attempt will fail and produce the above error.
TCP and/or UDP port 464 was blocked on the Web Interface Server
The XML broker is reporting a full load and temporarily removing the XML brokers from its active list of servers (which it should not do). In a CDF trace taken on the XML Brokers at the time the issue occurs this will be appear as "mfserver-overload", which is a normal message as the server is at full load, but in this instance the "mfserver-overload" is removing the XML broker from the list of brokers.
If you have built a website using one of the above vulnerable ASP.NET Framework versions, and relied solely on the included ValidateRequest Filter for Input sanitization, then you may be vulnerable. If, however, you securely coded your website, and employed additional custom filtering techniques, then you are likely not vulnerable, since sole reliance on the ValidateRequest Filter for input sanitization is the main risk.
Incorrect external IP address in Site configuration.
Configuration
Authentication point of the website at web interface.
Below are the behavioral changes in Xenapp 7.x as compared to Xenapp 6.x.
A user can have any number of desktop sessions (unless limited by configuration).A user can have only one application session per delivery group (per endpoint, depending on reconnect setting).If the user wants to have multiple applications launched from the same delivery group, the applications need to session share, and session sharing is possible only with seamless applications.If  the user wants to have multiple applications launched with each application in its own session (applications are not seamless, and so can’t session share), the applications needs to be published from different delivery groups.
When the Apply Windows key combinations setting is set to On the remote computer, the RDP client hooks into the keyboard at a lower level and this doesn’t appear to interact properly with the Presentation Server’s Unicode keyboard support.
Port 1494 was open to the Web Interface servers and not to the XenApp servers.XenApp servers had the alternate address but firewall was blocking access.
The display issue is due to limitation on browser.When zooming website with "Compatibility View" enabled, object inside Web Interface may get larger size which caused the issue.
IIS
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Transaction RequestAddress did not complete within the expected timeTransaction RequestValidateCredentials did not complete within the expected time
Microsoft security update MS16-014 has changed the behavior of the API NetUserChangePassword.
Secure Gateway and Web Interface are only supported with SHA-1 certificate.
The Secure Gateway supports two main categories of Cipher suite: COM (commercial) and GOV (government). The ALL option includes both the Commercial and Government suites.
The COM Cipher Suites are:
SSL_RSA_WITH_RC4_128_MD5 or {0x00,0x04}SSL_RSA_WITH_RC4_128_SHA or {0x00,0x05}
The GOV Cipher Suite is:SSL_RSA_WITH_3DES_EDE_CBC_SHA or {0x00,0x0A}
Some organizations, including U.S. government organizations, require the use of government-approved cryptography to protect sensitive but unclassified data.
AES encryption cipher is not enabled.
IIS default application pool recycling scheduled for 2:00 AM.
http://docs.citrix.com/content/dam/docs/en-us/archive/web-interface/en.web-interface-5-4.pdf
The site was configured as gateway direct however the installing the certificate on IIS directs the HTTPS traffic directly to the Web interface instead of the Secure Gateway.
This problem occurs because the NT Authority\Network Service account does not have write access to the “C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files” directory.
A Configuration problem
Sha 2 certificates causing authentication issues.
Audio has not be enabled on the Citrix Receiver for playback of multimedia files.
Call Back URL configured on Web Interface is unable to reach the NetScaler Device.
-User's browser proxy setting.
Mismatched ports.
The port for the STA was not specified on the WI server
In Secure Access > Specify Gateway Settings, the port is misconfigured.
CTX131137 - Error: "503 Service Unavailable" Appears on Web Interface on the Cloned XenApp ServerCTX120153 - Http Error: 503 Service Unavailable
Web Interface is configured to use NetScaler Virtual IP on which XML brokers are load balanced.
CTX200287 - How to Configure NetScaler Gateway 10.5 to use with StoreFront 2.6 and XenDesktop 7.6
Refer to Enabling RADIUS Authentication in http://docs.citrix.com/content/dam/docs/en-us/archive/web-interface/en.web-interface-5-4.pdf
The Java version that was installed with NetScaler 10.0 is not compatible with the new FreeBSD version that is running on NetScaler 10.5.For NetScaler 10.5 and later releases, Web Interface on NetScaler (WIonNS) must use the OpenJDK7 package since NetScaler now uses FreeBSD 8.x/amd64. You can download the package from either one of the following links:
http://ftp.freebsd.org/pub/FreeBSD/releases/amd64/amd64/8.4-RELEASE/packages/java/openjdk-7.17.02_2.tbzftp://mirror.is.co.za/FreeBSD/ports/amd64/packages-8.4-release/devel/openjdk-7.17.02_2.tbz
When the NetScaler is upgraded to version 10.5, it still has OpenJDK1.6 instead of OpenJDK1.7 which is required for NetScaler version 10.5. Therefore, when the configurations are saved (after upgrading), the Web Interface sites become inaccessible.
Administrators have configured  a PNAgent site on Web Interface through NetScaler Gateway which is NOT a supported configuration.
CTX133903 - How to Make StoreFront the Default Page within IIS
The older Citrix Online Plug-in does not support SHA256 signature algorithm.
Please refer following article to create and install a certificate on IIS:https://www.digicert.com/ssl-certificate-installation-microsoft-iis-7.htm
The following are the causes for this issue:
Nested group extractions is not enabled on the authentication server on NetScaler for the newly added domain.
Single Sign-on domain set in published applications tab for the NetScaler Gateway virtual server is incorrect.
The test user account is expired.
Multiple Web interface Sites with Multiple STA servers in the same order are not load balanced.
The issue was caused by the following:
The STA servers configured in Web Interface were not load balanced.
Every Web Interface server had the same list of STA servers in the exact same order.
In some environments, the NetBIOS protocol is used to resolve names. The NetBIOS protocol slows down the enumeration and might then fall back to the Domain Name System (DNS) protocol to resolve the IP address of the XenApp Server. This behavior can be verified by performing a Network trace on the Web Interface server and confirm if NetBIOS traffic is flowing through the Network (Port 139).
This issue could occur if SSON/Pass-through is not enabled on the Citrix Receiver.
Microsoft TechNet - IIS Application Pool
Starting with Web Interface 5.1, the refresh link is no longer included in the display of the webpage. The link was removed because the ability to refresh became more common in browsers. It was also removed to change the aesthetic of the website display. A page content refresh using the refresh function of the web browser itself accomplishes the same task
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
Citrix eDocs - Web Interface 5.4
Internet Explorer 11 Compatibility View
This issue is caused by using ICA files instead of Citrix Receiver.
Upgrading Firefox to 30.0
CTX119733 - Users cannot Access Applications when Alternate XenApp Server Addresses are used with Web Interface 5.0 or Web Interface 5.1CTX123839 -  SSL Error 29 Occurs after Upgrading to Web Interface 5.2CTX128436 - How to Enable DNS Address Resolution in XenApp 6.x
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
DeisredHRES and DesiredVRES can be set to any desired resolution, such as 800x600 or 1024x768.
If the application needs to run in a percent of screen size, then after TWIMode=Off, add the line ScreenPercent=90 which sets the screen to 90 percent.
This can also be done with the Program Neighborhood Agent site. Ensure that the corresponding file under the conf folder for that site (Inetpub\wwwroot\Citrix\PNAgent\conf) is edited.
If using the 10.x client, and editing the default.ica or template.ica file, then add only the TWIMode=Off line. It obtains the HRES and VRES settings from the published application properties. Otherwise, an error appears indicating duplicate entries in the ICA file when a user tries to launch the application.
This behavior is by design. The Program Neighborhood Agent uses the WinINET.dll file to authenticate and communicate to the Program Neighborhood Agent site.
The Program Neighborhood Agent indirectly creates the PIN dialog using the WinINET.dll file using the underlying smart card CSP whenever access to a user's private key or other personal credentials on a smart card is required. In contrast if a Web Interface site is created, then PIN pass-through works. There is no prompt when logging on to Web Interface or when launching applications.
Secure Gateway Server was installed on the same XenApp server, which caused a change to the “ServerRootPath” registry string value on the server.
This issue occurs when the Windows Authentication role service is not installed on the Web Interface server.
A user first connects to the Web Interface Web site using the URL http://WIURL.domain.com/Citrix/Xenapp/auth/login.aspx. The Web site detects client software and then allows user to install software if necessary. This is done through the silentdetection.aspx script.To run this script the client is redirected to http://WIURL.domain.com/Citrix/XenApp/auth/silentDetection.aspx. If the case of the path published on TMG for this site does not match the folder structure on the IIS server that hosts the Web site or the user does not use correct case when typing the URL name then the WI site begins looping over TMG.TMG continues to create a GET request using the path in the Web Publishing Rule. WI continues to reply with a 302 redirection request to the path where silentdetection.aspx is held. However, TMG ignores this and continues to send the GET requests.
The issue is experienced when the XML broker is trying to request a logon ticket on farm member server where app is been resolved to launch. When the request to generate logon ticket fails, the XML broker returns an unspecified error in the ResponseTicket section.The cause for this unspecified error is caused by an Anonymous Logon and NTLM authentication attempt made to the XenApp server hosting the application, instead of Kerberos.On XenApp server hosting the application, the following log entry is written in the Security Event Log:
Event ID:      4624
Task Category: Logon
Level:         Information
Keywords:      Audit Success
User:          N/A
Computer:      xa5-2.amc.ctx
Description:
An account was successfully logged on.
Subject:
Security ID:          NULL SID
Account Name:          -
Account Domain:          -
Logon ID:          0x0
Logon Type:               3
New Logon:
Security ID:          ANONYMOUS LOGON
Account Name:          ANONYMOUS LOGON
Account Domain:          NT AUTHORITY
Logon ID:          0x9c788
Logon GUID:          {00000000-0000-0000-0000-000000000000}
Process Information:
Process ID:          0x0
Process Name:          -
Network Information:
Workstation Name:     XA5
Source Network Address:     -
Source Port:          -
Detailed Authentication Information:
Logon Process:          NtLmSsp
Authentication Package:     NTLM
Transited Services:     -
Package Name (NTLM only):     NTLM V1
Key Length:          128
When building a XenApp Kerberos-based authentication environment with Web Interface, the XML brokers must have XML shared with IIS in order to handle the Kerberos ticketing properly. By default, when XenApp is installed with XML shared with IIS, the Identity account for XML service application pools are set to Network Service.
Authentication Policy Configuration
If dual authentication is required on NetScaler Gateway (such as RSA SecurID and Active Directory) and there are no qualifying expressions defined in authentication policy other than "ns_true", RSA SecurID authentication must be defined as the default primary authentication type. Active Directory authentication must be the secondary authentication type.
RSA SecurID uses a RADIUS server to enable token authentication.
For more information refer to CTX125364 - How to Configure Two-Factor Authentication on NetScaler Gateway for Use with Mobile/Tablet Devices.
Citrix Documentation - Configure Access Gateway Enterprise Edition for Citrix Receiver for iOS
Citrix Documentation - To configure Access Gateway Enterprise Edition for Citrix Receiver for Android
# Please note that using Windows Receiver with Web Interface (including WI on NS) at the Backend is not supported at the NetScaler gateway level.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
CTX122871 - How to Prevent Web Interface Users from Starting Multiple Instances of the Same Resource by Clicking More Than Once
CTX118656 - Users Can Start Multiple Published Desktops that have Instance Limits
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
Following are the common causes for this issue:
The STA URL is incorrect.
The port number is not added to the STA URL.
If a non-standard XML port is used, the STA URL should also contain the port number.
When explicit authentication is used with Web Interface, by default the users who are logging on must have the log on locally right set on computers running as the Desktop Delivery Controller. If this user right is not present, the server will be unable to authenticate users to the Web Interface and PNAgent.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
This is by design. Web Interface 5.4 (and 5.4.2.59, the latest Public version available) does not support SHA-2 (SHA256) Certificates.
Citrix How To: Create a Site for Web Interface on NetScalerCitrix Documentation - Installing and Configuring the Web Interface
Deploy Client Plug-in
To access published resources such as; applications, content, and desktops, the users must have at least a supported Citrix plug-in or a supported web browser with the Java runtime environment.
To deploy a client plug-in, complete the following steps:
Run the following command in the command line interface, to create a directory under site path: mkdir "/var/wi/tomcat/webapps/[SitePath]/Clients/Windows/Online Plug-in"
For example: mkdir "/var/wi/tomcat/webapps/Citrix/XenApp1/Clients/Windows/Online Plug-in"
After copying the file to the specified location, edit the webinterface.conf file, as shown in the following screen shot:
Click Find as shown in the preceding screen shot to find the client entries in WebInterface.Conf file.	For example, ClientIcaWin32=Filename:CitrixOnlinePluginWeb.exe,Directory:Windows,Mui:Yes,ClassID:238f6f83-b8b4-11cf-8771-00a024541ee3
The # before the following client entries must be removed, based on type of client:
# ClientIcaLinuxX86=Filename:linuxx86- 11.100.158406.tar.gz,Directory:Linux,Mui:Yes,Version:11.100
# ClientIcaMac=Filename:Citrix online plug-in (web).dmg,Directory:Mac,Mui:Yes
# ClientIcaSolarisSparc=Filename:solaris.tar.Z,Directory:Unix,Mui:No,Version:8.59
# ClientIcaSolarisX86=Filename:solx86.tar.Z,Directory:Unix,Mui:No,Version:8.5 ClientIcaWin32=Filename:CitrixOnlinePluginWeb.exe,Directory:Windows,Mui:Yes,ClassID:238f6f83-b8b4-11cf-8771-00a024541ee3
#ClientStreamingWin32=Filename:CitrixOfflinePlugin.exe,Directory:Windows,Mui:Yes,ClassID:4384F3C5-4A9E-4E81-9AAE-4251C2813861
To Auto Upgrade clients at logon, remove the # in the following line within the WebInterface.conf file:	UpgradeClientsAtLogin=On
Run the following command from the shell prompt to restart the Apache Tomcat server: /var/wi/bin/stop_tomcat.sh	/var/wi/bin/start_tomcat.sh
Disable Client Detection
The following line in the WebInterface.conf file must be edited, if the clients wants to go directly to the application page. Change to Off from On and remove the # at the beginning of the line.EnableWizardAutoMode=Off (Default=On)
One of the following could have caused the issue:
IIS 7 - The Feature permissions for the site are set to Read, Script, and Execute.

IIS 6 – In the Default Web Site Properties under the Home Directory tab, the Execute permissions menu is set for Scripts and Executables.
The ActiveX Filtering feature is enabled in Microsoft Internet Explorer and is preventing.
Refer to the following resources on Citrix Documentation for additional information on all the configurable values of the Web Interface:
Citrix Documentation - WebInterface.conf parameters
Citrix Documentation - Customizing the Appearance for Users
Citrix How To: Create a Site for Web Interface on NetScalerCitrix Documentation - Installing and Configuring the Web Interface
Points to Note:
For changes in Web Interface on NetScaler 10.5 refer to Citrix Documentation - OpenJDK version for Web Interface on NetScaler (WIonNS).When you install Web Interface on NetScaler for a high availability setup, ensure that the same files are installed on the secondary and primary appliances.In a high availability setup, only the virtual IP address and not the NSIP address should be referenced in the NetScaler Gateway or other configurations.In "install wi package" command there is maxSites option which is used to control the number of sites that can be created. The maxSites option has a default value of 25. Therefore, if no value is specified, then you can create 25 Web Interface sites.The number of Web Interface sites that you can create depends on the free memory available on the NetScaler MPX appliance or VPX instance.You need to reserve minimum of 768 MB free memory exclusively for Web Interface. If the required amount of free RAM is not available, then the "install wi package" command fails indicating the maximum number of sites that can be configured on the NetScaler appliance. The following table lists the minimum memory requirement to create Web Interface sites:

Web Interface Sites
Memory Required (MB)
3
192
25
768
50
1280
100
2560
200
5120
500
12800
If you allocate more memory for Web Interface, then the number of concurrent Web Interface sessions supported for each site will also increase.The following table lists the recommendations for NetScaler VPX when maxSites value is set to 25:

Number of Web Interface Sites
Maximum Sessions Recommended
10
2000
5
4000
3
10000
Therefore, as the number of Web Interface sites increase, more memory is used for Web Interface sites and the memory available for concurrent sessions reduces. This results in lesser number of concurrent session that can work.
Useful CLI Commands
install wi package [-jre <URL>] [-wi <URL>] [-clearsites] [-maxsites <maxSites>]add wi site [-sitepath] [-agurl] [-wiauthenticationmethods ( Explicit | Anonymous )] [-sitetype ( XenAppWeb | XenAppServices )] [-publishedresourcetype <publishedResourceType>] [-kioskmode ( ON | OFF)]rm wi site [-sitepath]set wi site [-sitepath] [-agurl <string>] [-staurl <string>] [-sessionreliability ( ON | OFF )] [-usetwotickets ( ON | OFF )] [-secondstaurl <string>] [-wiauthenticationmethods ( Explicit | Anonymous )] [-authenticationpoint ( WebInterface | AccessGateway)] [-publishedresourcetype <publishedResourceType>] [-kioskmode ( ON | OFF )]bind wi site [-sitepath] [-farmname] [-xmlserveraddresses] [-xmlport <positive_integer>] [-transport <transport>] [-loadbalance ( ON | OFF )]unbind wi site [-sitepath] [-farmname]show wi site [-sitepath]
CTX122133 - How to Hide Applications and Application Folders for XenApp Web Sites in Web Interface 5.x
Citrix CTP Awardees
This issue occurs when the Do not process the legacy run list policy is enabled in Computer Configuration > Administrative Templates > System > Logon, as displayed in the following screen shot:
Caution! Refer to the Disclaimer at the end of this article before using Registry Editor.
Note: Enabling the policy, Do not process the legacy run list prevents a crucial part of Citrix software known as Citrix Session Helper from running inside the session of the user. Citrix software relies on this process to run within a user session as a trustworthy way of sending vital information to the broker. Without this information, the broker cannot reconnect to a disconnected session.
The registry key relied on is:
HKEY_Local_Machine\Software\Microsoft\Windows\CurrentVersion\Run
Citrix Session:
REG_SZ	C:\Program Files\Citrix\Virtual Desktop Agent\ctxidhlp.exe
A common cause of errors when users attempt to log on or launch applications through Web Interface is a hung or partially unresponsive XML broker.
Web Interface is typically configured with multiple XenApp servers as XML brokers in either failover or load balancing mode. Prior to version 5.1.1, when multiple XML brokers are configured, if any XML broker is able to respond over the network but unable to process requests from Web Interface, the Web Interface server simply waits for a response until it times out rather than failing over to the next XML broker configured on the site. The most common reason for the XML service to become unresponsive is because it is busy waiting for a response from the IMA service. Therefore if IMA on the XML broker is hung or unresponsive it impacts the XML service and so forth.
The end result is that new users logging on to Web Interface do not receive a list of applications for any farm. Web Interface times out (after approximately two minutes) with the error shown above. Additionally, end users who are already logged on are unable to launch applications.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
For more information about Citrix Web Interface customizations, refer to the Web page, Web Interface SDK	Oracle JDK Download
The installation method for Java version 7 has changed, which affects Web Interface 5.4 method for client detection.
The ActiveX control required by Web Interface is not allowed to run with your current Internet Explorer settings.
Citrix Documentation - Web Interface Parameters
User account expiration was not been checked properly when Farm Groups option was set.
This issue occurs when you enable the Active Directory Trust this computer for delegation to any service (Kerberos only) option with Passthrough and Explicit mode in the farm configuration of Web Interface.
This error might occur if user access was removed from the Allow Logon Locally or Access this computer from the network policy on the Citrix XML brokers. By default, users need access to the Allow logon locally policy. If the administrator does not want to allow this permission, then the administrator can configure a registry entry and use the Access this computer from the network policy.
Session sharing was redesigned in XenApp 6.5. With the new design, the session sharing key expires after 5 minutes. After the key expires, because of the different client name formats used in Web Interface and in the session list on the XenApp server, the existing session cannot be found after the key expires.
Note: Fix #LA3213 was previously released to address the issue. However, the fix causes a load balancing regression when using the same user account on separate devices at the same time. This regression issue cannot be fixed in the last version of Web Interface 5.4. Currently, there is no plan for a Web Interface fix or a replacement fix for #LA3213 for XenApp.
CTX121900 - Error: "Citrix XenApp Could Not Contact the Server"
CTX126692 - Error: 'Citrix XenApp Could Not Contact the Server' after Installing .NET 1.1 or 4.0 Framework in Web Interface 5.x
Environments that have Web Interface and Citrix XenApp Server (or XenDesktop Controller) on the same server with Network Load Balancing configured are not supported.
If Windows Network Load Balancing is installed on Citrix XenApp Servers, ICA connections might be load balanced by Windows Network Load Balancing.
If Windows Network Load Balancing is installed on XenDesktop Controller, it might break internal network communications between XenDesktop components.
Configure Windows Network Load Balancing for the Web Interface server only.
CTX115230 - Understanding-Shift-F11-Key-Combination-Behavior
This occurs because the hyphen (-) gets the url-encoded to “%2D”, which fails to match the cookie path only when the preceding conditions are met.
The issue is caused because the IIS installation is corrupted or it is completely removed from the server.
Some features of the Citrix Desktop Receiver version 11.1 toolbar or the latest version of the ICA client Desktop Viewer toolbar are not supported by XenApp published desktops.
To diagnose the problem, network trace was recorded from multiple locations and filtered for the following traffic:
Web Interface (10.217.96.161) <> LB Vserver (10.12.44.131)
XenApp XML broker server <> NetScaler MIP
The network trace captured between the Web Interface and the LB virtual server revealed that, enough time was consumed by the observed NetBIOS Name Server (NBNS or NBSTAT) queries.
The following screen shot shows the Web Interface Manage Server farms window, displaying the LB virtual server as the XML broker:
The Web Interface server's Windows operating system was automatically attempting to find the name of the machine being contacted as an XML broker, so a NetBIOS name query is initiated.
This inadvertently caused the delays because the LB virtual server does not allow NBNS requests to go through. The NetScaler responds with an ICMP Destination unreachable (Port Unreachable).
This results in additional seconds added to the user authentication, application list enumeration, and application launch transactions as it delays the HTTP POST to the /scripts/wpnbr.dll URL of the XenApp server XML service.
Note: The use of an ICA file in your environment for anything other than troubleshooting purposes is further outlined in CTX200126 - Support for ICA files in XenApp/XenDesktop Environment
The farm is configured with Web Interface 5.4, but it does not have the Enable Printer Mapping option enabled.
This issue might occur if the Web interface authentication ticket setting is active in the ICA client policy.
In certain scenarios, customers might have configured the Receiver to point to with XenApp Services sites hosted on Web Interface with farms existing on one or more domains. There is currently a limit of 11 characters for store names. This only affects the message presented to the user by the Receiver when a XenApp Services site is added to the Receiver as a Store.
Note: Stores hosted on StoreFront sever are not affected by this limitation.
The parameter “AllowCustomizeSettings” is set to “Off” in WebInterface.conf file that restricts the customization of Web Interface sessions. So, the Preferences is not displayed on the web Logon, Applications screen, and the settings in Web Interface Management console are disabled as shown in the following screen shot:Note: The WebInterface.conf file contains the configuration data of the site. This file can be used to perform the day-to-day administration tasks and to customize the settings for a site.
If you are using SecureICA to encrypt communications between users' devices and your XenDesktop or XenApp servers, note that Receiver for HTML5 supports Basic encryption only.
For information on policy setting for configuring session encryption and encryption of logon data refer to Citrix Documentation.
This behavior occurs by design. The following are characters this field accepts:
Alphanumeric (lowercase and uppercase)
The hyphen (-)
The full stop (.)
CTX135438 - How to Suppress the Add Account Window in Citrix Receiver for Windows
Citrix Documentation - Receiver for Windows 4.3
Internet Information Services is not recognizing the J# components installation.
Could not load file or assembly vjslib, Version=2.0.0.0
The 64-bit version of Visual J# Runtime must be installed on a 64-bit server.
There are three possible causes for this issue:
On 64-bit operating systems, the default Web Interface application pool is configured for 32-bit applications, preventing the Web Interface from using 64-bit RSA Authentication Agent for Web for Internet Information Services files.
The Web Interface is unable to locate the RSA Authentication Agent on the Web server.
The node secret used to ensure secure communication between the Web Interface and the RSA Authentication Manager became out of synchronization.
When IT Administrators created a XenApp Services on Web Interface with a custom path name, such as /Citrix/CustomPNA/config.xml, Receiver for WinRT 1.2 tries to connect to /Citrix/PNAgent/config.xml instead.
Though the NetScaler Access Gateway session profile settings have been correctly configured with the specific path URL, Receiver for WinRT does not honor this rule and instead tries to connect to /Citrix/PNAgent/config.xml.
From the NetScaler Access Gateway, users are authenticated as expected.
The IIS logs from Web Interface report the following errors stating Receiver for WinRT cannot find the path /Citrix/PNAgent/config.xml
2013-03-14 13:05:47 172.16.0.26 GET /AGServices/discover - 80 - 172.16.0.76 CitrixReceiver+WindowsRT/1.0+AuthManager/3.0.0.0+(Release) 404 0 2 1727
2013-03-14 13:05:47 172.16.0.26 GET /Citrix/Store/discovery - 80 - 172.16.0.76 CitrixReceiver+WindowsRT/1.0+AppReceiver/1.2.0.136 404 0 2 62
2013-03-14 13:05:47 172.16.0.26 GET /Citrix/PNAgent/Config.xml - 80 - 172.16.0.76 CitrixReceiver+WindowsRT/1.0+AppReceiver/1.2.0.136 404 0 2 108
Best Practice - in ASPNET.CONFIGFIX: A .NET Framework 2.0 managed application that has an Authenticode signature takes longer than usual to start
The ASPNET.CONFIG file is located in Framework Directory for the version of the Framework you are using.
For a 64-bit ASP.NET application:c:\Windows\Microsoft.NET\Framework64\v2.0.50727
For a 32-bit application:c:\Windows\Microsoft.NET\Framework\v2.0.50727
The certificate is corrupted and must be re-installed.
CTX114355 - NetScaler Gateway Ports Configuration on FirewallCitrix Documentation - Integrating NetScaler Gateway with XenApp or XenDesktop
The dual STA ticketing architecture currently applies only to NetScaler Gateway 10.5 e. You should not enable this feature in Web Interface if you are using Secure Gateway or Access Gateway Enterprise Edition version 9.x or earlier.
CTX123444 - Protocol Driver Error Appears when Launching Applications from a Web Interface 5.2 or Later Site
The issue occurs when the Secure Ticket Authority (STA) URL is not configured properly in Web Interface.
For example, the following image shows that the word “scripts” is misspelt as “script” and/or the port number is not included in the path.
Citrix Documentation - Configure fallback to the Client for Java
CTX117576 – How to Allow Secure, User-friendly Application Delivery with Web InterfaceCTX112429 – Secure Gateway for Windows Administrator's GuideRefer to the appropriate Web Interface Administrator's Guide for instructions on how to set the Access Platform site as the default page in IIS.Configuring Server Certificates for SSL (IIS 6.0)
This issue occurs when a change is made in the webinterface.conf file and the Web Interface on NetScaler is unable to process the change.
One of the following could be the cause:
Use of the heavy group policy and the presence of SCOM causing a deadlock condition between the Lsass.exe process, the Redirected Drive Buffering Subsystem (Rdbss.sys) driver, and the Winsock kernel.
Citrix XenApp servers return a full load when Advanced or Custom Load Evaluators are assigned.
There is a load balancing policy applied to worker groups, with no worker groups added.
This issue is caused by publishing an application to a Worker Group that contains no farm servers.
The error which occurs on the Web Interface server, (Event ID 30107), has also been observed in servers that do not publish applications to a worker group.XenApp 6.0 introduces the concept of Worker Groups, which allows you to publish applications to a group of servers as an alternative to publishing to individual servers. When an application is published to a Worker Group, it appears in the application set of the user.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
If multiple session support is enabled on a Windows server OS machine, WEM application security rules of previously logged on users are replaced by rules of a more recently logged on users.
In WEM Administration Console, "Environmental Settings" was configured for "Exclude Administrators" and End Users that needed the Drive Restriction Policies were part of the Administrator's group through Active Directory
The agent cache refresh is having a delay to be executed to then synchronize with the WEM server.
The Model database on SQL Server Management Studio was configured with an Initial Size of 100 MB for the PRIMARY file and not with the default value of 3 MB.
When using Profile Management, changes made to Citrix Universal Print Server printers (adding, removing, and renaming) in a session on one server might not be correctly reflected in subsequent sessions on another server. [#LC7645]
Service account did not have required permission to write to the Database or create new Database.  SysAdmin Permissions are required.
The option for "Bypass ie4uinit Check" inside the WEM Administration Console under the "Service Options" tab in the "Configuration of the Advanced Settings" section was unchecked adding a delay to the Agent processing.
WEM is unable to create a new database in SQL when the name of the database contains a hyphen ('-')
WEM Agent is reconnecting end user's session after logon and WEM is not configured to launch Agent when a user reconnects.
Known issue fixed in WEM 4.4:Links in "This PC" in Windows 10 do not reflect folder redirection, and still point to local folders.[#WEM-234]AND If you attempt to add an agent host machine to a configuration set when the agent host machine is in a different domain to the infrastructure service, the machine is not added in the administration console Active Directory Objects tab. This happens regardless of the actual AD topology involved (parent/child domains, multi-forest setups, one- or two-way trust relationships, and so on).[#WEM-326, #WEM-299]http://docs.citrix.com/en-us/workspace-environment-management/current-release/fixed-issues.html
For WEM Database, SQL Transaction logs were not being backed up/pruned using SQL Maintenance tasks
Known issue in WEM 4.0-4.3
Inappropriate permissions for Service Account used to connect to the WEM Database.
This is a known issue on x64 workstations (as WEM is running x64 it is using the x64 internet explorer engine). It’ll be fixed when WEM will move away from using the web browser but have a native interface with Storefront. Unfortunately there is no current time frame available for this.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Known issue/bug in WEM 4.3 and earlier
It is currently not possible to auto-launch published resources through the Norskale Transformer since iexplore.exe is the only trusted application to perform an auto-launch.
The WEM Agent machines were not assigned to the Configuration Set inside the WEM Administration Console.
The End User was assigned a Home Drive in Active Directory and this setting was over-ruling the same settings that was assigned in Workspace Environment Management
The following registry keys were excluded from UPM in WEM ExclusionListRegistry:Software\Microsoft\Windows\CurrentVersion\Explorer\TrayNotify;Software\Microsoft\Windows\CurrentVersion\Policies;Software\PoliciesBy deleting (or exclude from profile copy) registry hives where WEM has made changes, those changes will not be applied again at the next logon.
When WEM Agent machines are streamed using Provisioning Services, a timing issue can occur with the WEM Agent causing it to not properly sync with the WEM Broker upon login and thus cannot check in properly and pull down any/all configurations.
DirectoryEntry object is maintaining some cache that can corrupt memory when concurrent garbage collection is enabled
A backslash ('\') was added to the end of the network drive's share path
Application shortcuts were being deleted by clean up settings configured in WEM.
WEM "Configuration set" via the WEM Administration console was changed from the default value but the new value was not specified in the WEM Agent settings.Plus, when the WEM Agent first attempts to reach out to the WEM Broker to make a connection, there is a latency in the network or bad timing with the communication to Active Directory causing a timeout error to be reached while WEM Agent is first attempting to communicate with the WEM Broker.
FIPS was enabled which is not currently supported with WEM
The WEM Broker was not using Windows Authentication and SPN was not configured for Norskale/BrokerService.  When the WEM Agents were attempting to check in with the WEM Broker they failed to authenticate and this error was present in the Agent debug logs:"The Caller was not authenticated by the Service....The request for security token could not be satisfied because authentication failed."
The user's profile is not fully logged in when the WEM Agent tries setting up the application icons on the user's desktop and it fails as a result.
The Configuration for the User trends report inside the WEM Administration Console was filtering out the the majority of logins for each machine The value of "Boot Time Minimum Value" and "Login Time Minimum Value" was set higher than the majority of the actual time being taken to login or boot each machine and thus was filtered out of the graph as a result.
The account being used to launch the WEM Administration console was not added to the "Configured Administrator List" and thus did not have permissions to access the WEM Site.
Inside the WEM Database, within the dbo.VUEMAgents table, the HardwareID (MAC Address) for each machine in question was the same as all other machines in the problematic group.WEM Agents are uniquely identified by by the WEM Broker using this HardwareId which is the Mac Address of first connected Network interface on any computer/VM where the WEM Agent is installed.The WEM Broker was unable to distinguish between any 2 machines in this group since each machine had the same Network Interface with the identical MAC address attached as the first interface.
The New Database server to which the WEM Database was migrated did not have the vuemUser permissions configured correctly on WEM Database due to minimal permissions
The default path used for "Data file" and "Log file"  in the Database Creation Wizard did not exist on the SQL server.
ONE POSSIBLE CAUSE IS THE FOLLOWING:Citrix WEM Policy configuration for "Sitename" was set to empty value.Registry on WEM Agent:   "hklm\software\policies\norskale\agent host"Name: SiteNameType: Reg_szData: <NoValue>
Cause for POSSIBLE SCENARIO #1: Windows firewall on the WEM broker was blocking connections to the license serverCause for POSSIBLE SCENARIO #2: ​Customer is running with XA/XD Advanced licensing--WEM specifically requires XA/XD Enterprise or Platinum with active SACause for POSSIBLE SCENARIO #3:A different licensing server port is specified between the WEM Administration Console and the Infrastructure Service Configuration Utility.
Low resources for CPU and RAM on the WEM broker. We saw on the agent service log:
Exception -> ConfigurationDataSourcesHelper.CheckAgentBrokerServiceClient() : System.ServiceModel.ServerTooBusyException : The request to create a reliable session has been refused by the RM Destination. Server 'net.tcp://localhost:8286/AgentBrokerSvc/service' is too busy to process this request. Try again later. The channel could not be opened.
Exception -> ConfigurationDataSourcesHelper.CheckBrokerSvcConnection() : Broker Svc Check -> Failed
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Antivirus Software generally protects their related processes from adjustment by other processes in the operating system, such as WEM Agent Host. Workspace Environment Management 4.0, and Norskale VUEM Agent 3.5 before it, correctly identified this behaviour as expected but logged the event as an Error.
Multiple Causes matching the multiple solutions:Cause for Solution #1:  After the performing a WEM upgrade, the configuration in Broker Service Configuration Console may be randomly removed.  Cause for Solution #2  :If the Broker Service Configuration console contained correct values, the issue may be due to database corruption.Cause for Solution #3:  The Database Server may not be resolvable by the Hostname or even the FQDN due to DNS resolution issues.
This issue may arise with older versions of SQL and can be caused by specific behaviour of these older versions.
In order to optimise Windows performance, Workspace Environment Management has two caches stored in the registry:
a per-machine cache which stores non-user parameters (Microsoft USV, Citrix UPM) andone per-user cache which stores user parameters (assigned actions, start menu settings, etc.).
These caches are used to indicate which settings have already been applied and do not need to be re-applied.
In some cases (e.g. migrating a profile from a WEM server to a GPO server and back), the cached settings may cause the Citrix WEM Agent not to apply some settings properly.
To apply security settings such as these, Workspace Environment Management uses a local account called VuemLocalUser. If this user is not allowed to log on locally, WEM will not be allowed to apply security settings. There are several reasons why this right may not be allowed:
Reason 1. Your local or network password policies may be blocking the VuemLocaUser account
Reason 2. The VuemLocalUser account is explicitly denied the right to log on locally
Reason 3. The Process Environmental Settings option is not enabled
Reason 4. Your anti-virus is blocking access to the registry
Corrupt entries found in the Name column of the VUEMUsers table in the WEM database. When attempting to read the user statistics, the console cannot translate the corrupted entries as they do not have the correct SID format and thus errors out.
This error occurs when the broker's hardware specifications are insufficient to allow it to open enough concurrent threads to serve every request made by incoming agent service connections.
The WMI service failed to start before the Citrix WEM Agent Host Service attempted to start.
The vuemLocalUser account on the agent has no permissions to log on locally.
The account used by the administrator to open the Database Management Utility was already used as the Broker Service Account.The Broker Service Account already has an SQL Login as part of the database creation.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
Citrix and Microsoft identified issues surround the ThinWire remoting of the LogonUI component in Server 2016.
Known Issue addressed under LC8652 in XenApp/Xendesktop 7.15 LTSR and 7.17 CR.[#LC8652]​​The issue occurs when the expansion of groups assigned to control the limited visibility of an application is used for each user. This expansion process takes a long time to complete and can be observed in large networks having many groups that span multiple domains.
In App publishing scenario, XenAPP will check the availability of both monitors.However, when Citrix display driver was disabled and only leave Nvidia display driver enabled,  we cans see the below two Microsoft API returns abnormal value when reconnect ICA session: EnumDisplaySettingsExChangeDisplaySettingsExThis only happens when Citrix display driver was disabled and only leave Nvidia display driver enabled
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
• The SQL Query made us realize that Director is converting time adding 10 hours to final report.			• We can confirm that we save our data in UTC format to avoid conflicts between time zones.			• This is explained here https://docs.citrix.com/en-us/xenapp-and-xendesktop/current-release/director/data-retention.html
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check.http://https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Citrix recommends at least two Delivery Controllers on different physical servers to provide needed redundancy and scalability for your production Site. If your current Delivery Controller fails, your users won't be able to access your Site. You can hide this alert if this was found in a non-production environment.
Citrix recommends that all Delivery Controllers in the Site have the same version of XenApp and XenDesktop installed.
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Naming convention disallows the use of underscore in the DNS names unless they are for SRV records
There is an application window blocking the Citrix pre-logoff checkNormally we can identify the app and add to following registry:HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Citrix\wfshell\TWIValue Name:LogoffCheckSysModulesType:REG_SZHowever, in this case, due to huge amount of applications are published, it is not easy to identify the problematic App that blocking the logoff
Delivery Group is configured with incorrect Time Zone
NetScaler intermittently modifies the packet due to which VDA closes the connection.CDF shows error: 'WdDropSession - Dropping session to save server'
Citrix Studio is unable to find the files that are required for the localization of the policy.
How to use PowerShell to Change XenDesktop SQL Connection String​https://support.citrix.com/article/CTX140319
Linux Receiver issue
1. DNS suffix on the affected server may not correct in case of cross forest environment if Trust Type between both forest is External.2. XenDesktop controller hostname been renamed.
Issue is with ADFS. Issue occurs if  ADFS is configured to listen only on TLS 1.2
[DBName].[MonitorData].[MachineFailureLog] has NULL entries in the Failure End Date column
Installation of KB4088875 on March 14th, 2018 caused the BSOD: "SESSION_HAS_VALID_POOL_ON_EXIT (ab)" Other facts to be aware:Before installing KB4088875, this KB must be installed: KB4099950 After installing KB4088875 this KB must be installed: KB4100480After installing KB4088875 this KB must be installed: KB4099467
Issue identified with the Citrix Director User Interface.
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
What difference does this make when inserting an SD Card during an existing Citrix session?Citrix monitors the USB Bus all during the session.  Changes, as determined by policy, are redirected to the existing session.The PCI bus, (or PCIe Bus) is not monitored.  Additions or removals to the PCI Bus are not redirected to an existing session.SD Cards can be attached to the USB bus or the PCI bus.  Newer hardware uses the faster PCI Bus for the built-in SD Card reader.
Insufficient access to the registry hive "HKLM\SOFTWARE\Wow6432Node\citrix\Euem\LoggedEvent".
EMF Viewer was trying to launch for every single letter which was causing the freezing issue.
Ran Get-MonitorConfiguration and found that the below settings were set to False:EnableDayLevelGranularityProcessUtilization                                                                             False                                                                                                                  EnableHourLevelGranularityProcessUtilization                                                                            False                                                                                                                  EnableMinLevelGranularityProcessUtilization                                                                             False
From the CDF Traces collected on Delivery Controller,  we found that Nutanix plugin was unable to offer bulk power state updates, and also there was a huge delay in carrying out power ops (shutdown in this case case taking more than 10 minutes) . Updating or even shutting down 1000+ machines in 30 with 50 new power actions to be processed per minute by the hypervisor seemed to be an overzealous target.
Issue was identified as the StoreFront server marking the cloud connectors as offline when there was a network interruption. Changing the value of  bypass duration time resolved the issue.
Transport type set as HTTPS in Deliver Controller configuration on Storefront.
Antivirus McAfee was blocking SqlLocalDB.msi (or other MSI included in ISO) until it has been scanned.The file is locked by AV so MSI Installer considers it as not accessible.Then installation failed with MSI error 1619
-Logon server of SQL server is the DC which is out of sync, and doesn't have data of newly created user/machine accounts.-If you check the replication status on DC, we may see below mentioned error for the non-working DC
The DLL responsible for starting the load of seamless functionality (ctxnotif.dll) was not loading correctly because a dependent DLL couldn't be find in the Windows PATH variable. C:\Program Files (x86)\Citrix\System32 was included in PATH, but a third party application's directory was taking priority.
Windows 10 v1709 was released with enhanced Windows Defender security, which now controls Windows Firewall.
memory corruption by race condition
This is by design.
https://docs.citrix.com/en-us/xenapp-and-xendesktop/current-release/system-requirements.html
SHA-2 (SHA-256) is necessary on installing VDA 7.15 LTSR CU1
In SQL 2014 Database we have observed that the Transaction Log has grown to 175GB and taking DB backup didn’t shrink them
Some service instances might not registered to the site DB
One of the catalog was mapped to incorrect domain
Presence of 3rd Party Credential Providers delays Desktop Launch
According to the error message, we found this errorAttemptConnection: Inner exception is System.ComponentModel.Win32Exception (0x80004005):As we can see the Kerberos related error is related to “Win32Expection” and the crash point is in System.componentModel which is Microsoft component.It failed on SSPI negotiation. 245650,0,2018/01/30 13:27:47:13342,9344,1820,0,BrokerAgent,_#dotNet#_,0,,1,Error,"ControllerConnectionFactory:AttemptConnection: Inner exception is System.ComponentModel.Win32Exception (0x80004005): The Security Support Provider Interface (SSPI) negotiation failed.   at System.ServiceModel.Security.WindowsSspiNegotiation.GetOutgoingBlob(Byte[] incomingBlob, ChannelBinding channelbinding, ExtendedProtectionPolicy protectionPolicy)   at System.ServiceModel.Security.SspiNegotiationTokenProvider.GetOutgoingBlobProxy.GetOutgoingBlob(ChannelBinding channelBinding)   at System.ServiceModel.Security.RequestSecurityToken.GetBinaryNegotiation()   at System.ServiceModel.Security.WSTrust.Driver.WriteRequestSecurityToken(RequestSecurityToken rst, XmlWriter xmlWriter)   at System.ServiceModel.Security.RequestSecurityToken.WriteTo(XmlWriter writer)   at System.ServiceModel.Channels.Message.OnWriteMessage(XmlDictionaryWriter writer)   at System.ServiceModel.Channels.BufferedMessageWriter.WriteMessage(Message message, BufferManager bufferManager, Int32 initialOffset, Int32 maxSizeQuota)   at System.ServiceModel.Channels.TextMessageEncoderFactory.TextMessageEncoder.WriteMessage(Message message, Int32 maxMessageSize, BufferManager bufferManager, Int32 messageOffset)   at System.ServiceModel.Channels.HttpOutput.SerializeBufferedMessage(Message message, Boolean shouldRecycleBuffer)   at System.ServiceModel.Channels.HttpOutput.Send(TimeSpan timeout)   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.SendRequest(Message message, TimeSpan timeout)   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)   at System.ServiceModel.Security.IssuanceTokenProviderBase`1.DoNegotiation(TimeSpan timeout)",""
The Citrix Offline Plugin was not installed on the server causing the error.
This is happening when services are set as “Running” in all the service tables.
The disk space on Identity disk is filled up with third party application files e.g. Backup log, application log file or antivirus logs etc.
CRL Check by Session Recording player failed resulting in the error. Session Recording player uses Microsoft API RemoteCertificateValidationCallback to perform CRL check and the return value of this API indicates there are problems in the Certificate infrastructure.
Clients store their license under the key:
[HKEY_LOCAL_MACHINE\Software\Microsoft\MSLicensing]
The MSLicensing key contains two sub-keys used to store both unique client-specific information and any license certificates obtained from license servers.
HardwareIDStore
HardwareID stores a Random 20-byte identifier specific to the client machine and is generated automatically by Windows. This ID uniquely identifies the machine to the license server. When a client is allocated an RDS CAL from the license server, this HardwareID is recorded in the licensing database to associate the client with the CAL. This entry is made when clients are allocated both temporary CALs and permanent licenses.
Store is used to store the terminal services CAL allocated from the license server.  Entries are contained in sub key named License00x, where X is a numerical ID beginning with 0.  Each License00x entry contains a separate CAL.
Please refer the below Microsoft article that explains more about the situation : https://blogs.technet.microsoft.com/askperf/2015/05/08/multiple-per-device-rds-cals-are-issued-the-same-device-issue/
The cpviewer.exe will not reprocess the EMF spool file and directly send it to the spool ,which will not invoke the prompt for security PIN/Password, selecting the policy setting "Reprocess EMFs for printer" will force cpviewer to reprocess the EMF spool file and the resolves the issue.

Reprocess EMFs for printer forces the EMF spool file to be reprocessed and sent through the GDI subsystem on the user device. You can use this setting for drivers that require EMF reprocessing but that might not be selected automatically in a session.
Group policy could be the cause of the issue.
vCenter server certificate was issued to  localhost.localdomain
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Insufficient previleges on VMWARE Distributed Switch Level causes this exception where XenDesktop cannot modify the Network Adapter settings on the Preparation VM and hence we get the failure point while create the Preparation VM and encounter an error "The given key was not present in the dictionary" because of the permission issue.
MTU alteration not accounted dynamically by EDT, and IP Fragmentation not handled properly by the VPN solution.
Hosting connection was broke after change made on the Hypervisor with the upgrade process.
From the Process dumps of  MPXAXD agent collected after enabling User Mode Stack Tracing, we found that  memory spikes seems to be related to two SCOM monitors that restart the MPXAXD Agent service in case of high memory / CPU consumption.

We identified this issue with other customers and also in our large test environments with high amount of monitoring data, we now recommend the thresholds for CPU and memory monitors for MPXAXD agent to be increased/disabled .In these cases the monitors cause unnecessary restarts of MPXAXD agent, which results in memory spikes, since the Citrix MPXAXD Agent needs to load everything already discovered and monitored for the last 24 hours back in the memory to avoid any potential data loss.

This has been documented in new SCOM XA/XD Management Pack release 3.14.
https://docs.citrix.com/en-us/scom-management-packs/xenapp-xendesktop/3-14/performance-overview/config.html​
Orphaned Remote desktop TCP/IP ports causing the session process not to exit completely which prevents Citrix group policy application.
Also, Citrix client side extension was out of date.
User belongs to multiple groups, the token size is impacting the logon process.
++ This can happen after installing any Rollup pack. ++ Can happen if the Custom Advanced Load Evaluator has been corrupted. ++ It can also be caused if any change was made to the Zones / Servers added or removed or any DB corruption.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Conflict with Microsoft Updates. Specifically, KB4034664.
License server cannot connect to cis.citrix.com
Adobe Flash technology and content is frequently updated on many websites that might impact Flash Redirection particularly with Internet Explorer 11.
The Delivery Controller is running a later version of  XenApp and XenDesktop than the database server
The Database cannot be reached, a Citrix XenApp/XenDesktop Controller Service failed to connect to database with current connection settings.
The database is compatible and the service group for the Controller Service is available for registration. The Controller Service can communicate with the database, but no endpoints are registered in the Central Configuration Service. This can occur when the Site setup or upgrade did not complete, resulting in a partially configured Site.
One or more services were affected:ADIdentity ServiceAnalytics ServiceAppLibrary ServiceBroker ServiceConfiguration ServiceDelegated Admin ServiceEnvironment Test ServiceHost Availability Service Machine Creation ServiceMonitor ServiceStoreFront Service
Service communication within the Delivery Controller is not functioning properly. The Citrix Monitor service could not connect to the Citrix Broker service.
A database connection string has been specified for the Controller Service, but the database is not compatible or working properly.
Database access was denied for Citrix Monitor Service
This warning was by default referring a license getting close to the usage see below for details. The license consumption is in an increasing trend. This is a warning after a user connects to a computer running a Citrix product, the product requests a license from the license server and license gets checked out. License can be checked out to a user, device, session, server, or appliance, depending on the licensing model for a particular product. Users can eventually run out of available licenses. License Server Management Pack handles this situation in various ways.
The VDA’s ICA Listeners are restarted causing all of the sessions on VDA to get disconnected at once.  The VDA’s Event Log will show events for all the sessions disconnecting, followed by the ICA Listener being stopped and then started:
applog.csv  1054  Information,7/12/2017 4:11:58 p.m.,Citrix Desktop Service,1049,None,The session '36d9ed0c-5fba-4ddb-af51-d03ca04ef033' was disconnected.
applog.csv  1055  Information,7/12/2017 4:11:57 p.m.,Citrix Desktop Service,1049,None,The session 'ca28a1c3-0347-4235-88b7-dde1b6a735e7' was disconnected.
applog.csv  1060  Information,7/12/2017 4:11:56 p.m.,Citrix Desktop Service,1049,None,The session '27de3ab0-7854-4b62-8e9b-a442fbfc7753' was disconnected.
applog.csv  1066  Information,7/12/2017 4:11:54 p.m.,Citrix Desktop Service,1049,None,The session '0e11b36f-3dbd-4add-acfc-89589b1ac79f' was disconnected.
applog.csv  1067  Information,7/12/2017 4:11:54 p.m.,CitrixCseEngine,11,None,The Citrix Group Policy service completed RSOP calculation for computer.
applog.csv  1068  Information,7/12/2017 4:11:54 p.m.,CitrixCseEngine,10,None,The Citrix Group Policy service started RSOP calculation for computer.
If an User / group was deleted from AD, so SID will still be referring to Published application or Desktop in DDC.
Config Logging is hard-coded to use SQLOLEDB provider, and this provider is NOT supported for TLS1.2.
launching seamless application logon ui was never present to user.
The troublesome applications used the environment variable %program files% in Path to the executable file rather than the full path - the non-issue applications had a hard path (User had created other versions of Access using the duplicate applications feature.)
The existing grooming stored procedure did not delete the table record in chunks. If Monitor database table size is very huge, it increases the size of transaction logs. If in between the grooming operation times out, it does not commit the changes even for the tabled which have been groomed.
IMA crash was due to some unhandled exception in IMA’s GatewayRundownRoutine and that exception has been addressed in the Hotfix.
UPM uses adm/admx files to as policy templates. Usually, the adm file is programmed and admx file is generated via a convert tool from adm file. In this case, when handling string of variants, there is a bug in the convert tool, which will lose a character when converting adm file, making it failed when user attempts to load admx file.Its a known issue and citrix is working on it to resolve in upcoming release.
Roaming profiles on Windows 2012 R2 VDA need to be V4 in order to be able to reset from Citrix Director.
Adobe Forums - Sporadic display issues with pdf through Citrix session.
ICA file is being malformed due to third party software installed on the system. Often, this is due to antivirus real-time scanning such as the TrendMicro process ntrtscan.exe. Further validation can be performed by capturing a Process Monitoring trace and filtering on the path by the .ica file extension.
There are multiple possible causes for this issue:
The user on the target ICA session denied the shadowing request by clicking “No”:
The shadowing request timed out after 20s before the end user respond.
Introduction - Session Shadowing for Linux VDA sessionsHow to configure Session Shadowing for Linux VDA sessions
Error:"You are not authorized to perform this operation.View Director server event logs for further information"
Error: "Failed to connect to server"
Introduction - Session Shadowing for Linux VDA sessionsHow to configure Session Shadowing for Linux VDA sessions
How to troubleshoot Session Shadowing for Linux VDA sessions
Error:"You are not authorized to perform this operation.View Director server event logs for further information"
Error: "Failed to connect to server"
There are multiple possible causes for this issue:
The Citrix Director Client host can’t resolve the FQDN of the Linux VDA. If you’re using SSL encryption, the CA certificate is not correctly imported to the Citrix Director Client.
There are multiple possible causes for this issue:
The Delivery Controller is configured to enable SSL encryption for ICA sessions while Linux VDA doesn’t. Once the Delivery Controller is configured to enable SSL encryption, the generated .ica file will set SSLEnable to on, as follows:
SSLEnable=OnSSLProxyHost=sin-centos73.xd01.local:443
In this case, you can either disable SSL encryption on the Delivery Controller (if you don’t want to use SSL encryption) or to enable SSL encryption on the Linux VDA And Citrix Receiver will try to launch ICA session with SSL, but if Linux VDA doesn’t accept SSL connections, then the ICA session will fail.
This error sometimes appear even all the configurations are correct if you’re using Firefox version 52 or above to launch ICA sessions. In this case, ICA sessions can be launched successfully from another web browser (for example, IE) on the same client.
How to troubleshoot Session Reliability in Linux VDA
Introduction to Load Balancing for Session Recording
How to configure Load Balancing for Session Recording with NetScaler
CTX220730 - How to Confirm HDX Enlightened Data Transport Protocol is ActiveCTX220732 - How to Configure HDX Enlightened Data Transport ProtocolCTX230011 - EDT Session Connection/Reconnection Attempts using UDP and TCP in ParallelCTX230010 - Windows OS VDA 7.16 Schannel library support for DTLSCTX230012 - EDT Security using DTLSCTX231821 - How to Configure EDT when using VPN solutionsCTX231528 - Enlightened Data Transport Not working with Double Hop DMZ scenarioCTX226014 - Application Launch Fails with "Unknown client error 1110" When Using EDT/DTLS on NetScaler GatewayCTX224373 - XenDesktop 7.x Unable to launch published desktop with Adaptive transport policy enabled
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Session Reliability in Linux VDA
https://www.citrix.com/blogs/2017/11/06/html5-multimedia-redirection-state-of-the-union/
Issue happened because the client host can’t resolve the FQDN of Linux VDA.You can get detailed logging from CDF traces of Receiver:
+++++++++++++++++++++++++++++++++++++++++3358,1,2017/11/19 16:02:24:20666,9492,4788,1,HPC_ICA_ENG,Cgp_Api.c,348,Cgp_Connect(),9,CDF_INFO,"Connecting to 0.0.0.1:443",""3359,2,2017/11/19 16:02:24:50590,9492,4788,1,HPC_ICA_ENG,Proxy_Api.c,328,Proxy_GetAddrInfo(),9,CDF_INFO,"Proxy_GetAddrInfo: Cannot resolve hostname SIN-CENTOS73.XD01.LOCAL for non-proxy config. Returning NULL",""3360,2,2017/11/19 16:02:24:50591,9492,4788,1,HPC_ICA_ENG,SslASock_Api.c,525,SslASock_Connect(),1,CDF_FAILURE,"Host name (SIN-CENTOS73.XD01.LOCAL) could not be resolved",""3361,2,2017/11/19 16:02:24:50601,9492,4788,1,HPC_ICA_ENG,Cgp_Core.c,1075,_Cgp_UPTrace(),9,CDF_INFO,"CGPCore: CgpCloseSession called when session is not in a valid state.",""3362,2,2017/11/19 16:02:24:50603,9492,4788,1,HPC_ICA_ENG,Proxy_Api.c,145,Proxy_CloseSocketAndCaches(),9,CDF_INFO,"Proxy_CloseSocket: s=42952520",""3363,2,2017/11/19 16:02:24:50603,9492,4788,1,HPC_ICA_ENG,Proxy_Api.c,157,Proxy_CloseSocketAndCaches(),9,CDF_INFO,"Proxy_CloseSocket: WARNING: Socket never bound to proxy",""3364,2,2017/11/19 16:02:24:50606,9492,4788,1,HPC_ICA_ENG,Proxy_Api.c,174,Proxy_CloseSocketAndCaches(),9,CDF_INFO,"Proxy_CloseSocket: [SUCCESS] errno=0",""3365,2,2017/11/19 16:02:24:50608,9492,4788,1,HPC_ICA_ENG,Cgp_Core.c,620,_Cgp_CleanTimers(),9,CDF_INFO,"Cgp_Core:_Cgp_CleanTimers: Entry.",""3366,2,2017/11/19 16:02:24:50608,9492,4788,1,HPC_ICA_ENG,Td_Core.c,402,_Td_DeviceConnect(),1,CDF_ERROR,"TD Device connect error. Connection number: 0",""3367,2,2017/11/19 16:02:24:50675,9492,4788,1,HPC_ICA_ENG,Td_Core.c,1263,_Td_SetLastError(),1,CDF_ERROR,"TD Error = 1000040",""3368,2,2017/11/19 16:02:24:50676,9492,4788,1,HPC_WfIcaEng,***,0,StatusMsgProc,9,CDF_INFO,"IPC Status Msg = 1030  lParam = 0",""+++++++++++++++++++++++++++++++
How to enable or disable SSL Encryption For Secure User Sessions
Error:"SSL Error 61 You hav not chosen to trust "*.x.x", the issuer of the server's security certificate"
Error:"Cannot resolve the SSL Host name xxx.xxx.xxx (SSL error 40)"
Error:"The Citrix SSL Server you have selected is not accepting connections"
Issue happened because the client host doesn’t trust the CA certificate used by Linux VDA.
You can get detailed debug message from CDF traces of Citrix Receiver:+++++++++++++++++++++++++++++++++++++++++3389,2,2017/11/19 16:17:53:16149,9376,12008,1,HPC_ICA_ENG,SslASock_Api.c,728,SslASock_Connect(),3,CDF_INFO,"Starting direct SSL handshake",""...3394,2,2017/11/19 16:17:53:16242,9376,12008,1,HPC_ICA_ENG,Proxy_Api.c,363,Proxy_Recv(),9,CDF_INFO,"Proxy_Recv: s=10914416, len=18432",""3395,2,2017/11/19 16:17:53:16243,9376,12008,1,HPC_ICA_ENG,Proxy_Null.c,165,NullRecv(),9,CDF_INFO,"NullRecv: s=10914416, len=18432",""3396,2,2017/11/19 16:17:53:16243,9376,12008,1,HPC_ICA_ENG,Proxy_Null.c,169,NullRecv(),9,CDF_INFO,"NullRecv: SOCKET_ERROR, errno=10035",""3397,0,2017/11/19 16:17:53:17183,9376,12008,1,HPC_ICA_ENG,Proxy_Api.c,363,Proxy_Recv(),9,CDF_INFO,"Proxy_Recv: s=10914416, len=18432",""3398,0,2017/11/19 16:17:53:17183,9376,12008,1,HPC_ICA_ENG,Proxy_Null.c,165,NullRecv(),9,CDF_INFO,"NullRecv: s=10914416, len=18432",""...3426,1,2017/11/19 16:17:53:24638,9376,12008,1,HPC_ICA_ENG,SslASock_Api.c,757,SslASock_Connect(),3,CDF_INFO,"SSL Handshake completed with status 61",""3427,1,2017/11/19 16:17:53:24638,9376,12008,1,HPC_ICA_ENG,SslASock_Api.c,780,SslASock_Connect(),1,CDF_FAILURE,"Negotiation FAILED 61",""3428,1,2017/11/19 16:17:53:24665,9376,12008,1,HPC_ICA_ENG,Cgp_Core.c,1075,_Cgp_UPTrace(),9,CDF_INFO,"CGPCore: CgpCloseSession called when session is not in a valid state....3434,1,2017/11/19 16:17:53:24698,9376,12008,1,HPC_ICA_ENG,Td_Core.c,402,_Td_DeviceConnect(),1,CDF_ERROR,"TD Device connect error. Connection number: 0",""…3487,2,2017/11/19 16:17:53:24755,6692,6512,1,wfcrun,wfenghlp.cpp,2044,WFEngineStatusCallback,9,CDF_INFO,"WFEngineStatusCallback : Got an error message.",""3488,2,2017/11/19 16:17:53:24783,6692,6512,1,wfcrun,wfenghlp.cpp,2555,CEIP_IncrementCounter,9,CDF_INFO,"CEIP_IncrementCounter : Called to set value returned 0",""3489,2,2017/11/19 16:17:53:24784,6692,6512,1,wfcrun,wfenghlp.cpp,2051,WFEngineStatusCallback,1,CDF_ERROR,"WFEngineStatusCallback : Protocol Error 1030 occured, Error Message: SSL Error 61: You have not chosen to trust "*.xd01.local", the issuer of the server's security certificate.",""3490,2,2017/11/19 16:17:53:24787,6692,6512,1,wfcrun,wfenghlp.cpp,2063,WFEngineStatusCallback,9,CDF_INFO,"WFEngineStatusCallback : showErrMsg true.",""3491,2,2017/11/19 16:17:53:24791,6692,6512,1,wfcrun,wfenghlp.cpp,2070,WFEngineStatusCallback,9,CDF_ERROR,"WFEngineStatusCallback : Show the error.",""3492,2,2017/11/19 16:17:53:24791,6692,6512,1,wfcrun,helpers.cpp,879,LogStandardErrorMessage,1,CDF_STARTEND,"LogStandardErrorMessage: bMessagebox: 0. iErrorcode: 1030. nErrorResourceID: 2064.",""3493,2,2017/11/19 16:17:53:24793,6692,6512,1,wfcrun,helpers.cpp,893,LogStandardErrorMessage,5,CDF_ERROR,"LogStandardErrorMessage ERROR: Unable to launch your application. Contact your help desk with the following information: Cannot connect to the Citrix XenApp server.",""+++++++++++++++++++++++++++++++You can also see the connection aborted from /var/log/xdl/hdx.log:+++++++++++++++++++++++++++++++++++++++++2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdTcpRead: Entry2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdTcpRead: socket 232017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdTcpRead: read 0 bytes2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdTcpRead: Connection aborted2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdTcpRead: Exit: CONNECTION_ABORTED2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: DeviceWaitForRead: TdTcpRead failed: 26.2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: DeviceWaitForRead: Exit: CONNECTION_ABORTED2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdHandshake: TdRead, cnt 0000, Status=0x1a2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdHandshake: Exit, CONNECTION_ABORTED2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdHandshakeThread: Handshake failed: CONNECTION_ABORTED, td state: 6702017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdDestroyConnection: Entry: 0x1fdb5002017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdCgpConnectionDestroy: Entry: (nil)2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdCgpConnectionDestroy: Exit2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdSslConnectionDestroy: Entry2017-11-19 16:17:53.347 <P12942> citrix-ctxhdx: TdSslConnectionDestroy: Exit2017-11-19 16:17:53.347 <P12942> citrix-ctxhdx: TdDestroyConnection: Exit2017-11-19 16:17:53.347 <P12942> citrix-ctxhdx: TdHandshakeThread: (exit), Status=CONNECTION_ABORTED2017-11-19 16:21:08.133 <P12942> citrix-ctxhdx: FMTimerClose: FMTimerCancel failed: TIMER_NOT_ARMED+++++++++++++++++++++++++++++++
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Issue with the Studio component.
This issue can occur if the Receiver for Web URL is not added to the Trusted Sites list of the web browser on user's machine.
Issue caused by “Hardware Acceleration for graphics” on the Windows Receiver on the first hop VDA.
Although the Broker Service has been configured to listen on the non-default port the High Availability Service which takes over for the Broker Service may still be configured to listen on the default port (TCP port 80).  To confirm this run the following commands:Cd C:\Program Files\Citrix\Broker\ServiceHighAvailabilityService.exe /show
Example output below:
In this example the High Availability Service is set to listen on the default TCP Port 80.  If the VDAs are configured to use a different TCP port they will fail to register when the High Availability Service is active (LHC Mode).
User/ machine  needs to be member of the domain in order to open the studio
The network get disconnects when the machine goes into sleep mode till it is waked up. By design the ongoing Citrix sessions would be active, only if the machine is woke from sleep mode within 1-2 minutes. So it is by design.
XML Trust must be set to true when pass-through authentication is enabled and end-users receive Receiver GPO to add NetScaler StoreFront list GPO.
- Microsoft Access Form is not covering the taskbar as designed for Full Screen/Kiosk Mode- Seamless Engine is fitting the window as designed on top of the Taskbar- Seamless flag needed to tell the window to maintain fullscreen
Subscription Advantage had expired.
There is a timing issue where IMA Service initializes over incorrect NIC at the Server Startup.
The available licenses were consumed by the RDP sessions made on the VDA servers which is an expected behavior.
When user initiates an application launch, if "app instance limit" is met, a previous fix change to pop up an error message to honor this setting, however this allows a second session to be created.
In Seamless applications an entry is not being created in the User table of the State Repository Machine Database (%ProgramData%\Microsoft\Windows\AppRepository\StateRepository-Machine.srd). For RemoteApp, it is created.  If you ever launch a published desktop (RDP or ICA) it gets created.When there is no user record available in the User table, looking up what associated apps are available for the user in response to clicking a URL fails, which leads to the issue observed.
The XenApp Server was pointed to old SQL instance name of SQL Server.
Studio component missing from the DDC.Site was not upgraded to 7.14The below command shows the version number . This should match with the Delivery controller or XA/XD version.Get-configSite
Certificate being used for licensing server expired , server was untrusted on controller .
Transaction Timeout settings need to be configured on a case-by-case basis, depending on the environment.
http string mapping to port 80 missing in the services file
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Restored and Retained Printers shows unknown printers.
In the Published Application that user launches in RDP the window shows the same behavior as in our Published Application. Setting the window at the forefront sends the same event to the window as does a single click. Once a window of a Published Application gets launched, it would be the topmost window on the desktop. This mechanism is to explicitly notify the user that the application launch has completed.
This is a known issue in the product i.e if the Powershell version on the Citrix SCOM Agent Servers is 2.0 then the code in the Task is not able to use the "AgentInstallationSource" value that is passed as an override parameter.
VMs in the Delivery group don't have any Appdisks attached. Appdisks are there only in the Vcenter Datastore.
Not an issue, by design.
The fix LC2922 included in HRP07 changes the behavior of DWM.exe. This change can be reverted back with the registry flag introduced in LC3783.
The issue is due to ghost window support which might change the Z-order when an application is hung.
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check.http://https://discussions.citrix.com/forum/1729-smart-check/
Getting an error : Error Id: XDGP:E710408ASystem.ArgumentException Although the IP range is valid, the backend may not be able to honor this range correctly.
The issue happens due to frequent cursor hide/restore operations done in the client side. When these operations are carried in Windows 10 OS client, hour glass is seen.It can be fixed by reducing the cursor display operation and adding certain sleep between these operations. A Receiver private fixs resolved the issue .
We Verified that the Citrix Platinum Licenses were in place.We confirmed that Microsoft .NET Framework 4.5.2 or later was installed.However, Microsoft's Visual C++ Redistributable Packages for Visual Studio 2013 was missing on the Deliver Controller.
When copying i18n characters such as Korean from Office 2010, clipboard write allowed formats "CF_METAFILEPICT" is needed for paste.
The problem is that, by default, Windows Server does not include the HTML5 video codecs, and thus they’re not available to Internet Explorer.
If running Office 365 with Shared Computer Activation, then you might need to exclude !ctx_localappdata!\Microsoft\Office\15.0\Licensing and/or !ctx_localappdata!\Microsoft\Office\16.0\Licensing. Ideally you should have ADFS integration so users can seamlessly re-activate Office at every launch.
Issue related to the user profile. When a user profile is created by logging into a published desktop or RDP to the server, the issue is not observed. The issue is observed when profiles are created by just launching the published application.
Code changes introduced by MS in Media Player.
This issue can occur if the user does not have correct permissions to access the Sites information. The user should be part of the delegated administrator group.
This can happen for a number of reasons. This article address the situations where the machine account password needs to be reset. These are the non-destructive methods for fixing the most common causes for the trust relationship issue. For example:
Machine was restored to a system restore point or to a snapshot that is old enough to have a different machine account password than the one currently in use by AD. More than one machine on a network with the same hostname.AD Machine account object corruption.AD policy that would disable a computer after x number of days of not authenticating.Computer object in AD is deleted.
License server role installed on the DDC with no Licensing configuration. There was another dedicated Licensing server in the environment
What triggers the problems
The problem appears when all of the following conditions are met:
Windows 7 (or Windows Server 2008)The patches of KB4034664 or KB4034679 are fully installedThe currently logged on user is not a local System Administrator on the computer, but a user with limited rights or a domain userThe system has multiple monitorsThe monitors are setup such that certain parts of the screen have negative screen positions. For example a secondary monitor is setup to be left of the main monitor. Or a monitor is setup to have a higher top border than the main monitorAn application window is positioned so that it is within the area of the screen that has negative screen coordinates.This application window uses the Windows API function “StretchDIBits” (or a variant) to draw a graphic on a device context directly linked to that window.
Workarounds
These workarounds exist:
Upgrade to Windows 10 / Server 2012Uninstall KB4034664 / KB4034679 patches from the systemLog on with a user that is a full local administratorOnly use the application on the main monitor, not a secondary monitorArrange the monitors such that no part of a monitor has negative screen coordinates. (See details in next paragraph)
In Windows, when you have multiple monitors, one of these monitors becomes the main monitor. Screen coordinates are relative to the main monitor. So, screen coordinates can be negative when a monitor is positioned left of or higher than the main monitor. You can use the Windows control panel to change which monitor is the main monitor and to position the secondary monitors relative to the main monitor.
Microsoft Workaround
Enable Desktop Composition (needs graphics card support).Make sure that the main monitor is on the top left in the monitor layout.
Per Microsoft this issue has been resolved with KB4039884.
Patches in KB4034664 and KB4034670 Interrupted the multi monitor behavior with MS Office 2013
How to manually rebuild Performance CountersWMI: Repository Corruption, or Not?How to Enable Microsoft Installer loggingCTX111961 - CDFControlCTX132117 - Error: When Trying to Install or Remove XenApp Software, a 1603 Error Message is Displayed
How to Enable Full Page Heap When Creating Dump Files for Citrix Technical Support
This issue can occur because of below causes:1. Intermittent Network connectivity issues between Delivery Controller and SQL server hosting Monitor Database.2. Performance issues on SQL Database server.3.  On a busy site, it is likely that the connection pool will run out of connections before garbage collection kicks in.4.  Probably because of connection leak. Either the connection string do not close properly or consistently.
Citrix and Philips software logic.
Issue lies with the Windows rendering. Specifically something was changed within Windows 2012 and 2016 that slowed down this process, meanwhile we have been optimizing the response from client to server with each new iteration of XenDesktop.
The client states it is moving, the server receives the move command and begins to move, but the box behind is still labeled as being owned by the application, so the draw information that is provided is the inaccurate location, giving ‘blank’ or ‘unseen’ draw information (hence the black ‘shadow’)  As soon as the OS catches up, it goes away.
There are 2 problem cause:
Basically, VDA creates session printers by calling AddPrinterConnection function, and deletes created printers by calling DeletePrinterConnection function. Based on these function calls, Windows Print Spooler service creates or deletes network printers. However, since Server VDA 7.9, VDA no longer calls DeletePrinterConnection during session roaming. As result, session printers are not deleted by Print Spooler service. This is an issue resolved by the fix for LC8077.Even if the fix for LC8077 is applied properly and DeletePrinterConnection is called successfully, we found that Print Spooler service randomly re-creates deleted printers, unexpectedly. ​It is reproducible in RDP sessions and we see such strange behavior in Windows Server 2008R2, 2012R2 and 2016 even if Server VDA is not installed. Please note that it is not our defect, and should be investigated by Microsoft. (To reproduce the issue, we created a sample application which call Windows APIs (OpenPrinter, AddPrinterConnection, DeletePrinterConnection). If the sample application calls DeletePrinterConnection when WTS_REMOTE_CONNECT event is signaled, the network printer is basically deleted when session is re-connected, but such deleted printer is sometimes re-created later, unexpectedly.)
Command line installation (CLI) is not support for NetScaler URL
By default Windows 10 has the DVR function enabled.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Outlook is terminated as a result of exception created looking for .NET related dll "penimc.dll"
Member of a large number of groups
The issue happens because the License server does not have internet access.
Driver specific issues.
NA
This issue can occur because of the below causes:1. The database server as reached the limit disk usage or disk quota.2. The database file associated to 'PRIMARY' filegroup is set with a Restricted File Growth and the Maximum File Size has been reached.In this case, below error was logged in CDF logs collected from Delivery Controller.DC 3614,0,2017/07/26 00:11:51:17327,19288,13224,0 ,Information,"ERROR: DAL *** RegisterWorker(RegistrationData[xxxxxxxxxx]): FAILED:: General database error: RegisterWorker: Error 1105 @ Line 154: Could not allocate space for object 'chb_State.WorkerRegistrations'.'PK_WorkerRegistrations' in database 'yyyyy' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.ADDITIONAL RESOURCEShttps://https://docs.microsoft.com/en-us/sql/relational-databases/databases/database-files-and-filegroupshttps://blog.sqlauthority.com/2014/03/14/sql-server-error-resolution-could-not-allocate-space-for-object-in-database-because-the-filegroup-is-full/https://www.outsystems.com/forums/Forum_TopicView.aspx?TopicId=9539&TopicName=sql-server-database-error-primary-filegroup-is-full&
The following special characters are not allowed in the Delivery Group Name: \ / ; : # . * ? = &lt; &gt; | [ ] ( ) " '
Please note that these special are not allowed even in application related properties or names. Using these characters may cause unexpected issues
Plantronics Savi device requires usage of wake-up message "0008:002A = ONLINE" which was not implemented before.
The SSL Cipher Suite on the VDA was configured to "ALL" which enables the Triple DES when configuring VDA for SSL during the ICA Launch
With Chrome 58 and later, Chrome automatically detects if it’s running in a remote desktop environment and adjusts its settings accordingly. If you’re using Chrome 57 or earlier, first you must change the Chrome settings in the Citrix AppCenter Console.
Known issue
Misconfiguration of the EdgeSight Agent.  The Edgesight.ini file for each of the new machines was configured on the Master image and the hostname and instance were the same on all servers.
00394403         4:23:39 PM      [5524] PnaResourcesLogic: getting token from request data for qiudonglai AP1         00394404         4:23:39 PM      [5524] Citrix.DeliveryServices.PnaProtocol.Resources Verbose: 0 :      00394405         4:23:39 PM      [5524] [UserInfo.Parse] Parsed User successfully00394406         4:23:39 PM      [5524] Citrix.DeliveryServices.PnaProtocol.Resources Information: 0 :         00394407         4:23:39 PM      [5524] PnaResourcesLogic: subscriptions enabled?: True     00394408         4:23:39 PM      [5524] Citrix.DeliveryServices.PnaProtocol.Resources Error: 0 :   00394409         4:23:39 PM      [5524] PnaResourcesLogic: Invalid Logon method requested: 'sson' (supported value: 'prompt')         00394410         4:23:39 PM      [5524] Citrix.DeliveryServices.PnaProtocol.Resources Error: 0 :   00394411         4:23:39 PM      [5524] PnaResourcesException: CharlotteErrorBadCredentials   00394412         4:23:39 PM      [5524] Citrix.DeliveryServices.PnaProtocol.Resources Error: 0 :   00394413         4:23:39 PM      [5524] PnaResourcesController: PnaResourcesException from launch Citrix.DeliveryServices.PnaProtocol.Resources.PnaResourcesException: CharlotteErrorBadCredentials   00394414         4:23:39 PM      [5524]    at Citrix.DeliveryServices.PnaProtocol.Resources.PnaResourcesLogic.GetLaunchDirectivesInternal(TPNAgentResourceRequest reqData)00394415         4:23:39 PM      [5524]    at Citrix.DeliveryServices.PnaProtocol.Resources.PnaResourcesLogic.GetLaunchDirectives(TPNAgentResourceRequest reqData)00394416         4:23:39 PM      [5524]    at Citrix.DeliveryServices.PnaProtocol.Resources.Controllers.BasePnaResourcesController.Launch(TPNAgentResourceRequest xmlMessage, String userHostAddress, Func`1 logicCreator)
CRL check failing when attempting to start the service as these XenApp servers do not have access to the Internet.
Citrix Print Manager Service CPSVC.exe hang up (since many threads waiting for critical sections hosting by third party printing driver), so that WFshell.exe failed to return CMstart.exe and subsequently userinit.exe stuck as the result iCast.exe did not get called to launch application.
https://www.citrix.com/blogs/2016/01/08/obtain-xendesktop-custom-report-through-citrix-director/http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-14/director/version-matrix.htmlhttp://docs.citrix.com/en-us/xenapp-and-xendesktop/7-12/whats-new.html#Custom_Reporting
This issue was seen to occur in some cases due to a race condition between the registration and the power state reporting, which caused the broker to incorrectly infer the fault state for the machine.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Custom Security Descriptor was set for the Application Event logs on the VDA's.[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\eventlog\Application]"customsd"="O:BAG:SYD:(D;; 0xf0007;;;AN)(D;; 0xf0007;;;BG)(A;; 0xf0007;;;SY)(A;; 0x5;;;BA)(A;; 0x7;;;SO)(A;; 0x3;;;IU)(A;; 0x2;;;BA)(A;; 0x2;;;LS)(A;; 0x2;;;NS)(A;;0x1;;;S-1-5-21-905980934-1232030010-646806464-20420)"Due to CustomSD set on that Application Event Logs, UPMPlugin loaded in BrokerAgent (that runs under Network Service account) was denied permission to read the Application events . Hence, it couldn’t get the Desktop Ready event, and so no 'upmlogon' payload was sent to Citrix Monitor Service and so logon duration was not logged.
XenApp/XenDesktop 7.8 does not support vSAN.
To troubleshoot this issue, we need a CDF trace captured on the Zone Data Collector while reproducing the problem. Then filter the trace on LMS* components, so we can expose the sequence of actions causing the issue, which is as follows:The ZDC (XA2) received a connection request from the user ‘testuser1’ for the application ‘Notepad_Test’.               The server with Hostid 4a3c (XA5) has a load = 100 and so it is identified as the least-loaded server.The ZDC follows the Load Throttling rule (LTL) and set the new LTL = 5000, so the server 4a3c (XA5) has now a load of 5000 5/18/2017 09:52:59.113        LMS_Subsystem::ConstructServerLoadArray - entry, app = Notepad_Test5/18/2017 09:52:59.114        LMS_AppServerCacheQuery::LMS_AppServerCacheQuery(AppUID=6ebe-0009-000001bd)5/18/2017 09:52:59.114        LMS_Subsystem::ConstructServerLoadArray - Server: 1318-000c-000003a2 CurrentLoad = 1900 SvrLoad = 1900 AppLoad = -1 LTL: 05/18/2017 09:52:59.114        LMS_Subsystem::ConstructServerLoadArray - Server: 4a3c-000c-000003ba CurrentLoad = 100 SvrLoad = 100 AppLoad = -1 LTL: 0        5/18/2017 09:52:59.114        LMS_Subsystem::ConstructServerLoadArray - Server: 5c04-000c-000005b1 CurrentLoad = 1900 SvrLoad = 1900 AppLoad = -1 LTL: 05/18/2017 09:52:59.114        LMS_Subsystem::GetUsersSessions - Entered. App Name = Notepad_Test. Client Name = WR_DLPr39AScL8R6_qTZ. User Name = testuser1. Domain Name = DOMN.LAB.       5/18/2017 09:52:59.118        LMS_Subsystem::UpdateAppLoadBiasOnServer - Server = 4a3c-000c-000003ba prevSvrLoad = 100 LoadBias = 100 LTLMultiplier = 2 prevLTL = 0 newLTL = 50005/18/2017 09:52:59.133        LMS_Subsystem::GetLeastLoadedServer - Returning success Within two seconds, another connection request is made from the user testuser1 again for the same application ‘Notepad_Test’. However the application ‘Notepad_Test’ (6ebe-0006-000001bf) has the attribute MultipleInstancesPerUserAllowed set to FALSE (as per the Scout data), which means that we can only have only instance of this application per user.
At this stage the connection initiated two seconds earlier is not fully established yet on the server 4a3c. So the ZDC follows the same process and look for the least-loaded server, which are now 1318 (XA3) and 5c04 (XA4) with both the same load of 1900. 5/18/2017 09:53:01.007        LMS_Subsystem::ConstructServerLoadArray - entry, app = Notepad_Test5/18/2017 09:53:01.007        LMS_AppServerCacheQuery::LMS_AppServerCacheQuery(AppUID=6ebe-0009-000001bd)5/18/2017 09:53:01.007        LMS_Subsystem::ConstructServerLoadArray - Server: 4a3c-000c-000003ba CurrentLoad = 5000 SvrLoad = 200 AppLoad = -1 LTL: 50005/18/2017 09:53:01.007        LMS_Subsystem::ConstructServerLoadArray - Server: 1318-000c-000003a2 CurrentLoad = 1900 SvrLoad = 1900 AppLoad = -1 LTL: 05/18/2017 09:53:01.007        LMS_Subsystem::ConstructServerLoadArray - Server: 5c04-000c-000005b1 CurrentLoad = 1900 SvrLoad = 1900 AppLoad = -1 LTL: 05/18/2017 09:53:01.007        LMS_Subsystem::GetUsersSessions - Entered. App Name = Notepad_Test. Client Name = WR_DLPr39AScL8R6_qTZ. User Name = testuser1. Domain Name = DOMN.LAB.       5/18/2017 09:53:01.012        LMS_Subsystem::UpdateAppLoadBiasOnServer - Server = 1318-000c-000003a2 prevSvrLoad = 1900 LoadBias = 100 LTLMultiplier = 2 prevLTL = 0 newLTL = 5000       5/18/2017 09:53:01.015        LMS_Subsystem::GetLeastLoadedServer - Returning success The session on 4a3c (XA5) is cancelled and the load on this server will go back to 100. While the server 1318 (XA3) will take the connection and see its load increase. As it repeats, the session load will increase on two servers, 1318 (XA3) and 5c04 (XA4), and leave the server 4a3c (XA5) with a low load, giving the impression that it doesn’t accept any connections.
Known issue with the Product.
https://support.citrix.com/article/CTX134940#STAIDhttps://docs.citrix.com/en-us/xenmobile/10/xmob-system-requirements/xmob-deploy-component-port-reqs-con.htmlhttps://www.citrix.com/blogs/2014/01/17/xenmobile-enable-hdx-apps-with-certificate-based-authentication/
Locked identity pool
This issue happens if "FailureId" in MonitorData.Session table and "DesktopGroupId" in MonitorData.Machine table (related machine of session) contains "NULL".
After the controllers are upgraded , When BrokerAgent tries to write a CDE event about the message delivered, it ends up throwing an exception resulting in Broker getting a Fault error which translates to the VDA rejecting the message. So, no reboot is attempted.
Missed assembly from Visual C++ Redistributable in the system
The key used to indicate whether a VDA is entering a logoff state, HKEY_LOCAL_MACHINE\SOFTWARE\Citrix\Ica\Session\#\Connection\SessionInPreLogoff, is being created when using VMware Application Volume Manager or any other application volume managers.
The DLL "fppint3.dll" (owned by a third-party software 'PDF Factory') blocks the windows API "AddPrinterConnection2" that is called by process "cpsvc.exe". This prevents the release of a critical section, which causes multiple worker threads to be blocked. This causes the whole system to appear to be stalled.
The issue was caused because of the Duplicate SPN for the DDC computer name for http because of which the authentication was failing.In the Wireshark traces you will see the Kerberos error "KRB5KRB_AP_ERR_MODIFIED"
Server certificate required for SSL configuration is expired.
From the installation log, MetaFrame_XP feature’s installed status is “Advertise” and hence the issue (that Installation completed without doing any actual work).Most likely this is because the server has a patch installed which is not properly superseded by rollup pack 7. To verify this issue, please follow below steps:
Download Unadvertise.wsf file from the link below & copy it to location C:\Temp. https://blogs.msdn.microsoft.com/heaths/2009/01/27/unadvertise-features/ Open  CMD in admin mode & change the DIR to C:\Temp.Run the command, cscript Unadvertise.wsf /ProductCode:{1471A89F-8CAB-4C46-89AB-942432D1DD3D} /WhatIfCommand in STEP3 has to be run in 2 scenarios,
After installation of R07.Before installation of R07.
None of the Xenapp features should have a status ‘Advertised’, it should be ‘Local’.C:\temp\UnadvertiseScript>cscript Unadvertise.wsf /ProductCode:{1471A89F-8CAB-4C46-89AB-942432D1DD3D} /WhatIfMicrosoft (R) Windows Script Host Version 5.8Copyright (C) Microsoft Corporation. All rights reserved. Checking if product {1471A89F-8CAB-4C46-89AB-942432D1DD3D} is installedProduct {1471A89F-8CAB-4C46-89AB-942432D1DD3D} is installed as Citrix XenApp 6.5Checking for advertised features in product {1471A89F-8CAB-4C46-89AB-942432D1DD3D}Found feature CTX_MF_LM : AdvertisedFound feature MetaFrame_XP : AdvertisedFound feature CTX_MF_CTXCPU : AdvertisedFound feature CTX_MF_DUMMY_TOOLBAR : LocalFound feature CSS_SS : AdvertisedFound feature CTX_MF_RM : AdvertisedFound feature WMI : AdvertisedFound feature CTX_CDF : AdvertisedFound feature CTX_Global_Microsoft : AdvertisedFound feature CTX_MF_ASCII : AdvertisedFound feature CTX_MF_MetaFrame_Core : AdvertisedFound feature CTX_MF_SRM : AdvertisedFound feature CTX_MF_CTXSFO : AdvertisedFound feature CTX_MF_ICA_Shell_Editor : AdvertisedFound feature CTX_MF_IMA_Core : AdvertisedFound feature CTX_MF_RM_Plugin : AdvertisedFound feature CTX_PCH_PatchFeature : LocalFound feature ICA_HostSDK : AdvertisedProduct Citrix XenApp 6.5 has advertised features and will be repaired.
Install using the command line - http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-13/install-configure/install-command.html (check session Command-line options for installing a VDA)Server VDI - https://docs.citrix.com/en-us/xenapp-and-xendesktop/7-13/install-configure/server-vdi.htmlHDX 3D Pro - http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-13/hdx/hdx-3d-pro.htmlHow to Validate an AMD GPU Graphics Card is Active - https://support.citrix.com/article/CTX220663
While using RTOP in optimized mode (not fall-back) the call is established from the endpoint, not the server where Skype is published. Adjusting the volume in the remote session using Skype UI or desktop volume control will have no effect over the call now hosted on the endpoint. Citrix is looking to resolve this in future releases.
Fixed in VDA 7.14.This fix is the relevant one.
After upgrading from VDA 7.11 for Desktop OS to VDA 7.12 for Desktop OS, the following error message might appear while launching certain applications:
"wfapi.dll is missing"
[#LC6874]
Policyes are mapped to the delivery group UUID and not the name in the database.
https://support.microsoft.com/en-ie/help/11529/what-is-a-windows-7-n-edition-https://support.microsoft.com/en-us/help/3010081/media-feature-pack-for-windows-10-n-and-windows-10-kn-editionshttps://www.microsoft.com/en-us/download/details.aspx?id=16546
CTX238200 - How to Troubleshoot Client Drive MappingCTX127614 - Differences in Client Drive Mapping between XenApp 6.0 and 6.5, Presentation Server 4.5, and XenApp 5.0
View Only Admin will not able to manage any XenApp sessions
On the web.config the Connector.SCOM.Identity was set to MPXAXD Agent service account which was the cause of the issue
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
NVIDIA drivers
Customers who deployed XenApp/XenDesktop 7.11 Delivery Controller and upgraded subsequently to XenApp/XenDesktop 7.12 or 7.13 will encounter this issue when upgrading to XenApp/XenDesktop 7.14. During the upgrade to XenApp/XenDesktop 7.14, a registry key that contained the Trust FMA Service’s Database Connection string was deleted. As a result, the Citrix Trust Service running on the Delivery Controller is unable to access the database after the upgrade. Citrix Studio fails to complete a site upgrade when the Trust Service is not connected to the database.
Microsoft API GetGPOList, which is designed to fetch the GPOs from AD, was stopping while awaiting for some threads of Microsoft Group Policy service.
The additional IE processes are normal and are created to make Automatic Crash Recovery possible. However, if one of these processes hang this could prevent graceful logoff for user
The issue occurs when the default one minute timeout for the application launch exceeds, and the session exits automatically.
During cloning any Virtual machine having KACE Agent installed, the default value for Userinit under registry key “HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon\” gets appended causing application launch to fail.
Certain applications create an invisible full-screen window (with the window class "CompatWindowDesktopReplacement"). A seamless window, in this case a full-screen black window, is created for this window. As the user interacts with the application, the CompatWindowDesktopReplacement seamless window may gain focus and cover the client desktop with a full screen black window.
Blacklisting is caused by a crash or panic in the Pseudocontainer2.exe process running on endpoint client 1 when the user roams the session to another client while offloading flash content.
The problem is caused by the remote flash player instance cannot quit when changing the webpage but staying on the same website. This is caused by the way IE behaves when closing the page with the flash instance running.
The issue is due to the use of tag "<httpstransport/>" on Director web config binding, which requires requestClinetCertificate to be set to "true" for Odata Interface to work over TLS.  This tag "<httpstransport/>" was added to communicate to Licensing server and  it is interfering with Odata calls.Separate binding for Licensing server in Director's web.config file should fix the issue. Citrix is aware of this issue and an internal bug has been opened to address the Licensing Server Panel failure after as it should continue to work whether "requestClinetCertificate" is set to TRUE or FALSE in Director's web.config file.
In service stopping, the object may have already been disposed.
RDP connections were also failing.The "Remote Desktop Service" service on the XenApp server  was unresponsive and could not be stopped .In the event viewer of XenApp 6.5 server this event was repeated all the time.
EV ID 711
“A timeout (60000) was reached while waiting for a transaction response from the ntrtscan service.”
This corresponds to Trend Anti-Virus.
Event viewer logs showed many errors of this type.EV ID 1065 The Citrix Broker Service failed to determine the base settings needed for the Virtual Desktop Agent of machine 'xxxxx.yyyy.zzzzz'.  Please restart this machine and if this problem persists, see Citrix Knowledge Base article CTX126990.
We obtained the User Account name from the Group SID (using LookupAccountSid)and then did a reverse look up using LookupAccountName without the fully qualified account name specified to get the Group SID. In this case we got the SID of the wrong user group belonging to other Child Domain because we just passed the Account name and not FQDN<domain>\<name> to LookupAccountName.
Hence, when there are groups with the same name in multiple domains, the GROUP SID returned during reverse lookup could be any one of those two groups with same name in different domains.
The Transaction Log for the XenApp database was full and caused the issue.
Security Groups under "access this computer from the network" policy were missing.
"Windows Search Service" feature was not added on the Win2012R2 server
Linux Receiver not support single FQDN scenario, which means linux receiver unable to detect internal beacon to separate client location. So linux receiver will connect the single FQDN as the storefront base URL. However, this doesn't works because it is connecting NetScaler rather than Storefront.
Starting VDA 7.9, we issue kernel APC to hook into the process. The issue was caused by KAPC hook on the SPPSVC.exe service
Citrix Profile Management Service was stopped on the VDA's.
Microsoft SQL Server is not functioning as expected. Resolving the SQL error would clear the problem in the Studio.
Microsoft Technet -  Configuring default documents in IIS 7Microsoft Forums - How to set up Default Page in IIS
https://technet.microsoft.com/en-us/sysinternals/pstools.aspxhttps://technet.microsoft.com/en-us/sysinternals/dd996900.aspx
N/A
Possible error during update and/or adding the server to the site.
Since all the VDA’s were scheduled to reboot at the same time, after reboot there was a delay in getting some of the VDA’s registered (Overdue registration) and broker triggered a shutdown action after MaxRegistrationDelayMin of 20 mins is reached.
When desktop lock is enabled, locking the client disconnects the ICA session. During the unlock the session is reconnected and the window position calculation seems to have gone wrong.
https://enterprise.google.com/chrome/chrome-browser/
Printer Driver name configuration issue.
http://discussions.citrix.com/topic/384175-mcs-deleting-basedisk-from-vm-storage/#entry1956002http://discussions.citrix.com/topic/331755-problem-with-mcs-base-disk-deletion/
Architecture difference of OS
https://docs.citrix.com/en-us/netscaler/12/load-balancing.html
[Limitation]1. Under Director > Trends panel, duration metrics displayed under Logon Performance tab and Capacity Management > > Hosted Application Usage > Single application tab all come down to DateDiff calculation, like Application usage duration and duration of each Logon phase.
2. In Citrix Director design, to obtain the above duration metrics, SQLServer function DateDiff is invoked to calculate gap between two dates in Millisecond. Since return value of DateDiff function is INT32 type, the maximum supported value is + 2,147,483,647. If transferring 2,147,483,647 Millisecond into Hour, it equals to around 596.5 Hours. In other word, if two dates' gap is larger than 596.5 Hours, when Monitor Service calculates their gap, DateDiff function will result in data overflow and Director page won't properly display.
CTX105955 – How to Check In a User Dump that Full Page Heap was Enabled
How to use Pageheap.exe in Windows XP and Windows 2000 (valid also for Windows 2003, 2008 and 2008 R2)Microsoft Debugging Tools For Windows
[Known issue]​​After upgrading to Hotfix Rollup Pack 7, copy and paste functionality might not work.​[From XA650R07W2K8R2X64008][#LC6114]
It happens if timing is not same when the audio device on the client is opened/closed and when the audio data is played/stopped. Otherwise VDA does not send audio data.
CTX113250 - Required Ports for Citrix NetScaler Gateway in DMZ SetupCTX101810 - Communication Ports Used by Citrix Technologies
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
In Elektra (7.12) we changed the default instance type that we use for volume workers on AWS. We had previously been using m3.medium, but we switched it to t2.small. We did this because we had to switch all of our Linux AMIs from paravirtual to HVM so that they would work in some newly-introduced regions. Adopting a T2 instance type was a less-expensive alternative relative to M3.
However, it has since transpired that T2 instances cannot be use as dedicated instances. (And volume workers need to be dedicated if the MCS catalog is dedicated). Therefore, the volume worker launch process fails when dedicated tenancy is chosen.
Modifying/creating policies using mixed GPMX versions is not supported. Creating a policy using a old version of GPMX while existing policies have been created using GPMX 1.7 results in corruption of Group Policy Blob in DB.
This behavior is currently a known limitation.There is a structure that is not getting set up properly and the timer warning flag is set to "No Warning".Citrix BUG IDs:  BUG0572461 & BUG0631017
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
STA missing for XenApp Delivery Controllers in the Netscaler Gateway VIP.
Clipboard Formats, ref: https://msdn.microsoft.com/en-us/library/windows/desktop/ms649013(v=vs.85).aspxFree Clipboard Viewer, ref: http://www.freeclipboardviewer.com/
Additional Workaround
Found it is a design behavior as mentioned in https://support.citrix.com/article/CTX086028Enabled client drive mapping policy on studio to get the Local system drive over the session via any apps.Enabled special folder redirection on the studio , Storefront and default .ICA file . So that we can observe the users desktop inside the session.Published an app as explorer as (%username%\desktop ) and Tested internally found we are able to access the users desktop ( %username%\desktop) and we are able to do copy paste from local machine to users's desktop or the desired location.Tested externally and we are able to access drives and do copy paste as expected.
AVG web protection may change the certificate issuer to "AVG" instead of the actual Certificate Authority (e.g. Comodo, Symantec, etc.)
In XenApp/XenDesktop 7.13, an enhancement was made and now Citrix administrators can manage ACR/SR via Citrix Policy, not via the Citrix Receiver Group Policy Object administrative template nor the default.ica file. By default, ACR/SR is allowed in Citrix Policy.Upgrade Paths and ACR/SR BehaviorScenario 1: ACR/SR was originally disabled, but not configured accordingly in Citrix Policy after upgrade to 7.13 + 4.7Scenario 2: ACR/SR was originally Enabled, but not configured accordingly in Citrix Policy after upgrade to 7.13 + 4.7ACR/SR Behavior Matrix
Receiver for WindowsDelivery ControllerVDACitrix PolicyReceiver GPO templatedefault.ica4.77.137.13HonorIgnoreIgnore4.77.13Lower than 7.13Not ApplicableHonorHonor4.7Lower than 7.13Lower than 7.13Not ApplicableHonorHonor4.7Lower than 7.137.13Not ApplicableHonorHonorLower than 4.77.137.13Not ApplicableHonorHonor
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Browser process was launched with logon script in privileged mode where as wfica32.xe was launched at medium integrity level. This lead to COM access issue and failure.
More information about Windows Integrity mechanism can be found at:https://msdn.microsoft.com/en-us/library/bb625957.aspxhttps://msdn.microsoft.com/en-us/library/bb625962.aspxhttps://msdn.microsoft.com/en-us/library/bb625963.aspx
A server which belongs to Domain A had been added by mistake to the Farm B in Domain B. When adding a new server to the farm, its netbios and domain name will be added under the record UMInstanceDescriptors in the Datastore and will also appear in the LocalHostCache. In this scenario, a XML broker from Farm B belonging to Domain B, will find a valid domain record for Domain A in the UMInstanceDescriptors record, therefore will believe that he has authority to answer Application enumeration request for the domain A. However, in Farm B there is no application published to users in Domain A.
Preventing Hangs in Windows Applications https://msdn.microsoft.com/en-us/library/windows/desktop/dd744765%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The transaction log too big.
Duplicate entry for the DDC server in the store.
In this case, since we were creating an empty site and the database was getting created manually using scripts, so replica validation was not done. When the second Delivery Controller is added, it tries to update the replicas, and seems to get the wrong connection string (Derived from the 1st DDC which was used to Create an Empty, Unconfigured Site).  			Studio tries to connect to the replica with just the server name, but needs instance name to be successful. The instance name is being stripped off from the data source and uses the Server Name instead leading to the issue.  			In future relases instance name is added to the servername so that when Studio connects to the replica servers (the AG listeners), it will do so using the correct connection string.
License server misconfiguration and reset of services.
Incorrect settings in the BrokerService.exe.config files on both Xendesktop Controllers.
XD Feature Matrix:https://www.citrix.com/products/xenapp-xendesktop/feature-matrix.htmlDirector Features by Edition:https://www.citrix.com/blogs/2016/08/10/citrix-director-features-by-edition-and-version/
Licensing mode was populated incorrectly in the following registry key:- HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\RCM\Licensing Core\LicensingMode
some other application on client machine is setting ForegroundLockTimeout to a value other than 0
- Microsoft Shadow Borders are Enabled by default. See:  https://support.microsoft.com/en-us/help/2821007/how-to-disable-shadow-hwnds-in-office-2013-applications
List of drivers which have been identified to cause this issue but are not limited to are:- C:\WINDOWS\SYSTEM32\DRIVERS\TMTDI.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\AKSDF.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\AKSFRIDGE.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\BXVBDA.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\BXVBDA.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\B57ND60A.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\EVBDA.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\RTNIC64.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\LDSECDRV.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\NETGUARD.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\VNETFLT.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\neofltr_803_30597.sys--------------------------------------------------------------------------------------------Deprecation information for TDI, vendors providing their solutions should be using Windows Filtering Platform or Winsock Kernel which are fully supported by now. https://msdn.microsoft.com/en-us/library/windows/hardware/ff565094(v=vs.85).aspxhttps://technet.microsoft.com/en-us/library/cc939977.aspxhttps://technet.microsoft.com/en-us/library/hh831568(v=ws.11).aspxhttps://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2121307 Windows Server 8.1 and 2012 R2 upwards will flag these drivers with an event id 16001 in the System log from source AFD that reads:A TDI filter (\Driver\<name>) was detected. This filter has not been certified by Microsoft and may cause system instability------------------------------------------------------------------------------------------------
Citrix Resources:
CTX107824 - Citrix API Hooks (mfaphook.dll) Explained and Enumerated
External Resources:
Sysinternals Suite - Process Explorer
The current computer has lost the relationship with the Active Directory domain.Error message:"The trust relationship between this workstation and the primary domain failed"
It is a product design prior to XenDesktop 7.12 and Windows Receiver 4.6.
Kerberos Constrained Delegation is no more supported with XD 7.9 and above.
It is affected by Citrix policy [ Enhanced Desktop Experience ](Default: Allowed).  But when you set this Citrix policy [ Enhanced Desktop Experience ] to Prohibited, the Local Group Policy [Load a specific theme] is still enabled and set to an empty string.
Client audio redirection was prohibited.
https://social.technet.microsoft.com/Forums/office/en-US/da0e4f9e-4446-400d-8037-d5ca21fac873/block-signing-into-office-gpo-causes-all-office-apps-to-crash-on-launch?forum=Office2016ITProhttps://answers.microsoft.com/en-us/msoffice/forum/all/office-2013-block-signing-into-office-to-hide/f4ad8610-1c7f-4327-a75e-6f8a8f9d84f8
CTX220875 - XenMobile 10.5: SmartAccess to HDX - Introduction and RequirementsCTX220877 - XenMobile 10.5: SmartAccess to HDX - How to configure SmartAccess Policy on XenApp and XenDesktop CTX220964 - XenMobile 10.5: SmartAccess to HDX - How to Configure Compliance Automated Actions in XenMobile CTX220967 - XenMobile 10.5: XenMobile Server and SmartAccess FAQ CTX220876 - XenMobile 10.5: SmartAccess to HDX - How to Configure the XenMobile SAML Certificate to the StoreFront Store
Since the thin clients are not part of the domain, they may not be able to resolve the FQDN of the delivery controller.
The system Cannot find the file specified as per the below error :
Service cannot be started. System.TypelnitializationException: The type initializer for 'HCA.Reporting.HCALogger' threw an exception. --0
System.lO.FiIeNotFoundException: Could not load file or assembly 'Citrix-Diagnostics, Version—ID.21.O, Culture—neutral, PublicKeyTokene
7110ggoe26881462• Cr one of its dependencies. The system Cannot find the file specified.
File name: 'Citrix.Diagnostics, VersionzIn.21D, Culture—neutral, PublicKeyTokeTz7110990e26881462'
at HCA.Reporting.HCALogger..ctorO
at HCA.Reporting.HCALogger..cctor0
WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value (HKLWSoftwareXMicrosoftXFusion!EnableLogl (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
TO turn this feature Off, remove the registry value (HKLMXSoftwareXMicrosoftXFusion!EnableLogl.
End Of inner exception stack trace
at HCA.Reporting.HCALogger.TraceEntryO
at HCA.Service.HcaService.OnStaft(Stringtl args)
ASP.NET is not registered in IIS.
SAP Printing module should encounter some errors when processing bitmap area of the print job with Citrix Universal Printer Driver, which caused the bitmap area is removed from the print image object and finally shown as a black square.
https://docs.citrix.com/en-us/licensing/11-14/technical-overview.html https://support.citrix.com/article/CTX204904
Service "Tablet PC input Service" is stopped
EDT How do I: https://support.citrix.com/pages/xaxd-how#EDTCTX220730 - How to Confirm HDX Enlightened Data Transport Protocol is ActiveCTX230014 - How to Troubleshoot EDT ConnectionsCTX226385 - Troubleshooting DTLS and EDT on the Netscaler GatewayCTX230011 - EDT Session Connection/Reconnection Attempts using UDP and TCP in ParallelCTX230010 - Windows OS VDA 7.16 Schannel library support for DTLSCTX230012 - EDT Security using DTLSCTX231821 - How to Configure EDT when using VPN solutionsCTX226014 - Application Launch Fails with "Unknown client error 1110" When Using EDT/DTLS on NetScaler GatewayCTX224373 - XenDesktop 7.x Unable to launch published desktop with Adaptive transport policy enabled
It appears to be failing specifically when it tries to do something with WmiPlugin.dll, seems has something to do with WMI repository:==MSI (s) (DC:E4) [22:44:32:364]: Executing op: CustomActionSchedule(Action=Install_WmiPlugin_Property_Win8.A6F1136C_618E_4215_90E4_4BBF5A4B8CD8,ActionType=3073,Source=BinaryData,Target=CAQuietExec,CustomActionData="C:\Windows\Microsoft.NET\Framework\v4.0.30319\installutil.exe" /i /LogToConsole=false "C:\Program Files\Citrix\Euem\Service\WmiPlugin.dll")MSI (s) (DC:9C) [22:44:32:366]: Invoking remote custom action. DLL: C:\Windows\Installer\MSIF422.tmp, Entrypoint: CAQuietExecCAQuietExec:  Microsoft (R) .NET Framework Installation utility Version 4.0.30319.33440CAQuietExec:  Copyright (C) Microsoft Corporation.  All rights reserved.CAQuietExec:CAQuietExec:  The installation failed, and the rollback has been performed.CAQuietExec:  Error 0xffffffff: Command line returned an error.CAQuietExec:  Error 0xffffffff: CAQuietExec FailedCustomAction Install_WmiPlugin_Property_Win8.A6F1136C_618E_4215_90E4_4BBF5A4B8CD8 returned actual error code 1603 (note this may not be 100% accurate if translation happened inside sandbox)01/21/2016 22:44:36.265 [2268]: Assembly Install: Failing with hr=80070005 at RemoveDirectoryAndChildren, line 396==
Use HDX Monitor to validate the Applied settings and the status of the hardware encoding policy
Download and install HDX Monitor on the VDA.Open HDX Monitor and Select the Graphics - Thinwire option on the left to see the Applied thinwire settings.
3. Select the Graphics – Thinwire Advanced option on the left.4. Search for the name Component_HardwareEncodeEnabled.5. If enabled, the value will be set to True.
Configure Office 2010 for capturing an image- https://technet.microsoft.com/en-us/library/cc178964(v=office.14).aspx
Missed parameter in line 844 of the script "C:\Program Files (x86)\Citrix\Scout\Current\Utilities\Citrix.GroupPolicy.Commands.psm1"
BaseDisk info is missing from database table DesktopUpdateManagerSchema.ProvisioningSchemeVMImageLocation
EDT How do I: https://support.citrix.com/pages/xaxd-how#EDTCTX220732 - How to Configure HDX Enlightened Data Transport ProtocolCTX230014 - How to Troubleshoot EDT ConnectionsCTX226385 - Troubleshooting DTLS and EDT on the Netscaler GatewayCTX230011 - EDT Session Connection/Reconnection Attempts using UDP and TCP in ParallelCTX230010 - Windows OS VDA 7.16 Schannel library support for DTLSCTX230012 - EDT Security using DTLSCTX231821 - How to Configure EDT when using VPN solutionsCTX226014 - Application Launch Fails with "Unknown client error 1110" When Using EDT/DTLS on NetScaler GatewayCTX224373 - XenDesktop 7.x Unable to launch published desktop with Adaptive transport policy enabled
Absence of the right Message Mapping macro format filters.
The Citrix MPXAXD Agent service was running under the Local System account and not the Run As account which has permission on profile "Citrix XenApp/XenDesktop Monitoring Account"
The Serial device did not detect the polling that was being generated.
Any customization such as any script pushing change to the TWI registry key may lead to delete the required values from TWI registry causing the error during application launch.
http://discussions.citrix.com/topic/338374-there-are-no-hosts-in-use-by-this-hosting-unit-that-currently-have-an-overall-state-of-ok/
Web Interface removes all XML brokers from the configuration if one of the XML brokers responded with farm overloaded error.A code change was needed in WI to resolved this issue.
The Citrix StoreFront Servers, FAS server and VDA servers from domain B did not have the  ""ReadTokenGroupsGlobalAndUniversal" permission on the objects in Domain A
The print button on the report viewer toolbar uses the Portable Document Format (PDF) format for client-side printing of Reporting Services reports viewed in a browser.
Launching unsubscribed resource is a new use case in receiver 4.3 which would not launch content resources correctly due to error in launch commandline .
%ProgramFiles% variable points to Program Files directory, which stores all the installed program of Windows and others. The default on English-language systems is C:\Program Files. In 64-bit editions of Windows (XP, 2003, Vista), there are also %ProgramFiles(x86)% which defaults to C:\Program Files (x86) and %ProgramW6432% which defaults to C:\Program Files. The %ProgramFiles% itself depends on whether the process requesting the environment variable is itself 32-bit or 64-bit (this is caused by Windows-on-Windows 64-bit redirection).
Registry settings for XD Services for Monitoring and Logging not updating with upgrade.
Registry path "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows" had to be in the inclusions list for any of the session printer to be retained as the default printer in the consecutive sessions.
Firewall configuration was either not configured or overridden by any application/antivirus.
More detail error can be found in C:\Users\app_ermsupport\AppData\Local\Temp\Citrix\XenDesktop Installer\MSI Log Files\UpsClient_x64_uninstall2105010898.txtlog:MSI (s) (48:2C) [09:01:55:948]: Product: Citrix Universal Print Client -- Error 1921. Service 'Print Spooler' (spooler) could not be stopped.  Verify that you have sufficient privileges to stop system services.
RootCause: The COM connection of previous session is not unbind on  CStack::DisconnectNotify(), because the stack has been disconnected before CStack::DisconnectNotify(). This issue should be caused by fix of BUG0487797.
Old compressed log files were taking up a lot of space on the server.
How to restrict users from accessing local drives of an RD Session Host server while using RemoteApp programs - https://blogs.technet.microsoft.com/enterprisemobility/2011/05/26/how-to-restrict-users-from-accessing-local-drives-of-an-rd-session-host-server-while-using-remoteapp-programs/
Using Group Policy Objects to hide specified drives - https://support.microsoft.com/en-us/kb/231289Configure a Mapped Drive Item: https://technet.microsoft.com/en-us/library/cc770902(v=ws.11).aspxYou can also use Prevent access to drives from My Computer Policy to prohibit from accessing the drives completely.
Delivery Controller server was removed the from the domain and then joined back which gave the machine a new SID causing the account not to be able to connect to the database.
Studio is trying to set the connection strings again, this might happen if we are either migrating the site database or restoring the database.
Write Back Cache is turned on by default for catalog 7.9 or newer.  The way Microsoft validates VHD size has changed recently and that surfaced up the bug which causes disk size mismatch between current size field in VHD footer and the actual blob size.
Install being run from a UNC path.
This is an AppSense issue that presents a "Process Lingering" problem at logoff.Specifically we see the emuser.exe (Appsense Client) process still running which the prevents the session being disconnected.From Appsense Analysis, a EWX_FORCE option is always added to the Microsoft function "ExitWindowsEx". When a user logs off, the function is called and Appsense then hooks into this to stall the logoff whilst the following action takes place:1. Environment Manager Personlisation sync2. Environment Manager Policy logoff trigger actionsAfter a timeout period, if the logoff has not yet completed, the user will be prompted to force any running application to close or cancel the logoff. The default time for this is 20 seconds: https://technet.microsoft.com/en-us/library/cc978624.aspxWith the EWX_FORCE flag enabled, this option is not provided and the applications are terminated and the session logs off. Details on this can be found here: https://msdn.microsoft.com/en-us/library/windows/desktop/aa376868(v=vs.85).aspxIn relation to the effect this can have, it can result in applications being terminated in a non-graceful way which can potentially cause issues.
The issue can be caused if one of the certificate in the certificate chain (Root, Issuing or user) is not performing the CRL check or if it failing the CRL check or if the CRL check is not happening only from the VDA where the applications are published.
Problem was a result of problematic Global Catalog servers within the customer's large Active Directory infrastructure whereby there was insufficient DCs as Global Catalog servers to serve the queries being generated.
Initially the customer suspected an issue with the Citrix XML Brokers being referenced by customers within the Nordic domain.
Permissions to published applications were controlled via Global Groups whereby users were added to a Global Group and this application specific Global Group was then added to permissions on published application.
Heavy Graphics cause the issue depending on Network being used.
The installation of Citrix Universal Print Server would fail/roll-back due to another similar version of the C++ 2013 Redistributable/Runtime Library being present on the server prior to its installation.  Citrix Universal Print Server version 7.12 is dependent on C++ 2013 Redistributable version 12.0.21005.1 being installed successfully on the machine.
The IMA service used by the Access Management Console to communicate with the Configuration Logging Database had been configured to run in the security context of the Local System account instead of the one used by default in XenApp 4.5 Network Service account. This configuration is no longer used or supported starting from XenApp version 4.5 for product design and security reasons.
XenApp servers are unable to retrieve fresh policy details from database.
Network Service which is the log-on account of Citrix Print Manager Service, doesn't have permission over Virtual Channel. "Virtual Channel" is under Special Permission in ICA-TCP & RDP listener.
Secure Access in WebInterface - IP address range not include client IP address.
Citrix Studio utilizes the properties of the Machine Catalog and the machines within the Delivery Group to determine AppDisk compatibility. The behavior in 'Symptom 3' referenced above is seen if either the Machine Catalog or the selected machines are not compatible with AppDisk.More specifically 'Symptom 2' indicates that the selected Machine Catalog is incompatible, in which case the properties of the Catalog must be corrected. The catalog properties must be adjusted even in cases where machines are PVS created but have been imported as existing machines - this is because Citrix Studio queries both the Machine Catalog and the individual machines to determine eligibility for AppDisk use. This is to verify that only MCS/PVS created Machine Catalogs which are of the Pooled Random type are found eligible. Pooled Random MCS/PVS created machines are the only types that are supported for use with AppDisk.​'Symptom 1' indicates that the Machine Catalog is compatible with AppDisk but that the selected machines are not compatible, in this case we must ensure that the HypervisorConnectionUid of the AppDisks and the Machines both match.
Permission issue.
Corrupt Com+.
When performing such an upgrade, important Windows Registry entries and software components will not be installed, leading to an incomplete upgrade. As a result, normal PVD tasks, such as “Update personal vDisk” may generate errors and not work properly.
https://docs.citrix.com/en-us/xenapp-and-xendesktop/7-11/secure/federated-authentication-service/fas-config-manage/fas-private-key-protection.html
Issue caused by metadata added to the BrokerCatalog by App Orchestration.
In order for Flash redirection to work with the Flash content URL specific to this case, PseudoContainer2.exe needs to be instructed by the Macromedia component of Flash Player to create a folder structure (C:\Users\<username>\AppData\Roaming\Macromedia\Flash Player\) so that the Flash content can be stored.
It is clear that the Macromedia does not request that PseudoContainer.exe create the folder structure with sufficient rights.
For more information about mKiosk, see the Mozilla website:https://addons.mozilla.org/en-US/firefox/addon/mkiosk/
Modifications made to these folders.
C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup
C:\users\default\AppData\Roaming\Microsoft\Windows\Start Menu\Programs
Some client drive mapping is causing the issue and the session is getting stuck while loading a drive mapping for some reason. It is recommended to test Disabling all kinds of client drive mappings in ICA session(s).
RES ONE Workspace Manager Agent not able to close out some processes during logoff.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Issue was caused by a Profile Share server not functioning properly.
A change to IP filtering was introduced in 7.6.300 which does not allow crossing subnets with filters.This caused policy settings to be corrupted and unreadable by any GPM\Studio component post 7.6.300
DHCP server is unable to assign correct IP addresses to several of the new VMs created on the Hypervisor. Invalid IP addresses (APIPA) were being assigned to the VMs that were shown as Unregistered on Studio.
Image taken on the XenServer Hypervisor from one of the new VMs created that were acquiring an invalid IP address (APIPA).
Customer had RequireLaunchRef=Off configured in the <store> web.config file to support a legacy PS4 farm.
The iexplore.exe code is as follows untill HRP07 :
424        if(NULL != StrStrI(g_wszURLForSFTA, L"http://"))  425        { 426            pwszHttpNameBeg = StrStrI(g_wszURLForSFTA, L"http://"); 427        } 428        else if(NULL != StrStrI(g_wszURLForSFTA, L"https://")) 429        { 430            pwszHttpNameBeg = StrStrI(g_wszURLForSFTA, L"https://"); 431        }         432                else  433                { 434                        pwszHttpNameBeg = g_wszURLForSFTA; 435                }
iexplore.exe ( Citrix Metaframe Server FTA) , is not equipped to handle urls other than http , https and therefore not accepting .html , .mthm or .htm type locally or network saved  webpages.
Planning and design for VPN Gateway
After applying the update some type of hidden windows might be sent to the client in a seamless session that were not sent before.
In the case of Visual Basic 6, this behavior might not be desired, as Visual Basic 6 has one of its main threads running in the background as a hidden/invisible window, but does not receive any user input. The combination of sending this hidden window to the client and how an application developer writes a Visual Basic 6 application might produce different results.
The client drivers that have support for TLS 1.2 for for SQL Server 2008 and SQL Server 2008 R2 need to be at least SQL Server Native Client
Placement Path of the host must have been set with a lowercase drive letter when it was added back.
The behavior is by design of Director.
CTX086028 – Troubleshooting Client Clipboard Issues
CTX124356 – How to Enable Read-Only Client Drive Mapping and Clipboard Mapping for XenApp
CTX106226 – Repair Clipboard Chain 2.0.1
CTX130344 - Error: Microsoft Office Excel cannot paste the data
The domain controller has no certificate issued by the Enterprise PKI component in its computer certificate store.This can be confirmed by the event 19 or 29: "The key distribution center (KDC) cannot find a suitable certificate to use for smart card logons, or the KDC certificate could not be verified. Smart card logon may not function correctly if this problem is not resolved. To correct this problem, either verify the existing KDC certificate using certutil.exe or enroll for a new KDC certificate."
This is not a Citrix issue. As per our collaboration with Microsoft we got to know that the Logon merge function was rewritten for Windows server 2012 and 2012 R2 and that might have caused this issue. We encourage customers to work directly with Microsoft to investigate this further if the above workarounds are not acceptable.
CAUSE 1: There were two entries for cmstart.exe under the below registry key which in turn launched two wfshell.exe in the same session with each sending a EUEM (End User Experience Monitoring channel, related to HDX) bind request to the client with the second bind getting rejected resulting in a closed connection. HKLM\Software\Microsoft\Windows NT\CurrentVersion\Winlogon\AppSetupCAUSE 2Some applications like Dell KACE try to replace Windows userinit with its own KusrInit but for the failing VDAs the Winlogon registry key Userinit has a value with both userinit.exe and KusrInit.exe while the working VDAs UserInit has only KusrInit.exe. When both userinit.exe and Kusrinit.exe exist this will result in 2 userinit processes running in the session which launches two instances of cmstart.exe and and 2 instances of wfshell.exe which causes 2 EUEM Virtual Channel bind request sent to the ICA client and the ICA client rejects the second request and closes the connection.
Write cache exhaustion during PVD update stage.
Bad Window handle coming from SfB:
Intermittently, when using RTOP 2.1, videos in Skype4Business/Lync calls will show a blue placeholder where the video is supposed to be.
MediaEngine.Net[8136]: Aug 25 07:59:32.211 [1] MediaChannelExImpl Debug: AttachDevice
MediaEngine.Net[8136]: Aug 25 07:59:32.212 [1] MediaChannelExImpl Debug: Set video rendering for call ID = 621fa97822c241ce8edf8569db494e81 to HWND = 68108
MediaEngine.Net[8136]: Aug 25 07:59:32.213 [1] RemotePlaybackWindow Debug: Initialize: Call ID = 621fa97822c241ce8edf8569db494e81 HWND = 68108
MediaEngine.Net[8136]: Aug 25 07:59:32.213 [1] RemoteWindow Error: Invalid window handle 68108. Skip it.
The Agent broker port policy may be inadvertently configured by an Administrator to use an incorrect port, such as the port of the Agent cache sync.
When anonymous user sessions are attempting to connect at a fast rate in a short period of time (several anonymous user sessions per second), connection brokering database operations related to anonymous users can become blocked resulting in the symptoms explained above.
A trailing space in the policy name causes invalid paths to be created for the Citrix Group Policy PSProvider, and the SDK is unable to complete the application of the policy.
The issue is caused because of WMI Filtering getting applied on the VDA servers.
3rd party security software (Webroot) performing realtime scan on .tmp and .spl files on the client was found to be the culprit as they were found to be marking the files for deletion.
Citrix Blogs - XenDesktop 7 Monitor Service – What Data is Available?Citrix Blogs - Troubleshooting Slow Logons via PowerShellCitrix Blogs - Director – Logon Duration ExplainedCitrix Blogs - Creating Director Custom reports for Monitoring XenDesktopCitrix Blogs - Citrix Director – Analyzing the Monitoring Data by Means of Custom ReportsAnalyze Logon Duration
If the Windows time service kicks in before the group policy Client, everything works fine as the time is updated before any communication with Active Directory happens but when the group policy client loads first, the authentication fails because of the incorrect time which corrupts the Kerberos handshake, and leaves the machine in an unregistered state.
dvportgroup issues
If the Broker Service is disabled on any Delivery Controller in the site, we will not get valid PowerShell output of Get-BrokerServiceAddedCapability and instead get the below error :"Failed to connect to back-end server <Server name> on port 80 using binding WSHttp. The server may be off-line or may not be running the appropriate service".

If the above PowerShell command fails, it means the Broker returns no capabilities, thus making the ApplicationFolderSupport missing.
When Authorizing the FAS, it is going to query the following Active Directory partition to get the Certificate Authority Server Information to enroll the certificate.CN=Enrollment Services,CN=Public Key Services,CN=Services,CN=Configuration,DC=yourdomain,DC=com.If there are stale entries or old CA servers listed there, it is going to query all the servers and not knowing which one is the correct one. The time out happens because of this reason.
Dell KACE install failed to remove userInit.exe entry in registry.
Cause AThe account being used to launch the User Interface for Citrix Federated Account Services is not a member of the BUILTIN\Administrators group on the server.Cause BThis is presently a bug with the User Interface (UI) and Citrix is working to resolve this behavior.  When the Federated Authentication Server is set to use User Account Control (UAC), the process is supposed to check to see if execution should run under Elevated Privileges and it is not.  What it is doing is throwing the event into the Application Log and gracefully handling the condition by repeating the logon request.The Expected Behavior should be for the UI to automatically prompt the user for Elevation or prompt for an Administrator password via consent.exe and the Windows Security Dialog, but instead it displays a prompt from Federated Authentication Services which is looking for an account part of the BUILTIN\Administrator group.
LHC on the provisioned XenApp servers are not aware of the new IP change on the machine.
Orphaned Controllers and Service instances causing Studio and Director not to function.
Error: An unknown error has occurred - The given key was not present in the dictionary.
The vuemLocalUser account on the agent has no permissions to log on locally.
Uninstall process of  Virtual Delivery Agent from the machine also delete following registry.HKEY_LOCAL_MACHINE\SOFTWARE\Citrix\Citrix Desktop Delivery Controller
The setting being moved from the Citrix Console to a powershell cmdlet.
Issue where CtxAppvlauncher.exe is missing appears to be caused when trying to install 7.11 on a server where 7.6 was previously installed.
The base OS performance counters were disabled on the VDA.
Note: To confirm the problem open the perfmon on the server VDA.1) Go to Start -> Run2) Type Perfmon and Click ok.3) The following error will pop up if there is an issue with a specific counter."Unable to add these counters:\Memory\Available MBytes\Memory\% Committed Bytes In Use\Memory\Cache Faults/sec\Memory\Cache Faults/sec
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Cause of the first issue:
The database connection strings were set to the old deleted environment.Second cause:
From CDF traces, Error Id: XDDS:C030812D and The mirror database cannot be contacted.There were 2 possible causes (either permission issue or using a custom port for db).
Cause: Prior to the inclusion of bug fix LA3043, which was first included in XA650R01W2K8R2X64062 and then in all subsequent Hotfix Rollup Packs from HRP2 onward, when a XenApp server without this fix is added to a farm it has a small chance of assigning itself a "HostID" of greater than 32767 or 7FFF in Hex.  This will not prevent the server from joining the farm, however AppCenter will throw an error during the Discovery process if there are *any* servers in the farm with a HostID of greater than 32767.
The service account for 'Citrix Telemetry Service' has insufficient privileges at the time of XenApp or XenDesktop installation. The XenApp or XenDesktop installation associates the service account 'NT SERVICE\CitrixTelemetryService' with 'Citrix Telemetry Service'; typically, rights to log on as a service are extended to 'NT SERVICE\ALL SERVICES'. Editing the local or domain policy 'Log on as a Service' such that the newly created 'NT SERVICE\CitrixTelemetryService' is not defined with sufficient rights generates the installation failure on the 'telemetryserviceinstaller_x64.msi'. This occurs because services configured to run under the Local System, Local Service, or Network Service accounts have a built-in right to log on as a service. Any service that runs under a separate user account must be assigned the right. The Citrix Telemetry Service is implemented as of the XenDesktop 7.6 Feature Pack 3 release and is responsible for collecting diagnostic information to support AoT CDF Tracing.
We would meet two phases during restart schedules, But customer environment machine has some unknown reasons which leads very slowly to shut down. in reboot cycle ,the max timeout value is 10 min, so there has an store procedure FinalizeFailedWorkerReboots which doesn't handle more. So later there would also an timeout in hypervisor code part, For example about VCenter, the value is 15 min , so the last status shown for machine is in Power Off.
1) By default Receiver's Preference is remote application.2) If local application shortcut is of same name then Receiver will discard local application
The Monitoring Service fails to insert new session data into the Monitoring database when the Load Evaluator Index policy is enabled.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
If we replace the brokeragent.exe.config_orig without making the required changes then the communication or WCF call fails between the virtual desktop agent and the delivery controller.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Let's say that you have a session running and it gets dropped for whatever reason. If you have auto client reconnect set, when the farm is trying to reconnect:
the farm has the session marked as disconnected, andthe user sees that the session has disconnected, and an attempt is being made to reconnect.
If Session Reliability is in play:
the farm has the session marked as Active andthe screen freezes on the last frame during the attempted reconnect process, without any indication to the user.
Follow the link for more info: https://docs.citrix.com/en-us/xenapp-and-xendesktop/7/cds-manage-wrapper-rho/cds-maintain-session-activity/cds-auto-client-reconnect.html
Microsoft bug ID#: O15:3630653
Commands described in the article CTX140734 will work only while creating new catalogs (New provisioning scheme) as it describes the metadata values for new provisioning schemes.  When going for a catalog update, the existing provisioning scheme associated with the catalog is used, hence the metadata values for the existing provisioning scheme have to be changed.
The remote computer requires Network Level Authentication, which your computer does not support.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
This issue occurs when Inventory service is unable to query data after validation when attempting a vMotion and occurs either due to lack of space or a possible corruption on the Inventory service database.
On hyper-visor (VMWare), the user had permissions at cluster level and not at the data center level.
CTX111961 - CDFControlCTX121185 - Recommendations for Collecting the CDF TracesCTX107025 - How to Capture a Common Diagnostic Facility (CDF) Trace using Registry Settings
Some remnants of the installation might remain in the system whenever an installation does not complete or roll back successfully. Windows Installer runs only one installation at a time, only one installation is active at any given time and there is only one instance of the indicator objects on any system.Therefore it is important that the Windows Installer and MSDTC service are running all the time during the installation and they do not have any pending action.
Using invalid DSN file. Citrix XenApp failed to connect to the Data Store. ODBC error while connecting to the database: S1000 -> General error: Invalid file dsn
User sessions stuck on a hung XenApp Server VDA
Studio tries to connect to the replica/mirror with just the server name, but needs instance name to be successful. The instance name is being stripped off from the data source and uses the Server Name instead leading to the issue.
The VDA was not able to access the Certificate Revocation List location.Certificate Revocation List (CRL).A digitally signed list issued by a Certification Authority (CA) that contains a list of certificates issued by the CA that have been revoked. The listing includes the serial number of the certificate, the date that the certificate was revoked, and the revocation reason. Applications can perform CRL checking to determine a presented certificate's revocation status.To isolate the problem to the Certificate Revocation Check, create the following registry key on the VDA.Note: This key should be deleted once the actual issue is resolvedHKEY_Local_Machine\System\CurrentControlSet\Control\LSA\Kerberos\ParametersValue Name: UseCachedCRLOnlyAndIgnoreRevocationUnknownErrorsValue Type: DWORDValue Data: 1Description: After you set this DWORD value to 1.The Kerberos clients (Smartcard logon clients) will ignore "revocation unknown" errors that are caused by an expired CRL if the above registry key is configured.
Session sharing is enabled by default
Since netscaler is in DMZ, netscaler was talking to backend storefront/xenapp servers over a natted IP. When DDC was giving IP address of XA server (application host server), its giving internal IP of the XA server instead of the natted IP.Netscaler cannot communicate with the internal IP and has to go through natted IP.
When the IMA service starts, it tries to load all the plug-ins in the following registry key on a XenApp Server:HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Citrix\IMA\RUNTIME\ProductPlugins
The following sequence of events occurs when the IMA service starts:
When the plug-in loads, the service sends the notification to all the dlls and calls the initialization function.
When the IMA service tries to load MFBrowserSS.dll, it calls the initialization function BrowserStart() for IMA Service in MFBrowserSS.dll.
This function internally calls the BrowserInitializeEventLogging() function.
BrowserInitializeEventLogging() internally calls RegisterEventSource() API to initialize event logging.
RegisterEventSource() API fails because event logging is disabled.
The BrowserInitializeEventLogging() and BrowserStart() function fails.
This leads to failure of the IMA to start.
XML should be integrated with IIS when we install XA on the server, if it was not done at the initial stage this might be the issue. We might need to reinstall the XA with IIS shared. For this IIS should be installed before installing XA on the server.
In general, all of the Microsoft-supplied printer drivers are tested with Terminal Services and guaranteed to work with Citrix. However, before using a third-party printer driver, ensure it has been certified for Terminal Services. There is a Windows Hardware Quality Labs (WHQL) program for getting third-party printer drivers certified on Terminal Services. Citrix does not certify printer drivers. Consult your printer driver vendor to ensure the driver you plan to use has been certified for a Terminal Services environment.
See Frequently Asked Questions About Terminal Services.
CTX112580 – Case Study: Intermittent Client Printer Creation and Deletion Failures
This issue occurs when there is an inconsistency between the data store’s farm magic number and the IMA data hex key.
When you open the event viewer, you can see 4 events in system logs, event ID 3609 displays the error:“IMA_RESULT_MAGIC_NUMBER_MISMATCH”
Profiles not being deleted after log off
It is a know issue with older version of  Receiver.
The file is not updated during the upgrade and would normally not affect the upgrade process had the computer name and/or SID of the DDC not been changed.
This issue is known to nVidia and is actually documented in the release notes of the latest driver in Section 5.1 - Known Issues. 5.1. Memory exhaustion can occur with vGPU profiles that have 512 Mbytes or less of frame buffer.
Windows 10 allows custom scaling settings per monitor, which causes issues with Seamless windows.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
This is a known issue with Remote Desktop Services and Windows 2012 R2. Additional details can be found in the following KB articles:
https://support.microsoft.com/en-us/kb/2978367
https://support.microsoft.com/en-us/kb/3055615
Expected behavior
The need for some ADSI functions has been introduced in the fix LC0847. The fix uses a new logic when adding user accounts to published applications in order to bring some consistencies to the AD account prefixes in the BLOB of application properties, as it was found that those might varies depending on the type of 'User Selector' being chosen in the AppCenter and would later prevent to administer published applications via powershell cmdlets.
This doesn't appear as a prerequisite in the fix documentation since the registry value that the fix relies on is present by default on a standard Windows 2008 R2 installation.
This is by design.<Position A>The difference comes from the fact that in the first case, the window drag is done first on endpoint OS window,?then new window size requested to ICA host.?<Position B>In the second case, the window drag is done on ICA host side window first.?“Show window outline while dragging” is off on endpoint while it is on in ICA host. This is by design.?
Windows Internet Explorer Security Updates have caused the ActiveX Filtering to be grey out for Local Intranet Zone.
This happens due to App-V snap-in not getting updated properly. To resolve this issue, we uninstalled - Studio, PowerShell SDK and App-V and then installed them back. The App-V should be installed last in the sequence.
Hotifx versions beyond HRP02 rely on CtxSensVcSvc, which is "Citrix Location and Sensor Virtual Channel Service" and fail because service is not available on the system if at least XA650W2K8R2X64011 is not available .
The problem is caused by RSOP calculation and the read logon policies which would cause the latency.
If you enable this policy setting, the Group Policy caches policy information after every background processing session. This cache saves applicable GPOs and the settings contained within them. When Group Policy runs in synchronous foreground mode, it refers to this cache which enables it to run fasterNote: The issue does not happen with VDAs released after LTSR CU1 i.e version 7.7 and so on.
http://support.citrix.com/article/CTX128257 - How to Create and Configure Server Certificates for SSL Relayhttps://docs.citrix.com/en-us/xenapp-and-xendesktop/xenapp-6-5/xenapp65-w2k8-wrapper/xenapp65-admin-wrapper/ps-securing-wrapper-v2/ps-ssl-relay-certificates-task.html - Configuring SSL/TLS Between Servers and Clients
This GhostWindow concept is introduced in R07 , via fix LC3783. This window options is timing out causing the issue we are seeing.
Registry key "IMA" missing under HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Citrix\.IMA policies not applying properly on the server.
The issue is caused by an OpenClipboard (a Microsoft Windows clipboard API) conflict between published Excel 2013 (EXCEL.EXE) and WfShell.exe.Both processes attempt to call OpenClipboard at the same time.  This is normal behaviour when enumerating the contents of the Windows clipboard, but both processes must have the ability to try to call OpenClipboard again later if it has already been opened by another process.Excel doesn't do this very well.  Rather than ask Microsoft to change all of their Office products, Citrix LCM used a different method of enumerating the Windows clipboard (see solution).
Identified Memory leak caused by monitoring service.
CAUSE:Security patch MS01-055 prevents servers with improper name syntax from setting cookies names. Domains that use cookies must use only alphanumeric characters ("-" or ".") in the domain name and the server name. Internet Explorer blocks cookies from a server if the server name contains other characters, such as an underscore character ("_").Refer below article from Microsoft for more details:https://support.microsoft.com/en-us/kb/316112 -PRB: Session Variables Do Not Persist Between Requests After You Install Internet Explorer Security Patch MS01-055
By Default single session limit is enabled in the XD environment 7.x. We have to use powershell commands to disable it.
LPR protocol is the most familiar computer protocol. It is often used in Windows OS and other computer platforms. On the other hand, RAW is the default protocol for non-Windows computers. The LPR protocol can be substituted for the RAW protocol if the latter cannot function and doesn’t respond while on a print job. This makes the LPR protocol more flexible and more universal compared to the RAW protocol.
The VDA software had been installed with HDX 3D Pro enabled. This can cause display issues if there is no GPU present for VDA to utilize.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Proxy settings.
"CITRIX.opt" file missing under "C:\Program Files (x86)\Citrix\Licensing\MyFiles\".
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Some Citrix services were in a hung state.
Background:This is due to MS design change. With IE9 and later, MS added a reg key in IE extensions:CommandID: IE.Protocol, this changes IE / Windows behavior -- if there is an IE instance running, default browser will stop working, instead, hyperlinks will be opened with the existing running IE as a new tab.Content redirection is based on Shell command "Open" and we change the default browser to one of our applications which gets the shell command and redirects it to the other side. Because of the IE behavior change, content redirection stopped working.
Customer was experiencing DNS/AD/Communication issues causing authentication to the Domain to be lost. This caused the Site Creation to fail when trying to validate that the User and DDC had proper access/permissions.
Incorrect client configuration.
Different Machine ID on the license folder of the user profile for Office 365 (2016), when logging to a different Machine.Example: When a user logs on to a different VM the users UPM profile will be copied over to new VDA\VDI Machine, The activation from the previous profile was from a different VDA\VDI which has a different machine ID and it will not match the VDA\VDI they are currently logged on to.
Wrong Product Edition setup on Studio for Licensing.Licensing was setup to XenApp Platinum instead of XenDesktop Platinum.
Director was not configured to search for the user in the additional domain.By default, Director searches the global catalogue of the logged in admin’s domain and Director machine’s domain. You have to manually change web.config file for multi-domain environment
Active Directory nested groups not being recognized by XD 7.6 delivery groups so users where unable to launch applications due lack of permissions
A design change in the Server VDA setup modified the Access Control List for the registry key HKLM\Software\Wow6432Node\Citrix\EUEM\LoggedEvents The System account is the owner of the key but doesn't have any right on the key itself: In the ACL for this registry key the "Remote Desktop Users" has Full Control The setup for XA/XD Server VDA 7.6.300 and newer adds to the "Remote Desktop Users" group the groups "Domain Users" and "Authenticated Users"  Please note that, when the Server VDA is installed on a machine, a new local group called "Direct Access Users" is created and non-administrative users, even though they are part of the Remote Desktop Users group, can no longer RDP to the VDA itself if they are not part of the Direct Access Users group, http://support.citrix.com/article/CTX203246.  The System account is by default part of the Authenticated Users. As long as the System account is directly or indirectly member of the "Remote Desktop Users", no issue will be experienced.In some environments the administrators modify manually or via GPO the membership of the "Remote Desktop Users" removing the groups added during the VDA Setup: "Domain Users" and "Authenticated Users".if the "Domain Users" and "Authenticated Users" administrators groups were manually deleted, adding them back to the"Remote Desktop Users" group will fix the issue. The GPO used to control the group membership is:Computer Configuration\policies\Windows Settings\Security Settings\Restricted GroupsIf this policy is applied to the Server VDA to control the "Remote Desktop Users" membership, all the users and groups not specified by this policy will be removed from the "Remote Desktop Users" membership. This means that the groups "Domain Users" and "Authenticated Users", added to the Remote Desktop Users group by the Citrix Server VDA setup, will be removed after the first reboot when the GPO will be applied. Add the "Domain Users" and "Authenticated Users" groups to the groups in the Computer Configuration\policies\Windows Settings\Security Settings\Restricted Groups will fix the issue. Under those conditions the System account will not have any right to access the  HKLM\Software\Wow6432Node\Citrix\EUEM\LoggedEvents registry key and the upgrade or uninstall or the hotfix setup will fail with Access Denied
Value of BaseOU is not NULL in chb.Config.Site table of XenDesktop database
In .ini file of thin client the PNLite URL in the file had the switch "reconnectatlogon" = 0, hence the reconnect feature was disabled.
There are no apps or desktops available
Director is not able to pull the records from one day during its average calculation time (Usually 7 - 15 days) for the session details. This is usually caused by the SQL database not being available for a particular time frame.
Citrix policy "Desktop wallpaper" is set to "Prohibited," or another policy has this configuration that is applied with a higher priority.
AppDisk Product Documentation:https://docs.citrix.com/en-us/xenapp-and-xendesktop/7-8/install-configure/appdisks.htmlAppDNA 7.8 Documentation:http://docs.citrix.com/en-us/dna/7-8.html
Cause 1
Run an unattended installation of Presentation Server 4.5 by adding the following parameter to the command line: \
CTX_MF_USER_NAME="Administrator" CTX_MF_DOMAIN_NAME="" CTX_MF_ADD_LOCAL_ADMIN="Yes"…
Note: In the preceding example, the domain name is blank. Although local administrators were added, the change was not written to the data store.
-Or-
Drop all administrators from the data store tables. The following screenshot shows a normal administrator view using DSView.exe. 	Though DSView is available in CTX106232 – DSView, Citrix recommends using the version of the DSView.exe utility included with the Presentation Server media of the current installed product.
The following screenshot shows an abnormal administrator view using DSView.exe from the server media (no objects exist under the Users node):
Cause 2
The Data store might be corrupted. One way of checking if the Data Store is corrupted is by issuing the following CLI command:DSCHECK /full servers
There is a corruption on the data store preventing initialization of the server container inside of the data store and possibly the Administrator container as well if the following error message is displayed:”Failed to do server initialization: 0x800000007”,.
Permission to registry locationMSI (s) (D4:88) [14:08:50:802]: Executing op: RegisterSharedComponentProvider(,,File=ul_msvcr80.dll.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E,Component={98CB24AD-52FB-DB5F-A01F-C8B3B9A1E18E},ComponentVersion=8.0.50727.4053,ProductCode={90140000-0011-0000-0000-0000000FF1CE},ProductVersion=14.0.4763,PatchSize=0,PatchAttributes=0,PatchSequence=0,SharedComponent=0,IsFullFile=0)MSI (s) (D4:88) [14:08:50:802]: Note: 1: 1402 2: UNKNOWN\Components\DA42BC89BF25F5BD0AF18C3B9B1A1EE8\00004109110000000000000000F01FEC 3: 5MSI (s) (D4:88) [14:08:50:802]: Product: Citrix Virtual Desktop Agent - x64 -- Error 1402. Could not open key: UNKNOWN\Components\DA42BC89BF25F5BD0AF18C3B9B1A1EE8\00004109110000000000000000F01FEC.  System error 5.  Verify that you have sufficient access to that key, or contact your support personnel.
IE enterprise mode cannot work well with UPM/Roaming profile.
Needed to make the change in UsageCollectorConfig file located under C:\Program Files (x86)\Citrix\Licensing if customer is using proxy environment.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Broker fetches incorrect IP address of VDA from WCF rather than the actual IP address of VDA
Incorrect query to launch the application
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Group policy issue.
This happens if the service for a particular service for a particular controller has not been entered correctly in the database while the site was upgraded.
The validation algorithm has changed in XenDesktop 7.9 which leads to the issue
Set-ProvServiceConfigurationData –Name DisableDomainInjection –Value true case sensitive
This can happen for a number of reasons, but mainly because XenDesktop best practices (see link below) were not followed during site configuration and maintenance.For example:- the XenDesktop / XenApp admin account was deleted from AD then re-added, changing the SID of the admin user account.- the DDC's were rejoined to the Domain hence changing the SID of the machines.
Web.config file needed to be configured to terminate sessions when logoff button is clicked.
This usually happens when the Server VDAs does not shutdown gracefully in the stipulated amount of time.
When a reboot action is initiated via Reboot Schedule, Delivery Controller sends a shutdown signal to the VDA but before that, it waits for the all user sessions to get logged off and services to shutdown.If all the user sessions on the VDA are not logged off within 10 minutes and machine is not shutdown gracefully, then the Delivery Controller sends a force shutdown of the VDA and machine does not power on.
The reason for such behavior most likely lies in disabled automatic installation of trusted root certification authority certificates.The Citrix SCOM Management Pack installation package is signed with our certificate, which might not be trusted on the target computer. Computers that are not connected to the Internet cannot automatically download these certificates.
In our case, the certificate (issued by VeriSign) which is used by a Citrix SCOM Management Pack has to be trusted. To achieve this, a root certificate in the certificate chain must be added to “Trusted Root Certification Authorities”.
Citrix license server unavailable.
User group policy not hitting correctly probably due to stale session id's accumulated at:HKLM\Software\Policies\Citrix\ <Session Id>
Kaspersky AV
Citrix_startup.lic file is missing.
installation of the new application corrupted the existng .net framework.
Remote file requests are handled improperly by other DFS and network providers.
http://support.citrix.com/article/CTX102345  - Windows 2003, 2008, and 2008 R2 Sessions Reconnect to Existing Sessions from Different Devices
The certificate for the license server was expired
Reference : https://technet.microsoft.com/en-us/library/jj683103(v=office.15).aspx                        http://www.microsoft.com/en-us/download/details.aspx?id=15238
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
A CLSID is a globally unique identifier that identifies a COM class object. If your server or container allows linking to its embedded objects, you need to register a CLSID for each supported class of objects.
For more information on the configuration reference: https://www.citrix.com/blogs/2014/10/16/citrix-director-7-6-deep-dive-part-2-support-for-xenapp-6-5/ http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-6/xad-monitor-article/xad-monitor-director-wrapper.html http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-6/xad-monitor-article/xad-monitor-director-wrapper/xad-monitor-config-permissions-legacy-vda.html http://support.citrix.com/article/CTX139382
On the target server on which server role manager fails to remove server from current farm , the database location as specified on the dsn records is still in use and therefore the XenAppConfigConsole.exe in GUI mode which is the server role manager is unable to clear the entries and has to be accessed from shell mode via command prompt , with "/ExecutionMode:Leave " switch .
Updating the MCS created machines from VDA 7.6 to VDA 7.6.300 deleted the required registry settings.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
DNS issue.
Required permissions on database are missing. For more information refer to CTX127998 - Database Access and Permission Model for XenDesktop.
The way that XenApp 6.5 manages Windows Media Redirection is such that it is does not handle very high and variable bit rates perfectly.Raw video (and audio) data is sent to the client for client-side rendering in chunks.  The size of these chunks are determined as a best guess by XenApp 6.5 WMR components.For very high and variable bit rate videos, the result can be that the client-side can run out of data before the next chunk is received.  As a result the video will not play smoothly.
Issue is caused by extra space in a Monitor DB connection string, which is represented between the comma after the SQL server name and the SQL port.Example with the space:Server=FTLSQL.domain.com, 1499;Initial Catalog=XenDesktopDB;Integrated Security=trueExample without the space:
Server=FTLSQL.domain.com,1499;Initial Catalog=XenDesktopDB;Integrated Security=true
DNS was not updating with the SQL cluster listener IP.
Procmon traces indicate that the processes mfcom.exe and ctxwmisvc.exe are loading a third party module, VSMapiMon.dll.This module is not present in traces captured on a 'working' server.The difference between working and non-working servers is the presence in the registry of VSMapiMon.dll under the key AppInit_DLLsHKLM\SOFTWARE\Wow6432Node\Microsoft\Windows NT\CurrentVersion\Windows\AppInit_DLLs
NetScaler was configured to monitor VDAs and was constantly generating events on VDA, even when there were no sessions on VDA.
Microsoft anticipated that this issue would be resolved in Windows Server 2016.
Server 2016 has been tested and it appears that there has been no positive changes made to allow for this functionality.
Significant Microsoft product changes would be required to enable this capability. Plans for the development of a fix from Microsoft are unclear at this point. Microsoft bug O15:3516601.
Using HTML 5 receiver as launching through Microsoft Edge.
Below are the behavioral changes in Xenapp 7.x as compared to Xenapp 6.x.
A user can have any number of desktop sessions (unless limited by configuration).A user can have only one application session per delivery group (per endpoint, depending on reconnect setting).If the user wants to have multiple applications launched from the same delivery group, the applications need to session share, and session sharing is possible only with seamless applications.If  the user wants to have multiple applications launched with each application in its own session (applications are not seamless, and so can’t session share), the applications needs to be published from different delivery groups.
MSMQ was set to HTTPS as well but it hadn't been configured for it . To configure MSMQ to use HTTPS customer needs to follow the configuration:
http://support.citrix.com/content/dam/supportWS/kA460000000CnKLCA0/Configuring_Security_Features.pdf
From XenApp/XenDesktop 7.x, the behavior of launching Windowed mode sessions inherits the behavior of RDP "Start the following program on connection" feature. Users cannot launch multiple instances of Windowed mode session if the session is launched in fixed window mode. This was not the case for Pre 7.x. Users were able to launch multiple instance of Windowed mode session in XenApp 6.x. The following difference can be observed in CDF trace between 7.x and 6.x when a subsequent session is attempted to launch. XenApp 6.x：Can the session be shared? -> Cannot share this session as the existing session is Windowed mode -> Launch the subsequent session in NEW session. XenApp 7.x:Is there a session from Same user using the same application -> Yes, will not launch a new session as session already exists. -> subsequent session is discarded.
Inconsistent duplicate server entries in Xenapp Database lead to this issue.
Known issue with XenApp/XenDesktop 7.9
During the upgrade of a VDA, the previous install path is used in setting the "Location" install key in HKLM\Software\Citrix\Install. If the upgrade is from 5.6.400 this Location key is set to C:\Program Files (x86)\Citrix. If the prior install was 7.6 this key is set to C:\Program Files\Citrix.
The WDICA driver incorrectly looks at the HKLM\Software\Citrix\Install key to determine the install path. Other drivers use HKLM\Software\Citrix\Install\ICAWS which will be set to C:\Program Files\Citrix even on an upgrade. WDICA uses the install path to locate KDB files which are used for Unicode Keyboard mapping required by non-Windows clients.
In the event of an upgrade from 5.6.400 to 7.6.300 WDICA is unable to locate the KBD files which are located in C:\Program Files\Citrix\HDX\Drivers\wdica since it is looking in C:\Program Files (x86)\Citrix\HDX\Drivers\wdica. As a result keyboard mapping for non-Windows clients will fail.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Reviewing the logs and package XML, we figured out that TargetInPackage flag is set to false. As a result the launcher is attempting to find the package locally and fails.
Custom OID registration by “Entrust Entelligence Security Provider for Windows” causes SHA256 signature validation of  Citrix dll's to fail, preventing IMA from starting
App-v integration was culprit. Product team is already aware under http://discussions.citrix.com/topic/378416-xendesktop-79-mmc-crash/.
As a part of normal maintenance, use the REMOVE command with additional switches to purge the database and the file structure of files. The purged files are based on the number of days that you want to retain the database for.ICLDB REMOVE /RETENTION:20 /LISTFILES /DELETEFILES /L /F /SThe preceding command will delete all records and files (/DELETEFILES) as well as log (/L) suppresses prompts and copyright (/F /S).
For further information on the commands used in this article see the product documentation:http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-8/monitor/xad-session-recording/xad-sr-reference-wrapper-v2.html
Microsoft Windows Updates:KB3072630KB3139923
Group Policy Management server feature is preventing installation.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
exe of the application entered in command line of the application properties does not exist in the specified location.
Virtual channels not disabled completely. Additional configuration needed to disabled virtual channel.
Without this registry key ,XenApp server will show UNC path while publishing from a remote server.
Port 1494 was open to the Web Interface servers and not to the XenApp servers.XenApp servers had the alternate address but firewall was blocking access.
The cause of the issue is the attempt to launch the application (from same client and user) before the first application launch is complete and ready for session sharing and is therefore denied. A warning message is posted to the event log for informational purposes. This is as designed.
It will take approximately 30 seconds to a minute for a printer to fail to map, as it will retry 60 times before moving to the next printer in the policy. Every printer the user does not have access to a printer will add 30 seconds to the total time of enumeration of printers.
Additional cause can be if a printer is in a policy and this printer no longer exists on the print server. This can add up to 8 minutes of the enumeration time.
Issue with the Windows Operating System and printers being managed by 3rd party print providers.
invalid stale entries on the DB getting reflected on the Farm machines in the worker Groups. Worker Group mapping had junk entries.
Citrix Discussions
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The preceding registry value adds the local administrators group to the ACL of the auto created printers, this may explain why people are seeing these objects, although this would be limited to local admins.
A broker from a new XenApp farm was affecting authentication. There was an unspecified error on the event viewer coming from the XML server, the error is found on the StoreFront server.
Active Directory GPO modified the groups presented in the "Allow log on through Remote Desktop Services" local security policy on server
Refer to the Security Bulletin regarding this issue.
The delay in launch was originating due to logon scripts ,which  are starting as soon as logon process is complete .The launch was not happening in the required time causing logoff checker to kick in and disconnect the session .
Logon scripts were running one after another and taking more than a minute to finish the logon which is default time within which an application should launch. As they were not launching within this default time,the logoff kicks in and application could not launch.The issue occurs when the default one-minute time-out is exceeded and the session logs off automatically because the application takes a longer time to start.
Microsoft c++ 2010 newer version than VDA installer was causing the issue.
AutoCAD selecting wrong display adapter
The user account being used to connect to the Microsoft SQL Server Database is not a Database Owner (db_owner). The account being used to install a new server into the farm or an existing farm must have db_owner rights or it can cause the installation to fail as seen below from our edocs.
Microsoft SQL Server Database
The server hosting the Microsoft SQL Server database should meet the following minimum requirements:
Approximately 100MB of disk space for every 250 servers and 50 published applications in the XenApp farm. Provide more disk space for greater numbers of published applications.Set the "temp" database to automatically grow on a partition with at least 1GB of free disk space. Citrix recommends 4GB if the farm is large and includes multiple print drivers.
The default database installation settings and database sizes usually suffice for XenApp data store needs.
Microsoft SQL Server supports Windows and Microsoft SQL Server authentication. For high-security environments, Citrix recommends using Windows authentication only.
The user account for installing, upgrading, or applying hotfixes to the data store must have database owner (db_owner) rights to the database. When you finish installing the database with database owner rights, set the user permissions to read/write only to increase the security of the database. Change the rights back to database owner before installing service packs or feature releases; installations can fail if the user account used to authenticate to the data store during Setup does not have database owner rights.
When using Microsoft SQL Server in a replicated environment, use the same user account for the data store on each Microsoft SQL Server.
Each farm requires a dedicated database. However, multiple databases can be running on a single server running Microsoft SQL Server. Do not configure the farm to use a database that is shared with any other client/server applications.
Back up the database regularly and follow Microsoft recommendations for configuring database and transaction logs for recovery (for example, setting the Truncate log on Checkpoint option to control log space).
Citrix Discussions - Unable to start Citrix Studio on 7.6 install - MMC crashesMore information on Ngen: https://msdn.microsoft.com/en-us/library/6t9t5wcf(v=vs.110).aspx
Version mismatch between VDA and Universal PDF Printer.
SelfServicePlugin.exe invokes SelfService.exe with the parameter "-periodicpoll" (4.4) or "-poll" (4.3.100 or earlier), every an hour.At this time, the window created by SelfService.exe sometimes steals focus from other windows. This sometimes confuses Z-order of windows.
Working with the AppInit_DLLs registry value
Unable to Remove XenDesktop Delivery Controllers from the XenDesktop SiteDatabase Access and Permission Model for XenDesktop
This a generic error thrown by the Excel might be due to the below reasons:
No Virtual memory or disk space, or lack of permissions to any cache folder.Dcom permission issues.Unable to create Streaming or Internet cache files.
According to the Microsoft documentation, the use of Profiles across different versions of Operating Systems is not supported and may cause undesirable behaviour Roaming user profiles in Windows 8.1 or Windows Server 2012 R2 are incompatible with roaming user profiles in earlier versions of Windows.Profiles are compatible only between the following client and server operating system pairs:•    Windows 8.1 and Windows Server 2012 R2•    Windows 8 and Windows Server 2012•    Windows 7 and Windows Server 2008 R2•    Windows Vista and Windows Server 2008Note When the client operating system is referenced in this article, the same issue applies to its corresponding server operating system.For example, if you try to deploy Windows 8.1 in an environment that uses roaming, mandatory, super-mandatory, or domain default profiles in Windows 7, you experience the following: •    After you use a user account that has an existing Windows 7 profile to log on to a Windows 8.1-based computer for the first time, the components from Windows 8.1 read and modify the profile state.•    Certain Windows 8.1 features may not work as expected because the expected profile state is not present. •    When you try to use the same user account to log on to a Windows 7-based computer, the user profile modification that was performed in Windows 8.1 may not work as expected in Windows 7.The issues occur because the profile will contain values that are used differently between the versions of Windows. The user profile will be missing default profile configuration information that is expected by the operating system, and could contain unexpected values that are set by a different operating system version. Therefore, the operating system will not behave as expected. Additionally, the user profile may be corrupted. Further documentation is available in TechNet to outline the versions of Windows profiles linked with which Operating System versions.
Profile Versions

Operating system versionRoaming User Profile locationWindows XP and Windows Server 2003\\<servername>\<fileshare>\<username>Windows Vista and Windows Server 2008\\<servername>\<fileshare>\<username>.V2Windows 7 and Windows Server 2008 R2\\<servername>\<fileshare>\<username>.V2Windows 8 and Windows Server 2012\\<servername>\<fileshare>\<username>.V3 (after the software update and registry key are applied) 			\\<servername>\<fileshare>\<username>.V2 (before the software update and registry key are applied)Windows 8.1 and Windows Server 2012 R2\\<servername>\<fileshare>\<username>.V4 (after the software update and registry key are applied) 			\\<servername>\<fileshare>\<username>.V2 (before the software update and registry key are applied)Windows 10 (1507 and 1511)\\<servername>\<fileshare>\<username>.V5Windows 10 Anniversary Edition (1607) and Windows Server 2016\\<servername>\<fileshare>\<username>.V6
A maintenance and monitoring software was added to the database which added the CustomStat_Value statistic entries. This created locks on certain tables.
The failing attempts to leverage NTLM authentications caused the user accounts to get locked out. Due to a timing issue between the DFS client and Preferences extension (gpprefcl.dll), the system was unable to access the namespace using the Kerberos authentication protocol and instead, NTLM authentication was used and failed.
Trying to launch application from a specific server/delivery group.
We store the cmdline params in global atom table and then read them out by using Microsoft Windows API. From the traces we could find that before we call the windows API to store the params, they are right, but when we read out them by calling Windows API, they are wrong. We use GlobalAddAtom to store some cmdline when we try to launch an application, but when we read out the cmdline by calling GlobalGetAtomName, we get the wrong params. This problem also occurs with a sample program which stores the cmdline params in global atom tableand read out the cmdline by calling GlobalGetAtomName.
Caused by the recalculating of the Microsoft WMI GPO filters when a user reconnects to their session.
Heap expansion (memory leak) results from some components not freeing dynamically allocated heap memory. Over time, it results in process growth in memory, slow operation, and eventually, application hang or crash.
-
Adobe PDF Creator not accepting EMF or XPS print job injection, hence the EMF or XPS viewer window is displayed.
On Director Event Log Error ID 5 from Citrix Director Service Msg: "Failed to connect to data source 'Unknown error.'Error event ID 2008 Citrix Monitor Service Msg: "Error querying the Broker via GetBrokerObjects to obtain 'Controller Machine Details' This occurred after moving to and from a DR database.
- Stale registry keys/Entries- Stale Directories under Program Files/Program Files x86
Shortcut with the same name already exist and cannot be replaced.
IMA service not starting Error: IMA Service Error Message - 214748361MFcom stuck at starting
In application enumeration, access session condition (AG Farm Name : Policy Name) is compared with the smart access filters of each app.If the access session condition doesn’t match any smart access filters of an app, this app will not be visible in this SF/WI session.
Framehawk currently does not support 4K monitors and multi-monitor scenario. The maximum resolution currently supported by Framehawk is 2048*2048.[Trace segment]14:36:36:73930,6832,5392,3,***,***,1011,***,9,CDF_ERROR,"GfxEngine::Enable: Framehawk cannot handle multi-monitor layout, or resolutions greater than 2048 pixels, fail and fallback",""
The problem is the pfx file (and the private key as a consequence) which has an unsupported CSP set.The only one CSP supported by SSLSDK is "Microsoft Enhanced RSA and AES Cryptographic Provider”.Use “Openssl” command to verify the CSP of your certificate,openssl pkcs12 -in certname.pfx
Redirection of some devices that may use Generic redirection are not support in 2008R2 VDA.  Using the device manufacturer client and driver enables these devices to appear in published applications and desktops.
For 3D PRO desktop. Monitor Blanking need Nvidia driver, if the driver is not ready the blanking will be failed.ORThe VDA agent had HD3Dx Pro enabled where the VM doesn't have the Nvidia Display driver <GPU> installed or if Citrix WDDM Display driver is runningNon-working:Failed to enable as 3dPro, but Vd3d provider worked, falling back, likely no GPU",""  Working:"IsAdapterPresent :: NVIDIA GPU detected",""SetMonitorState: NVAPI DLL found and loaded. Blanking/unblanking via NVAPI.",""SetMonitorState: NVAPI DLL unloaded.",""SetMonitorState: NVAPI Blanking :: Blank Succeeded","" In working scenario, we see that console blank was succeed because we found that NVIDIA GPU was attached and detected. In non-working scenario since the GPU isn’t attached console was open and visible on the XenCenter console.IN CDF trace, you would see following lines:Non-working:Failed to enable as 3dPro, but Vd3d provider worked, falling back, likely no GPU",""  Working:"IsAdapterPresent :: NVIDIA GPU detected",""SetMonitorState: NVAPI DLL found and loaded. Blanking/unblanking via NVAPI.",""SetMonitorState: NVAPI DLL unloaded.",""SetMonitorState: NVAPI Blanking :: Blank Succeeded","" As per the article below, HDX 3D Pro mode “Supports GPU acceleration with any GPU, however console blanking, non-standard screen resolutions and true multi-monitor support require NVIDIA GRID, Intel Iris Pro, or AMD RapidFire graphics”https://docs.citrix.com/en-us/xenapp-and-xendesktop/7-14/hdx/gpu-acceleration-desktop.html
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
This issue can occur for one or more of the following scenarios:Scenario 1: Your video card or video driver is outdated or corrupt. Note Outdated or corrupted printer drivers can also cause script errors when printing from Internet Explorer Scenario 2: You may not have printer permissions assignedScenario 3: Protected Mode is enabled for the Internet security zone of the web pageScenario 4: There is an issue with temporary folders on your user account and the Low folder under the %TEMP% location has been deleted
The following article indicates this is a design limitation http://support.citrix.com/article/CTX122438  however the article is old (only appears to apply to Presentation Server 4.5 on 2003) and the customer’s use case is that it worked fine with IE 8.  So we’re not sure it applies. Further investigation by the customer found the following keys which are added in versions of IE greater than IE 8.  These “CommandId” keys are not present in IE 8 or prior.HKEY_CLASSES_ROOT\http\shell\openHKEY_CLASSES_ROOT\https\shell\openRegistry keyName:  CommandIdData:  IE.ProtocolWhen we rename or remove these keys Content Redirection from Server to Client functions again like it did in IE 8.  The implication, although we would have to confirm with Microsoft on this,  is that somehow this key is intercepting the call to open the content before Citrix’s hooks to decide whether to redirect it to the client can take effect.When we open the hyperlinks from the Published application (tested with Outlook and Wordpad) the server to client URL redirection works as expected however when an instance of Published IE is running, all URLs open in the published instance of IE instead of getting redirected as suspected.
Policy/Service/Known issue
When applying template from article: "How to Configure Default Device Access Behavior of Receiver, XenDesktop and XenApp" http://support.citrix.com/article/CTX133565, changes the default value of the Connection Authorizations Decision from default 1, to 3 (non-secure connections).
The client workstation was locked down and was not allowing FTA to be enabled. logging into the client device as an admin allowed the association to work and double clicking a file with the correct extension launched the published application.Client drive mapping was not enabled. The published application would open however you would see an error saying "could not access file \\client\c:\~~~" meaning client driver redirection was not enabled.
Printer Policies configuration Issue.
Upgrading Studio to version 7.8 on separate management server before upgrading Controllers to version 7.8.
Microsoft GPO was overriding the Citrix policy.
Issue has been found to be with the firmware of the thin clients running RTME 2.0.1. Linux distribution: eLux. Customer upgraded thinclients from version 4 to 5.2 and found this resolved the issue.
When domain pass-through is used, IIS (on SF) contacts domain controller for user authentication. With the obtained token, it extracts the user SIDs , which are the group membership information of the authenticated user. Then SF includes these SIDs in the enumeration request and send the request out to XenApp. Then XenApp filters out user’s applications by comparing the SIDs granted access aganist each resource. Now the problems is the SIDs granted access to resources are ones from XenApp domain, while the SIDs in the enumeration request are the ones from Storefront domain. And the SF domain controller will not include the group SIDs of another forest during authentication (i.e. though the user being authenticated truly belongs to them). And that is when it fails.
The issue was caused by Edgesight's injection and monitoring of the cshadow.exe process.
This is caused by upgrading the Citrix licensing Server before completing the install for XenApp Fundamentals 6.0 for Windows Server 2008 R2.
Performance counters were corrupted.
Issue is caused by the new way Microsoft's Internet Explorer writes its cookies.
Stale entry for UPM in registry and Group Policy not applying at boot.
This issue is caused by corrupt applications or application entered with non standard characters.
Logons queuing.
The Video Driver Scaling mode in combination with Multiple Monitor resolution settings.
LA5005 States:The code in RPM at the time of initializing the Policy Engine first checks if IMA is running or not. If its running it fires query to that, but if its not running it takes a different root and wait for IMA Service to run and then waits for RemoteAccess Subsystem to be up and running too and thus resulting in restart of policy engine with updated values..
SessionID is not sent from the VDA anymore in 7.x so the specific data is not accessible through the SDK.
Some processes that are not excluded from UPM are lingering in session and holding up the Deletion process of the locally cached profiles.
logonMethod in Citrix StoreFront's configuration file (web.config) was not set correctly to allow Pass-Through Authentication (SSON).
This is the expected behavior when using shared desktop in full-screen mode.
LS folder was missing from this location:  C:\Program Files (x86)\Citrix\Licensing
Caused by XPS enabled printers not being compatible with an EMF based printer driver.
Caused by improper configuration of QOS on ICA traffic when using a riverbed device
MFapphook64.dll was not loaded, the registry key was not set correctly.
Softrack Software installation was causing issues with the Receiver Installation. If a customer is experincing similar issues make sure to find out if they have any third party software that was recently deployed. In this scenario, this application was deployed at the same time as an update to GoToAssist. Softrack is a monitoring tool used to track certain programs.
Issue caused by third-party product Cisco Jabber writing files to the users profile.
The Startup license file was missing on the Licensing folder of the License server (c:\program files (x86)\Citrix\Licensing\My Files).
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Known issue with VMware Vsheild driver. This behavior is being caused by the mountmgr.sys file in the Windows 7 OS causing a deadlock. Microsoft also reports that this affects 2008 machines as well.
Citrix Director 7.6 Deep-Dive Part 2: Support for XenApp 6.5
“Remote Desktop Services” was restarted.
HOW TO: Troubleshoot Application Performance with SQL Server on the Microsoft Support page for more information.
1. SPN for the SQL account has changed in some way, causing an authentication issue. OR2. SQL Service is running under the Local System account instead of the SQL service account.
Citrix Blogs - How To Secure ICA Connections in XenApp and XenDesktop 7.6 using SSL
http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-6/xad-build-new-enviroment/xad-dg-create/xad-dg-manage-apps.htmlhttp://docs.citrix.com/en-us/receiver/windows/4-3/ica-overview-receiver-config/receiver-windows-configure-app-delivery-wrapper.html
CTX122676 – How to Install the Web Plug-in and the Pass-Through Authentication Component for Use with ICA Files or Web Interface
CTX368624 – Troubleshooting Citrix Pass Through Authentication
CTX112957 – How to Configure Version 10.x of the Presentation Server Client Using the Icaclient.adm Template
CTX076838 – Troubleshooting the Desktop Credential Pass-Through Feature
CTX124871 – 12.0 Online Web Plug-in Using Single Sign On - SSON Fails with Web Interface
Group Policy settings can be configured on each individual client machine or in Active Directory for large environments.
Latest available Receiver downloads
Reference to invalid session context leading to a BSOD.
The MFAPIHOOK64.DLL was not loaded properly. Loading it directly to the registry resolved the issue.
DC registerred unaccessiable DNS entry(multi-homed, only one adapter is in use).XenApp server got the bad DNS record and tried to established RPC connection but failed which resulted in the winlogon failue.
Smart Auditor depend on MSMQ and may require the MSMQ message storage to be increased in environments where many sessions are recorded.
Issue appears to be Java specific, but exactly root cause is unknown.
Upon application launch wfshell process (32-bit) will requests the application. It then proceeds to translate the %ProgramFiles% or %ProgramFiles(x86) path variable incorrectly causing the launch to fail.Indicator in Traces: "Call LaunchApplicationW pAppName "FileZilla", pCmdLine ""%ProgramFiles%\FileZilla FTP Client\filezilla.exe""","""AL_LaunchApplicationW:expand environment variables for the application's command line[ hToken=0x4300220000075C, Command=":\Program Files (x86)\FileZilla FTP Client\filezilla.exe""
Only had one desktop in the machine catalog assigned to one user that was not the user in question
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Having HTML Injection enabled in the app flow settings of NS was causing the error.
There was a NULL entry in the "DesktopGroup" table in Monitor database which raised an exception during the query of failed session summary.
Above behavior is only seen in case of customer using Web API / SDK.
Possible causes include Network connectivity issue and Incorrect proxy configuration.
Known problem...
GPO_SfStorefrontAddress_User' does not exist.
Issue is caused by a conflict of the local server policy settings and GPO.
Stopping MSIService triggers the hang. MSI hooking in Ctxsbx is hooking the function.
For Client side Flash redirection to work NPAPI flash needs to be installed on the client, with version matching or higher than server ActiveX Flash version. IE on server uses ActiveX Flash version.Pseudocontainer2.exe uses NPAPI flash version on the client.
CRL check issue
Windows attempts to download the necessary root certificate during the certificate chain validation if the root certificate is not installed on the system. However, if the Update Root Certificate feature cannot automatically retrieve the necessary root certificates, the certificate validation fails.
Known Issue with Allegro application.
http://discussions.citrix.com/topic/351114-xenapp-75-multiple-sessions-with-the-same-user-account/
Palo Alto Firewall issues with forwarding the packets to the netscaler
Microsoft security update MS16-014 has changed the behavior of the API NetUserChangePassword.
Could not install drivers as disabled by policy.
Antivirus is not able to scan files in CDM mapped drives
Antivirus creates a lock on the temporary inventory template.vhd
There were stale entries of the users from the previous domain in the database.
The issue is identified with the ICA Listener configuration
Dynamic preview for multi monitors is disabled by default.
cfgengine folder was not under C:\Program Files (x86)\Citrix.
The service account for 'Citrix Telemetry Service' has insufficient privileges at time of XenDesktop 7.8 install. The XenDesktop 7.8 install will associate the service account 'NT SERVICE\CitrixTelemetryService' with 'Citrix Telemetry Service', typically rights to logon as a service are extended to 'NT SERVICE\ALL SERVICES'. Editing the local or domain policy 'Log on as a Service' such that the newly created 'NT SERVICE\CitrixTelemetryService' is not defined with sufficient rights generates the install failure on the 'telemetryserviceinstaller_x64.msi'. This occurs because services configured to run under the Local System, Local Service, or Network Service accounts have a built in right to logon as a service. Any service that runs under a seperate user account must be assigned the right. The Citrix Telemetry Service is implemented as of the XenDesktop 7.6 Feature Pack 3 release and is responsible for collecting diagnostic information to support AoT CDF Tracing.
The issue we are facing with Receiver 4.4 where the applications freeze after launch is a known issue with this receiver version. The engineering team is working on this bug and we expect this to be fixed in a newer release / Private fix. This issue was also seen in previous versions and was patched in 4.3.100 by the Bug # LC2723.More about the bug –Sessions connected through optimal NetScaler Gateway might become unresponsive when browsing map sites and using the zoom in and out option to view images.[#LC2723] - This seems to have regressed in 4.4 and the users experience the same behavior.http://docs.citrix.com/en-us/receiver/windows/4-3/receiver-windows-43-about/receiver-for-windows-4-3-fixed-issues.html
The behavior is a result of the combination of users' "Reboot logon disable time" setting in Citrix scheduled reboot policy and unpredictable reboot timing between the XenApp server hosting the datastore and other member servers. This issue is easy to reproduce in a simple two XenApp servers farm.
1. Once a XenApp member server completes reboot before XenApp datastore starts up, the IMA service will fail to update the logon mode value "Prohibit logons until server restart"​ in datastore with the new value "Allow logons and reconnections" due to the temporary non-contactable XenApp datastore.2. Because the update action happens only once after the windows starts up, the logon mode value of the member server in datastore will continue to be "Prohibit logons until server restart"​ till the next LHC refresh time. 3. After the next sync between datastore and LHC occurs, the IMA service will use the logon mode value in datastore to update current windows logon mode. This is the reason why around 40+ min after the reboot there is a windows event "Logon control mode change to mode: Prohibit logons until server restart".
XenApp application had been deleted manually without being deprovisioned via HAAD.
Issue only present on thin clients. Tested with full Windows 7 PC, no issue with multiple user accounts
RequireLaunchRef Configuration in SF config
GetGPOList was slowing down the re-connection process.XenApp/Xendesktop recalculates WMI filters on every reconnect. This issue is generally caused due to recalculation of the Microsoft WMI GPO filters when a user reconnects to their session.
Issue occurred because the machine SID was different in AD vs. what the VDA showed.
When Excelhook is enabled, switching between open Excel workbooks can lose the focus on the selected workbook. Additionally, users cannot select any of the open Excel workbooks and the focus stays on the last chosen file.[From ICATS760WX64028][#LC2589]Although the above fix has been integrated into Server VDA 7.6.300, customer is using 64-bit Excel. It is recommended to use 32-bit Excel, which is more stable to co-work Citrix ExcelHook.
Found audio and recording capabilities to not be supported within XenApp environment per http://support.citrixonline.com/meeting/all_files/G2M010013
Note: Audio and recording features are supported with GoToMeeting installed in XenDesktop environments, but they are not supported in XenApp environments.
Userinit registry was incorrect under "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon". It was "actsinit.exe", C:\windows\system32\userinit.exe wherein it should be only "C:\windows\system32\userinit.exe" (Without qoutes)
The files that are not getting synchronosed on UPM logoff were created during the session as "hard link" symbolic link files.(most probably created by an application using the Microsoft "MKLINK" command)The UPM filter, when evaluating files for processing, identifies the "hard link" files as reparse points.Because reparse points are used for other purposes ("folder redirection" and "Active Writeback"), the UPM filter removes any files created as symbolic links from the UPM file/folder processing queue.This is by design.
WMI classes missing
Performance Counters corrupted.
Was not using Universal Print Server (UPS) so does not need that registry key that tries to use it
IgnoreRegUserConfigErrors behaviorhttp://support.microsoft.com/kb/902336The 'IgnoreRegUserConfigErrors' registry setting on the Terminal server will cause Winlogon to ignore the fact that it cannot contact a DC in the domain of the authenticating user to get the information it is looking for.
Windows 2012 ships with a built in version of the Adobe Flash Plugin that is published by Microsoft.  Flash content that is rendered utilizing the Microsoft Flash Plugin in an ICA session can be displayed upside down due to an interoperability issue between the Microsoft plugin and ICA.
Traces show a very high value of Foreground Lock TImeout:Unable to set window 0x20030 as the foreground window. [ nForegroundLockTimeout=15724612 milliseconds ]The value of ForegroundLockTimeout by default it should be 20000.
By Default, the Smart Auditor XML Broker has the secure communication set to use SSL.
Printer redirection policies were not applied on the server VDAs.
Delayed DHCP response
After copying all the user's UPM Store profile to a new location, users no longer had permissions to access their own profiles (in the new location) during UPM processing.The cause was that the NTFS permissions for the ACEs on the destination folder (new location) propagated its permissions on copy. The propagated permissions resulted in users unable to access their own UPM profiles.
When the "Allow users to connect remotely using Remote Desktop Services" policy setting is configured, it will continually override logon controls in XenApp once group policy replication occurs.
NIST PIV test cards
Microsoft CertEnroll Interfaces
CTX206156 - Smart Card Configuration for Testing Citrix Environment
On the endpoint, the file type association is not working for specific ext types - xls, xlsx, docx.Issue is receiver 4.x on wards.
One of the 3 DDCs has the incorrect setting of the registry IndigoTcpPort.(Incorrectly set to type string and had no value)
A GPO used to map a specific drive was causing issues.The policy was trying to map a network drive but only a limited number of users had access to the drive(125 users), the rest would get an access deny error again and again when trying to login.
Possible incomplete profile deletion from C:\users and not the registry.
Wrong protocol association for HTTP and HTTPS on the client machine
Did not restart IIS after adding new cert
To support different DPIs between multi monitors, Implementation of "Per monitor DPI Aware" option in manifest file on Citrix Receiver side is needed.Actually, it fixed the flicker issue but it caused some regression issue. By the further investigation, it turned out that server side product design change is necessary for complete fix.
Receiver for Windows is designed for high performance on a client end-point. When it is installed on a Server VDA and used in a double-hop use case, multiple sessions launch WfIca32.exe. In that use case, the legacy polling can use more CPU, thus limiting the scalability of each Server VDA. The recommended solution is to install the SlowHPCPolling registry key with the maximum setting of 16 ms.
-NPAPI support removed from Chrome.
UseClientIP registry will not assign a client IP address as a Virtual IP address. Such a published application actually uses a Server IP address as its own IP address to communicate with an external application. For example: When launching Internet Explorer as a published application with UseClientIP registry configured, Internet Explorer itself uses a Server IP address to connect to some Web site (Web Server).UseClientIP does not give any virtually assigned IP address to the session at glance. So you cannot tell if the UseClientIP registry modification actually works from the session information on AppCenter or  from netstat command within the session unless a published application in the session shows the related information for it. To confirm it, publish GetIP.exe with the registry modification for UseClientIP. Once you launch GetIP.exe as a published application, you can see your client local IP address assigned in the IP address field. This IP address is taken from the gethostbyname function from Winsock. Some applications use a gethostbyname type function to get an IP address for identification purpose. If you have such applications on XenAppServer, you can use UseClientIP for the application to work properly. MSDN https://msdn.microsoft.com/en-us/library/windows/desktop/ms738524(v=vs.85).aspx indicates this function has been deprecated and getaddrinfo should be used. The following function used by the application is returning the IP address of the host. You will need to use an equivalent of the gethostbyname or getaddrinfo in the application.
REMOTE_ADDR (10.196.97.102) and System.Net.Dns.GetHostEntry = servername1.comREMOTE_HOST (10.196.97.102) and System.Net.Dns.GetHostEntry = servername2.comRequest.UserHostName (10.196.97.102) and System.Net.Dns.GetHostEntry = clientname1.com
NET implementation of GetHostByName is (System.Net.Dns.GetHostByName(System.Net.Dns.GetHostName()).
UNC paths in the "Path" variable cause both the MFCOM and System services from start, with the event logs showing errors "Network path not found"
http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-6/xad-build-new-enviroment/xad-laa-intro/xad-laa-config.htmlhttp://docs.citrix.com/en-us/xenapp-and-xendesktop/7-6/xad-build-new-enviroment/xad-laa-intro.html
Citrix Broker Service giving  the erorr " Citrix Broker Service failed to broker a connection for user to resource. the Citrix Broker Service cannot find any available virtual machines."
-This is possibly due to Citrix Policies applied using Microsoft’s GPMC from the Domain are either corrupted or not being updated.-Or there are chances that some XA server was previously installed on the same image and it’s still retaining those policies which is not the case here as we have confirmed the same by removing all Citrix policies.
This is a phenomenon caused by Internet Explorer 11 due to window management design change. So, this is not a bug of Citrix.If UAC is disabled, IE11 manages child windows by calling ShellWindows provided by shell (Explorer.exe). If RDP/ICA session is started as Initial App or Published App, Explorer.exe is not started as shell. As a result, IE11 cannot manage child windows. Therefore, the issue happens.If UAC is enabled, IE11 does not depend on ShellWindows. Therefore, the issue does not happen even though Explorer.exe is not running as shell.Please ask Microsoft for more details.
Install VDAs using the standalone package
Domain admin account was a part of the local users group
Misconfiguration of the SSL Cipher Suite Order causing issues communicating with the license server.
Stale information being held and Director not updating.
The site was configured as gateway direct however the installing the certificate on IIS directs the HTTPS traffic directly to the Web interface instead of the Secure Gateway.
When we are launching a published Desktop with UPM enabled, the "INetCache" folder is getting created. And with this folder in place, if we are opening any Mapped drives, that work. But when we are launching a "published application", we did not see this behavior.
This was an issue with "Temporary Internet Files".
According to the Cache data, the files are located in the following path: %USERPROFILE%\AppData\Local\Microsoft\Windows\INetCache. If the published application will not get this location, it will throw an error.
The cause of this issue was the conflict between the domain policies and the IMA level policies. As the domain polices take priority over the IMA or App Center policies, the reboot policies created will never take effect if the domain policies are not disabled or deleted.
Issue issue is related to the fact that the user recently moved the PVS machine storage and after creating a new image and trying to push it out. The information was not updated int he database as it was holding the old server information (SID and HostedMachineID ).
This issue occurs if the client computer used in the recorded session has a newer Receiver or recently upgraded to a new Receiver.
http://docs.citrix.com/fr-fr/xenapp-and-xendesktop/7-5/cds-sdk-wrapper-rho/cds-sdk-cmdlet-help/citrix-broker-admin-v2-wrapper-xd75/set-brokerappentitlementpolicyrule-xd75.htmlhttp://docs.citrix.com/de-de/xenapp-and-xendesktop/7-6/cds-sdk-wrapper-rho/xad-commands/citrix-broker-admin-v2-wrapper-xd76/set-brokerentitlementpolicyrule-xd76.html
When customer would remove maintenance mode from a group of Server VDAs they would not turn back on like Desktop VDA's.
Studio looking for a registered license service instance that is no longer used
Policies.
The application was published in Citrix studio but the application was not installed on the server.
The transport type was set to HTTPS port 443 for the deliver controller in StoreFront console.
CTX136588 - HDX Flash Redirection Compatibility
CTX139939 - Microsoft Internet Explorer 11 - Citrix Known Issues
CTX137799 - Internet Explorer 10 - Citrix Known Issues
CTX201150 - Adobe Flash 18 - Citrix Known Issues
CTX126817 - HDX MediaStream for Flash Feature Dynamic Blacklist Explained
CTX134786 - Troubleshooting Flash V2 on Linux
For Windows Server VDAs, Use CTX140320 - How to Configure Idle Disconnect and Logoff Timers in XenDesktop 7.x for Windows Server VDAs.
Looked in the event viewer and saw that the customer was running into issues with getting error message 1028 Issue was being caused by Terminal Service licensing rejecting the connection.
This is caused by renaming the XenApp Licensing server during rebuild.
The multi-string value "ValidSites" when entered into the registry creates a "whitelist" of URLs to be redirected, but when the key is left in blank, with no URLs or values listed, it will prevent any URLs from redirecting to the client device.
As per http://support.citrix.com/article/CTX106094 "...When specifying sites with the valid sites registry key, all the URLs that are not in the list, open in the server...."
It looks like it might be related to "If the first application launched is launched from “C:\Program Files (x86)” than the environmental variable %ProgramFiles% will always point to “Program Files x86” and you will not able to launch anything which uses EV and is located in C:\ProgramFIles (not x86)"
The visible application window does *not* flicker, but the entire desktop background sometimes becomes *black* for fraction of a second.  >Issue occurs as user is using application, and does not appear to be triggered by specific user action.
It seems to happen due to latency or network conditions as the licensing client on the broker is not able to contact the License server due to a connection timeout.
This is a workaround to manage pop-ups from intranet sites from Windows.
XenApp with FP3 was not allowing the command line argument to be in the same place where the path to the executable file to the application was being set.
There was a problem with xenDPriv.exe, there should be no xenDPrive with SYSTEM account.
​http://social.technet.microsoft.com/wiki/contents/articles/13953.windows-server-2012-deactivating-uac.aspx
Audio has not be enabled on the Citrix Receiver for playback of multimedia files.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
VDAs can become stuck in the initializing state of the registration process. The issue occurs after the Citrix Desktop Service runs for several days without being restarted.	[From BrokerAgent760WX64001][#LC0570]
If a Version 7.6 VDA is a member of a XenDesktop 5.6 site, when users connect, disconnect, and then try to connect again, the reconnection attempt fails and the VDA is unregistered.	[From BrokerAgent760WX64001][#LC1859]
Source: CTX142317 - LIMITED RELEASE - Hotfix BrokerAgent760WX64002 - For Broker Agent 7.6 for Windows OS (64-bit) - English
The USB storage device is seen as a client drive by the thin client machine.A Separate policy prohibiting client drive mapping is preventing the USB drive from redirecting.
Windows firewall was enabled on the StoreFront servers and Delivery Controllers.
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\fDenyTSConnections is set to 1 and IMA couldn't find a load evaluator.
Citrix Blogs - Is Session Reliability Good or Bad?
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The actual bottleneck was in ICA session due to graphics enhancement from XenDesktop 5.6 to XenDesktop 7.6.
Microsoft Excel 2010 is a multiple document interface (MDI) application which means it will display multiple workbooks in its own window at the same time whereas Excel 2013 is single document interface.
1.One of the PvDSvc threads as well as bunch of other threads (close to 100) belonging different processes like explorer etc., are blocked on a mutex object.The owner thread is waiting on an event within mountmgr!MigrateRemoteDatabase (MS component for assigning volume drive letters).Looking at the related mountmgr blocked threads, we can see the presence of Vsepfilt.sys, possibly obstructing the PvD sentinel file creation.
The errors seen in event viewer are related to the failure of collecting performance data of VDAs that could be due to corrupt or missing performance counters on the VDAs, we need to repair performance counters on the VDA and register ICAPERF.DLL
The file type association is not set on the XenApp/XenDesktop server.
When the Apply Windows key combinations setting is set to On the remote computer, the RDP client hooks into the keyboard at a lower level and this doesn’t appear to interact properly with the Presentation Server’s Unicode keyboard support.
Compatability with IE and java in ICA.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
In Firefox Options > Privacy > Accept third-party cookies check box is selected.
The Root Certificate for the SSL Certificate that Citrix Secure Gateway uses is signed with the MD2 algorithm. The MD2 algorithm has been disabled in Java JRE 1.6.0_18 and higher.
Restrictions for the open-in list for the Android MDX application needs {pkg=com.google.firebase} as well as {pkg=com.google.android.gms} to be in place. This will allow the application to work with FCM
Known issue - CTX227223 - An error occurred while playing the file with Multimedia Redirection disabled
Upload folder getting error.
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
The group of setProperty.cmd lines creates two database entries and thus changes the default User and Local drive letters to X and Y (as in the example). These values can be found in MSSQL under the XenClient Synchronizer Database within the dbo.ConfigProperty table. An improper selection of setProperty.cmd options can lead to an error in Synchronizer's web interface. If happens, repeat the procedure.
Citrix NetScaler: NetScaler Application Delivery ControllerCitrix XenClient: XenClient OverviewCitrix NetScaler Support: Citrix SupportCitrix NetScaler Documents: Citrix NetScalerCitrix XenClient Documents: Citrix XenClient
Configure Offline Profiles Citrix Profile Manager
Note: The manner in which Microsoft operating systems handle wallpapers makes it challenging for profile management software to consistently roam wallpapers across physical and virtual desktops and also between virtual desktops. Thus, the roaming of wallpapers across various desktops is not guaranteed.
The group of setProperty.cmd lines creates two database entries and thus changes the default User and Local drive letters to X and Y (as in the example).
These values can be found in MSSQL under the XenClient Synchronizer Database within the dbo.ConfigProperty table.
An improper selection of setProperty.cmd options can lead to an error in Synchronizer's web interface. In this case, repeat the procedure.
DesktopPlayer comes bundled with a customized release of VirtualBox and OSX Fuse. Therefore any existing version of VirtualBox or OSX which are installed must be removed for DesktopPlayer to function correctly.
When running Synchronizer through Internet Explorer on a Windows 2008 server with Enhanced Security enabled, the virtual machine Active-X control will not install. No error message will be displayed, and VM authoring will fail.
Citrix and Microsoft identified issues surround the ThinWire remoting of the LogonUI component in Server 2016.
This issue can occur if Citrix Delegated Administration Service is not started.
Known Issue addressed under LC8652 in XenApp/Xendesktop 7.15 LTSR and 7.17 CR.[#LC8652]​​The issue occurs when the expansion of groups assigned to control the limited visibility of an application is used for each user. This expansion process takes a long time to complete and can be observed in large networks having many groups that span multiple domains.
An know issue in CU1 that cause this issue
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
This issue can occur if the registry entry WCF_PORT is missing from the server.
• The SQL Query made us realize that Director is converting time adding 10 hours to final report.			• We can confirm that we save our data in UTC format to avoid conflicts between time zones.			• This is explained here https://docs.citrix.com/en-us/xenapp-and-xendesktop/current-release/director/data-retention.html
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check.http://https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Citrix recommends at least two Delivery Controllers on different physical servers to provide needed redundancy and scalability for your production Site. If your current Delivery Controller fails, your users won't be able to access your Site. You can hide this alert if this was found in a non-production environment.
Citrix recommends that all Delivery Controllers in the Site have the same version of XenApp and XenDesktop installed.
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Naming convention disallows the use of underscore in the DNS names unless they are for SRV records
Under certain circumstances, Profile Management deletes the two above-mentioned registry keys after session logoff. As a result, the session can appear as a black screen after the VDA restarts.
This issue is usually seen while installing Service Packs, Cumulative Updates or Windows version update. These updates make changes to a large number of files in the windows OS. Personal vDisk tries to log each of these change and hence ends up creating a huge log file during the Image update process. It is this log file that brings the Available free space below Required free space. Now, at the time of Merging VHD, Personal vDisk does another check on the available space and compares it to required free space. Hence the image update fails due to shortage of Free Space.
Expected behavior as per sssd design. By default sssd accepts only user@domain format, Additional configuration has to be done to accept other formats.
Delivery Group is configured with incorrect Time Zone
Citrix Studio is unable to find the files that are required for the localization of the policy.
This issue can happen when the Storage has been renamed on the Hypervisor side.
How to use PowerShell to Change XenDesktop SQL Connection String​https://support.citrix.com/article/CTX140319
This issue is caused due to crash of the CtxPvDSvc.exe. The cause of the crash has been addressed in the above Private.
This is a design issue.
VDA 7.6 issue
1. DNS suffix on the affected server may not correct in case of cross forest environment if Trust Type between both forest is External.2. XenDesktop controller hostname been renamed.
[DBName].[MonitorData].[MachineFailureLog] has NULL entries in the Failure End Date column
Default Associations Configuration File configured for HTTP and HTTPS protocol is a setting that effectives per user, not per machine
Issue identified with the Citrix Director User Interface.
If “Single Session Per User” policy is set to “Disabled”, we actually provide NULL Sguids to BrokerAgent each time during RDP connection and reconnection, and this causes defunct session increases each time when user RDP to VDA.
Launch attempts are held up on GP Client processing or User Profile Management. The actual issue is that the GP Client also known as CSEengine and that is getting an access denied while processing the Policies.We would also see a lot of access denied error in the traces for logonredirector. This is an indication of the cache files issue.
By default Excel macro setting is not enabled to execute macros
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
The issue is caused by non-optimal audio configuration where audio quality was set to "High" and HDX adaptive transport is disabled.
This is a known issue and some background is: Microsoft has made some change in rendering the html format gpo settings, so the GPMC console has some difficulties showing the GPO content that's generated by Citrix snapin. issue has been addressed by Group Policy product team by introducing some architecture level changes(in 7.16), and the change is being back-ported to 7.15 LTSR.
This feature is not available in vda versions 7.6 - 7.12
What difference does this make when inserting an SD Card during an existing Citrix session?Citrix monitors the USB Bus all during the session.  Changes, as determined by policy, are redirected to the existing session.The PCI bus, (or PCIe Bus) is not monitored.  Additions or removals to the PCI Bus are not redirected to an existing session.SD Cards can be attached to the USB bus or the PCI bus.  Newer hardware uses the faster PCI Bus for the built-in SD Card reader.
Kerberos server mentioned in the /etc/krb5.conf went down. There was no redundant KDC servers mentioned in the configuration file which lead to this problem
Insufficient access to the registry hive "HKLM\SOFTWARE\Wow6432Node\citrix\Euem\LoggedEvent".
The Citrix CSE engine assumes that keys create under “HKLM\Software\Policies\Citrix” are configured only by the Citrix Group Policy Management Component, and it removes them when uninstalling the Citrix CSE engine component during upgrade to latest version of VDA.
Caused by the change in the default java libraries version from the Base Operating system.Logstash software changed the default java libraries from the Base OS. Strict restriction with Java libraries installed as part of the Logstash software
The issue is with one of the configuration settings in Writable configuration file which needs to be enabled for proper Citrix session follow-up with users
Ran Get-MonitorConfiguration and found that the below settings were set to False:EnableDayLevelGranularityProcessUtilization                                                                             False                                                                                                                  EnableHourLevelGranularityProcessUtilization                                                                            False                                                                                                                  EnableMinLevelGranularityProcessUtilization                                                                             False
From the CDF Traces collected on Delivery Controller,  we found that Nutanix plugin was unable to offer bulk power state updates, and also there was a huge delay in carrying out power ops (shutdown in this case case taking more than 10 minutes) . Updating or even shutting down 1000+ machines in 30 with 50 new power actions to be processed per minute by the hypervisor seemed to be an overzealous target.
X264SurfaceEncoder caused the issue we have to chose TwSurfaceEncoder to avoid this issue
Issue was identified as the StoreFront server marking the cloud connectors as offline when there was a network interruption. Changing the value of  bypass duration time resolved the issue.
CTXVDA fails to determine FQDN of Linux VDA.
Antivirus McAfee was blocking SqlLocalDB.msi (or other MSI included in ISO) until it has been scanned.The file is locked by AV so MSI Installer considers it as not accessible.Then installation failed with MSI error 1619
Known issue when NvFBC is enabled as well as logon banner causing mismatch between monitor display resulting in a black screen. Applying registry key will disable NvFBC only during logon which then Nvidia drivers are hooked into session successfully.
-Logon server of SQL server is the DC which is out of sync, and doesn't have data of newly created user/machine accounts.-If you check the replication status on DC, we may see below mentioned error for the non-working DC
Windows 10 v1709 was released with enhanced Windows Defender security, which now controls Windows Firewall.
memory corruption by race condition
This is by design.
SHA-2 (SHA-256) is necessary on installing VDA 7.15 LTSR CU1
In SQL 2014 Database we have observed that the Transaction Log has grown to 175GB and taking DB backup didn’t shrink them
- Configuration
This problem is caused by the current design limitation of support for a maximum of 32 virtual channels by Linux VDA. With Receiver 4.9 LTSR and Receiver 4.10, new virtual channel support has been added and this increases the overall virtual channel numbers to beyond 32. So when connecting to Linux VDA machine, because of the limitation, the virtual channels loaded last get unloaded resulting in the HDX Engine crash issue. Windows VDAs support up to 64 Virtual channels. So the problem is not seen when connecting to Windows VDAs.
When the user logged off, it was trying to reconnect to itself.
This problem is caused by an underlying issue with Windows that Microsoft may fix in a future OS version.  Until then the solution provided in this article should resolve it.  See the following article for more detail:[Isolated User Mode (IUM) Processes – Implications] at:https://msdn.microsoft.com/en-us/library/windows/desktop/mt809132(v=vs.85).aspx
The above screenshot and IP details are from Citrix internal lab machine.
Cipher mismatch.
Something in the environment removes the Registry key HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Citrix\Security\DHParamL and it's value.
Presence of 3rd Party Credential Providers delays Desktop Launch
vCenter was configured to accept connections only from TLS 1.2. Till XenDesktop 7.13, TLS1.2 will not work from XD -> VSphere.
If the Multi-touch service is disabled on the VDA then touch commands wont be redirect from the client. But even so, the MRVC (mobile receiver virtual channel ) service may be causing an application to trap if the combo box remoting policy is enabled. All the Microsoft UIAutomation related components get loaded into the app if the session is connected from a touch client with Autokeyboard popup/Remoting combo box features.
Please disable these policies and MRVC service if the app is having issues.
Issue/corruption with performance counters and WMI repository on master images.
CTX202448 - COM Port Communication Issues when 20 or More Users are Concurrently Using COM Ports in XenApp 6.5
CTX214430 - Topaz Signature com port Redirection Works The First Time, Subsequent Logins Fail Requiring a Reboot
special characters in username
https://www.citrix.com/blogs/2017/02/27/xenapp-and-xendesktop-7-13-launching-an-application-in-multiple-sessions/
Incorrect or no SID updated in ListOfSIDs under:HKLM\SOFTWARE\Citrix\VirtualDesktopAgent
Citrix Personal vDisk will scan and process all 3rd party files and folders unless excluded explicitly.
This is a limitation with the current product. Citrix is aware of this issue and is working on it.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
This is happening when services are set as “Running” in all the service tables.
Known issue - CTX227223 - An error occurred while playing the file with Multimedia Redirection disabled
The “WR_XXxxXXXXxxxXX” name, is generated when using Receiver for Web to launch application. This is because JavaScript can’t get the real host computer name, in normal case this “WR_XXX” client name should be just used between StoreFront and Broker through NFuse. When client connects to VDA, it actually will use the real host computer name and send the information to VDA.
We can see client fills this “WR_XXX” name instead of the real host computer name and  this causes the failure before RDS session setup and later we see the application not launching.
The client name filed is filled with WR_XXxxXXXXxxxXX breaks the RDS rule for the client name length limitation for RDS
If we launch an app through Receiver for web, during ticket verification we will see below BrokerAgent trace:      LaunchManager.ValidateConnection: Connection Protocol: ProtocolTypeIca, Session Key: 00000000-0000-0000-0000-000000000000       ticket        <GUID>      launch ref    <GUID>      client h/w id <Hexadecinmal>      client addr   xxx.xxx.xxx.xxx      client name   <client machine name>
We will see the client name filed is the host computer name, this matches Microsoft’s RDS rule. However, looking at the non-working trace from customer’s environment, we will see below trace:      LaunchManager.ValidateConnection: Connection Protocol: ProtocolTypeIca, Session Key: 00000000-0000-0000-0000-000000000000      ticket        <GUID>      launch ref    <GUID>      client h/w id <Hexadecinmal>      client addr   xxx.xxx.xxx.xxx       client name   WR_XXxxXXXXxxxXX
CRL Check by Session Recording player failed resulting in the error. Session Recording player uses Microsoft API RemoteCertificateValidationCallback to perform CRL check and the return value of this API indicates there are problems in the Certificate infrastructure.
Clients store their license under the key:
[HKEY_LOCAL_MACHINE\Software\Microsoft\MSLicensing]
The MSLicensing key contains two sub-keys used to store both unique client-specific information and any license certificates obtained from license servers.
HardwareIDStore
HardwareID stores a Random 20-byte identifier specific to the client machine and is generated automatically by Windows. This ID uniquely identifies the machine to the license server. When a client is allocated an RDS CAL from the license server, this HardwareID is recorded in the licensing database to associate the client with the CAL. This entry is made when clients are allocated both temporary CALs and permanent licenses.
Store is used to store the terminal services CAL allocated from the license server.  Entries are contained in sub key named License00x, where X is a numerical ID beginning with 0.  Each License00x entry contains a separate CAL.
Please refer the below Microsoft article that explains more about the situation : https://blogs.technet.microsoft.com/askperf/2015/05/08/multiple-per-device-rds-cals-are-issued-the-same-device-issue/
SCVMM console version got updated on the SCVMM server as part of Automatic Windows updates but the SCVMM console version wasn't updated on any XenDesktop controllers. Due to this fact, XD controller wasn't able to communicate with SCVMM.
Group policy could be the cause of the issue.
vCenter server certificate was issued to  localhost.localdomain
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Insufficient previleges on VMWARE Distributed Switch Level causes this exception where XenDesktop cannot modify the Network Adapter settings on the Preparation VM and hence we get the failure point while create the Preparation VM and encounter an error "The given key was not present in the dictionary" because of the permission issue.
Delivery Group Power Management settings only had 1 VM configured to be available for users at a time. Once this VM is utilized, it would begin to turn on only 1 additional VM for use.
MTU alteration not accounted dynamically by EDT, and IP Fragmentation not handled properly by the VPN solution.
The file DocumentFormat.OpenXml.dll is missing from the directory C:\inetpub\wwwroot\Director\bin
Product design.
xorg-x11-server-Xorg 1.19 is not compatible with VDA 7.16，VDA 7.16 require xorg-x11-server-Xorg>=1.17 and xorg-x11-server-Xorg<1.18.
Hosting connection was broke after change made on the Hypervisor with the upgrade process.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The affected Machines were not part of any Delivery Group, which is required for the reboot process.After Catalog Update has finished, MCS invokes the Start-BrokerRebootCycle command to reboot all the Machines in the Catalog.This command enumerates all the Machines from all Delivery Groups that belong to the specified Catalog and performs the reboot process on those Machines.Machines that do not belong to any Delivery Group will not be included in the command process.
Canon Secure Printing settings configuration.
Unknown error 0x887A0001 in DirectX API
Buffer Overflow" while reading the above two registry keys when more than 483 characters are added to the above two registry keys.
From the Process dumps of  MPXAXD agent collected after enabling User Mode Stack Tracing, we found that  memory spikes seems to be related to two SCOM monitors that restart the MPXAXD Agent service in case of high memory / CPU consumption.

We identified this issue with other customers and also in our large test environments with high amount of monitoring data, we now recommend the thresholds for CPU and memory monitors for MPXAXD agent to be increased/disabled .In these cases the monitors cause unnecessary restarts of MPXAXD agent, which results in memory spikes, since the Citrix MPXAXD Agent needs to load everything already discovered and monitored for the last 24 hours back in the memory to avoid any potential data loss.

This has been documented in new SCOM XA/XD Management Pack release 3.14.
https://docs.citrix.com/en-us/scom-management-packs/xenapp-xendesktop/3-14/performance-overview/config.html​
User belongs to multiple groups, the token size is impacting the logon process.
USB compatibility between Windows 7 embedded OS and USB device
Offline Profiles takes precedence and disables streamed user profiles, hence delete the locally cached profiles on Logoff setting.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
License server cannot connect to cis.citrix.com
The Delivery Controller is running a later version of  XenApp and XenDesktop than the database server
The Database cannot be reached, a Citrix XenApp/XenDesktop Controller Service failed to connect to database with current connection settings.
The database is compatible and the service group for the Controller Service is available for registration. The Controller Service can communicate with the database, but no endpoints are registered in the Central Configuration Service. This can occur when the Site setup or upgrade did not complete, resulting in a partially configured Site.
One or more services were affected:ADIdentity ServiceAnalytics ServiceAppLibrary ServiceBroker ServiceConfiguration ServiceDelegated Admin ServiceEnvironment Test ServiceHost Availability Service Machine Creation ServiceMonitor ServiceStoreFront Service
Service communication within the Delivery Controller is not functioning properly. The Citrix Monitor service could not connect to the Citrix Broker service.
A database connection string has been specified for the Controller Service, but the database is not compatible or working properly.
Database access was denied for Citrix Monitor Service
This warning was by default referring a license getting close to the usage see below for details. The license consumption is in an increasing trend. This is a warning after a user connects to a computer running a Citrix product, the product requests a license from the license server and license gets checked out. License can be checked out to a user, device, session, server, or appliance, depending on the licensing model for a particular product. Users can eventually run out of available licenses. License Server Management Pack handles this situation in various ways.
The VDA’s ICA Listeners are restarted causing all of the sessions on VDA to get disconnected at once.  The VDA’s Event Log will show events for all the sessions disconnecting, followed by the ICA Listener being stopped and then started:
applog.csv  1054  Information,7/12/2017 4:11:58 p.m.,Citrix Desktop Service,1049,None,The session '36d9ed0c-5fba-4ddb-af51-d03ca04ef033' was disconnected.
applog.csv  1055  Information,7/12/2017 4:11:57 p.m.,Citrix Desktop Service,1049,None,The session 'ca28a1c3-0347-4235-88b7-dde1b6a735e7' was disconnected.
applog.csv  1060  Information,7/12/2017 4:11:56 p.m.,Citrix Desktop Service,1049,None,The session '27de3ab0-7854-4b62-8e9b-a442fbfc7753' was disconnected.
applog.csv  1066  Information,7/12/2017 4:11:54 p.m.,Citrix Desktop Service,1049,None,The session '0e11b36f-3dbd-4add-acfc-89589b1ac79f' was disconnected.
applog.csv  1067  Information,7/12/2017 4:11:54 p.m.,CitrixCseEngine,11,None,The Citrix Group Policy service completed RSOP calculation for computer.
applog.csv  1068  Information,7/12/2017 4:11:54 p.m.,CitrixCseEngine,10,None,The Citrix Group Policy service started RSOP calculation for computer.
The Microsoft hotfix "KB4040972" contains the issue of rendering. If it is applied in DDC server as the newest hotfix for .Net Framework, the issue occurs.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
If an User / group was deleted from AD, so SID will still be referring to Published application or Desktop in DDC.
Citrix Systems Inc. Display Mirror Driver not installed properly
New Nvidia VIB on the Esxi Host and very latest Nvidia drivers for windows 10 was missing
launching seamless application logon ui was never present to user.
group policy
Microsoft known issue: https://support.microsoft.com/en-us/help/327825/problems-with-kerberos-authentication-when-a-user-belongs-to-many-grou
One reason for this is iPad/iPhone Receiver cannot handle local keyboard priority, if the server default language is different. It uses the server default in any case of confusion.There are various fixes listed in other articles for this known issue, however this article is intended to highlight a new feature called Unicode Keyboard Mapping.
For anonymous users the active sessions also reflected as SessionsPending (LogonInProgress) due to which high load index was shown for the VDA even though the Load Evaluator thresholds were not hit.This is because Pending Logons (Load Throttling) also contributes to Load Index. With the introduction of 'NotifyUserLogonComplete' feature, "logon-complete" and 'user notifications" are combined into a single notification.This results in "logoncomplete" not sent for anonymous sessions, as the "user notifications" are sent only for domain users, and anonymous session users are local accounts.Hence, anonymous user sessions stayed in 'logoninprogress' state, since Broker didn't get a 'logoncomplete' notification for the active sessions.
From the complete memory dump we found that One of the LSM (Local Session Manager) thread was  waiting for ALPC reply message from Services.exe thread which in turn was waiting on McAfee DLP Endpoint Service.
The existing grooming stored procedure did not delete the table record in chunks. If Monitor database table size is very huge, it increases the size of transaction logs. If in between the grooming operation times out, it does not commit the changes even for the tabled which have been groomed.
UPM uses adm/admx files to as policy templates. Usually, the adm file is programmed and admx file is generated via a convert tool from adm file. In this case, when handling string of variants, there is a bug in the convert tool, which will lose a character when converting adm file, making it failed when user attempts to load admx file.Its a known issue and citrix is working on it to resolve in upcoming release.
Roaming profiles on Windows 2012 R2 VDA need to be V4 in order to be able to reset from Citrix Director.
There are multiple possible causes for this issue:
The user on the target ICA session denied the shadowing request by clicking “No”:
The shadowing request timed out after 20s before the end user respond.
Introduction - Session Shadowing for Linux VDA sessionsHow to configure Session Shadowing for Linux VDA sessions
Error:"You are not authorized to perform this operation.View Director server event logs for further information"
Error: "Failed to connect to server"
Introduction - Session Shadowing for Linux VDA sessionsHow to configure Session Shadowing for Linux VDA sessions
How to troubleshoot Session Shadowing for Linux VDA sessions
Error:"You are not authorized to perform this operation.View Director server event logs for further information"
Error: "Failed to connect to server"
There are multiple possible causes for this issue:
The Citrix Director Client host can’t resolve the FQDN of the Linux VDA. If you’re using SSL encryption, the CA certificate is not correctly imported to the Citrix Director Client.
There are multiple possible causes for this issue:
The Delivery Controller is configured to enable SSL encryption for ICA sessions while Linux VDA doesn’t. Once the Delivery Controller is configured to enable SSL encryption, the generated .ica file will set SSLEnable to on, as follows:
SSLEnable=OnSSLProxyHost=sin-centos73.xd01.local:443
In this case, you can either disable SSL encryption on the Delivery Controller (if you don’t want to use SSL encryption) or to enable SSL encryption on the Linux VDA And Citrix Receiver will try to launch ICA session with SSL, but if Linux VDA doesn’t accept SSL connections, then the ICA session will fail.
This error sometimes appear even all the configurations are correct if you’re using Firefox version 52 or above to launch ICA sessions. In this case, ICA sessions can be launched successfully from another web browser (for example, IE) on the same client.
How to troubleshoot Session Reliability in Linux VDA
Introduction to Load Balancing for Session Recording
How to configure Load Balancing for Session Recording with NetScaler
CTX220730 - How to Confirm HDX Enlightened Data Transport Protocol is ActiveCTX220732 - How to Configure HDX Enlightened Data Transport ProtocolCTX230011 - EDT Session Connection/Reconnection Attempts using UDP and TCP in ParallelCTX230010 - Windows OS VDA 7.16 Schannel library support for DTLSCTX230012 - EDT Security using DTLSCTX231821 - How to Configure EDT when using VPN solutionsCTX231528 - Enlightened Data Transport Not working with Double Hop DMZ scenarioCTX226014 - Application Launch Fails with "Unknown client error 1110" When Using EDT/DTLS on NetScaler GatewayCTX224373 - XenDesktop 7.x Unable to launch published desktop with Adaptive transport policy enabled
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Session Reliability in Linux VDA
https://www.citrix.com/blogs/2017/11/06/html5-multimedia-redirection-state-of-the-union/
Issue happened because the client host can’t resolve the FQDN of Linux VDA.You can get detailed logging from CDF traces of Receiver:
+++++++++++++++++++++++++++++++++++++++++3358,1,2017/11/19 16:02:24:20666,9492,4788,1,HPC_ICA_ENG,Cgp_Api.c,348,Cgp_Connect(),9,CDF_INFO,"Connecting to 0.0.0.1:443",""3359,2,2017/11/19 16:02:24:50590,9492,4788,1,HPC_ICA_ENG,Proxy_Api.c,328,Proxy_GetAddrInfo(),9,CDF_INFO,"Proxy_GetAddrInfo: Cannot resolve hostname SIN-CENTOS73.XD01.LOCAL for non-proxy config. Returning NULL",""3360,2,2017/11/19 16:02:24:50591,9492,4788,1,HPC_ICA_ENG,SslASock_Api.c,525,SslASock_Connect(),1,CDF_FAILURE,"Host name (SIN-CENTOS73.XD01.LOCAL) could not be resolved",""3361,2,2017/11/19 16:02:24:50601,9492,4788,1,HPC_ICA_ENG,Cgp_Core.c,1075,_Cgp_UPTrace(),9,CDF_INFO,"CGPCore: CgpCloseSession called when session is not in a valid state.",""3362,2,2017/11/19 16:02:24:50603,9492,4788,1,HPC_ICA_ENG,Proxy_Api.c,145,Proxy_CloseSocketAndCaches(),9,CDF_INFO,"Proxy_CloseSocket: s=42952520",""3363,2,2017/11/19 16:02:24:50603,9492,4788,1,HPC_ICA_ENG,Proxy_Api.c,157,Proxy_CloseSocketAndCaches(),9,CDF_INFO,"Proxy_CloseSocket: WARNING: Socket never bound to proxy",""3364,2,2017/11/19 16:02:24:50606,9492,4788,1,HPC_ICA_ENG,Proxy_Api.c,174,Proxy_CloseSocketAndCaches(),9,CDF_INFO,"Proxy_CloseSocket: [SUCCESS] errno=0",""3365,2,2017/11/19 16:02:24:50608,9492,4788,1,HPC_ICA_ENG,Cgp_Core.c,620,_Cgp_CleanTimers(),9,CDF_INFO,"Cgp_Core:_Cgp_CleanTimers: Entry.",""3366,2,2017/11/19 16:02:24:50608,9492,4788,1,HPC_ICA_ENG,Td_Core.c,402,_Td_DeviceConnect(),1,CDF_ERROR,"TD Device connect error. Connection number: 0",""3367,2,2017/11/19 16:02:24:50675,9492,4788,1,HPC_ICA_ENG,Td_Core.c,1263,_Td_SetLastError(),1,CDF_ERROR,"TD Error = 1000040",""3368,2,2017/11/19 16:02:24:50676,9492,4788,1,HPC_WfIcaEng,***,0,StatusMsgProc,9,CDF_INFO,"IPC Status Msg = 1030  lParam = 0",""+++++++++++++++++++++++++++++++
How to enable or disable SSL Encryption For Secure User Sessions
Error:"SSL Error 61 You hav not chosen to trust "*.x.x", the issuer of the server's security certificate"
Error:"Cannot resolve the SSL Host name xxx.xxx.xxx (SSL error 40)"
Error:"The Citrix SSL Server you have selected is not accepting connections"
Issue happened because the client host doesn’t trust the CA certificate used by Linux VDA.
You can get detailed debug message from CDF traces of Citrix Receiver:+++++++++++++++++++++++++++++++++++++++++3389,2,2017/11/19 16:17:53:16149,9376,12008,1,HPC_ICA_ENG,SslASock_Api.c,728,SslASock_Connect(),3,CDF_INFO,"Starting direct SSL handshake",""...3394,2,2017/11/19 16:17:53:16242,9376,12008,1,HPC_ICA_ENG,Proxy_Api.c,363,Proxy_Recv(),9,CDF_INFO,"Proxy_Recv: s=10914416, len=18432",""3395,2,2017/11/19 16:17:53:16243,9376,12008,1,HPC_ICA_ENG,Proxy_Null.c,165,NullRecv(),9,CDF_INFO,"NullRecv: s=10914416, len=18432",""3396,2,2017/11/19 16:17:53:16243,9376,12008,1,HPC_ICA_ENG,Proxy_Null.c,169,NullRecv(),9,CDF_INFO,"NullRecv: SOCKET_ERROR, errno=10035",""3397,0,2017/11/19 16:17:53:17183,9376,12008,1,HPC_ICA_ENG,Proxy_Api.c,363,Proxy_Recv(),9,CDF_INFO,"Proxy_Recv: s=10914416, len=18432",""3398,0,2017/11/19 16:17:53:17183,9376,12008,1,HPC_ICA_ENG,Proxy_Null.c,165,NullRecv(),9,CDF_INFO,"NullRecv: s=10914416, len=18432",""...3426,1,2017/11/19 16:17:53:24638,9376,12008,1,HPC_ICA_ENG,SslASock_Api.c,757,SslASock_Connect(),3,CDF_INFO,"SSL Handshake completed with status 61",""3427,1,2017/11/19 16:17:53:24638,9376,12008,1,HPC_ICA_ENG,SslASock_Api.c,780,SslASock_Connect(),1,CDF_FAILURE,"Negotiation FAILED 61",""3428,1,2017/11/19 16:17:53:24665,9376,12008,1,HPC_ICA_ENG,Cgp_Core.c,1075,_Cgp_UPTrace(),9,CDF_INFO,"CGPCore: CgpCloseSession called when session is not in a valid state....3434,1,2017/11/19 16:17:53:24698,9376,12008,1,HPC_ICA_ENG,Td_Core.c,402,_Td_DeviceConnect(),1,CDF_ERROR,"TD Device connect error. Connection number: 0",""…3487,2,2017/11/19 16:17:53:24755,6692,6512,1,wfcrun,wfenghlp.cpp,2044,WFEngineStatusCallback,9,CDF_INFO,"WFEngineStatusCallback : Got an error message.",""3488,2,2017/11/19 16:17:53:24783,6692,6512,1,wfcrun,wfenghlp.cpp,2555,CEIP_IncrementCounter,9,CDF_INFO,"CEIP_IncrementCounter : Called to set value returned 0",""3489,2,2017/11/19 16:17:53:24784,6692,6512,1,wfcrun,wfenghlp.cpp,2051,WFEngineStatusCallback,1,CDF_ERROR,"WFEngineStatusCallback : Protocol Error 1030 occured, Error Message: SSL Error 61: You have not chosen to trust "*.xd01.local", the issuer of the server's security certificate.",""3490,2,2017/11/19 16:17:53:24787,6692,6512,1,wfcrun,wfenghlp.cpp,2063,WFEngineStatusCallback,9,CDF_INFO,"WFEngineStatusCallback : showErrMsg true.",""3491,2,2017/11/19 16:17:53:24791,6692,6512,1,wfcrun,wfenghlp.cpp,2070,WFEngineStatusCallback,9,CDF_ERROR,"WFEngineStatusCallback : Show the error.",""3492,2,2017/11/19 16:17:53:24791,6692,6512,1,wfcrun,helpers.cpp,879,LogStandardErrorMessage,1,CDF_STARTEND,"LogStandardErrorMessage: bMessagebox: 0. iErrorcode: 1030. nErrorResourceID: 2064.",""3493,2,2017/11/19 16:17:53:24793,6692,6512,1,wfcrun,helpers.cpp,893,LogStandardErrorMessage,5,CDF_ERROR,"LogStandardErrorMessage ERROR: Unable to launch your application. Contact your help desk with the following information: Cannot connect to the Citrix XenApp server.",""+++++++++++++++++++++++++++++++You can also see the connection aborted from /var/log/xdl/hdx.log:+++++++++++++++++++++++++++++++++++++++++2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdTcpRead: Entry2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdTcpRead: socket 232017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdTcpRead: read 0 bytes2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdTcpRead: Connection aborted2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdTcpRead: Exit: CONNECTION_ABORTED2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: DeviceWaitForRead: TdTcpRead failed: 26.2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: DeviceWaitForRead: Exit: CONNECTION_ABORTED2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdHandshake: TdRead, cnt 0000, Status=0x1a2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdHandshake: Exit, CONNECTION_ABORTED2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdHandshakeThread: Handshake failed: CONNECTION_ABORTED, td state: 6702017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdDestroyConnection: Entry: 0x1fdb5002017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdCgpConnectionDestroy: Entry: (nil)2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdCgpConnectionDestroy: Exit2017-11-19 16:17:53.346 <P12942> citrix-ctxhdx: TdSslConnectionDestroy: Entry2017-11-19 16:17:53.347 <P12942> citrix-ctxhdx: TdSslConnectionDestroy: Exit2017-11-19 16:17:53.347 <P12942> citrix-ctxhdx: TdDestroyConnection: Exit2017-11-19 16:17:53.347 <P12942> citrix-ctxhdx: TdHandshakeThread: (exit), Status=CONNECTION_ABORTED2017-11-19 16:21:08.133 <P12942> citrix-ctxhdx: FMTimerClose: FMTimerCancel failed: TIMER_NOT_ARMED+++++++++++++++++++++++++++++++
Incorrect driver signature
Smart Card Service does not work properly.
Third party software cannot generate key.
Issue with the Studio component.
Hosting connect was changed.
Virtual Machines were not rebooted through XenDesktop.In order for the VMs to boot to the new Image, the Power Actions must come from XenDesktop.If the VMs are rebooted manually on the Hypervisor, then they will keep booting to the current older image.
This issue can be caused by Third Party security software, such as Anti-Virus, that removes changes to the following registry key:    Key Path:   HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Control\Session Manager    Value Name: BootExecutePer Microsoft documentation the BootExecute value "specifies the applications, services, and commands executed during startup".When the VDA Software is installed, the following entry is added to the list of values in BootExecute:    PvsVmBootThis value is added to correctly initialize the MCS I/O Optimization driver inside the VDA.If this value is removed from the Registry, the MCS I/O Optimization driver is not initialized correctly and the behavior explained above will be observed.
Microsoft's problematic interface waveOutGetDevCaps takes 39 seconds to load and causes the webcam detecting delay. The interface " waveOutGetDevCaps " is defined by Microsoft and it isn't hooked by Citrix's components. It only costs about 100 ms or less in our internal lab which is ideal.
This issue can occur if the Receiver for Web URL is not added to the Trusted Sites list of the web browser on user's machine.
Session doesn't log off properly.
Although the Broker Service has been configured to listen on the non-default port the High Availability Service which takes over for the Broker Service may still be configured to listen on the default port (TCP port 80).  To confirm this run the following commands:Cd C:\Program Files\Citrix\Broker\ServiceHighAvailabilityService.exe /show
Example output below:
In this example the High Availability Service is set to listen on the default TCP Port 80.  If the VDAs are configured to use a different TCP port they will fail to register when the High Availability Service is active (LHC Mode).
The "Auto client reconnect timeout" setting value has a permitted range between 0 and 300. This range was first introduced in version 7.13. When you attempt to upgrade the Delivery Controller from an earlier version, to version 7.13 or later, any policies containing "Auto client reconnect timeout" setting values outside this range are detected.
As per traces we have 1 VM to remove "VM_NAME" and for that ProvisionedVmGet executes our DesktopUpdateManagerSchema.ProvisionedVmGet Stored Procedure to collect all VMs
in the relevant ProvScheme.
This is where we encountered an InvalidCastException i.e. Unable to cast object of type 'System.DBNull' to type 'System.String'. The implication is that our DesktopUpdateManagerSchema.ProvisionedVirtualMachine table contains an entry with invalid data that we can't validate in the environment.
XML Trust must be set to true when pass-through authentication is enabled and end-users receive Receiver GPO to add NetScaler StoreFront list GPO.
- Microsoft Access Form is not covering the taskbar as designed for Full Screen/Kiosk Mode- Seamless Engine is fitting the window as designed on top of the Taskbar- Seamless flag needed to tell the window to maintain fullscreen
This issue can occur if no free desktops/workstations are available for the user to connect to.
How to Update RAM or CPU within MCS Catalog
https://support.citrix.com/article/CTX201226
Communication Ports Used by Citrix Technologies
This scenario happens when that is a connection failure reported on a specific session at one point in time. And the same session is launched fine in future. To reproduce, you can carry out the following steps.1. Launch a session from a user on a delivery group and make sure it gets logged in Director (ex: Sessions Connected in Dashboard is set from "0" to "1").2. Disconnect the session.3. Try to reconnect to the session and fail to reconnect by Client Connection Failures (such as network disconnection between the client and the VDA).4. See the database to check the connection failure is recorded in ConnectionFailureLog table with a foreign key (SessionKey) to the session entry. And the session entry in Session table will have a failure ID (FailureId).5. Wait for some time for the consolidation to start.6. After the consolidation, the connection failure record seen in step 4 will be written to FailureLogSummary table.7. Try to reconnect and make sure the reconnection succeeds this time. This will wipe the failure entry for the session in Session table (set the FailureId to NULL).Basically the Dashboard shows "all the failures which occurred over last one hour" and the Filters shows "the sessions which are failed at that moment in time".
LHC may be corrupted by multiple rebooting
The available licenses were consumed by the RDP sessions made on the VDA servers which is an expected behavior.
This error indicates there is an error happened when Citrix Profile Management tried to extend a user profile but the user logon session has been disappeared.Referring to MSDN document we can conclude this issue is by design.---https://msdn.microsoft.com/en-us/library/windows/desktop/ms681385(v=vs.85).aspx ERROR_NO_SUCH_LOGON_SESSION 1312 (0x520) A specified logon session does not exist. It may already have been terminated. Issue is possibly caused by user canceled logon before logon request going to VDA. You can find the user logon request from ddc and StoreFront event logs.
By Design
This issue occurs after the Microsoft Hotfix KB4034681 when the policy "Legacy graphics mode" is enabled. However “Legacy Graphics mode” is not supported with Windows 2012 R2 as per https://support.citrix.com/article/CTX202687
Firewall between client and the newly-built Linux VDA blocks the connection
Studio component missing from the DDC.Site was not upgraded to 7.14The below command shows the version number . This should match with the Delivery controller or XA/XD version.Get-configSite
Certificate being used for licensing server expired , server was untrusted on controller .
By default there is a limit on number of object that the "get-*"  commandlets can retrieve, which is 250 objects.
Workspace Environment Management 4.3 UpdateVMImageWizard fails because PrepareMSMQ is trying to stop service MSMQ (message Queuing), which is not 'running'
Previous PVD settings are incorrect“Restart” “Shadow” ”Reset Profile” and “Reset PvD” buttons status are controlled via GetFMAResourceActionAuthorizationAndAvailabilityDataIf this component returns 500 then all the buttons controlled by it will be gray buttons.
The issue occurrence logic is figured out as below,
Initially, customer created a resource in Studio > Hosting with Network "eth2" in XenServer.Later, customer created a XenServer NIC Bond with Network "eth2" and "eth3". Therefore, when creating the machine catalog, "eth2" is no longer a standalone NIC but a slave NIC of the NIC Bond.According to behavior of XenServer Bond Slave, it is still possible to create a VIF based on the Network of a bond slave. However, it is not possible to start such a VIF’s VM if this would need a bond slave to be plugged. Since starting such a VIF’s VM on a host would need a bond slave to be plugged, it's not possible to perform this action on any xenserver. Therefore, to start the Preparation VM attached with "eth2" will fail with exception CANNOT_PLUG_BOND_SLAVE on XenServer level and MCS creation failed with error NO_HOSTS_AVAILABLE​.
http string mapping to port 80 missing in the services file
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Known issue with 7.14.1 Delivery Controller.
This is a known issue in the product i.e if the Powershell version on the Citrix SCOM Agent Servers is 2.0 then the code in the Task is not able to use the "AgentInstallationSource" value that is passed as an override parameter.
Citrix advises not to apply the Anniversary Update (v1607) on existing Windows 10 machines with Citrix VDA for Windows Desktop OS installed. Citrix recommends uninstalling the VDA for Windows Desktop, applying the Anniversary Update (v1607) and then reinstalling Citrix VDA for Windows Desktop.
The issue is specific to Win 10 1511. At times during Win 10 1511 upgrade from VDA 7.11 to 7.13, ctxuvi.sys was not getting updated which resulted in hash verification failure for MfAphook64.dll. The below error was seen in CDF logs during Upgrade. The CtxUvi Driver has encountered an unexpected error.' Code: 0xC0FF03ED Status: 0xC0000428 Reason: 'INTRNCHK'UviCompareSectionsHashWithPredefinedHashes: file 'C:\Program Files\Citrix\System32\MfApHook64.dll' hash failed verification with allowed hash(es) - no match foundUviCompareSectionsHashWithPredefinedHashes: Failed for file: 'C:\Program Files\Citrix\System32\MfApHook64.dll' with status: 0xC0000428UviInternalVerifyInjectionDllsHashes: Verify InjectionDlls Hashes: VERIFICATION FAILURE - IsWow64: 0000     'The CtxUvi Driver has detected an integrity error during initialization. The CtxUvi Driver has been disabled
VMs in the Delivery group don't have any Appdisks attached. Appdisks are there only in the Vcenter Datastore.
This is a known issue in the product. In the code logoff request was sent only for connected/active sessions and not for disconnected sessions.
By default Director performs a forest wide search of the logged in admin and Director machine’s domains. In some situations it might not be necessary to get forest wide results and a domain wide search results might be enough.
Not an issue, by design.
When StoreFront communicates with the Broker Service on the DDC, the DDC's Broker Service returns an expired SSL certificate, even though a new certificate had been installed.  The cause of the issue is that the old expired SSL certificate is till bound to the port ("ipport" entry) on the DDC.
Pass-Through Authetication was not properly set up but Autologon was enabled. On failing to get valid username and password though Pass-Through authentication, ICA Service goes on to validate EnforceAutologon and fails with error.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check. https://discussions.citrix.com/forum/1729-smart-check/
Join us on Discussions to ask questions or provide feedback about this Smart Check.http://https://discussions.citrix.com/forum/1729-smart-check/
Communication Ports Used by Citrix Technologies
Getting an error : Error Id: XDGP:E710408ASystem.ArgumentException Although the IP range is valid, the backend may not be able to honor this range correctly.
After deleting any catalog that could be using the connection you may need to just resort to PowerShell to remove the connections (Perhaps MCS or Studio has gotten mixed up with background task due to not being able to use the connection anymore).
We Verified that the Citrix Platinum Licenses were in place.We confirmed that Microsoft .NET Framework 4.5.2 or later was installed.However, Microsoft's Visual C++ Redistributable Packages for Visual Studio 2013 was missing on the Deliver Controller.
WillShutdownAfterUse flag of the server delivery group is set to true.If WillShutdownAfterUse flag is set to false the machine will shutdown after a user logs off  and this should be set to false in case of Server VDA's. If this is set to True other users will not be able to connect to the same Server VDA again.
When copying i18n characters such as Korean from Office 2010, clipboard write allowed formats "CF_METAFILEPICT" is needed for paste.
The problem is that, by default, Windows Server does not include the HTML5 video codecs, and thus they’re not available to Internet Explorer.
If running Office 365 with Shared Computer Activation, then you might need to exclude !ctx_localappdata!\Microsoft\Office\15.0\Licensing and/or !ctx_localappdata!\Microsoft\Office\16.0\Licensing. Ideally you should have ADFS integration so users can seamlessly re-activate Office at every launch.
Using a mouse on a device with multi-touch drivers seems to be interfering with the behavior of the JS based formed. This was not limited to the Citrix MultiTouch driver, as this issue was reproduced on other multi touch devices that did not have Citrix Software installed.
Code changes introduced by MS in Media Player.
This issue can occur if the user does not have correct permissions to access the Sites information. The user should be part of the delegated administrator group.
This can happen for a number of reasons. This article address the situations where the machine account password needs to be reset. These are the non-destructive methods for fixing the most common causes for the trust relationship issue. For example:
Machine was restored to a system restore point or to a snapshot that is old enough to have a different machine account password than the one currently in use by AD. More than one machine on a network with the same hostname.AD Machine account object corruption.AD policy that would disable a computer after x number of days of not authenticating.Computer object in AD is deleted.
License server role installed on the DDC with no Licensing configuration. There was another dedicated Licensing server in the environment
MMC cache causes the issue
User have no permission to update "c:\program files\windowsApps" folder
Patches in KB4034664 and KB4034670 Interrupted the multi monitor behavior with MS Office 2013
How to manually rebuild Performance CountersWMI: Repository Corruption, or Not?How to Enable Microsoft Installer loggingCTX111961 - CDFControlCTX132117 - Error: When Trying to Install or Remove XenApp Software, a 1603 Error Message is Displayed
Could not create Orchestration and Trust DBSchema in the database.
From the VDA installation log, we have following error:===XenDesktop Installation.log====11:18:40.5231       : XenDesktopSetup:Starting synchronous process 'msiexec' with args '/x "{8DC16147-DCF8-4650-828E-83CB53390695}" /lv "C:\Users\Administrator.XENTEST\AppData\Local\Temp\Citrix\XenDesktop Installer\MSI Log Files\profilemgt_x64_uninstall798600233.txt" /quiet  REBOOT=ReallySuppress REBOOTPROMPT=Suppress'11:18:50.7795       : XenDesktopSetup:Process completed with error code 160311:18:50.8754 $ERR$ : XenDesktopSetup:message format "Removal of MSI Product 'profilemgt_x64.msi' ('{8DC16147-DCF8-4650-828E-83CB53390695}') failed with code 'InstallFailure' (1603)." failed:System.FormatException: Index (zero based) must be greater than or equal to zero and less than the size of the argument list.   at System.Text.StringBuilder.AppendFormat(IFormatProvider provider, String format, Object[] args)   at Citrix.MetaInstaller.Log.Trace(LogSourceModule source, TraceFunction traceFunction, String message, Object[] args)11:18:50.8765 $ERR$ : XenDesktopSetup:Failed to remove component 'Citrix User Profile Manager'. Removal of MSI Product 'profilemgt_x64.msi' ('{8DC16147-DCF8-4650-828E-83CB53390695}') failed with code 'InstallFailure' (1603).11:18:50.8765 $ERR$ : XenDesktopSetup:Recording installation failure. Removal of MSI Product 'profilemgt_x64.msi' ('{8DC16147-DCF8-4650-828E-83CB53390695}') failed with code 'InstallFailure' (1603).11:18:50.8828       : XenDesktopSetup:Remove failed11:18:50.8870       : XenDesktopSetup:InstallationManager returned Failed===profilemgt_x64_uninstall.txt===DIFXAPP: INFO:   ENTER:  DriverPackageUninstallWDIFXAPP: INFO:   Uninstalling driver package C:\Windows\system32\DRVSTORE\upmjit_DB7121BDB77CC69BE836230391C66780F94948F5\upmjit.inf...DIFXAPP: ERROR:  Unable to revert to a previous driver store for service 'upmjit'.DIFXAPP: ERROR:  Will attempt to uninstall the driver.DIFXAPP: ERROR:  Error unable to open service 'upmjit' to delete it because of error 0x424DIFXAPP: ERROR:  Error occurred while deleting service to uninstall the driver store.DIFXAPP: ERROR:  We were unable to install any other driver store entry to support the service upmjit and we also failed to delete the service.DIFXAPP: ERROR:  Failed to uninstall the driver. Attempting to undo system changes ... (Error code 0x643: Fatal error during installation.)DIFXAPP: INFO:   Installing INF file "C:\Windows\system32\DRVSTORE\upmjit_DB7121BDB77CC69BE836230391C66780F94948F5\upmjit.inf" of Type 4.DIFXAPP: INFO:   Installing File System Driver 'C:\Windows\system32\DRVSTORE\upmjit_DB7121BDB77CC69BE836230391C66780F94948F5\upmjit.inf'DIFXAPP: ERROR:  Unable to open service 'upmjit' to start it because of error 0x424DIFXAPP: ERROR:  Error occurred while uninstalling driver package 'C:\Windows\system32\DRVSTORE\upmjit_DB7121BDB77CC69BE836230391C66780F94948F5\upmjit.inf'DIFXAPP: INFO:   Successfully re-added '{872D572A-FBE9-4546-8E24-654B93E20921}' to reference list of driver store entry ''DIFXAPP: INFO:   RETURN: DriverPackageUninstallW  (0x643)DIFXAPP: ERROR encountered while uninstalling driver store C:\Windows\system32\DRVSTORE\upmjit_DB7121BDB77CC69BE836230391C66780F94948F5\upmjit.infDIFXAPP: UninstallDriverPackages failed with error 0x643The root cause is that: in the upmjit.inf file, currently packaged with VDA software installer, the order is not as per the MSDN documentation. As the result upmjit service did not get created during the initial installation.
McAfee Web Gateway configured as proxy on the client Internet explorer was blocking the ICA connection request reaching to the VDA. This could potentially be caused by other proxies as well.
How to Enable Full Page Heap When Creating Dump Files for Citrix Technical Support
This issue can occur because of below causes:1. Intermittent Network connectivity issues between Delivery Controller and SQL server hosting Monitor Database.2. Performance issues on SQL Database server.3.  On a busy site, it is likely that the connection pool will run out of connections before garbage collection kicks in.4.  Probably because of connection leak. Either the connection string do not close properly or consistently.
Citrix and Philips software logic.
Delivery Controller could not communicate with Hypervisor since its IP Address was changed
Multiple applications were launched within few seconds resulting in the problem.
CtxUvi driver not loading the hooks correctly
Command line installation (CLI) is not support for NetScaler URL
By default Windows 10 has the DVR function enabled.
How to Configure HDX Enlightened Data Transport Protocol :  https://support.citrix.com/article/CTX220732Configuring NetScaler Gateway to Support Enlightened Data Transport : https://docs.citrix.com/en-us/netscaler-gateway/12/hdx-enlightened-data-transport-support/configuring-netscaler-gateway.htmlEDT How do I: https://support.citrix.com/pages/xaxd-how#EDTHow to Configure EDT when using VPN solutions: CTX231821
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
XenDesktop turns on the machines at the start of each peak period, and turns them off at the start of each off-peak period when machine has no sessions on it.
Member of a large number of groups
Horizontal scrolling is not supported on VDA windows 7, More multi-touch gestures are supported from windows 8.1.
Driver specific issues.
NA
This issue can occur because of the below causes:1. The database server as reached the limit disk usage or disk quota.2. The database file associated to 'PRIMARY' filegroup is set with a Restricted File Growth and the Maximum File Size has been reached.In this case, below error was logged in CDF logs collected from Delivery Controller.DC 3614,0,2017/07/26 00:11:51:17327,19288,13224,0 ,Information,"ERROR: DAL *** RegisterWorker(RegistrationData[xxxxxxxxxx]): FAILED:: General database error: RegisterWorker: Error 1105 @ Line 154: Could not allocate space for object 'chb_State.WorkerRegistrations'.'PK_WorkerRegistrations' in database 'yyyyy' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.ADDITIONAL RESOURCEShttps://https://docs.microsoft.com/en-us/sql/relational-databases/databases/database-files-and-filegroupshttps://blog.sqlauthority.com/2014/03/14/sql-server-error-resolution-could-not-allocate-space-for-object-in-database-because-the-filegroup-is-full/https://www.outsystems.com/forums/Forum_TopicView.aspx?TopicId=9539&TopicName=sql-server-database-error-primary-filegroup-is-full&
The following special characters are not allowed in the Delivery Group Name: \ / ; : # . * ? = &lt; &gt; | [ ] ( ) " '
Please note that these special are not allowed even in application related properties or names. Using these characters may cause unexpected issues
Plantronics Savi device requires usage of wake-up message "0008:002A = ONLINE" which was not implemented before.
There were two Delivery Controllers in the site. One had TLS 1.0 enabled and the other has it disabled.CDF trace showed the connection attempt to vCenter was going from the 2nd Delivery Controller which had TLS 1.0 disabled.
The SSL Cipher Suite on the VDA was configured to "ALL" which enables the Triple DES when configuring VDA for SSL during the ICA Launch
With Chrome 58 and later, Chrome automatically detects if it’s running in a remote desktop environment and adjusts its settings accordingly. If you’re using Chrome 57 or earlier, first you must change the Chrome settings in the Citrix AppCenter Console.
MCS Machines in a domain that does not exists
As per Microsoft’s design, the Windows 10 Start menu will only include the “Disconnect” option when the operating system detects the desktop is being accessed remotely using a remote desktop service (or RDP) connection. Citrix XenDesktop (or ICA) connections use a different approach and remote sessions are established as “console” sessions, in order to better support some of the HDX features and provide a user experience that is as close to using a physical machine. As a result, the Windows 10 operating system does not consider XenDesktop connections as being remote and fails to display the “Disconnect” option in the Start menu.
https://www.citrix.com/blogs/2016/01/08/obtain-xendesktop-custom-report-through-citrix-director/http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-14/director/version-matrix.htmlhttp://docs.citrix.com/en-us/xenapp-and-xendesktop/7-12/whats-new.html#Custom_Reporting
This issue was seen to occur in some cases due to a race condition between the registration and the power state reporting, which caused the broker to incorrectly infer the fault state for the machine.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Custom Security Descriptor was set for the Application Event logs on the VDA's.[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\eventlog\Application]"customsd"="O:BAG:SYD:(D;; 0xf0007;;;AN)(D;; 0xf0007;;;BG)(A;; 0xf0007;;;SY)(A;; 0x5;;;BA)(A;; 0x7;;;SO)(A;; 0x3;;;IU)(A;; 0x2;;;BA)(A;; 0x2;;;LS)(A;; 0x2;;;NS)(A;;0x1;;;S-1-5-21-905980934-1232030010-646806464-20420)"Due to CustomSD set on that Application Event Logs, UPMPlugin loaded in BrokerAgent (that runs under Network Service account) was denied permission to read the Application events . Hence, it couldn’t get the Desktop Ready event, and so no 'upmlogon' payload was sent to Citrix Monitor Service and so logon duration was not logged.
Known issue with the Product.
https://support.citrix.com/article/CTX134940#STAIDhttps://docs.citrix.com/en-us/xenmobile/10/xmob-system-requirements/xmob-deploy-component-port-reqs-con.htmlhttps://www.citrix.com/blogs/2014/01/17/xenmobile-enable-hdx-apps-with-certificate-based-authentication/
Locked identity pool
This issue happens if "FailureId" in MonitorData.Session table and "DesktopGroupId" in MonitorData.Machine table (related machine of session) contains "NULL".
After the controllers are upgraded , When BrokerAgent tries to write a CDE event about the message delivered, it ends up throwing an exception resulting in Broker getting a Fault error which translates to the VDA rejecting the message. So, no reboot is attempted.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Missed assembly from Visual C++ Redistributable in the system
Check whether the GNOME sessions can be launched from the console. If the GNOME sessions cannot be launched from the console, the root cause is with GNOME issue, not with the VDA. Check /var/log/messages and /var/log/Xorg.*.log for further investigation. In the case below, GNOME errors indicate that something is wrong with the GNOME installation. /var/log/messages:Jun  5 18:19:35 Xrh72s-sssd Gnome-session[4920]: WARNING: Application 'Gnome-settings-daemon.desktop' failed to register before timeoutJun  5 18:19:35 Xrh72s-sssd Gnome-session: Unrecoverable failure in required component Gnome-settings-daemon.desktopJun  5 18:19:35 Xrh72s-sssd Gnome-session: Gnome-session[4920]: WARNING: Application 'Gnome-settings-daemon.desktop' failed to register before timeoutJun  5 18:19:35 Xrh72s-sssd Gnome-session: (Gnome-shell:5220): GLib-GIO-ERROR **: Settings schema 'org.Gnome.shell' is not installedJun  5 18:19:35 Xrh72s-sssd kernel: traps: Gnome-shell[5220] trap int3 ip:7f66854a9643 sp:7ffed85bda20 error:0Jun  5 18:19:35 Xrh72s-sssd abrt-hook-ccpp: Process 5220 (Gnome-shell) of user 745600500 killed by SIGTRAP - dumping core
String of zeroes in MonitorData.machine and MonitorData.DesktopGroup table.
The key used to indicate whether a VDA is entering a logoff state, HKEY_LOCAL_MACHINE\SOFTWARE\Citrix\Ica\Session\#\Connection\SessionInPreLogoff, is being created when using VMware Application Volume Manager or any other application volume managers.
The updated base Disk was not being read by the VDIs as it was unable to communicate with hypervisor correctly . After power state status is rectified , it is able to communicate with hypervisor and read the updated base disk .
The Personal vDisk service prevents the registration of the VDA with the broker until the PvD successfully initializes. This is done in an effort to ensure that users are not connected to a desktop before the PvD state is fully functional. For the machines to register the PvD agent error will need to be resolved, error code 6 specifically indicates that a viable PvD disk was not found. The Personal vDisk technology locates the PvD disk by iterating through the root of each of the disks on the system attempting to locate the GUID marker file. If a PvD disk is not attached to the VM, or if the GUID marker file does not exist at the root of the drive, or if the read attempt fails then PvD will return error code 6.
DCOM security settings for the certificate service not updated.
Install using the command line - http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-13/install-configure/install-command.html (check session Command-line options for installing a VDA)Server VDI - https://docs.citrix.com/en-us/xenapp-and-xendesktop/7-13/install-configure/server-vdi.htmlHDX 3D Pro - http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-13/hdx/hdx-3d-pro.htmlHow to Validate an AMD GPU Graphics Card is Active - https://support.citrix.com/article/CTX220663
While using RTOP in optimized mode (not fall-back) the call is established from the endpoint, not the server where Skype is published. Adjusting the volume in the remote session using Skype UI or desktop volume control will have no effect over the call now hosted on the endpoint. Citrix is looking to resolve this in future releases.
- After the Target Device(VDA) is moved from one Site to other, studio shows it as unregistered.- After few minutes Delivery Controller sends a shutdown message to the target device.- As the target device is cloned from existing VDA,  the VDA has old ListOfDDCs present under:C:\Program Files\Citrix\PvsVm\Service\PersistedData\BrokerAgentInfo\SavedListOfDdcsSids.xml
Additional PVD rules are required when using App-V 5.1.
https://www.citrix.com/blogs/2017/01/10/multiple-reboot-schedules-for-a-delivery-group-in-xenapp-7-12/
Metabase.xml file is not present in C:\windows\system32\inetsrv on the PvD VDA.
Graphic issue
https://support.microsoft.com/en-ie/help/11529/what-is-a-windows-7-n-edition-https://support.microsoft.com/en-us/help/3010081/media-feature-pack-for-windows-10-n-and-windows-10-kn-editionshttps://www.microsoft.com/en-us/download/details.aspx?id=16546
https://www.citrix.com/blogs/2012/04/16/xendesktop-and-provisioning-services-on-vsphere-5/
CTX238200 - How to Troubleshoot Client Drive MappingCTX127614 - Differences in Client Drive Mapping between XenApp 6.0 and 6.5, Presentation Server 4.5, and XenApp 5.0
Microsoft support explained that it is not supported to Roam "Appdata\Local\Packages" or  "AppData\Local\Microsoft\Windows\UsrClass.dat*" files/directories. ShellHostExperience.exe which is responsible for Start Menu is not able to use them properly when roamed and therefore Start Menu becomes unresponsive.
On the web.config the Connector.SCOM.Identity was set to MPXAXD Agent service account which was the cause of the issue
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
This issue occurs due to OVERDRAFT is not properly calculated when customer divided license, and License Server counted all licenses (included OVERDRAFT ) from both two License files.
Since Citrix studio does not display OVERDRAFT license number, customer won’t encounter this issue when checking license number from Citrix Studio.
"Media Foundation" feature is not installed on the server
XXXXTcpPort registry under the below location is configured as Registry string(REG_SZ) and is blankHKLM\Software\Microsoft\Microsoft System Center Virtual Machine Manager Administrator Console\Settings Exception:DesktopStudio_ErrorId : ConnectionValidationFailure Exception : Citrix.ManagedMachineAPI.ManagedMachineException: Command did not execute: System.Management.Automation.CmdletInvocationException: The type or name syntax of the registry key value XXXXTcpPort under Software\Microsoft\Microsoft System Center Virtual Machine Manager Administrator Console\Settings is incorrect.
In 32-bit OS, there is a limit on the number of files that could be handled by the PVD inventory process.
This is by design.
This is an expected behaviour. For hard registration to complete the VDA needs to be added to the Delivery Group.If the VDA is not added to the Delivery Group the WorkerUid or DesktopUid shows as Null while running the below query against Site Database.Select *  from chb_State.Workers W     inner join chb_Config.WorkerIndex WI     on W.Uid = WI.Uid where WI.Sid = VDA-SID;
1.Below API calling throws an exception 0x80005000 frequently:
Domain.GetDirectoryEntry()@https://msdn.microsoft.com/en-us/library/system.directoryservices.activedirectory.domain.getdirectoryentry(v=vs.110).aspx
MS claims that it has been fixed in early Windows version 2000(see https://support.microsoft.com/en-us/help/324433/client-active-directory-queries-fail-with-0x80005000), but it still occurs in Windows 2008/2012.2. LTSR and CR have separate logic to implement this feature, so LTSR can be used as a workaround.
​
NVIDIA drivers
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Customers who deployed XenApp/XenDesktop 7.11 Delivery Controller and upgraded subsequently to XenApp/XenDesktop 7.12 or 7.13 will encounter this issue when upgrading to XenApp/XenDesktop 7.14. During the upgrade to XenApp/XenDesktop 7.14, a registry key that contained the Trust FMA Service’s Database Connection string was deleted. As a result, the Citrix Trust Service running on the Delivery Controller is unable to access the database after the upgrade. Citrix Studio fails to complete a site upgrade when the Trust Service is not connected to the database.
how-to question
The issue occurs when the default one minute timeout for the application launch exceeds, and the session exits automatically.
If the certificate on the vCenter server is changed or upgraded, the same certificate along with any associated root and intermediate certificates must be installed on all the delivery controllers and the XenDesktop database must be updated with the new thumbprint of the new certificate.
Blacklisting is caused by a crash or panic in the Pseudocontainer2.exe process running on endpoint client 1 when the user roams the session to another client while offloading flash content.
https://docs.citrix.com/de-de/xenapp-and-xendesktop/7-5/cds-sdk-wrapper-rho/cds-sdk-cmdlet-help/citrix-broker-admin-v2-wrapper-xd75/set-brokerdesktopgroup-xd75.html
The problem is caused by the remote flash player instance cannot quit when changing the webpage but staying on the same website. This is caused by the way IE behaves when closing the page with the flash instance running.
Post XenApp/Desktop 7.8 changing the delivery group name does not change the name of static machines in the delivery group if their 'Published Name' attribute is set.
The issue is due to the use of tag "<httpstransport/>" on Director web config binding, which requires requestClinetCertificate to be set to "true" for Odata Interface to work over TLS.  This tag "<httpstransport/>" was added to communicate to Licensing server and  it is interfering with Odata calls.Separate binding for Licensing server in Director's web.config file should fix the issue. Citrix is aware of this issue and an internal bug has been opened to address the Licensing Server Panel failure after as it should continue to work whether "requestClinetCertificate" is set to TRUE or FALSE in Director's web.config file.
VSat link fragmentation causing network failure.
In service stopping, the object may have already been disposed.
https://technet.microsoft.com/en-us/library/cc788073(v=ws.11).aspx
We obtained the User Account name from the Group SID (using LookupAccountSid)and then did a reverse look up using LookupAccountName without the fully qualified account name specified to get the Group SID. In this case we got the SID of the wrong user group belonging to other Child Domain because we just passed the Account name and not FQDN<domain>\<name> to LookupAccountName.
Hence, when there are groups with the same name in multiple domains, the GROUP SID returned during reverse lookup could be any one of those two groups with same name in different domains.
DBUnconfigured for the Get-LogServiceStatus and Get-MonitorServiceStatus services because the Log Service Instance and Monitor Service Instance were not registered properly .
The root cause to be missing localized strings for "Citrix Printing Load Balancer" counters in cpsvc.exe.
KMSSetup or Unattend scripts have not been run on the OS layer.
- User's Launch request triggers a Stored Procedure in our Site database via Broker Service.- As per design Citrix.Fma.Sdk.Dal.SqlTxProvider.Open(DbConnection conn) tries to open a connection to SQL database which drives the exception.
"Windows Search Service" feature was not added on the Win2012R2 server
The search performance issue is due to a combination of 2 factors:- Large deployment with a substantial amount of data,- Lack of selectivity in the Search query
CGP setting wrapped in ICA file by XenDesktop 7.1 Delivery Controller is always presented as port 2598 available, even if the target VDA doesn't supply port 2598 for connection. At the time of writing, port 2598 is not available for Linux VDA. These finally cause NetScaler keep trying to connect port 2598 of Linux VDA but unable to reach.Note: NetScaler doesn't have the same fall-back mechanism (ie. switch to connect port 1494) as Windows Receiver while port 2598 is unreachable.
When a video is played back via mms protocol, Windows Media Player loads and uses an original DirectShow source filter. This internal behavior of Windows Media Player interferes with performing client-content fetching.
The default maximum acceptable difference to the Kerberos protocol between a client computer clock and domain controller clock is 5 minutes.This value can be modified by Kerberos policy.
Citrix Profile Management Service was stopped on the VDA's.
Microsoft SQL Server is not functioning as expected. Resolving the SQL error would clear the problem in the Studio.
Microsoft Technet -  Configuring default documents in IIS 7Microsoft Forums - How to set up Default Page in IIS
Wrong/Corrupted SPN for the SCCM server in the Active Directory
The machine catalog's minimum functional level need not match the version of Xendesktop installed. If the Xendesktop Setup Wizard is run with the minimum functional level of 7.9 (This is the latest functional level, there is no 7.12 functional level), the machine catalogs which are running under Minimum functional level of 7.6/7.8, will not show up in the existing catalog list.
https://technet.microsoft.com/en-us/sysinternals/pstools.aspxhttps://technet.microsoft.com/en-us/sysinternals/dd996900.aspx
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
PicasessionAgent.exe is crashing due to a race condition. When we are disabling the device, hidden window gets device arrival notification where we clear the HardwareId vector cache. This causes  a trap while iterating through vector elements for  comparing the HardwareIds.
PvsVmBoot" entry is missing from the "BootExecute" Registry Key. PvsVmBoot is responsible for configuring the CtxMcsWbc driver, and in this configuration PvsVmBoot should be disabling the driver.
fffff880`02631888 fffff880`019d66d7 : fffffa80`40f21ef0 fffff880`019e1000 fffffa80`04e48030 fffff880`026319e0 : CtxMcsWbc+0x12c9  fffff880`02631890 fffffa80`40f21ef0 : fffff880`019e1000 fffffa80`04e48030 fffff880`026319e0 fffff880`026319e0 : CtxMcsWbc+0x46d7  fffff880`02631898 fffff880`019e1000 : fffffa80`04e48030 fffff880`026319e0 fffff880`fffff880`026318b0 fffff880`026319e0 : fffff880`019d6203 fffffa80`40f21eb0 00000000`00000000 fffffa80`04aa3768 : 0xfffff880`026319e0  fffff880`026318b8 fffff880`019d6203 : fffffa80`40f21eb0 00000000`00000000 fffffa80`04aa3768 00000000`000007ff : 0xfffff880`026319e0  Windows Updates or security patches could be one of the reason for this.
Corruption in the WMI counters can cause this issue.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Cicaiface.dll was not loading on the VDA due to the following value missingHKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Citrix\InstallValue Name: LocationType: REG_SZValue: C:\Program Files\Citrix\
Account already existed in the DB, so it cannot initialize the schema creation process
Neither MCS created vms, or PVS targets created using SVMSW encounter this error when using same hosting connection or configured storage.XDSW parses multiple storage locations configured in XD host connection using commas.If commas are specified in an individual storage location, the storage path will not be possible to interpret using XDSW.If planning on using PVS  XDSW,avoid using commas while naming storages configured in XD host connection
Rest of the controller fails to upgrade successfully as Site was not upgraded using the first controller.
Possible error during update and/or adding the server to the site.
Storage name has been modified as shown in the following screenshot:
Since all the VDA’s were scheduled to reboot at the same time, after reboot there was a delay in getting some of the VDA’s registered (Overdue registration) and broker triggered a shutdown action after MaxRegistrationDelayMin of 20 mins is reached.
Customer is using Global AWS endpoint as the connection address. However, accessing the endpoint from the isolated China (Beijing) region is disallowed. Specifically,
When adding an EC2 connection in XenDesktop Hosting, the default address string is “https://ec2.amazonaws.com”. This is a Global endpoint, which initially served us-east-1 region but allows accessing from other regions with exception of isolated regions, such as China and GovCloud.Thus, for customers locating at the isolated China (Beijing) Region, need to specify the connection address string as “https://ec2.cn-north-1.amazonaws.com.cn”, which serves the region.
When desktop lock is enabled, locking the client disconnects the ICA session. During the unlock the session is reconnected and the window position calculation seems to have gone wrong.
If a VM is removed/deleted from the Hypervisor directly, the VM ID stored in the Xendesktop database will no longer be valid. Attempting to remove/delete vm through studio will try to validate the VM id and hence the operation fails.
https://enterprise.google.com/chrome/chrome-browser/
The client machines when connecting externally will not have access to the Issuing CA and Root CA certificate in the internal Network. The certificates should be manually imported to the client machine either through a GPO or copying the certificate and putting it in the "Trusted Root Certification Authorities" and "Intermediate Certification Authorities" respectively.
Printer Driver name configuration issue.
http://discussions.citrix.com/topic/384175-mcs-deleting-basedisk-from-vm-storage/#entry1956002http://discussions.citrix.com/topic/331755-problem-with-mcs-base-disk-deletion/
Architecture difference of OS
MS Office DLL “MAPISHELL.DLL” had a conflict with “WmiPrvSE.exe"
When they attempted to remove MS Office suite from VDA there was an error reported on DLL listed above. Trying deleting the DLL also reported an error message stating that such DLL was in use by process “WmiPrvSE.exe”. Attempting to kill the “WmiPrvSE.exe” reported that is was in use by the “Citrix Desktop Service”
https://docs.citrix.com/en-us/netscaler/12/load-balancing.html
This is due to a configuration issue that might occur when Director is installed on a dedicated server that is remote from the Delivery Controller. It occurs normally in the following scenarios:
The FQDN or IP Address of the Controller was not provided in the Installation Wizard.Director was installed using the .msi file instead of the Product Installer. (Refer to Knowledge Center article, Install or Upgrade to Citrix Director 7.x Using Director .msi File)
Csrss.exe remained hang after the session is disconnected.
The free space of storage is not enough, and then rename the diff disk failed.
MCS storageaccount on Azure was missing the tags required for MCS to work correctly.
[Limitation]1. Under Director > Trends panel, duration metrics displayed under Logon Performance tab and Capacity Management > > Hosted Application Usage > Single application tab all come down to DateDiff calculation, like Application usage duration and duration of each Logon phase.
2. In Citrix Director design, to obtain the above duration metrics, SQLServer function DateDiff is invoked to calculate gap between two dates in Millisecond. Since return value of DateDiff function is INT32 type, the maximum supported value is + 2,147,483,647. If transferring 2,147,483,647 Millisecond into Hour, it equals to around 596.5 Hours. In other word, if two dates' gap is larger than 596.5 Hours, when Monitor Service calculates their gap, DateDiff function will result in data overflow and Director page won't properly display.
Issue with CtxMcsWbc.sys Driver.
To redirect DisplayLink to ICA session is not supported.
CTX105955 – How to Check In a User Dump that Full Page Heap was Enabled
How to use Pageheap.exe in Windows XP and Windows 2000 (valid also for Windows 2003, 2008 and 2008 R2)Microsoft Debugging Tools For Windows
CTX113250 - Required Ports for Citrix NetScaler Gateway in DMZ SetupCTX101810 - Communication Ports Used by Citrix Technologies
The issue happens as the analytics service in 7.12 does not interpret FIPS validated cryptographic algorithms.
In Elektra (7.12) we changed the default instance type that we use for volume workers on AWS. We had previously been using m3.medium, but we switched it to t2.small. We did this because we had to switch all of our Linux AMIs from paravirtual to HVM so that they would work in some newly-introduced regions. Adopting a T2 instance type was a less-expensive alternative relative to M3.
However, it has since transpired that T2 instances cannot be use as dedicated instances. (And volume workers need to be dedicated if the MCS catalog is dedicated). Therefore, the volume worker launch process fails when dedicated tenancy is chosen.
Compatibility issues between VDA and some specific 3rd party applications.
This behavior is currently a known limitation.There is a structure that is not getting set up properly and the timer warning flag is set to "No Warning".Citrix BUG IDs:  BUG0572461 & BUG0631017
Issue is seen when there is high latency between the client and the VDA.
This is by design and for platinum customer the retention period is 90 days by default.- GroomDeletedRetentionDays parameter determines how many days to keep Machine, Catalog, DesktopGroup and Hypervisor entities around that have a LifecycleState of ‘Deleted’. This also deletes any related Session, Connection, Summary, Failure or LoadIndex records.
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Windows thumbnail cache: https://en.wikipedia.org/wiki/Windows_thumbnail_cache
Clipboard Formats, ref: https://msdn.microsoft.com/en-us/library/windows/desktop/ms649013(v=vs.85).aspxFree Clipboard Viewer, ref: http://www.freeclipboardviewer.com/
Additional Workaround
Found it is a design behavior as mentioned in https://support.citrix.com/article/CTX086028Enabled client drive mapping policy on studio to get the Local system drive over the session via any apps.Enabled special folder redirection on the studio , Storefront and default .ICA file . So that we can observe the users desktop inside the session.Published an app as explorer as (%username%\desktop ) and Tested internally found we are able to access the users desktop ( %username%\desktop) and we are able to do copy paste from local machine to users's desktop or the desired location.Tested externally and we are able to access drives and do copy paste as expected.
In XenApp/XenDesktop 7.13, an enhancement was made and now Citrix administrators can manage ACR/SR via Citrix Policy, not via the Citrix Receiver Group Policy Object administrative template nor the default.ica file. By default, ACR/SR is allowed in Citrix Policy.Upgrade Paths and ACR/SR BehaviorScenario 1: ACR/SR was originally disabled, but not configured accordingly in Citrix Policy after upgrade to 7.13 + 4.7Scenario 2: ACR/SR was originally Enabled, but not configured accordingly in Citrix Policy after upgrade to 7.13 + 4.7ACR/SR Behavior Matrix
Receiver for WindowsDelivery ControllerVDACitrix PolicyReceiver GPO templatedefault.ica4.77.137.13HonorIgnoreIgnore4.77.13Lower than 7.13Not ApplicableHonorHonor4.7Lower than 7.13Lower than 7.13Not ApplicableHonorHonor4.7Lower than 7.137.13Not ApplicableHonorHonorLower than 4.77.137.13Not ApplicableHonorHonor
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Browser process was launched with logon script in privileged mode where as wfica32.xe was launched at medium integrity level. This lead to COM access issue and failure.
More information about Windows Integrity mechanism can be found at:https://msdn.microsoft.com/en-us/library/bb625957.aspxhttps://msdn.microsoft.com/en-us/library/bb625962.aspxhttps://msdn.microsoft.com/en-us/library/bb625963.aspx
Unable to establish ODBC connection with primary active mirror cluster.
Preventing Hangs in Windows Applications https://msdn.microsoft.com/en-us/library/windows/desktop/dd744765%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
The transaction log too big.
Cause :1. Ran  Get-configregisteredserviceinstance | measure 2. Output- 125 instance. 3. The count of the instances is incorrect, it should be 98 for 2 XA/XD 7.6 controllers.
VCenter was upgrade from 5.5 version B to version E , Network/storage change under the resource.
Duplicate entry for the DDC server in the store.
Default Portica permissions were modified through a custom Group Policy.
In this case, since we were creating an empty site and the database was getting created manually using scripts, so replica validation was not done. When the second Delivery Controller is added, it tries to update the replicas, and seems to get the wrong connection string (Derived from the 1st DDC which was used to Create an Empty, Unconfigured Site).  			Studio tries to connect to the replica with just the server name, but needs instance name to be successful. The instance name is being stripped off from the data source and uses the Server Name instead leading to the issue.  			In future relases instance name is added to the servername so that when Studio connects to the replica servers (the AG listeners), it will do so using the correct connection string.
This error message is due to no license available for new users.
This issue is caused by an incompatibility with the changes introduced in the .NET Framework as a result of the Microsoft Security Bulletin MS16-065These changes in the .NET Framework may cause some applications that are based on the .NET Framework to break.The Microsoft Article mentioned above describes two approaches you can use to update an application to work correctly after you apply Microsoft Security Bulletin MS16-065.
SSL certificate installed on the vcenter server.
Incorrect settings in the BrokerService.exe.config files on both Xendesktop Controllers.
XD Feature Matrix:https://www.citrix.com/products/xenapp-xendesktop/feature-matrix.htmlDirector Features by Edition:https://www.citrix.com/blogs/2016/08/10/citrix-director-features-by-edition-and-version/
By default MCS Inventory Tree does not enumerate Generation 2 machines.
Topaz includes documenationhttp://www.topazsystems.com/remoteusage.htmlhttp://www.topazsystems.com/software/bsb_remote.pdfhttp://www.topazsystems.com/remoteusagemodels.html
NTAuthority\Localservice (SID) becomes a part of the local administrators and stops the Citrix ICA client service with the error message Access denied
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
some other application on client machine is setting ForegroundLockTimeout to a value other than 0
Session Recording Agent fails to obtain target Application Names, which are not properly updated by Virtual Desktop Agent at session reconnect.
List of drivers which have been identified to cause this issue but are not limited to are:- C:\WINDOWS\SYSTEM32\DRIVERS\TMTDI.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\AKSDF.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\AKSFRIDGE.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\BXVBDA.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\BXVBDA.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\B57ND60A.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\EVBDA.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\RTNIC64.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\LDSECDRV.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\NETGUARD.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\VNETFLT.SYS- C:\WINDOWS\SYSTEM32\DRIVERS\neofltr_803_30597.sys--------------------------------------------------------------------------------------------Deprecation information for TDI, vendors providing their solutions should be using Windows Filtering Platform or Winsock Kernel which are fully supported by now. https://msdn.microsoft.com/en-us/library/windows/hardware/ff565094(v=vs.85).aspxhttps://technet.microsoft.com/en-us/library/cc939977.aspxhttps://technet.microsoft.com/en-us/library/hh831568(v=ws.11).aspxhttps://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2121307 Windows Server 8.1 and 2012 R2 upwards will flag these drivers with an event id 16001 in the System log from source AFD that reads:A TDI filter (\Driver\<name>) was detected. This filter has not been certified by Microsoft and may cause system instability------------------------------------------------------------------------------------------------
Citrix Resources:
CTX107824 - Citrix API Hooks (mfaphook.dll) Explained and Enumerated
External Resources:
Sysinternals Suite - Process Explorer
It is a product design prior to XenDesktop 7.12 and Windows Receiver 4.6.
USB redirection depends on the VHCI kernel modules (usb-vhci-hcd.ko and usb-vhci-iocif.ko). These modules are part of the Linux VDA RPM package and compiled based on the official Linux distribution kernel. If kernel of Linux distribution is not compatible with VHCI driver provided by Linux VDA, Citrix USB redirection won't take effect.
The XenApp trial environment that is deployed as a part of XenApp Trial is a 30 day trial environment which the customer can use for testing their applications in Azure on the latest version of XenApp. This template is not considered as a Platform image and hence Azure expects Plan information to be sent from the MCS side for creating the image.
It is affected by Citrix policy [ Enhanced Desktop Experience ](Default: Allowed).  But when you set this Citrix policy [ Enhanced Desktop Experience ] to Prohibited, the Local Group Policy [Load a specific theme] is still enabled and set to an empty string.
CTX220875 - XenMobile 10.5: SmartAccess to HDX - Introduction and RequirementsCTX220877 - XenMobile 10.5: SmartAccess to HDX - How to configure SmartAccess Policy on XenApp and XenDesktop CTX220964 - XenMobile 10.5: SmartAccess to HDX - How to Configure Compliance Automated Actions in XenMobile CTX220967 - XenMobile 10.5: XenMobile Server and SmartAccess FAQ CTX220876 - XenMobile 10.5: SmartAccess to HDX - How to Configure the XenMobile SAML Certificate to the StoreFront Store
Service "Tablet PC input Service" is stopped
Codec missing or some configuration is corrupted.
EDT How do I: https://support.citrix.com/pages/xaxd-how#EDTCTX220730 - How to Confirm HDX Enlightened Data Transport Protocol is ActiveCTX230014 - How to Troubleshoot EDT ConnectionsCTX226385 - Troubleshooting DTLS and EDT on the Netscaler GatewayCTX230011 - EDT Session Connection/Reconnection Attempts using UDP and TCP in ParallelCTX230010 - Windows OS VDA 7.16 Schannel library support for DTLSCTX230012 - EDT Security using DTLSCTX231821 - How to Configure EDT when using VPN solutionsCTX226014 - Application Launch Fails with "Unknown client error 1110" When Using EDT/DTLS on NetScaler GatewayCTX224373 - XenDesktop 7.x Unable to launch published desktop with Adaptive transport policy enabled
It appears to be failing specifically when it tries to do something with WmiPlugin.dll, seems has something to do with WMI repository:==MSI (s) (DC:E4) [22:44:32:364]: Executing op: CustomActionSchedule(Action=Install_WmiPlugin_Property_Win8.A6F1136C_618E_4215_90E4_4BBF5A4B8CD8,ActionType=3073,Source=BinaryData,Target=CAQuietExec,CustomActionData="C:\Windows\Microsoft.NET\Framework\v4.0.30319\installutil.exe" /i /LogToConsole=false "C:\Program Files\Citrix\Euem\Service\WmiPlugin.dll")MSI (s) (DC:9C) [22:44:32:366]: Invoking remote custom action. DLL: C:\Windows\Installer\MSIF422.tmp, Entrypoint: CAQuietExecCAQuietExec:  Microsoft (R) .NET Framework Installation utility Version 4.0.30319.33440CAQuietExec:  Copyright (C) Microsoft Corporation.  All rights reserved.CAQuietExec:CAQuietExec:  The installation failed, and the rollback has been performed.CAQuietExec:  Error 0xffffffff: Command line returned an error.CAQuietExec:  Error 0xffffffff: CAQuietExec FailedCustomAction Install_WmiPlugin_Property_Win8.A6F1136C_618E_4215_90E4_4BBF5A4B8CD8 returned actual error code 1603 (note this may not be 100% accurate if translation happened inside sandbox)01/21/2016 22:44:36.265 [2268]: Assembly Install: Failing with hr=80070005 at RemoveDirectoryAndChildren, line 396==
The amount of memory being consumed are greater than the default value set to TargetCacheSize causing the threads to wait for the memory to clear, but because is greater, it doesnt get cleared causing the Virtual Machine to hang during the boot process.
Use HDX Monitor to validate the Applied settings and the status of the hardware encoding policy
Download and install HDX Monitor on the VDA.Open HDX Monitor and Select the Graphics - Thinwire option on the left to see the Applied thinwire settings.
3. Select the Graphics – Thinwire Advanced option on the left.4. Search for the name Component_HardwareEncodeEnabled.5. If enabled, the value will be set to True.
Configure Office 2010 for capturing an image- https://technet.microsoft.com/en-us/library/cc178964(v=office.14).aspx
Missed parameter in line 844 of the script "C:\Program Files (x86)\Citrix\Scout\Current\Utilities\Citrix.GroupPolicy.Commands.psm1"
BaseDisk info is missing from database table DesktopUpdateManagerSchema.ProvisioningSchemeVMImageLocation
EDT How do I: https://support.citrix.com/pages/xaxd-how#EDTCTX220732 - How to Configure HDX Enlightened Data Transport ProtocolCTX230014 - How to Troubleshoot EDT ConnectionsCTX226385 - Troubleshooting DTLS and EDT on the Netscaler GatewayCTX230011 - EDT Session Connection/Reconnection Attempts using UDP and TCP in ParallelCTX230010 - Windows OS VDA 7.16 Schannel library support for DTLSCTX230012 - EDT Security using DTLSCTX231821 - How to Configure EDT when using VPN solutionsCTX226014 - Application Launch Fails with "Unknown client error 1110" When Using EDT/DTLS on NetScaler GatewayCTX224373 - XenDesktop 7.x Unable to launch published desktop with Adaptive transport policy enabled
The Citrix MPXAXD Agent service was running under the Local System account and not the Run As account which has permission on profile "Citrix XenApp/XenDesktop Monitoring Account"
The Serial device did not detect the polling that was being generated.
Mis-spelled entry in the database. By design.
http://discussions.citrix.com/topic/338374-there-are-no-hosts-in-use-by-this-hosting-unit-that-currently-have-an-overall-state-of-ok/
The Citrix StoreFront Servers, FAS server and VDA servers from domain B did not have the  ""ReadTokenGroupsGlobalAndUniversal" permission on the objects in Domain A
The print button on the report viewer toolbar uses the Portable Document Format (PDF) format for client-side printing of Reporting Services reports viewed in a browser.
The Active Directory servers having singing/secure LDAP enabled and the Linux VDA is not using secure LDAP.
After a machine is rebooted it waits for a HCL notification to confirm that the VM tools are installed or not. If this notification wait times out it causes the machine to set its status as Stuck on boot.
When Keyword filtering fails on Desktops and are not enumerated on StoreFront based on Keyword configuration specified on XenDesktop, it is generally based on Keyword being entered in the wrong field. When configuring / Creating or editing a Delivery Group in XenDesktop there are is another place in which a Description field is seen and that is under > Edit Delivery Group > User Settings. If Keyword is specified here StoreFront will not be able to read this, Therefore, Keyword will not be recognized and enumeration will fail depending on the settings specified for keyword filtering on the StoreFront Server.
%ProgramFiles% variable points to Program Files directory, which stores all the installed program of Windows and others. The default on English-language systems is C:\Program Files. In 64-bit editions of Windows (XP, 2003, Vista), there are also %ProgramFiles(x86)% which defaults to C:\Program Files (x86) and %ProgramW6432% which defaults to C:\Program Files. The %ProgramFiles% itself depends on whether the process requesting the environment variable is itself 32-bit or 64-bit (this is caused by Windows-on-Windows 64-bit redirection).
We tested the behavior on laptop which equip touch panel and verified that notes client window scroll bar doesn't move with flick but pinch-in, pinch-out. This is same behavior we see in ICA session, so it's not ICA issue, it's working just as it is.
FTA registry entries are not created.
VDA may not always honour ListOfDDC's saved under HKLM/Software/Citrix/VirtualDesktopAgent Key
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
https://technet.microsoft.com/en-us/sysinternals/adrestore.aspx
The Root Path, Network Path and Storage Path are invalid in hosting unit
PVD in failed state.
Ghosted NICS being created on VMs based off of a VMware template.
XenDesktop 7.12 is using a new AWS instance type for volume worker VMs, and they have to run inside a VPC. The current account in AWS still supports EC2 classic.
Network Service which is the log-on account of Citrix Print Manager Service, doesn't have permission over Virtual Channel. "Virtual Channel" is under Special Permission in ICA-TCP & RDP listener.
Citrix Studio utilizes the properties of the Machine Catalog and the machines within the Delivery Group to determine AppDisk compatibility. The behavior in 'Symptom 3' referenced above is seen if either the Machine Catalog or the selected machines are not compatible with AppDisk.More specifically 'Symptom 2' indicates that the selected Machine Catalog is incompatible, in which case the properties of the Catalog must be corrected. The catalog properties must be adjusted even in cases where machines are PVS created but have been imported as existing machines - this is because Citrix Studio queries both the Machine Catalog and the individual machines to determine eligibility for AppDisk use. This is to verify that only MCS/PVS created Machine Catalogs which are of the Pooled Random type are found eligible. Pooled Random MCS/PVS created machines are the only types that are supported for use with AppDisk.​'Symptom 1' indicates that the Machine Catalog is compatible with AppDisk but that the selected machines are not compatible, in this case we must ensure that the HypervisorConnectionUid of the AppDisks and the Machines both match.
Affected user were setup to use Roaming Profiles.
Issue caused by metadata added to the BrokerCatalog by App Orchestration.
For more information about mKiosk, see the Mozilla website:https://addons.mozilla.org/en-US/firefox/addon/mkiosk/
https://helpx.adobe.com/creative-cloud/packager/deploying-acrobat.htmlhttps://helpx.adobe.com/creative-cloud/packager/provisioning-toolkit-enterprise.html https://helpx.adobe.com/creative-cloud/packager/creative-cloud-licensing-identifiers.html
Incorrect Remote Desktop Services Licensing Mode was specified on the VDA machines. Customer had purchased Per User RDS CALS but had specified Per Device Licensing mode on the VDA servers.While investigating why the sessions that were stuck at “LogonInProgress” we found the below Licensing events being logged on the effected VDAs.  Log Name: System Source: Microsoft-Windows-TerminalServices-RemoteConnectionManager Date: 11/16/2016 11:37:13 PM Event ID: 1011 Task Category: None Level: Warning Keywords: Classic User: N/A Computer: xxxxxxDescription: The remote session could not be established from remote desktop client xxxxx because its temporary license has expired.Log Name: SystemSource: Microsoft-Windows-TerminalServices-RemoteConnectionManagerDate: 1/5/2017 8:40:45 AMEvent ID: 1028Task Category: NoneLevel: WarningKeywords: ClassicUser: N/AComputer: xxxxDescription:The remote session could not be established from remote desktop client xxxxx because its license could not be renewed.You can look for other RDS Licensing errors or warnings as well. Please note that sessions get stuck at prelogon state because of various reasons. RDS Licensing issue is just one of them.Data to be collected in such scenarios: 1.Scout Logs from effected Xendesktop and DDC’s. 2. CDF logs from effected Xendesktop and DDC’s3. Screenshot of Studio and Director showing the session without any associated username and the client machine name.4. Output of below commands from Delivery Controller.Get-BrokerMachine​Get-BrokerSession -DesktopGroupName GROUP_NAME –LogonInProgress $true Get-BrokerSession -DesktopGroupName GROUP_NAME
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
https://support.citrix.com/article/CTX133400
A change to IP filtering was introduced in 7.6.300 which does not allow crossing subnets with filters.This caused policy settings to be corrupted and unreadable by any GPM\Studio component post 7.6.300
.Net FrameWork issue.16:09:52.3674 $ERR$ : XenDesktopSetup:Process error output: Unhandled Exception: System.IO.FileLoadException: Mixed mode assembly is built against version 'v2.0.50727' of the runtime and cannot be loaded in the 4.0 runtime without additional configuration information.16:09:54.4742       : XenDesktopSetup:Process completed with error code -53246276616:09:54.4742       : XenDesktopSetup:ExecuteBrokerAgentConfigurationTool: returnVal -53246276616:09:54.4742 $ERR$ : XenDesktopSetup:Configuration tool C:\Program Files\Citrix\Virtual Desktop Agent\Agent Configuration\AgentConfig.exe failed with error code -53246276616:09:54.4742 $ERR$ : XenDesktopSetup:Failed to start process Configuration tool C:\Program Files\Citrix\Virtual Desktop Agent\Agent Configuration\AgentConfig.exe failed with error code -53246276616:09:54.4742 $ERR$ : XenDesktopSetup:Failed to configure component 'Broker '. Configuration tool C:\Program Files\Citrix\Virtual Desktop Agent\Agent Configuration\AgentConfig.exe failed with error code -53246276616:09:54.4742 $ERR$ : XenDesktopSetup:Recording installation
Configuration.
DHCP server is unable to assign correct IP addresses to several of the new VMs created on the Hypervisor. Invalid IP addresses (APIPA) were being assigned to the VMs that were shown as Unregistered on Studio.
Image taken on the XenServer Hypervisor from one of the new VMs created that were acquiring an invalid IP address (APIPA).
Customer had RequireLaunchRef=Off configured in the <store> web.config file to support a legacy PS4 farm.
Planning and design for VPN Gateway
Placement Path of the host must have been set with a lowercase drive letter when it was added back.
The behavior is by design of Director.
There are two known reasons for this error. Scenario 1 describes a situation in which Studio Tools have not been enabled for the Host Connection referenced by the machine on which AppDisk is being created. This is most commonly seen in XenDesktop versions utilizing PVS that have been upgraded from versions earlier than 7.8. Prior to XenDesktop 7.8 if MCS was not being utilized it was not necessary to enable Studio Tools, but once AppDisk was released Studio Tools needed to be enabled to support the hypervisor disk management capabilities that MCS provides.Scenario 2 is present in some VMware environments where even though the Service Account has full permissions on the data store, read-only permissions at the vCenter level are required. This is a result of the VMware task failing to associate a level of scope for the virtual disk copy task initiated by MCS. When VMware does not specify a scope for this activity the scope of the permissions defaults to the vCenter level. In absence of this, the query for the status of the disk creation task that was sent to the VMware hypervisor times out and the AppDisk creation process fails even though the disk was successfully created on the VMware data store.
The user does not have rights to log on locally.
The domain controller has no certificate issued by the Enterprise PKI component in its computer certificate store.This can be confirmed by the event 19 or 29: "The key distribution center (KDC) cannot find a suitable certificate to use for smart card logons, or the KDC certificate could not be verified. Smart card logon may not function correctly if this problem is not resolved. To correct this problem, either verify the existing KDC certificate using certutil.exe or enroll for a new KDC certificate."
This is not a Citrix issue. As per our collaboration with Microsoft we got to know that the Logon merge function was rewritten for Windows server 2012 and 2012 R2 and that might have caused this issue. We encourage customers to work directly with Microsoft to investigate this further if the above workarounds are not acceptable.
CAUSE 1: There were two entries for cmstart.exe under the below registry key which in turn launched two wfshell.exe in the same session with each sending a EUEM (End User Experience Monitoring channel, related to HDX) bind request to the client with the second bind getting rejected resulting in a closed connection. HKLM\Software\Microsoft\Windows NT\CurrentVersion\Winlogon\AppSetupCAUSE 2Some applications like Dell KACE try to replace Windows userinit with its own KusrInit but for the failing VDAs the Winlogon registry key Userinit has a value with both userinit.exe and KusrInit.exe while the working VDAs UserInit has only KusrInit.exe. When both userinit.exe and Kusrinit.exe exist this will result in 2 userinit processes running in the session which launches two instances of cmstart.exe and and 2 instances of wfshell.exe which causes 2 EUEM Virtual Channel bind request sent to the ICA client and the ICA client rejects the second request and closes the connection.
7.6 Environment - VDA that was cloned from another working VDA in the environment is failing to register with the controllers.
Write cache exhaustion during PVD update stage.
Bad Window handle coming from SfB:
Intermittently, when using RTOP 2.1, videos in Skype4Business/Lync calls will show a blue placeholder where the video is supposed to be.
MediaEngine.Net[8136]: Aug 25 07:59:32.211 [1] MediaChannelExImpl Debug: AttachDevice
MediaEngine.Net[8136]: Aug 25 07:59:32.212 [1] MediaChannelExImpl Debug: Set video rendering for call ID = 621fa97822c241ce8edf8569db494e81 to HWND = 68108
MediaEngine.Net[8136]: Aug 25 07:59:32.213 [1] RemotePlaybackWindow Debug: Initialize: Call ID = 621fa97822c241ce8edf8569db494e81 HWND = 68108
MediaEngine.Net[8136]: Aug 25 07:59:32.213 [1] RemoteWindow Error: Invalid window handle 68108. Skip it.
The Agent broker port policy may be inadvertently configured by an Administrator to use an incorrect port, such as the port of the Agent cache sync.
App-V, by default, isolates App-V sequences from each other. So when adding them to Studio it isolates them from each other too. It’s impossible to automatically detect when to add an /appvve switch to a master image application because we don't know which package's isolation environment it should break into. One must specify this association and the only way we can do this is to specify this in the command line arguments for the applications you want to do this.
When anonymous user sessions are attempting to connect at a fast rate in a short period of time (several anonymous user sessions per second), connection brokering database operations related to anonymous users can become blocked resulting in the symptoms explained above.
The issue is caused because of WMI Filtering getting applied on the VDA servers.
Citrix Blogs - XenDesktop 7 Monitor Service – What Data is Available?Citrix Blogs - Troubleshooting Slow Logons via PowerShellCitrix Blogs - Director – Logon Duration ExplainedCitrix Blogs - Creating Director Custom reports for Monitoring XenDesktopCitrix Blogs - Citrix Director – Analyzing the Monitoring Data by Means of Custom ReportsAnalyze Logon Duration
If the Windows time service kicks in before the group policy Client, everything works fine as the time is updated before any communication with Active Directory happens but when the group policy client loads first, the authentication fails because of the incorrect time which corrupts the Kerberos handshake, and leaves the machine in an unregistered state.
dvportgroup issues
Upgrade
Known issue Visuall C++ & Desktop Lock 4.5 & Windows 7 client.
Cause AThe account being used to launch the User Interface for Citrix Federated Account Services is not a member of the BUILTIN\Administrators group on the server.Cause BThis is presently a bug with the User Interface (UI) and Citrix is working to resolve this behavior.  When the Federated Authentication Server is set to use User Account Control (UAC), the process is supposed to check to see if execution should run under Elevated Privileges and it is not.  What it is doing is throwing the event into the Application Log and gracefully handling the condition by repeating the logon request.The Expected Behavior should be for the UI to automatically prompt the user for Elevation or prompt for an Administrator password via consent.exe and the Windows Security Dialog, but instead it displays a prompt from Federated Authentication Services which is looking for an account part of the BUILTIN\Administrator group.
VM has the following registry key: Location: HKLM\SYSTEM\CurrentControlSet\Control\Session Manager
Value: PendingFileRenameOperations: c:\users\osa\AppData\Local\Temp\ose00000.exe
Orphaned Controllers and Service instances causing Studio and Director not to function.
Error: An unknown error has occurred - The given key was not present in the dictionary.
The vuemLocalUser account on the agent has no permissions to log on locally.
Limitation of resources on AWS
Uninstall process of  Virtual Delivery Agent from the machine also delete following registry.HKEY_LOCAL_MACHINE\SOFTWARE\Citrix\Citrix Desktop Delivery Controller
Issue where CtxAppvlauncher.exe is missing appears to be caused when trying to install 7.11 on a server where 7.6 was previously installed.
HDX 3D pro was enabled when installing the VDA.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Symantec SMR411.sys  was found to be the cause of the black screen.
In the VDA, the Citrix WDDM driver allocates 64 MB by default for the video memory buffer at boot time, but for multi monitor scenario it is not sufficient.
Frame rate issue.
The account used by the administrator to open the Database Management Utility was already used as the Broker Service Account.The Broker Service Account already has an SQL Login as part of the database creation.
The service account for 'Citrix Telemetry Service' has insufficient privileges at the time of XenApp or XenDesktop installation. The XenApp or XenDesktop installation associates the service account 'NT SERVICE\CitrixTelemetryService' with 'Citrix Telemetry Service'; typically, rights to log on as a service are extended to 'NT SERVICE\ALL SERVICES'. Editing the local or domain policy 'Log on as a Service' such that the newly created 'NT SERVICE\CitrixTelemetryService' is not defined with sufficient rights generates the installation failure on the 'telemetryserviceinstaller_x64.msi'. This occurs because services configured to run under the Local System, Local Service, or Network Service accounts have a built-in right to log on as a service. Any service that runs under a separate user account must be assigned the right. The Citrix Telemetry Service is implemented as of the XenDesktop 7.6 Feature Pack 3 release and is responsible for collecting diagnostic information to support AoT CDF Tracing.
1) By default Receiver's Preference is remote application.2) If local application shortcut is of same name then Receiver will discard local application
The Monitoring Service fails to insert new session data into the Monitoring database when the Load Evaluator Index policy is enabled.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Citrix Discussions - Get-MonitorConfiguration is no more working
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Microsoft bug ID#: O15:3630653
The Root Cert and the Intermediate Cert use as Signature Algorithm: RSASSA-PSS. Signature Algorithm is not Supported from Citrix.
Issue was a consequence of remote ICA display failing to initiate. From the CDF logs we could see the CgfxState setting itself as Console whereas on working server this sets as Usermode ThinWire and ICA session presents itselfAs a result the session falls back to console and black screen is displayed in ICA session
Commands described in the article CTX140734 will work only while creating new catalogs (New provisioning scheme) as it describes the metadata values for new provisioning schemes.  When going for a catalog update, the existing provisioning scheme associated with the catalog is used, hence the metadata values for the existing provisioning scheme have to be changed.
The remote computer requires Network Level Authentication, which your computer does not support.
This issue occurs when Inventory service is unable to query data after validation when attempting a vMotion and occurs either due to lack of space or a possible corruption on the Inventory service database.
On hyper-visor (VMWare), the user had permissions at cluster level and not at the data center level.
CTX111961 - CDFControlCTX121185 - Recommendations for Collecting the CDF TracesCTX107025 - How to Capture a Common Diagnostic Facility (CDF) Trace using Registry Settings
Known issue with IE 11
Desktop Studio must communicate with the Citrix Licensing Server. If the Citrix Licensing Server is not available, periodic hang-ups might be experienced when utilizing Desktop Studio.
https://technet.microsoft.com/en-us/library/jj649078(v=ws.11).aspx
Issue with VDA install
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
By Design.
Windows Firewall Service set to disabled and not running.
User sessions stuck on a hung XenApp Server VDA
conntroller Previous SID gets save in Master DB
Studio tries to connect to the replica/mirror with just the server name, but needs instance name to be successful. The instance name is being stripped off from the data source and uses the Server Name instead leading to the issue.
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
The exception looks thrown in Licensing Admin PowerShell Snap-In and might point to a compatibility issue.
Add https binding for Director website as using IIS settings : https://technet.microsoft.com/en-us/library/cc731692(v=ws.10).aspxhttps://technet.microsoft.com/en-us/library/cc771629(v=ws.11).aspx
Legacy Graphics Mode is enabled.It is available on Server 2012, but it cannot optimize the session due to Microsoft OS graphics changes and is not recommended unless Compatibility Mode is the alternative.
Logged on with an account that is not Citrix Administrator.Citrix default Administrator account was deleted from Studio by mistake.
Installation issue with MSI packages that caused the services "Citrix Host Service" and "Citrix Machine Creation Service" fail to start after upgrading to XenDesktop 7.6.
Monitor service not updating the information to the database in time.
This issue is observed when you install an unsupported SQL 2005 database engine instead of the SQL 2008 database engine and also when the DDC does not have proper permissions to the SQL Server.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
The XenDesktop site was upgraded with no existing desktop groups.
This issue occurs when the Network Service account is included in the local Administrators group on the Controller (DDC) where these event log entries are found.
The Controller has not updated its record in the database within the past 24 hours. This is typically the result of the Controller losing contact with the XenDesktop database.
Domain Name Service (DNS) resolution issue with XenDesktop controllers.
CDF Example:
ADIdentityServiceLog:1:1:Handling AD Operation exception System.DirectoryServices.ActiveDirectory.ActiveDirectoryOperationException: Unable to obtain DNS hostname of Active Directory domain controller with ntdsa object name
One of the possible reasons for this error is that XenDesktop services are not registered or registered incorrectly.
- Black screen was a consequence of Active Setup Components that run as part of first login profile initialization.Details on Active Setup and how it works can be found here:- https://helgeklein.com/blog/2010/04/active-setup-explained/Details on how to disable Active Setup can be found here:- https://helgeklein.com/blog/2012/03/get-rid-of-active-setup/Please note that the Autoruns tool (System Internals Tools), can also be used to disable Active Setup components from launching at startup.In this instance disabling the Active Setup Components via Autoruns reduced login times substantially.
In general, all of the Microsoft-supplied printer drivers are tested with Terminal Services and guaranteed to work with Citrix. However, before using a third-party printer driver, ensure it has been certified for Terminal Services. There is a Windows Hardware Quality Labs (WHQL) program for getting third-party printer drivers certified on Terminal Services. Citrix does not certify printer drivers. Consult your printer driver vendor to ensure the driver you plan to use has been certified for a Terminal Services environment.
See Frequently Asked Questions About Terminal Services.
CTX112580 – Case Study: Intermittent Client Printer Creation and Deletion Failures
Inter-service communication has failed because the requesting service is unable to retrieve the target service endpoint address from the database.
- Not enough available space for AppDna to perform the analysis.
Entries to old DDC SIDs in database
Profiles not being deleted after log off
It is a know issue with older version of  Receiver.
The file is not updated during the upgrade and would normally not affect the upgrade process had the computer name and/or SID of the DDC not been changed.
CTX hooks were still  loading even when we created key for ExcludedImageNames
This issue is known to nVidia and is actually documented in the release notes of the latest driver in Section 5.1 - Known Issues. 5.1. Memory exhaustion can occur with vGPU profiles that have 512 Mbytes or less of frame buffer.
The VM was marked XDProviosioned.
Windows 10 allows custom scaling settings per monitor, which causes issues with Seamless windows.
The publisher of the installed application consists the ampersand (&) symbol.
In the director logs, that exception is coming because service was unavailable:
MonitoringSdkServiceConnector exception string: System.Net.Mail.SmtpException: Service not available, closing transmission channel. The server response was: 4.3.2 Service not available
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Expected behavior
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
This happens due to App-V snap-in not getting updated properly. To resolve this issue, we uninstalled - Studio, PowerShell SDK and App-V and then installed them back. The App-V should be installed last in the sequence.
The problem is caused by RSOP calculation and the read logon policies which would cause the latency.
If you enable this policy setting, the Group Policy caches policy information after every background processing session. This cache saves applicable GPOs and the settings contained within them. When Group Policy runs in synchronous foreground mode, it refers to this cache which enables it to run fasterNote: The issue does not happen with VDAs released after LTSR CU1 i.e version 7.7 and so on.
Login from windows already exists with a different SID
Windows Receiver is currently not a DPI aware application. What this means is that the Receiver application depends entirely on the Window’s Operating System to scale the application as appropriate to the client’s DPI settings.
Original snapshot is not exist on hypervisor anymore.
Registry permissions for the following Registry key were not set correctly in the image.HKEY_CURRENT_USER\Software\Classes\Local Settings\Software\Microsoft\Windows\CurrentVersion\AppModel\Repository\Packages
Before Change:
After change:
This is probably caused by bad networking status and auto repeat settings in both Receiver and Linux VDA side. Normally there are two X events for every key pressed—“KEY_DOWN” and “KEY_UP”. When pressing down a key, Receiver will send “KEY_DOWN” event to Linux VDA and when releasing the Key, Receiver will send “KEY_UP” event to Linux VDA.
If Linux VDA gets “KEY_DOWN” event, but “KEY_UP” is delayed by network latency or is lost totally, Then the X will auto repeat the key (if the auto repeat is on) until gets the “KEY_UP” or other key events.
App Readiness Service introduced logon delay
Zone Uid shows 00000000000000
Upgrading to next version of XA/XD can corrupt Monitor database
Configuration issue
Application install changed permission under folder C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\Machine.config and C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\Machine.config
The VPN client on the VDA uses the same port for ICA and Session Reliability (1494 and 2598). This creates a conflict between the VPN client and the ICA.
The registration port is picked up from the registry (from the policy node, if it doesn’t exist under policies, then it looks at the default settings location), and if not found, it will fall back to the default port of 80.
So, if the registration was attempted with port 80, that would mean that at that point in time the registration port didn’t exist in the registry.  Probably there was a policy processing failure, or somehow it got deleted before BrokerAgent tried to read it.
There is no fallback to ‘savedlistofddc’, that is where the registration starts when the BrokerAgent starts (that is if autoupdate is enabled), it will pick a DDC from the list to register with, and when the registration is successful, DDC would send the new list of DDCs, and that list gets saved in the xml file. If all 8 DDCs got into the xml file, that is what the DDC found as the list of DDCs in the site.
Bad installation/upgrade of the VDA 7.6.300 software
http://blogs.citrix.com/2014/10/29/updating-database-connection-strings-in-xendesktop-7-x/
https://msdn.microsoft.com/en-us/hh510230.aspx
http://blogs.citrix.com/2014/12/04/database-sizing-guidance-for-xendesktop-7-6/

http://blogs.citrix.com/2014/11/20/database-sizing-tool-for-xendesktop-7/
Updating Database Connection Strings in XenDesktop 7.x
Database sizing guidance for XenDesktop 7.6
Database Sizing Tool for XenDesktop 7
The Logon breakdown details displayed in the tooltip requires considerable data processing, which increases as the data grows. Typically, for data beyond 1 million rows, the data retrieval cannot be retrieved and the chart is not displayed.
CAUSE:Security patch MS01-055 prevents servers with improper name syntax from setting cookies names. Domains that use cookies must use only alphanumeric characters ("-" or ".") in the domain name and the server name. Internet Explorer blocks cookies from a server if the server name contains other characters, such as an underscore character ("_").Refer below article from Microsoft for more details:https://support.microsoft.com/en-us/kb/316112 -PRB: Session Variables Do Not Persist Between Requests After You Install Internet Explorer Security Patch MS01-055
By Default single session limit is enabled in the XD environment 7.x. We have to use powershell commands to disable it.
LPR protocol is the most familiar computer protocol. It is often used in Windows OS and other computer platforms. On the other hand, RAW is the default protocol for non-Windows computers. The LPR protocol can be substituted for the RAW protocol if the latter cannot function and doesn’t respond while on a print job. This makes the LPR protocol more flexible and more universal compared to the RAW protocol.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
The registry HKLM\Software\Cirix\personal vDisk\Config\ for the MachineID key has the incorrect hostname.
Active Directory by default does not allow machines to update some of the attributes of their own AD account. This results into incorrect Primary DNS Suffix being their on the AD account of the machine on boot. And hence the machine is not able to contact the domain for authentication.
Caused by VDA 7.6 hotfix ICAWS760WX64026
There was an error in packaging the VDA 7.6 and the UPD driver is packaged with the UPClientRunning the install with the /exclude "Citrix Universal Print Client" causes the UPD to not be installed also
For some reason, the old version adb tool used by 3rd-party application can't connect to USB device correctly:Physical machine:VDA machine:As we can see the adb tool show device as offline in VDA, we then downloaded the latest adb tool from official website, and it can correctly connect to device:It is possible that the old version of adb tool is not compatible with VDA.
"CITRIX.opt" file missing under "C:\Program Files (x86)\Citrix\Licensing\MyFiles\".
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Customer was experiencing DNS/AD/Communication issues causing authentication to the Domain to be lost. This caused the Site Creation to fail when trying to validate that the User and DDC had proper access/permissions.
Incorrect client configuration.
Different Machine ID on the license folder of the user profile for Office 365 (2016), when logging to a different Machine.Example: When a user logs on to a different VM the users UPM profile will be copied over to new VDA\VDI Machine, The activation from the previous profile was from a different VDA\VDI which has a different machine ID and it will not match the VDA\VDI they are currently logged on to.
- By default Local Service account is configured as the logon user in the PorticaService properties - Local Service thereby inherits the permissions of Built in Admin group which is read/write - PorticaService needs Full control and hence this causes it to break the communication due to a permission issue.
Wrong Product Edition setup on Studio for Licensing.Licensing was setup to XenApp Platinum instead of XenDesktop Platinum.
Director was not configured to search for the user in the additional domain.By default, Director searches the global catalogue of the logged in admin’s domain and Director machine’s domain. You have to manually change web.config file for multi-domain environment
Active Directory nested groups not being recognized by XD 7.6 delivery groups so users where unable to launch applications due lack of permissions
A design change in the Server VDA setup modified the Access Control List for the registry key HKLM\Software\Wow6432Node\Citrix\EUEM\LoggedEvents The System account is the owner of the key but doesn't have any right on the key itself: In the ACL for this registry key the "Remote Desktop Users" has Full Control The setup for XA/XD Server VDA 7.6.300 and newer adds to the "Remote Desktop Users" group the groups "Domain Users" and "Authenticated Users"  Please note that, when the Server VDA is installed on a machine, a new local group called "Direct Access Users" is created and non-administrative users, even though they are part of the Remote Desktop Users group, can no longer RDP to the VDA itself if they are not part of the Direct Access Users group, http://support.citrix.com/article/CTX203246.  The System account is by default part of the Authenticated Users. As long as the System account is directly or indirectly member of the "Remote Desktop Users", no issue will be experienced.In some environments the administrators modify manually or via GPO the membership of the "Remote Desktop Users" removing the groups added during the VDA Setup: "Domain Users" and "Authenticated Users".if the "Domain Users" and "Authenticated Users" administrators groups were manually deleted, adding them back to the"Remote Desktop Users" group will fix the issue. The GPO used to control the group membership is:Computer Configuration\policies\Windows Settings\Security Settings\Restricted GroupsIf this policy is applied to the Server VDA to control the "Remote Desktop Users" membership, all the users and groups not specified by this policy will be removed from the "Remote Desktop Users" membership. This means that the groups "Domain Users" and "Authenticated Users", added to the Remote Desktop Users group by the Citrix Server VDA setup, will be removed after the first reboot when the GPO will be applied. Add the "Domain Users" and "Authenticated Users" groups to the groups in the Computer Configuration\policies\Windows Settings\Security Settings\Restricted Groups will fix the issue. Under those conditions the System account will not have any right to access the  HKLM\Software\Wow6432Node\Citrix\EUEM\LoggedEvents registry key and the upgrade or uninstall or the hotfix setup will fail with Access Denied
Value of BaseOU is not NULL in chb.Config.Site table of XenDesktop database
In .ini file of thin client the PNLite URL in the file had the switch "reconnectatlogon" = 0, hence the reconnect feature was disabled.
Using optimized channel which is not supported in XenDesktopRedirected as USB device
There are no apps or desktops available
Director is not able to pull the records from one day during its average calculation time (Usually 7 - 15 days) for the session details. This is usually caused by the SQL database not being available for a particular time frame.
1 - Services were disabled:Volume Shadow Copy    VSS Stopped Disabled     Citrix Personal vDisk CitrixPVD Stopped Disabled2 - P:\ drive letter not available.
Citrix policy "Desktop wallpaper" is set to "Prohibited," or another policy has this configuration that is applied with a higher priority.
AppDisk Product Documentation:https://docs.citrix.com/en-us/xenapp-and-xendesktop/7-8/install-configure/appdisks.htmlAppDNA 7.8 Documentation:http://docs.citrix.com/en-us/dna/7-8.html
Permission to registry locationMSI (s) (D4:88) [14:08:50:802]: Executing op: RegisterSharedComponentProvider(,,File=ul_msvcr80.dll.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E,Component={98CB24AD-52FB-DB5F-A01F-C8B3B9A1E18E},ComponentVersion=8.0.50727.4053,ProductCode={90140000-0011-0000-0000-0000000FF1CE},ProductVersion=14.0.4763,PatchSize=0,PatchAttributes=0,PatchSequence=0,SharedComponent=0,IsFullFile=0)MSI (s) (D4:88) [14:08:50:802]: Note: 1: 1402 2: UNKNOWN\Components\DA42BC89BF25F5BD0AF18C3B9B1A1EE8\00004109110000000000000000F01FEC 3: 5MSI (s) (D4:88) [14:08:50:802]: Product: Citrix Virtual Desktop Agent - x64 -- Error 1402. Could not open key: UNKNOWN\Components\DA42BC89BF25F5BD0AF18C3B9B1A1EE8\00004109110000000000000000F01FEC.  System error 5.  Verify that you have sufficient access to that key, or contact your support personnel.
The allocated memory for the processes is not released in a timely manner. Hence the SSL validation fails because of insufficient memory.
Unable to stop the broker service to reconfigure the config file for it.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Broker fetches incorrect IP address of VDA from WCF rather than the actual IP address of VDA
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Incomplete installation ot patches installed in the PVD drive
https://support.microsoft.com/en-in/kb/2669552
3rd Party
We can only add a Security Group and not a Distribution Group in the list of users in a Delivery Group.
AD Domain Account(s) permissions not being read properly during machine creation.
This happens if the service for a particular service for a particular controller has not been entered correctly in the database while the site was upgraded.
The validation algorithm has changed in XenDesktop 7.9 which leads to the issue
We have seen this  problem with large Kerberos tickets i.e when the Studio's Full Administrator is a part of lots of groups, especially nested groups). This is a known issue with XenApp and XenDesktop 7.5 and is resolved in 7.6. In XenApp and 7.6 and above maxReceivedMessageSize="9000000" is already configured in the Citrix.DelegatedAdmin.exe.config” file.
Set-ProvServiceConfigurationData –Name DisableDomainInjection –Value true case sensitive
The catalog update when refers to a stale entry of the ProvSchemeMetadata, causes it to fail.
It is not a restriction imposed by XenDesktop, but inherited on account of using Microsoft .NET Directory Service APIs in the .NET apps, which unfortunately puts the limit on the XenDesktop components by way of not having fine-grained options to suggest that we just need a RODC for the purpose, and as such the underlying Microsoft implementation looks for a RWDC, and if it cannot find one, then nothing works.
​In case you do not have a writable controller available, then you will be stuck at:WaitUntilComputerSidIsObtained attempts to collect VDA 's SID.
AttemptRegistration à WaitUntilComputerSidIsObtained à ComputerSID_get à FindThisComputerSid à FindObjectSid à BindToObject à [MS] DirectoryEntry.RefreshCache & [MS] Domain.GetComputerDomain
FindThisComputerSid gathers the VDA’s Fully Qualified Distinguished Name via ComputerDN_get à GetComputerObjectName à [MS] GetComputerObjectName, and passes it along to FindObjectSid.
FindObjectSid calls BindToObject, where we attempt to collect the VDA’s [MS] DirectoryEntry from Active Directory using four different binding path formats.
This usually happens when the Server VDAs does not shutdown gracefully in the stipulated amount of time.
When a reboot action is initiated via Reboot Schedule, Delivery Controller sends a shutdown signal to the VDA but before that, it waits for the all user sessions to get logged off and services to shutdown.If all the user sessions on the VDA are not logged off within 10 minutes and machine is not shutdown gracefully, then the Delivery Controller sends a force shutdown of the VDA and machine does not power on.
By default the file  "CtxExplorerLauncher.exe" located under "C:\Program Files (x86)\Citrix\ICA Client\" is executed automatically after installing the Receiver Desktop Lock which enables the detection of Administrator accounts at logon. If an antivirus in installed on the computer it could prevent the file to be executed which causes to not detect Administrator accounts at logon.
The reason for such behavior most likely lies in disabled automatic installation of trusted root certification authority certificates.The Citrix SCOM Management Pack installation package is signed with our certificate, which might not be trusted on the target computer. Computers that are not connected to the Internet cannot automatically download these certificates.
In our case, the certificate (issued by VeriSign) which is used by a Citrix SCOM Management Pack has to be trusted. To achieve this, a root certificate in the certificate chain must be added to “Trusted Root Certification Authorities”.
HDX 3D pro not installed with Intel HD graphic card on the Physical machine. We must have HDX 3D pro enabled when we use any HD graphic card.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
In WebChat user login GUI, there is a WS_EX_transparent styled window with ClassName=popupshadow. So the window is invisible in a physical machine. In XenApp seamless session, when Citrix seamless engine creating such a WS_EX_transparent styled window at client side, the default behavior is to fill the window with background image, like Windows desktop wallpaper, rather than display it as transparent effect.
The XenDesktop license service still registered is not necessary for XenDesktop 7.6. It was our old approach to communicating with the license server. The service doesn't exist any more but is still registered in the config service.
This fix is applicable for XD 7/7.1 VDA with client operating systems (Windows 7). The fix is not required for VDAs with Server OS (Windows 2008). This fix is also applicable for VDI-IN-A-BOX 5.3.
Forum
Host and MCS services do not install correctly
Citrix license server unavailable.
User group policy not hitting correctly probably due to stale session id's accumulated at:HKLM\Software\Policies\Citrix\ <Session Id>
SQL Server Browser service disabled on SQL server hosting the site database.
Kaspersky AV
Another session was connected to VDA preventing new sessions to connect. Desktop VDAs only allow one user session per host.
Citrix_startup.lic file is missing.
installation of the new application corrupted the existng .net framework.
When install the driver, PICN20.dll was added to C:\Windows\System32 directory.Citrix also uses a newer version of this file located under %ROOT%\Program Files\Citrix\ICAService.
When an application is launched within a published desktop it is seen as an open application which generates a disconnection.
Windows was behind on Windows updates and Antivirus was disrupting Personal Vdisk operations.
The certificate for the license server was expired
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-6/xad-controller-intro/xad-controller-change.html
The XenDesktop Controller does not trust the XML.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Zone value of some catalog gets set to NULL after upgrading the controller to 7.8
DNS issue.
XdConfig", with a value of "XdProvisioned=true".Removing the XdProvisioned Tag has made it visible when attempting to add existing machines.
Changed the host name of the license server.
Required permissions on database are missing. For more information refer to CTX127998 - Database Access and Permission Model for XenDesktop.
Refer http://support.citrix.com/content/dam/supportWS/kA460000000CcAHCA0/RegistryKey_XenDesktop_7.x.pdf
Issue is caused by extra space in a Monitor DB connection string, which is represented between the comma after the SQL server name and the SQL port.Example with the space:Server=FTLSQL.domain.com, 1499;Initial Catalog=XenDesktopDB;Integrated Security=trueExample without the space:
Server=FTLSQL.domain.com,1499;Initial Catalog=XenDesktopDB;Integrated Security=true
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
McAffee/Upgrade looking for uninstaller for the Citrix CSE Engine on local drive/original installation location which no longer exists so it can remove the existing installation of the CitrixCSEEngine.
Corrupted VDA software and left over registry keys from previous version of VDA software from version 5.6.
Path to executable is not accessible using % symbol.
DNS was not updating with the SQL cluster listener IP.
- There are historically multiple challenges exposed by RDSH platforms e.g. Windows Server 2012 R2- With generic USB redirection the USB client drivers are installed on the host so these drivers must be compatible with RDSH for Windows 2012R2- Certain kind of devices pose challenges when redirected to a XenApop session and there are certain devices that are prohibited for performance reasons- The devices that will not work out of the box in XA 7.6 environment are as follows:  --> USB Storage Devices --> Audio Devices --> Smartcard Readers --> other devices which are not fully virtualizes and by this we mean devices that are managed by a dedicated service running in Session 0In this case the scanner was managed by the WIA service (session 0) and consequently does not work despite the fact that the device was redirected successfully and could be seen inside the session with no issues.We can confirm that the same device works successfully inside a Windows 7/8 desktop session this is because it is a single session environment.The device driver does not appear to have the capability of handling multiple instances of the same device presented from different XenApp sessions.This is confirmed by using the device when physically plugged into the server and when logged into session 1 on the machineThis looks to be a shortcoming with some device drivers and as a result, a resolution will require a new device driver that has been designed to work inside a multi session environment.We currently have open channels of communication on this with the device manufacturer Fujistu.There are also a number of feature enhancements logged that centre around the same issue (7165, 7144)
Topic in Citrix Discussions: Upgrade XenDesktop 7.6 - Upgrade Delivery Controller
There were multiple causes in this specific case:1. MCS created machine's clone was being used as Master image2. UPM policy was configured to store logs under C:\Program Files\Citrix\PvsVM\Service\PersistedData and this policy was applied to the Master image.
Microsoft anticipated that this issue would be resolved in Windows Server 2016.
Server 2016 has been tested and it appears that there has been no positive changes made to allow for this functionality.
Significant Microsoft product changes would be required to enable this capability. Plans for the development of a fix from Microsoft are unclear at this point. Microsoft bug O15:3516601.
Network Service account did not have sufficient permissions on the Administrative Tools folder within the Start Menu.
Windows Receiver doesn't send the TimeZoneKeyName to server and server might fail to get the correct TimeZoneKeyName based on the other time zone information. This causes applications relying on TimeZoneKeyName might not work as expected in ICA sessions.
The configured Delivery controller is; incorrect, unreachable, or unresponsive.
Sometimes there are chances of the default browser open information getting corrupted or missing from the registry.
This is due a known issue with Receiver for MAC 12.As it doesn't send traffic for CRL Revocation Check to Internet through proxy and fails.Citrix Receiver Team is working on the official fix as of now, but can provide a workaround to fix this issue for the time being.
MSMQ was set to HTTPS as well but it hadn't been configured for it . To configure MSMQ to use HTTPS customer needs to follow the configuration:
http://support.citrix.com/content/dam/supportWS/kA460000000CnKLCA0/Configuring_Security_Features.pdf
Known issue with XenApp/XenDesktop 7.9
XenDesktop was not able to connect to vCenter because it does not trust the server certificate in use.
Optimised (CDM) channel was being used as expected for most USB storage devices when plugged inFor requirement we need to redirect over Generic USB
-Machine's entry exists in the database..
OLD/Migrated DDC's SID present in XML file
Trying to customize storefront webpage folder color using CSS
Desktop Machine will auto switch to maintenance mode.
App-v integration was culprit. Product team is already aware under http://discussions.citrix.com/topic/378416-xendesktop-79-mmc-crash/.
As a part of normal maintenance, use the REMOVE command with additional switches to purge the database and the file structure of files. The purged files are based on the number of days that you want to retain the database for.ICLDB REMOVE /RETENTION:20 /LISTFILES /DELETEFILES /L /F /SThe preceding command will delete all records and files (/DELETEFILES) as well as log (/L) suppresses prompts and copyright (/F /S).
For further information on the commands used in this article see the product documentation:http://docs.citrix.com/en-us/xenapp-and-xendesktop/7-8/monitor/xad-session-recording/xad-sr-reference-wrapper-v2.html
Microsoft Windows Updates:KB3072630KB3139923
Configuration issue. XenApp 7.7 does not understand " " feature in command line arguments.
reference:https://www.citrix.com/blogs/2013/10/22/xd-tipster-removing-controllers-from-an-xd-site-using-posh/
Virtual channels not disabled completely. Additional configuration needed to disabled virtual channel.
The cause of the issue is the attempt to launch the application (from same client and user) before the first application launch is complete and ready for session sharing and is therefore denied. A warning message is posted to the event log for informational purposes. This is as designed.
The path for the mfahook64.dll couldn't be resolved.
Known issue with VMware Vsheild driver, Engineering has been able to determine that this behavior is being caused by the mountmgr.sys file in the Windows 7 OS causing a deadlock. MS also reports that this affects 2008 machines as well.
Evict script may fail to unregister service instances for the Controller
Latest MS patches affected the Ciphers.
The Delivery Controller is the one that has to authenticate against the vCenter.
Citrix Documentation - What's New in Profile Management 5.x
Citrix Documentation - Known issues in Profile management 5.x
Stale entries of old license server
A broker from a new XenApp farm was affecting authentication. There was an unspecified error on the event viewer coming from the XML server, the error is found on the StoreFront server.
Unable to update the registry
Refer to the Security Bulletin regarding this issue.
Partial install with original SID preventing adding DDC to site.
Null entry on the monitordata.dekstop group in monitor database.
Citrix Discussions - Cannot Start Desktop - XD7
UPM is unable to update the tables in XenDesktop monitor database. InteractiveEndDate and ClientSessionValidateDate.
Display driver issue
Issue happens if the VCenter address is changed on the host connection and reverted once it is fixed
NVidia K1 Product Limitation.
Citrix Discussions - Unable to start Citrix Studio on 7.6 install - MMC crashesMore information on Ngen: https://msdn.microsoft.com/en-us/library/6t9t5wcf(v=vs.110).aspx
For more information refer to Citrix Blog - Active/Active GSLB for XenDesktop – A Practical Approach (Part 1)
Anti-virus
Less free space on the master image.
enableHttpDataStoreAccess  was disabled in vCenter advanced settings.
This is expected behavior when the policy is disabled. Microsoft must be engaged if solution is required instead of workaround.On this current issue we are investigating : Microsoft policy makes the ICA session show a black screen when logon to an account for the first time. This behaviour is expected if "Show First-Logon-Animation" GPO is disabled.
The default lifespan of ARP cache entries was lowered from 10 minutes in Windows Server 2003 to a random value between 15 and 45 seconds in Vista/W2K8. As a result, the Provisioning Services bootstraps are 20 times more likely to experience a timeout during a Vista/W2K8 boot.
Microsoft KBs disrupting VDA installation.
Appears to be a Microsoft bug, and potentially reproducible outside of using telemetry service.Microsoft policy below to remove old user profile folders and files, creates an operating system hang at start up, if the user profile for service virtual account qualifies for deletion and the service is set to automatic start up. Policy: "Computer Configuration\Administrative Templates\System\User Profiles\Delete user profile older than a specified number of days on a system restart" VDA 7.8 and 7.9 have the telemetry service, which uses a windows virtual account. (Every service since windows vista has a virtual account, whether it is used or not). Part of using service virtual account is that at service start up, folders and files are populated in user account directory for that virtual account.
Stale entries in Database.
For kerberos authentication to succeed the time difference between the PvD machine and the Delivery controller/domain controller should not exceed more than 5 minutes. The PVD machine can either synchronize with the Hypervisor Host on which it is hosted or with the domain controller of the domain it is joined to.
Unable to Remove XenDesktop Delivery Controllers from the XenDesktop SiteDatabase Access and Permission Model for XenDesktop
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
UAC issue
According to the Microsoft documentation, the use of Profiles across different versions of Operating Systems is not supported and may cause undesirable behaviour Roaming user profiles in Windows 8.1 or Windows Server 2012 R2 are incompatible with roaming user profiles in earlier versions of Windows.Profiles are compatible only between the following client and server operating system pairs:•    Windows 8.1 and Windows Server 2012 R2•    Windows 8 and Windows Server 2012•    Windows 7 and Windows Server 2008 R2•    Windows Vista and Windows Server 2008Note When the client operating system is referenced in this article, the same issue applies to its corresponding server operating system.For example, if you try to deploy Windows 8.1 in an environment that uses roaming, mandatory, super-mandatory, or domain default profiles in Windows 7, you experience the following: •    After you use a user account that has an existing Windows 7 profile to log on to a Windows 8.1-based computer for the first time, the components from Windows 8.1 read and modify the profile state.•    Certain Windows 8.1 features may not work as expected because the expected profile state is not present. •    When you try to use the same user account to log on to a Windows 7-based computer, the user profile modification that was performed in Windows 8.1 may not work as expected in Windows 7.The issues occur because the profile will contain values that are used differently between the versions of Windows. The user profile will be missing default profile configuration information that is expected by the operating system, and could contain unexpected values that are set by a different operating system version. Therefore, the operating system will not behave as expected. Additionally, the user profile may be corrupted. Further documentation is available in TechNet to outline the versions of Windows profiles linked with which Operating System versions.
Profile Versions

Operating system versionRoaming User Profile locationWindows XP and Windows Server 2003\\<servername>\<fileshare>\<username>Windows Vista and Windows Server 2008\\<servername>\<fileshare>\<username>.V2Windows 7 and Windows Server 2008 R2\\<servername>\<fileshare>\<username>.V2Windows 8 and Windows Server 2012\\<servername>\<fileshare>\<username>.V3 (after the software update and registry key are applied) 			\\<servername>\<fileshare>\<username>.V2 (before the software update and registry key are applied)Windows 8.1 and Windows Server 2012 R2\\<servername>\<fileshare>\<username>.V4 (after the software update and registry key are applied) 			\\<servername>\<fileshare>\<username>.V2 (before the software update and registry key are applied)Windows 10 (1507 and 1511)\\<servername>\<fileshare>\<username>.V5Windows 10 Anniversary Edition (1607) and Windows Server 2016\\<servername>\<fileshare>\<username>.V6
A maintenance and monitoring software was added to the database which added the CustomStat_Value statistic entries. This created locks on certain tables.
MSI (s) (08:44) [10:08:03:512]: Created Custom Action Server with PID 4936 (0x1348). MSI (s) (08:70) [10:08:03:552]: Running as a service. MSI (s) (08:70) [10:08:03:554]: Hello, I'm your 32bit Elevated Remapped custom action server. MSI (s) (08:FC) [10:08:03:559]: Executing op: ActionStart(Name=SetDComPermissions,,) MSI (s) (08:FC) [10:08:03:559]: Executing op: CustomActionSchedule(Action=SetDComPermissions,ActionType=3073,Source=BinaryData,Target=SetDComPermissions,) MSI (s) (08:A4) [10:08:03:562]: Invoking remote custom action. DLL: C:\Windows\Installer\MSI848.tmp, Entrypoint: SetDComPermissions MSI (s) (08:A4) [10:08:03:562]: Lost connection to custom action server process. Attempting to regenerate. MSI (s) (08:44) [10:08:03:562]: Generating random cookie. MSI (s) (08:44) [10:08:03:565]: Created Custom Action Server with PID 3712 (0xE80). MSI (s) (08:70) [10:08:03:601]: Running as a service. MSI (s) (08:90) [10:08:03:604]: Hello, I'm your 32bit Elevated Remapped custom action server. MSI (s) (08:FC) [10:08:03:610]: Executing op: ActionStart(Name=WriteEnvironmentStrings,Description=Updating environment strings,Template=Name: [1], Value: [2], Action [3]) MSI (s) (08:FC) [10:08:03:610]: Executing op: ProgressTotal(Total=2,Type=1,ByteEquivalent=13200) MSI (s) (08:FC) [10:08:03:610]: Executing op: UpdateEnvironmentStrings(Name=Path,,Delimiter=;,Action=1610612737,) MSI (s) (08:FC) [10:08:03:610]: Executing op: UpdateEnvironmentStrings(Name=PATH,Value=C:\Program Files (x86)\Citrix\system32,Delimiter=;,Action=1610612737,) MSI (s) (08:FC) [10:08:03:611]: Executing op: ActionStart(Name=RegisterTypeLibraries,Description=Registering type libraries,Template=LibID: [1]) MSI (s) (08:FC) [10:08:03:612]: Executing op: TypeLibraryRegister(,,FilePath=C:\Program Files\Citrix\Euem\Service\SemsComLibrary.tlb,LibID={C3714750-3FDF-4152-88AF-F65A20C47E41},Version=1798,,Language=0,HelpPath=C:\Program Files\Citrix\Euem\Service\,BinaryType=0,IgnoreRegistrationFailure=0,) MSI (s) (08:FC) [10:08:03:612]: Lost connection to custom action server process. Attempting to regenerate. MSI (s) (08:44) [10:08:03:612]: Generating random cookie. MSI (s) (08:44) [10:08:03:616]: Created Custom Action Server with PID 1952 (0x7A0). MSI (s) (08:E4) [10:08:03:653]: Running as a service. MSI (s) (08:E4) [10:08:03:656]: Hello, I'm your 32bit Elevated Remapped custom action server. MSI (s) (08:FC) [10:08:03:662]: QueryPathOfRegTypeLib returned -2147023174 in remote context. Path is '' MSI (s) (08:FC) [10:08:03:662]: CMsiServices::ProcessTypeLibrary runs in remote context, not impersonated. MSI (s) (08:FC) [10:08:03:662]: Lost connection to custom action server process. Attempting to regenerate. MSI (s) (08:44) [10:08:03:662]: Generating random cookie. MSI (s) (08:44) [10:08:03:665]: Created Custom Action Server with PID 4176 (0x1050). MSI (s) (08:70) [10:08:03:704]: Running as a service. MSI (s) (08:90) [10:08:03:706]: Hello, I'm your 32bit Elevated Remapped custom action server. MSI (s) (08:FC) [10:08:03:713]: Note: 1: 2108 2: C:\Program Files\Citrix\Euem\Service\SemsComLibrary.tlb 3: -2147023170 MSI (s) (08:FC) [10:08:03:713]: Product: Citrix HDX TS (retail) -- Error 1911. Could not register type library for file C:\Program Files\Citrix\Euem\Service\SemsComLibrary.tlb. Contact your support personnel. MSI (s) (08:FC) [10:08:03:735]: Note: 1: 2265 2: 3: -2147287035 MSI (s) (08:FC) [10:08:03:736]: User policy value 'DisableRollback' is 0 MSI (s) (08:FC) [10:08:03:736]: Machine policy value 'DisableRollback' is 0 Action ended 10:08:03: InstallFinalize. Return value 3.
The user local profile does not exist if we are using mandatory profiles. We still go through the registry and create the local folder in general (if registry in the solution section of this article is not set) which causing the delay of about 30 seconds.Folders being loaded into registry are
%USERPROFILE%\AppData\LocalLow          %APPDATA%\Microsoft\Windows\Libraries\Documents.library-ms         %APPDATA%\Microsoft\Windows\Libraries\Music.library-ms          %APPDATA%\Microsoft\Windows\Libraries\Videos.library-ms         %APPDATA%\Microsoft\Windows\Libraries\Pictures.library-ms
This problem can occur when the FMA services register with an alternate FQDN which is not resolvable.
Linux VDA doesn’t support host name using upper cases for Java 1.8 and  1.7.0_101
-
Selecting CEIP option while installing lic server and later facing network issues in connecting to Citrix.com
httpd.exe process listening on port 80Apache Web Services listening on port
Missing permission at below location: HKLM\Software\Wow6432Node\Citrix\Euem\Logged EventsCorrupted Monitor Service Plugin
​
Information needed to be refreshed in Studio.
Storage was deleted from the XenServer, instead it should had been deleted from the Studio first.
When LUN runs out of space diff disks are not properly deleted / created --- There is not evidence coalescing fails on hypervisor. On the other hand coalescing seems to work just fine, however, leftovers are left behind.
- Stale registry keys/Entries- Stale Directories under Program Files/Program Files x86
When we launch an ICA session, Citrix code will directly start the CSE engine. Then the engine obtains GPOs from Active Directory via an API, so it’s understandable that all settings in GPOs will be applied. Things are still the same if we don't enable GPO caching, even with LC1987 in place. But if CSE engine is started by gpupdate, things are a bit different when LC1987 is in place, now we change to rely on the parameter(pChangedGPOList) of CSE entry procedure to obtain the GPOs, by doing this we don’t need to explicitly call MS APIs anymore. This is where the policy processing is seeing a short circuit.
The Netscaler did not send Insight (Appflow Record) to the Insight Center because NS is waiting on a Username on the ICA connection from Server to be sent in  SET_CLIENT_DATA packet.
The reason for such behavior lies in different versions of Citrix Odata URL's (v1 and v2).Issue exists only on Controllers that are Site Data Collectors and if v1 is set in registry, but v2 is available (for XAXD version 7.6 and newer).
Site Data Collector collects information about user connections (including failed connections) on a site-level. And while querying this data we get errors while using v1 on XAXD 7.6 or newer, due to changes between v1 and v2.
Querying v1 on XAXD 7.5 or older, the same query works fine.So:
v1 should be used for MP Agents on XAXD <= 7.5,          v2 should be used for MP Agents on XAXD >= 7.6
In case when Citrix MPXAXD Odata is configured with Citrix Odata v1 and failed connection occurs on XAXD 7.6 or newer, exception will be thrown.
The monitor data became too large to be groomed due to the issue of LA5615.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Receiver issue
Shortcut with the same name already exist and cannot be replaced.
VID and PID were restricted for the new device by default.Device not able to redirect through optimized channel.
Certificate not bound to the http.sys service created for https webservice
Software Issue
On the NetScaler Gateway > Basic Settings > ICA only was set to True.
With the manual configuration of Android VPN policy the issue with the Samsung Note devices remains the same.
Secure Hub occasionally crashes during authentication stage for version 10.8.10 and 10.8.15 on Huawei phone.
Change in XM 10.8 for performance improvement
Restrictions for the open-in list for the Android MDX application needs {pkg=com.google.firebase} as well as {pkg=com.google.android.gms} to be in place. This will allow the application to work with FCM
Some websites use and require SNI (Server Name Indication).  This allows for multiple certificates to serve up the same IP/Port.  Since the server typically does not know the FQDN that is being requested by the client until after the handshake is complete, SNI will add an extension to the Client Hello of the SSL Handshake, allowing for the server to choose which certificate is used for the connection when multiple are being used to serve the IP/Port.This is common for ADFS and is becoming popular for cloud providers as well.
Only one gateway exists for xenmobile with client cert optional
Powersaving background manager app disables the auto sync of the app
It's a known issue CXM-40393 for XenMobile version 10.7.0.20:In XenMobile Server, the following error message that appears consistently for various XenMobile Server authentication failures: "Authentication failed. Please try again." [From xms_10.7.0.10229.bin][#CXM-40393]
Checked the database ut was showing the time correctly.It was found that its an issue with the browser/browser cache.
https://developer.apple.com/library/content/releasenotes/General/RN-iOS-11.3/index.html
This issue was majorly because of Memory leak issue and the following errors show that the server gets an exception for out of memory and causes the console to go down.2017-08-30T09:01:51.28+0200 |   | ERROR | http-nio-10080-exec-189 | com.sparus.nps.ErrorFilter | Error for page: /zdm/cxf/public/getserverinfoorg.glassfish.jersey.server.ContainerException: java.lang.OutOfMemoryError: Metaspaceat org.glassfish.jersey.servlet.internal.ResponseWriter.rethrow(ResponseWriter.java:230) ~[jersey-container-servlet-core-2.4.jar:?]at org.glassfish.jersey.servlet.internal.ResponseWriter.failure(ResponseWriter.java:212) ~[jersey-container-servlet-core-2.4.jar:?]at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:420) ~[jersey-server-2.4.jar:?]at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:265) ~[jersey-server-2.4.jar:?]at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271) ~[jersey-common-2.4.jar:?]at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267) ~[jersey-common-2.4.jar:?]at org.glassfish.jersey.internal.Errors.process(Errors.java:315) ~[jersey-common-2.4.jar:?]at org.glassfish.jersey.internal.Errors.process(Errors.java:297) ~[jersey-common-2.4.jar:?]at org.glassfish.jersey.internal.Errors.process(Errors.java:267) ~[jersey-common-2.4.jar:?]…Caused by: j ava.lang.OutOfMemoryError: Metaspace.........WARNING [http-nio-18443-exec-7] org.glassfish.jersey.server.ServerRuntime$Responder.mapException WebApplicationException cause: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement    at org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:241)    at org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:366)    at org.springframework.orm.hibernate5.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:326)
the xenmobile server had huge log files this can be because of the logs setting on xenmobile as well
It's a known issue CXM-46578:In Secure Mail for Android, when users copy and paste four or more email addresses in the To: field, the app crashes. [CXM-46578]https://docs.citrix.com/en-us/xenmobile-apps/10/fixed-issues.html
Under the "config.xml" file. There were two queries that start “>$device =” when it should be “>$devices = ".
Citrix Documentation - iOS Volume Purchase ProgramCitrix Documentation - Android for Work
The overload used in XMM code is available since .NET Framework 4.6https://msdn.microsoft.com/en-us/library/dn906224(v=vs.110).aspx
SDK Tools out-of-date
1.Multiple Changes made to the application.2. NetScaler persistence method does not go with the  iOS 11 devices
Expected behavior.Launching a HDX app does not initiate any communication with the Secure Hub and hence there would not be any PIN prompt for the HDX apps from SecureHub.
Multiple certificate entry found in XenMobile ServerIn the Xenmobile Server logs2018-03-07T08:52:50.881-0500 | C1BA18C0DE305D4C  | ERROR | http-nio-14443-exec-85 | com.sparus.nps.ErrorFilter | Exception (exid:16200BC6AC0-503E3024D00ABC1E4C352FFA2DAD6AC0): org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 2; nested exception is org.hibernate.NonUniqueResultException: query did not return a unique result: 2
Known issue with Secure Mail 10.7.30.
Need to store the certificate that is created in the AD against the user it is created for NOT for the service account that creates it
It is an expected behavior if customer unchecks the platform or remove the delivery group for the app and saving it under delivery group causes this issue.
Hide sensitive content was selected.
User is experiencing Error <pre> <h1>500 Server Internal Error (exid:16200BC6AC0-503E3024D00ABC1E4C352FFA2DAD6AC0)<h1> </pre> for Device S/N xxxxxxx, as XenMobile server fail to retrieve unique keystore (certificate) information for ANDROID device ID xxxx (<serial number>) as DB contains duplicate certificate for device.
NetScaler was unable to reach Sharefile
Wrong app (in wrong store) selected by XenMobile server
1. Since the server was newly configured, the DNS entry was missing.2. The MAM LB VIP used was not the private IP address.
Secure Hub was not set as Required and Require device enrollment option was not selected.
the MAM LB VIP used was not private ip address
The regex used for SkypeForBusiness meeting searches for "meet" followed by a dot "."  However a '.' in regex is not the literal dot character but a special character indicating 'Match any character'.
Fix - The '.' in regex needs to be escaped which is available from 10.8.5 or later.
Application defaults were set on Device to open the link/s with this app.
Device unable to complete server connection to download mdm configuration.
Provisioning profile and Distribution certificate mismatch
'CFBundleVersion' and 'CFBundleShortVersionString' do not match each other.For example, 'CFBundleVersion' set to 3.3.2 whilst 'CFBundleShortVersionString' is set to '2.0.4.2'
Device was provisioned and enrolled under another existing user and was never deleted from XenMobile
Info.plist file was not created using apple guidelines
APNS issue and the App Inventory policy was not deployed due to which the XenMobile could not read the current version of the app on the device.
Configuration to export contacts was not enabled on XenMobile ServerCustomer did not see option to Sync Local Contacts after updating Secure Mail MDX policy
Secure Hub meta data information was incorrectly set on the App Store.
This issue is confirmed as a BUG from Apple side.
- Found in AD that 2 users namely "Example A Test" and "Example B Test" have the same UPN = example.test@abc.com
Since we cannot launch the NetScaler GateWay page, (via External name and IP) NAT needs to be added with the internal VIP
Note: we can only remove the ciphers by adding the required ciphers from the list (Current ciphers). We would not be able to add any extra ciphers that are not present in the list (Current ciphers).
Note : This restriction is deprecated on Unsupervised iOS 10 devices
License server version isn't compatible with XMS 10.8
Timezone mismatch
Issues with user account unable to send mailsFrom the logs we see the following warning repeatedly which indicates that the exchange mail submission service is not running. Basically this service submits message from the mailbox server to exchange hub transport servers.  SecureMail,WARNING (3),-[SendMailService(AutoRetry) retryPendingOutboxItemsForAccount:operationQueue:]_block_invoke,"Not retrying outboxItem=0xd00000000004002a <x-coredata://B2AA20B6-9117-4C2E-8DAE-303352E95B07/OutboxItem/p1> due to mailbox submission errors",-,NSManagedObjectContext 0x10d101ab0,15937,Secure Mail,/jenkins/workspace/iOS_WorxMail/Release_10.7.30/Release_10.7.30/ExchangeMail/activesync/outboxservice/SendMailService/SendMailService+AutoRetry.m,64
https://technet.microsoft.com/en-us/library/hh529949(v=exchg.160).aspx
missing properties to database for anonymization.properties
the URLS were added to an exclusion list
The DNS team had not removed the old entries from the service provider portal .
For MDM server mode only we need to use webclip instead of weblink.
Log level 15 has detailed logging, when this is combined with MDX SQLite encryption,  it causes delay in response(slowness) is observed and eventually crashing the App.
Improper integration of XA/XD
The upgrade disabled the client certificate mapping setting on Exchange . It needs to be enabled if cert based authentication is being used.
Possible causes:- hazelcast - An issue with a ps utility causes XenMobile Server nodes to reboot. [CXM-42305] - A License Server issue causes clustered XenMobile Servers to restart after an administrator log:Reason: TcpIpConnectionManager is stopping2018-02-06T16:00:52.400-0800 |   |  INFO | hz.ShutdownThread | com.hazelcast.instance.Node | [x.x.x.23]:45000 [dev] [3.7.2] Shutting down node engine...2018-02-06T16:00:52.412-0800 |   |  INFO | hz.ShutdownThread | com.hazelcast.instance.NodeExtension | [x.x.x.23]:45000 [dev] [3.7.2] Destroying node NodeExtension.2018-02-06T16:00:52.412-0800 |   |  INFO | hz.ShutdownThread | com.hazelcast.instance.Node | [x.x.x.23]:45000 [dev] [3.7.2] Hazelcast Shutdown is completed in 85 ms.
In XenMobile Administrator console > Manage > Users, the domains from the UPN and the group (Groups column) that it was trying to authenticate to were different.
The way in which the app allows users to send emails is not supported on iOS 11 when the app is wrapped by the old MDX Toolkit.Wrapping the app with MDX Toolkit version 10.8.5 will add support for iOS 11 so that the app will function properly, as it does on iOS 10.
Known issue
known issue which was fixed in latest release of ShareFile and Secure Hub app.
Issue with MDX toolkit version (10.8.5 & Below), NSBundle infoDictionary is not working correctly for Ipad-only app icons. Populate info dictionary using Info.plist file hence iPhone icons are validated for all iOS applications.
This is a known issue tracked with issue ID 0694932.
Format of pre-loaded bookmarks on Android MDX Policies for Secure Web 10.7.25
This is due to a known issue in Launch Darkly sync for feature flags.
Incorrect configuration on NetScaler.
XCode logs:
Feb 12 08:35:00 iPhone Secure Hub[1070] <Notice>: [<CAMAUTH>:ERROR:com.apple.root.default-qos:f03]-:+[CAMAgeeLogon extractAuthenticationResultFromHttpResponse:forRequestURL:]: The gateway login response contained error cookie 'NSC_VPNERR=4007' which means 'Incorrect (bad format) password.'. There's no logic to recover from this case, will abort auth.
Feb 12 08:35:00 iPhone Secure Hub[1070] <Notice>: [<CAMAUTH>:INFO:com.apple.root.default-qos:f03]-:-[CAMAsyncHTTPImpl private_sendRequestForAM:storeIDForCertAuth:withSession:]: HttpRequest#10 GET https://xxx/cgi/logout
aaad.debug:
/home/build/rs_111_56_9_RTM/usr.src/netscaler/aaad/ldap_common.c[233]: ns_show_        ldap_err_string LDAP error string: <<80090308: LdapErr: DSID-0C0903D9, comment:         AcceptSecurityContext error, data 52e, v2580>>
Mon Feb 12 08:53:24 2018
/home/build/rs_111_56_9_RTM/usr.src/netscaler/aaad/ldap_common.c[418]: ns_ldap_        check_result LDAP action failed (error 49): Invalid credentialsNetwork trace shows wrong (old) password.
Known limitation of Cloud MDX Toolkit
The Outlook application wasn't updated in the XenMobile console, so the application published to the users was an older version.
How to collect XCode and ADB logs : https://support.citrix.com/article/CTX206989Please note-If the customer has disabled the USB debugging options from the server, ADB will not work.
The login url has incorrect app name and hence it failed.
The SSL listener wildcard on the XenMobile did not have the full chain
This issue is confirmed as a BUG from Apple side. Citrix has created the ticket 36771227 at Apple Bug Reporter.
ShareFile and QuickEdit documents don't support NSURL(public.url)
It was found to be a known issue while exporting the report from the Manage > Devices tab with XenMobile 10.7 without any rolling patch
It was discovered to be the known issue with Secure Web iOS 10.7.20.
Incompatibilities were identified within the MDX Wrappers for the ShareFile and QuickEdit apps.From the logs found below:"Open in MDX encryption metadata missing from annotation file""Dictionary not in pasteboard. Open in came from unwrapped app",
The second policy needs to be modified as it will not work similar to the first one.
Access Token for the DEP on XenMobile was expired
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
IP URL is not able to parse especially when visit the internal site going though VPN
ssl listener revoked
Issue was occurring  because of older version of Secure Hub on the devices
How to verify the amount of licenses you are using by XenMobile users.
VSphere known issues with Citrix Xenmobile. (10.7)
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
The active user sessions are cleared and users are not able to get into store since the active session is killed.
Client Property ENCRYPT_SECRETS_USING_PASSCODE was set to 'false' and needed to be set to 'true'
Service account was missing the newly created security group in AD
BUG in iOS app package section of console
Signatures don't match on both versions of apk.
Checked the logs and found that there was some network connectivity issue between the XMS server instance and the domain’s FQDN (abc.example.net).Debug Logs==============Check Primary server 'abc.example.net' ConnectivityUser 'ldapadmin@example.net' bind failed with domain 'example.net'Reason:abc.example.net:636 Failed adding userlist.Domain Name:example.net. Reason:Cannot connect. Try again
QuickEdit was installed but never opened, and didn't have the proper permissions on the Operating System.(Android applications check for needed permissions when first opened and not when installed)
XenMobile server has an issue fetching the version with 3 digits (5.2.1) and that’s one reason why the app is showing up as up to dateSolution - Upgrade to XenMobile 10.7 Rolling patch 2 - https://support.citrix.com/article/CTX230553Known issue  - iOS users can't update Citrix Receiver to version 7.2.3. When you click Check for Update, the message "The app is up to date with the latest version" appears even when you have an older version.[From xms_10.7.0.10229.bin][#691529]
SQL cluster has some restriction on it that is preventing the initial connection to XenMobile. Need to have SSL enabled for SQL cluster connection
android intent for SMS compose not added to exceptions
App Inventory was not pushed to the Devices.
Issue---------------Unable to install Secure Mail Public version for iOS - Incompatible appadditional information:Environment---------------XM 10.6 RP2 | on premise |cluster 2 nodesSecure Mail public app store versionLogs-------------Xcode Logs
Dec 14 09:29:52 iPhone WorxMailAppStore[985] <Notice>: -[NSFileManager(MdxEncryption) ctxRemoveItemAtPath:error:]: errno=2Dec 14 09:29:52 iPhone WorxMailAppStore(libsqlite3.dylib)[985] <Error>: BUG IN CLIENT OF libsqlite3.dylib: database integrity compromised by API violation: vnode unlinked while in use: /private/var/mobile/Containers/Data/Application/0E318B91-A088-4F96-BEAA-E9D8DB7763A3/Documents/ExchangeMail.sqliteDec 14 09:29:57 iPhone WorxMailAppStore[986] <Notice>: CTXLogger : User preferences are not yet available. Returning from Logger initializer..Dec 14 09:29:59 iPhone kernel(Sandbox)[0] <Notice>: Sandbox: WorxMailAppStore(986) System Policy: deny(1) dynamic-code-generationDec 14 09:29:59 iPhone kernel(Sandbox)[0] <Error>: WorxMailAppStore(986) System Policy: MAP_JIT requires the dynamic-codesigning entitlement
Debug logs:
2017-12-14T10:29:42.147+0100 | ba05c829ec641e75  | DEBUG | http-nio-18443-exec-30 | com.sparus.nps.engine.ruler.syntree.deploy.DeployPackageRulePool | exclude DeployResourceAction{type=IPA, resourceId=47, packages=[PackageRef{packageId=1193, linkey='DGA_IBE_TEST_EURO_ENROLL_DEVICE_1'}], installType=ONDEMAND, platform=IOS}: duplicate2017-12-14T10:29:42.147+0100 | ba05c829ec641e75  | DEBUG | http-nio-18443-exec-30 | com.sparus.nps.engine.ruler.syntree.deploy.DeployPackageRulePool | exclude DeployResourceAction{type=IPA, resourceId=7, packages=[PackageRef{packageId=1193, linkey='DGA_IBE_TEST_EURO_ENROLL_DEVICE_1'}], installType=ONDEMAND, platform=IOS}: duplicate
On XenMobile Server, check whether multiple instances of the Secure Mail public app are being made available for installation on the device (Disable apps included). Only one Secure Mail app should be made available to install on any single device
Since the document exchange and encryption was set to ON
This is a secure web issue because of the javascript we insert to handle pop-up functionality.Issue is not observed if you enabled block pop up as a workaround.
The 4096-bit certificate is not supported on the backend server. Hence accessing websites with 4096-bit encryption certificate is not possible.
More information on encoding scheme can be found here : https://msdn.microsoft.com/en-us/library/windows/desktop/dd317756(v=vs.85).aspx
Due to the migration from XMS 9.0 to XMS 10.x a manual server property with Key - elm.license.key, was present.
The Windows ADS enrollment does not take the TnC policy
Asus device's processor not supported by XenMobile apps and MDX based apps
Configuring Split Tunneling:https://docs.citrix.com/en-us/netscaler-gateway/11/vpn-user-config/configure-plugin-connections/ng-plugin-split-tunneling-tsk.htmlHow do I configure Split Tunnel on NetScaler Gateway?https://support.citrix.com/article/CTX205285FAQ: Citrix Secure Hub for Mobile Devices and MicroVPN Technology:https://support.citrix.com/article/CTX136914SSO and Proxy Considerations for MDX Apps:https://docs.citrix.com/en-us/xenmobile/server/advanced-concepts/xenmobile-deployment/sso-proxy-mdx-apps.htmlReverse Split Tunnel Used Case in XMS/NetScaler integration.https://support.citrix.com/article/CTX227491
The issue was with GSLB configuration fro LDAP .While resolving the FQDN for LDAP some cases the LDAP load balancing ip  to Secondary netscaler.
SSO on Traffic Policy of NetScaler Gateway needs to be "OFF"to verify if the Bearer Header is present on Wireshark Trace.
Restriction Policy is still on the Device and unless it is not removed from the device Camera will remain blocked.
Admin had created a local account with the same username as AD account.Duplicate usernames was causing the error with authentication/enrollment to MDM.
https://docs.citrix.com/en-us/xenmobile/server/provision-devices/google-play-credentials.html
Software inventory policy was corrupted
XenMobile Server 9 made use of a database entry for storing the actual value of the ELM License Key.The introduction of XenMobile 10 saw the use of the local file 'variables.xml' to store the license key instead.XenMobile Server 10.7 will use the value which is stored in the database, if it exists, before checking for the value which is stored in 'variables.xml'.As such, it is necessary to delete the old XenMobile 9 era database entry which may still exist in the underlying database.
Cause for the Issue :After the Latest update from Microsoft on Office 365, Secure Mail in Android fails to connect. This only impacts certain Tenants on Office 365.
Restricted open-in exception list cleared by admin while deploying the application.
Issue with layout constraints while rendering the webview.
Checked the database ut was showing the time correctly.It was found that its an issue with the browser/browser cache.
Proxy logic does not honour wildcard characters when they are specified in the bypass list,
Restriction Policy is still on the Device and unless it is not removed from the device Camera will remain blocked.
https://docs.citrix.com/en-us/xenmobile-apps/10/secure-hub.htmlhttps://docs.citrix.com/en-us/xenmobile/server/provision-devices/client-properties.html
Issue was caused because of applying "shared_device_enrolled" role which is hiding Secure Hub store.
Confirm if logs from XenMobile console indicate an issue with the certificate on the java hosting server which is XMS like below:2017-09-20T14:03:16.697+0300 | 8111BE9F5598F715 | INFO | http-nio-14443-exec-2 | com.citrix.controlpoint.service.impl.utils.ServiceUtils | Exception occurred within getUrlContents : sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 2017-09-20T14:03:16.703+0300 | 8111BE9F5598F715 | INFO | http-nio-14443-exec-2 | com.citrix.controlpoint.service.impl.utils.ServiceUtils | URISyntaxException within PublicApplicationServiceImpl : downloadAppIconFromUrl() null 2017-09-20T14:03:16.708+0300 | 8111BE9F5598F715 | ERROR | http-nio-14443-exec-2 | com.citrix.controlpoint.rest.AppStoreApplicationResource | Error saving public store app java.io.IOException: null Enable trace on XenMobile server to see if any untrusted certificate errors are observed as below:
Controlling Printing
There are various ways that the availability of the printing feature can be controlled. This includes using administrative policies and also via Microsoft IRM permissions that can be applied to messages.
Controlling Printing via an Admin Policy - Printing can be controlled via the “Block AirPrint” policy as shown below. When printing is blocked via this policy then you will be shown an error indicating that printing has been disabled by your admin.
Controlling Printing via IRM restrictions - Organizations that make use of Microsoft Information Rights Management (IRM) can restrict printing using this technique. Email messages that are restricted from printing will not be printable using Secure Mail. If you attempt to print a restricted message then an error will be displayed at that time.
You can add as many Bundle/App IDs or Identifiers of the apps as you want in a single Restriction policy.> The best way to fetch the Bundle ID of an app is by pushing the software inventory onto the device.> To view the Bundle ID of an app under the XenMobile Console,Go To Manage --> Select a device --> Click on Edit --> Go To Apps --> Look for the Identifiers
Newly joined node had a database connectivity issue.
Google play services beta version 11.7.43 changed the way client certificates are being fetched from apps and it broke the connectivity to Exchange Server.
You can find this : https://citrix.sharefile.com/app?/#/share/view/sd3ea408a4a34090b
Once the device is enrolled, XMS connects to these enrolled devices once every 6 hours. For Android it connects back to devices based on scheduling policies configured if any.
You may receive this error message if the user account is not a local account in XenMobile Server.
Phone number was not updated on the Device settings
https://support.citrix.com/article/CTX212179
Issues is because of the apk-tool version used for XenMobile10.7.0.20.
After upgrading to XenMobile Server version 10.5 or later, device enrollment fails and the "Could not sign CSR" error message appears in the debug log of setups using Generic PKI (GPKI). This issue occurs because the GPKI protocol fails to retrieve a signed user certificate.
Known issue with Quick Edit 6.14 for iOS
There can be multiples causes of the issue
gateway is out of licenses, causing MAM enrollment to fail. macro configured ‘SEND_LDAP_ATTRIBUTES’.LDAP is configured with UPN and with Global Catalog. For e.g. the Domain ‘test.abc.local’ is managed with alias ‘xyz.ab, xyz-test-racing.ab, xms.com’ Users are login with alias like ‘user@xyz.ab’ .
The certificate used by XMS to issue new certificates on the CA was expired (user certificate) and needed to be replaced on the XMS.
Numerical passwords aren't allowed for Citrix Launcher
Known issue with Secure Web 10.4.5
Intent was being intercepted and blocked by Secure Web
Product limitation
MDX Toolkit incompatibility
Here Secure Web is passing decoded URL (specially query arguments) while calling android WebView loadUrl(String url) routine from BaseWebView.java class, therefore document fails to download via Secure Web. Here Secure Web shall encode URI query argument before calling WebView loadUrl(String url) routine from BaseWebView.java class.
Icon files configured on the application is not on a drawable folder.
Custom port blocked on the External Firewall.
AD group was missing in Delivery group
Hidden policy was allowed after modifying policy_matadata.xml file under the MDX wrapped app.
Policy made available was “Inbound document exchange whitelist”
> All the managed apps were allowed in this whitelist, which is not required.
The root cause of the issue is due to updates in Apple iOS 11.0 targeting battery life improvements. These updates impacted Citrix Secure Mail silent notification which is responsible to indicate that new data is available on the server.
The password specified on the iOS OS version less that 10.x cause the policy to stay in pending state.
Generic behavior of iOS
http://docs.citrix.com/en-us/xenmobile/server/media.html
ERROR | http-nio-14443-exec-3 | com.sparus.nps.om.impl.DeviceImpl | com.zenprise.zdm.persistence.NonUniqueResultException: org.hibernate.NonUniqueResultException: query did not return a unique result: 2com.zenprise.zdm.enroll.NonSingleUserDeviceException: com.zenprise.zdm.persistence.NonUniqueResultException: org.hibernate.NonUniqueResultException: query did not return a unique result: 2at com.zenprise.zdm.enroll.internal.mgmt.EnrollmentManagerImpl.getCurrentDeviceNotRevoked(EnrollmentManagerImpl.java:1184) ~[nps.jar:?]
This issue usually happens due to following reasons
When there is invalid LDAP configuration.Global catalog is rejecting the configuration.XenMobile is unable to trust to Active directory because the Root (AD) cert was not uploaded on XM Server.
Logs report license server was unreachable when the XMS went into Recovery mode.
Incorrect FQDN in XMS for StoreFront Server.
Issue is triggered by failed device registration from a client device.
Full instructions on the settings and parameters which can be tuned are viewable at https://docs.citrix.com/en-us/xenmobile/server/advanced-concepts/xenmobile-deployment/tuning-operations.html
Important: If user entropy is on, the Enable Touch ID Authentication property is ignored. User entropy is enabled through the Encrypt secrets using Passcode key.
Restrictions device policy
Note: Citrix does not share its customer's information, all the screenshots attached in this article are taken from a lab environment.
Issue with XMS 10.6 code reading
https://technet.microsoft.com/en-us/library/jj984289(v=exchg.160).aspx
During enrolment, XenMobile Server will bind to Active Directory and will enumerate the group membership of the user who is enrolling.This step may fail if the membership of 'Pre-Windows 2000 Compatible Access' has been changed from the default settings.Changes to the default settings may have been performed so as to restrict security settings.See the links under 'Additional Resources' for information about how to restrict security settings in Active Directory without changing the default membership of 'Pre-Windows 2000 Compatible Access'.
wrongly created index under the Node_Message table in SQL DB
https://docs.citrix.com/en-us/xenmobile/server/rest-apis.html
It is possible that the issue is only for a particular browser - IE for instance
The international format you now see was the format in XenMobile 9 and the change to US format in XM 10 was accidental. For reference, the date/time format on the Manage > Devices and Manage > Users pages should now be dd/mm/yyyy hh:mm:ss (24 hour format).
The Default appliance was not the Netscaler gateway.If using multiple farms, list the STA servers on each using a comma separated list:Also the STA servers were not added in proper syntax
Example: "http://xenapp-a.ptd.com/scripts/ctxsta.dll","http://xendesktop-a.ptd.com/scripts/ctxsta.dll" .
The Apktool version on the XMS Server is 2.1.0 and hence the app extraction failed.
Netscaler Mis-configuration.SecureHub uses Windows/MAC OS X plugin type to connect to Citrix resources.
Although Microsoft ActiveSync is stated as offering support for Request Headers to be sent using UTF-8 encoding, the Exchange Online Servers instead accept only Windows-1252 encoding.As such, Windows-1252 encoding should be used (instead of UTF-8 encoding) when Secure Mail is communicating with Office 365 mailbox servers.
Incorrect configuration on the Netscaler Gateway for Client based authentication.
The property was disabled
Excerpt from this link: http://docs.citrix.com/zh-tw/xenmobile/10/xmob-configure-server-settings/xmob-settings-syslog.html
https://docs.citrix.com/en-us/xenmobile/server/policies/app-lock-policy.html
https://docs.citrix.com/en-us/xenmobile/server/system-requirements/supported-device-platforms.html
Changes in Secure Mail public and Enterprise app Design:
Secure Mail Enterprise app used to deliver the tenant id as a part of MDX file. Secure Mail public app does not have tenant id added in MDX file, instead SecureMail acquires a Tenant ID from Citrix Registration service.
changes required to properly push the xml profilesengineering/product management is working on improving documentation for a successful implementation of the Zebra platform featuresin our testing ALL zebra xml files must conform to the parameters above
Android 8 is supported with Client release 10.6.20 and above hence Android 8 user must need to upgrade the Secure Apps first to the latest version i.e 10.6.20 and then upgrade the Android operating system.
iOS device restriction is interfering with personal calendar overlay feature, in which it can't read from un-managed apps
IIS SSL settings in CA Server was not configured to accept SSL certificate for authentication
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
The expression (REQ.HTTP.HEADER User-Agent CONTAINS CitrixReceiver/CitrixVPN ) was missing.
Incorrect value was present in the  Allowed Email domain in the MDX policy.
The enrollment profile was set to allow only certain number of devices per user.
Issues with the Netscaler Gateway configuration and in known issue list
Three sites were needed to be allowed for this to work.the netscaler,xm server on port8443 andthe end resource.Issues were with redirection to other ports.
Issue with windows devices as they have the same hardware device ID.Contact OEM and confirm the actual cause of the problem.
In the above log snippet we could see the password actiivtychange being destroyed.
Unsupported version of exchange server was being used - Exchange 2007
https://docs.citrix.com/en-us/xenmobile/server/system-requirements/compatibility.html
This is an expected behavior when the app’s Network Access is tunneled to the network and Preferred mode is Full VPN.The issue is with multiple VPN disconnection events which leads to Network Access Block.
Secure Mail support for 8 digit Attendee Access Code and do not support 10 digit "Attendee Access Code" in older version.
LB VIP On Prem that had the ACNODEID LB persistence rule had no server ID configured.
> Redirect URL is missing a forward slash at the beginning, that is causing the current Secure Web logic to add an additional base URL, which causes the 503 error.
Current: Response.Redirect("logon_funct.asp?.")Expected: Response.Redirect("~/logon_funct.asp?.")
> iOS Secure Web redirect logic takes into consideration that “/”, which adds the additional base URL in the redirection URL
http://docs.citrix.com/en-us/xenmobile-apps/10/about-secure-apps/secure-apps-delivery-administration.html#par_anchortitle_3f2e
Issue with the MDX Toolkit version.
Intermediate certificates are missing on XenMobile Server SSL Listener certificate.
ERROR | VPPAssetsTaskNew | com.citrix.ios.vpp.wsclient.internals.VPPLicenseManagerImpl | Error while fetching or saving the app info: Application container with name Cisco AnyConnect - DEP already exists.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Expected behavior because the devices receive the SSL certificate at the time of enrollment.
DNS record had duplicate entry
Not provided Admin permission to the particular user.
Name servers on NetScaler were showing as down.DNS servers are external and ICMP traffic was blocked on default gateway.
Mail redirection mis-configuration in MDX policy.
With iOS 11 behavior multiple connections are opened by the iOS MDM software in response to a single MDM command from XenMobile.  XenMobile testing of iOS 11 revealed that MDM management of iOS 11 devices will be impacted if:
1. XenMobile is deployed in a cluster setup (with more than one node), and
2. XenMobile is deployed in MDM-only or Enterprise (MDM+MAM) mode (MAM-only deployment mode is not affected)
This affects all versions of XenMobile Server.
Known issue in Secure Mail
LDAP timeout seen from the logs during user re-enrollment and old migration tool compatibility issue.
Null Pointer Exceptions were experienced in the logging sub-system.  The logging system is not tolerant of null values and eventually became non-responsive.   This caused a cascading effect where all components that were attempting to log activity became blocked and subsequently the XenMobile server affected would cease to function.
NetScaler deletes the HTTP Authorization header before forwarding the request to SharefileEarlier, we did not used to recognize Bearer header. Therefore, we would not corrupt it. This caused issues when new MS clients talk to legacy SharePoint servers.This will happen only when SSO is enabled.Thumb rule is – SSO needs to be turned ON when customers want NetScaler to intervene in the SSO process and override client’s behavior.In other cases, it needs to be turned OFF.
Configuration issues on KNOX portal
1- Notifications are off for Securemail on the device2- Device is in Doze mode3- Power saving mode is blocking sync and notifications.
The SecureHub is caching the old password.New AD password might have a special character.
This is a most common issue when
Netscaler is unable to successfully do a DNS resolutiondoesnt have access to internt in case the splittunnel is offincorrect DNS policies .
Did not have the server certificates for both domain controllers uploaded to the XMS and needed to have the FQDN of each domain controller configured on the LDAP settings
The APNS traffic doesn't work with Auth and can be configured as http or socks (both without authentication )
Proxy type
Supported targets
SOCKS
APNS
HTTP
APNS, Web. PKI
Hence if the server is configured for http / https with auth you will have to configure APNS on SOCKS
Configuration issues and the Cloud connector is unable to trust and fetch the cert from CA .
The cloud connector must have connectivity and should be able to fetch cert from CA server
Compatibility issue with Secure Apps on OnePlus 3 Android OS.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
STA configuration for Secure Mail supports long-lived connections and gives us better battery life compared to mVPN
old webex platform
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
The user was not functioning due to the User Logon Name missing on the AD User Account Tab.
Currently Expected Behavior.
Bug/Limitation within the UIWebView and JavaScript interaction.  The link derived is as follows: 'javascript:submitAction_win0(document.win0,ADD_PHOTO_BTN').
On tapping on upload button, an XMLHTTPReqtest is created in JavaScript and image is sent to server. Server in turn returns a response back to Secure Web (I can see the 200 response in SW network callbacks) but for some reason response is not propagated to JavaScript. We don’t have much control on this intermediate portion to identify what is preventing the data from reaching JavaScript code as this happens inside iOS SDK(UIWebView).
the device doesnt show the message in about tab on the device
Limitation of the Apple API which is used to share app installation details with XenMobile Server.
DEP/VPP license for Secure Hub still associated to device in XMS license database after device being unenrolled.  The Apple License Server is unable to find a license to correctly disassociate, as it has already been removed.In order to properly validate this as being the issue, set custom logger(s) as described.
Please add each of the custom loggers individually and set all module debug level to "trace".
com.citrix.ios.vpp.wsclient.cron
com.citrix.ios.vpp.wsclient.request
com.citrix.ios.vpp.wsclient.request.VPPRequest  Initiate a license disassociation from console, and review XMS Debug Log.  An excerpt of attempt is below:
​2017-08-23T10:50:57.141-0400 | 76A253F6AB490FA  | TRACE | http-nio-14443-exec-8 | com.citrix.ios.vpp.wsclient.request.VPPRequest | Sending VPP Request: https://vpp.itunes.apple.com/WebObjects/MZFinance.woa/wa/manageVPPLicensesByAdamIdSrv ->{"adamIdStr":"123456789","notifyDissociation":true,"sToken":"eyJvcobOYW1lIjoiTW9vZHkncyBDb3Jwb3JhdAvhbiIsImV4cERhdGUiOiIyMDE3LTA5LTIzVDExOjIyOjQyLTA3MDAiLCJ0b2tlbiI6ImtWSnFVTGE2SWtNYVdTbEViM3dsTi9QUUJwd21vWWt2aHp2aC8zWHlCdXJtVllTbk9aQW5ldkxmcTBMc0ZBSXF6eExGV3lVVHBNNlZEbEtKQ2YxSUhRPT0ifQ==","STDQ":"STDQ","disassociateLicenseIdStrs":["0987654321"]}2017-08-23T10:50:57.268+0800 | 76A253F6AB490FA  | TRACE | http-nio-14443-exec-12 | com.citrix.ios.vpp.wsclient.request.VPPRequest | {"adamIdStr":"123456789","notifyDissociation":true,"sToken":"eyJvcobOYW1lIjoiTW9vZHkncyBDb3Jwb3JhdAvhbiIsImV4cERhdGUiOiIyMDE3LTA5LTIzVDExOjIyOjQyLTA3MDAiLCJ0b2tlbiI6ImtWSnFVTGE2SWtNYVdTbEViM3dsTi9QUUJwd21vWWt2aHp2aC8zWHlCdXJtVllTbk9aQW5ldkxmcTBMc0ZBSXF6eExGV3lVVHBNNlZEbEtKQ2YxSUhRPT0ifQ==","STDQ":"STDQ","disassociateLicenseIdStrs":["0987654321"]}
2017-08-23T10:50:59.741+0800 | 76A253F6AB490FA  | TRACE | http-nio-14443-exec-12 | com.citrix.ios.vpp.wsclient.request.VPPRequest | {"uId":"121679","disassociations":[{"licenseIdStr":"0987654321","errorMessage":"No license to disassociate.","errorCode":9602,"errorNumber":9602}],"status":-1}
2017-08-23T10:50:59.742+0800 | 76A253F6AB490FA  | ERROR | http-nio-14443-exec-12 | com.citrix.ios.vpp.wsclient.request.VPPRequest | Apple feedback: Unknown error
2017-08-23T10:50:59.746+0800 | 76A253F6AB490FA | ERROR | http-nio-14443-exec-12 | com.citrix.controlpoint.service.impl.AVPPServiceImpl | Error while disassociating VPP license [0987654321] (vppAccountId=8) from VPP account com.citrix.ios.vpp.wsclient.VPPClientException: ErrorCode returned by Apple: {code=-1, reason='Unknown error'}
Change in configuration
While parsing an attached mail, the attributes itemId and folderId are not populated (They only get populated when an email sync happens). In this scenario, these attributes will always be nil. Serializing these nil values when we try to reply causes a block.
XenMobile Macros
How to Change Apple Push Notification Service Heartbeat in XM9
https://support.citrix.com/article/CTX137060
MDM Options Device Policy: http://docs.citrix.com/en-us/xenmobile/server/policies/mdm-options-policy.htmlApple MDM API Reference: https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/4-Profile_Management/ProfileManagement.htmlApple Activation Lock: https://support.apple.com/en-us/HT202804
Apple Deployment Programs Portal Guide- https://www.apple.com/education/docs/DEP_Guide.pdfDevice Enrollment Portal-https://deploy.apple.com/
There was no Root Certificate installed on XenMobile Server because of which the traffic was not able to get decrypted and we see the connectivity was failing to Google Server.
Device Certificate Renewal (in seconds) was set to 30 seconds.The time is not enough for the devices to renew the certificate.
When 'Initial Authentication Mechanism' is set to 'User email address', Secure Mail will attempt to use Autodiscovery to configure the remaining mailbox settings.Setting this value to 'Mail server address' instead will allow you to configure the remaining mailbox settings without the client making use of Autodiscovery.
The Secure Hub log files record the error message "SecretVaultProvider:Failed to open secret vault genericVault" after upgrading from an older version to Secure Hub version 10.5.5.The error message seen is an indication that the app is failing to open up the encrypted vault named 'genericVault'.Because of this error message, Secure Hub 10.5.5 is not able to save any passwords, PINs or security certificates to the referenced vault.This may result in repeated requests for the Passcode to be entered and no access to the vault granted even with a known good Passcode provided.
The proxy configuration is blocked the communication on the port 8443.
.
This behaviour can arise when XenMobile server is set to use CBA (Cert Based Authentication) but the NetScaler Gateway vServer is configured for Domain+LDAP and not CBA configured.
Active sync was disabled
Multiple versions of the Sharefile app being made available for end users can cause end user devices to display this error.
The Account is already in use and binding is available
The provisioning profile is invalid due to no certificate is included
The root ca certificate is not trusted on the iOS devices.
2017-07-20T11:04:08.039+0800 AGTunnelerWARNING (3)-[AGSecureSocket SSLHandshake]SSL Handshake failed, the AG server certificate received is not trusted 2017-07-20T11:04:08.039+0800 AGTunnelerWARNING (3)-[AGSecureSocket connect:withPort:]connection failed on fd 32, errno = 0. Could not enable ssl. 2017-07-20T11:04:08.039+0800 AGTunnelerWARNING (3)-[AGSocket AGSocketEvent:withEvent:]AGSocket AGSocketEvent: Connection Failed. Event: 0x21 2017-07-20T11:04:08.040+0800 Secure Mail.ASIHttpRequestERROR (2)-[ASIHTTPRequest handleNetworkEvent:]Inside handleNetworkEvent::kCFStreamEventErrorOccurred calling handleStreamError 2017-07-20T11:04:08.040+0800 Secure Mail.ASIHttpRequestERROR (2)-[ASIHTTPRequest handleStreamError]handleStreamError::UnderlyingError.domain=kCFErrorDomainCFNetwork, error.code=120, error.description=Error Domain=kCFErrorDomainCFNetwork Code=120 (null)" UserInfo={_kCFStreamErrorDomainKey=5 2017-07-20T11:04:08.040+0800 Secure Mail.ASIHttpRequestINFO (4)-[ASIHTTPRequest handleStreamError]self.error is nil in handleStreamError 2017-07-20T11:04:08.041+0800 Secure Mail.ASIHttpRequestERROR (2)-[ASIHTTPRequest handleStreamError]Received error that was determined to NOT to be an untrusted SSL error with errorDomain=kCFErrorDomainCFNetwork, errorCode=120, description=Error Domain=kCFErrorDomainCFNetwork Code=120 (null)" UserInfo={_kCFStreamErrorDomainKey=5 2017-07-20T11:04:08.041+0800 Secure Mail.ASIHttpRequestINFO (4)-[ASIHTTPRequest unscheduleReadStream]Removing readStream from run loop 0x1740b77c0
Device did not have a PIN configured on startup
Private key installed under System as well as linked to the distribution certificate
The root cause is primarily configuration with VPP licenses. The VPP license association for the user device was unlinked. This is an Apple configuration error and seen multiple times. Hence we had to disassociate and re-associate the license for the app push to work as desired.
The name of the file uploaded had the wrong case ie SecureHub.apk vs securehub.apk and the Secure Hub version was old.
https://support.citrix.com/article/CTX134940#STAIDhttps://docs.citrix.com/en-us/xenmobile/10/xmob-system-requirements/xmob-deploy-component-port-reqs-con.htmlhttps://www.citrix.com/blogs/2014/01/17/xenmobile-enable-hdx-apps-with-certificate-based-authentication/
Issue was with this particular version of Secure Task and Secure notes in app redirection .
For additional information, refer to How to Renew/Request an External SSL Certificate for XenMobile Server (CTX207965).
Configure Roles with RBAC
"2017-06-22T17:51:32.958+0530","Secure Hub","INFO      ( 4)","com.citrix.work.fragments.DeviceInfoFragment:User pressed Refresh Policy button",27878,27878,Secure Hub,  ,  ,0"2017-06-22T17:51:32.965+0530","Secure Hub","DETAIL    ( 5)","DLP:netInfo = [type: WIFI[], state: CONNECTED/CONNECTED, reason: (unspecified), extra: "XENMOBILE", roaming: false, failover: false, isAvailable: true]",27878,27878,Secure Hub,  ,  ,0"2017-06-22T17:51:32.966+0530","Secure Hub","INFO      ( 4)","com.citrix.work.fragments.DeviceInfoFragment:User attempted a force refresh. Refreshing MDM and MAM policies",27878,27878,Secure Hub,  ,  ,0"2017-06-22T17:51:32.968+0530","Secure Hub","INFO      ( 4)","EMMUtil:isAWEnrolled: false",27878,27878,Secure Hub,  ,  ,0"2017-06-22T17:51:32.968+0530","Secure Hub","INFO      ( 4)","com.citrix.work.fragments.DeviceInfoFragment:refresh policies for XME mode",27878,27878,Secure Hub,  ,  ,0"2017-06-22T17:51:32.969+0530","Secure Hub","DETAIL    ( 5)","com.citrix.work.fragments.DeviceInfoFragment:Profile ID is: -1",27878,27878,Secure Hub,  ,  ,0"2017-06-22T17:51:32.969+0530","Secure Hub","INFO      ( 4)","com.citrix.work.fragments.DeviceInfoFragment:Profile ID is not found. Is device MAM enrolled?",27878,27878,Secure Hub,  ,  ,0"2017-06-22T17:51:32.970+0530","Secure Hub","DETAIL    ( 5)","com.citrix.work.fragments.DeviceInfoFragment:Refreshing MAM policies failed",27878,27878,Secure Hub,  ,
Inconsistent Timeouts requires a cookie to keep the Load Balanced session
Though there may probably multiple reasons, we have found that the above errors show up when the TLS v1.2 is not enabled on the NetScaler Gateway VIP. Please make sure you have the TLS v1.2 enabled and try again.
EPA scan is not supported with Secure Hub
Corrupted data table.Too many entries in EWDEPLOY_HISTO DB table in frequent intervals of time, causing the DB to grow with potential risk of causing deadlocks.
Here the Storefront server that is configured in XenMobile server is not able to accept the credentials provided by the Secure Hub at the time of enumeration of the apps, because of which the enrollment fails even after setting the Citrix Pin and XenMobile recording this enrollment as successful initially.
Additionally, if you would like to increase the XenMobile server console session time out value, you can refer to the article https://support.citrix.com/article/CTX216647
1. When any of the kernel's clock sync time miss the cycle i.e. lock synchronization time.
2. Heavy load on CPU/High resource utilization.
HTC API will be called by Secure Hub to look for com.htc.admin.mdmapi.HtcMdmApi class to detect HTC MDM API.However, the class is not found for HTC One_E8 devices.
Guide to Install XenMobile Mail Manager
2017-06-21T13:09:43.134-0500     <CAMAUTH>    INFO (4)    +[CAMAsyncHTTPImpl debugLogHTTPResponse:data:error:requestID:]    Response #4 error: Error Domain=com.citrix.Receiver.AuthManager Code=11 CAMAuthManErrorCodeHttpError" UserInfo={com.citrix.Receiver.AuthManager.DiagnosticDescription=An SSL error has occurred and a secure connection to the server cannot be made. 2017-06-21T13:09:43.136-0500     <MAM>    INFO (4)    __50-[AccountDiscoveryManager_New detectGatewayAtUrl:]_block_invoke.351    Call to detect Gateway failed 2017-06-21T13:09:43.137-0500     <MAM>    INFO (4)    __76-[AccountDiscoveryManager_New getAccountInfoForStoreId:WithCompletionBlock:]_block_invoke.483    Error getting account service recordRelease Notes for Build 53.13 of NetScaler 11.1 ReleaseIf you receive a response code other than HTTP 200 for an OCSP request, the NetScaler appliance dumps core memory and restarts.[# 673265, 675865, 678915, 677699]
the gsf id/ android id was missing
Checked and found VPP licenses were showing serial number as hidden on XenMobile Console.
Unable to disassociate VPP license from XMS, Removed the hidden devices from DB under VPP table but issue still persists.
Below Ciphers not enabled on NSTLS_RSA_WITH_AES_256_GCM_SHA384   :  TLS1.2-AES256-GCM-SHA384TLS_RSA_WITH_AES_128_GCM_SHA256  :  TLS1.2-AES128-GCM-SHA256
restriction policy was configured to disable clipboard
When Secure Mail is open on Home Screen, Secure Mail needs to call Secure Hub for VPN connection. If the "Apps secondary launch" setting is disable, Secure Mail cannot call Secure Hub.
When Secure Mail is open in Secure Hub, the call procedure is skipped thus it works well.
The hyperlink formats
the upgrade process is not right - customer was upgrading self wrapped application with public store application
XenMobile team identified an MDX app upgrade issue specifically to Samsung devices running Android 7 OS Known issue addressed: When upgrading to Android 7 on Samsung devices without 10.4.10, data corruption in SQ Lite databases may occur. This leads to app instability
Known Issue with Citrix VPN
Incorrect restriction policy
the configuration is not correct for android for work
unable to trust the backend website
A recent API change by Google.
This is a known issue in XenMobile Server 10.5.Attempts to add deployment rules when you create automated actions in XenMobile Server might not be saved.[From xms_10.5.0.10038.bin][#683330]
Secure Mail logs:​FolderSync operation received status code 200. Now parsing response..Parsing FolderSync response failed with status code: 111FolderSync caught parser exception.
Status Code 111 means:
This is a server side configuration error. Look at the below link for the error codes. Status Code 111 translates to:
111ServerErrorRetryLaterThe server encountered an unknown error, the device SHOULD retry later.Supported by: 14.0, 14.1When protocol version 2.5, 12.0, or 12.1 is used, an HTTP 503 response is returned instead of this status value.
Please refer to below MS link for the http status codes and their meaning.
https://msdn.microsoft.com/en-us/library/ee218647(v=exchg.80).aspx
in order to identify this issue, search the xenmobile console for devices with serial # 00000000000:client-side logs will show the following:"2017-05-22T10:38:10.344-0400","Secure Hub","DETAIL    ( 5)","Util:getManufacturerSerial returned null",17555,17555,Secure Hub,  ,  ,0"2017-05-22T10:38:10.344-0400","Secure Hub","DETAIL    ( 5)","Util:Manufacturer serial:[00000000000]",17555,17555,Secure Hub,  ,  ,0as Xenmobile uses the S/N as its primary device identifier, any other devices that enroll with the same S/N will REVOKE the previous enrollment:com.sparus.npcommon.NPSecurityPolicyException: com.sparus.npcommon.NPSecurityPolicyException: Certificate is revoked: serial=00000000000; imei=xxxxxxxxxxxxxxx
Internal Proxy Filtering detected the Public IP address of the Client, instead of the Subnet IP address.Android Traffic contains the 'X-Forward-Header', which contains the Public IP Address of the Client.Proxy Server picks up on this and enforces 407 auth.Android TrafficGET http://google.com/ HTTP/1.1Host: google.comProxy-Connection: keep-aliveUpgrade-Insecure-Requests: 1Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8Accept-Encoding: gzip, deflateAccept-Language: en-GB,en-US;q=0.8X-Requested-With: com.citrix.browser.droidX-Citrix-Gateway: mam.test.labUser-Agent: Mozilla/5.0 (Linux; Android 6.0.1; STV100-4 Build/MMB29M; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/58.0.3029.83 Mobile Safari/537.36 Secure Web/10.5.20-8X-Citrix-Via: mam.test.labX-Citrix-Via-VIP: 10.x.x.xX-Forwarded-For: 185.x.x.xConnection: Keep-AliveThis header is not present for iOS Traffic.
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
The Secure Mail was unable to trust the SSL certificate.Background network services address needs to be verified and corrected.
several configuration issues with the XenMobile set up
Root causeIf we include onclick function inside anchor tag, it changes it navigation type to UINavigationTypeOther in which case we were not inserting any js.When window.open is called without any url, nothing was being returned.
This error occurs if there is an older version of Secure Mail uploaded to the Xenmobile console.Note: It is not necessary that the older version of Secure Mail will be pushed to the affected delivery group, it can still cause this issue.
While launching Secure Mail gets a prompt - Set device encryption on your device to use this app.> Checked under the Device settings, Secure Startup was set to "Do not require" PIN when device turns on -
Android 6 Devices enrolled into XMS can no longer acquire MacAddress properties due to deprecated Android 6 APIs. Implementation added to Secure Hub v10.5.15.
The upgrade process is dependant on the certificates being found in the default file location: C:\Program Files (x86)\Citrix\XenMobile Device Manager\tomcat\conf
FAQ: XenMobile integration with Azure Active Directory as IDP FAQ: XenMobile Derived CredentialsFAQ: XenMobile and Windows Information Protection (WIP) Policy
Database user configured with XMS, lacks the permissions to modify the database tables and schemas during an upgrade
Certificate + LDAP authentication on the NetScaler (two-factor) was disabled.The NetScaler Gateway is out of licenses
If the Enrollment pin is expired. If the user’s account is disabled on Active Directory.Note:- This error may occur, if the user is authenticating directly to the XenMobile Server (Without NetScaler) If the user is providing SAMAccountName instead of UserPrincipalName or vice versa.
com.citrix.controlpoint.service.impl.CertificateServiceImpl | Error while combining certificate and private Keycom.citrix.controlpoint.rest.CertificateMgmtResource | Error while fulfiling request
Major snapshots of ActiveSync on Exchange 2016 can fail if 'partitionQueries' is set to 'false'.
When does iOS deliver notifications to Secure Mail?If Secure Mail is running in the foreground, notifications are always delivered to Secure Mail.This is the only time that Citrix can guarantee that notifications are delivered.When Secure Mail enters the background, the application badge count always updates. However, notifications (lockscreen and banner notifications) rely on Background App Refresh and, particularly when iOS suspends or terminates the app, notifications are not a certainty.The following factors are outside the control of Citrix.The following cases may affect the delivery of notifications:* The battery is low.Secure Mail is not used frequently (rarely opened into the foreground).* Emails received outside of core usage times in which the app is suspended for an extended period in the background; for example, between midnight and 6 a.m.Notifications are not delivered to Secure Mail in the following cases:
If the user closes Secure Mail, until the user manually reopens the app.If the system has terminated Secure Mail and the app has not been automatically restarted.When Secure Mail is not active.
Important note: Notifications may not be delivered to Secure Mail when it is not active for many reasons, including but not limited to the following cases:
If the device is in Low Power Mode and Secure Mail is in the background.  This is the most common case in which notifications are not delivered.If Background App Refresh is off for Secure Mail and if Secure Mail is in the background.

Note that users control this setting.If the device has poor network connectivity. This situation depends entirely on the iOS device.When Secure Mail does not receive a notification, Secure Mail does not sync new data to the device. As a consequence, the following situations occur:Secure Mail syncs data only when users bring the app to the foreground.Lockscreen notifications stop occurring for new mail.
The issue will occur if the user is not associated to any Delivery Group and All Users Delivery Group is disabled.
It can cause because of the following reasons
Device ID is wrong.
Google Account is not configured on any Android Device.
Google Account is Blocked.
Looked through the logs and found this warning.samsungmdm.Check:Samsung Knox is missing a KLMS license
Netscaler was unable to resolve the URL - abc.example.com
GPS Notification Tray popup on Secure Hub Android.Although GPS service is NOT enabled or deployed from XMS.
Secure Hub is crashing because it is trying to load too much data from a cursor as shown in the warning below.04-26 15:38:22.381 28639-28639/? W/CursorWindow: Window is full: requested allocation 4198757 bytes, free space 2096623 bytes, window size 2097152 bytesThe icon size of the  Weblink file is 4,198,757 KB, causing Secure Hub to crash.
Issue with browser compatibility (Chrome version 57.0.298)
User account exceeds the maximum number of partnership allowed in exchange by default.
Known issue with current release of XenMobile
From XM-10 onwards, we use userIDs not usernames for checking out licenses.Licenses are still associated to usernames which were from MDM 9 .
Identify the last changes for the CA server -mostly it could be the server patching
> Scheduling policy is set to every 480 Mins (~ 8hrs), however, it depends on latency, device network connectivity etc when the schedule is triggered. - If the device is not connected at that time the resources won't be updated on the devices.
Known issue with the XenMobile server 10.5.0
Secure Mail sync over a STA connection does not function properly with NetScaler 12.0 Build 41.16
When user change facility code, app get response back with url scheme “vce://***”. App is not opening that URL, as APP URL schemes is not set.
Allowed URL's in MDX polices contains double comma separating URL's
possible issues with how secure web public version reads the HTML format compared to the Enterprise versions
"Shared devices enroller" RBAC permission was configured for users
This is due to Google update of 2017 for Android devices which changed the functionality of Citrix Secure Mail.
Reference Articles

Secure Deployment Guide for the Citrix Cloud Platform: https://docs.citrix.com/en-us/citrix-cloud/overview/get-started/secure-deployment-guide-for-the-citrix-cloud-platform.html	 Citrix Cloud Connector Technical Details: https://docs.citrix.com/en-us/citrix-cloud/citrix-cloud-connector/technical-details.html	 Internet Connectivity Requirements: http://docs.citrix.com/en-us/citrix-cloud/overview/requirements/internet-connectivity-requirements.html	 Citrix Cloud Overview: https://docs.citrix.com/en-us/citrix-cloud/overview.html	 Configuring the NetScaler Gateway by Using Wizards: https://docs.citrix.com/en-us/netscaler-gateway/11/install/ng-config-ng-with-wizards-con.html	 Creating a Traffic Policy: https://docs.citrix.com/en-us/netscaler-gateway/11/vpn-user-config/how-traffic-policies-work/ng-create-traffic-policy-tsk.html	 How to Generate and Install a Public SSL Certificate on a NetScaler Appliance: https://support.citrix.com/article/CTX109260	 How to Configure LDAP Authentication on NetScaler or NetScaler Gateway: https://support.citrix.com/article/CTX108876	 XenMobile Configuration & Troubleshooting: https://support.citrix.com/pages/xenmobile-experts

Citrix Cloud Connector Troubleshooting Guide: https://support.citrix.com/article/CTX221535
> Found under the delivery groups - All users group was disabled.
The CA certificate is not trust
The user and group information is missing from the local server. This can be because the server was initially configured for advanced enrollments or the local user and group information was removed.
VPP Baseline Sync Interval value was greaterStale reference of the Deleted VPP app under the XenMobile Database
No ServerID configured for relevant ACNODEID
The system time is not accurate on Xenmobile, which caused this problem.
The certificate entry might have gone corrupted in the Database.
If you are using older version of servers you can refer to the following link for more information - https://www.citrix.com/blogs/2014/01/17/xenmobile-enable-hdx-apps-with-certificate-based-authentication/
SHP option not coming up in RBAC.
Known issue.  Cloud team is actively working on a fix
Wifi/SCEP enrollment not working with XenMobile
The box for "Force license association to device" was not checked.
This configuration settings above should not be confused with the Assignment options which will appear later in the configuration.When configuring the Assignment options, this is where you can choose to restrict membership of the new RBAC Group based on Active Directory Group Membership.Such restrictions should not be configured on the 'Role Info' section as described in this article.
wrong instance name in ADS record on xenmobiletools.citrix.com
Missing Actions in Allowed URLs
A new CAS server has a different fdqn and the NSG needs to be able to redirect traffic to it.
Expected Behaviour. We need to wait for the server to pick up device from Apple before attempting to re-enroll the device.
Citrix Documentation - REST APIsHow to use XenMobile REST API using PowerShell: https://support.citrix.com/article/CTX220486
This issue appears under the following circumstances- On-prem NetScaler in place for gateway connections- Hosted NetScaler for XenMobile LB and CS.- Web Links for HTTP sites.The Content Switch on the hosted NetScaler as "SSL Redirect" enabled by default
The issue is caused by db connections reset when a user tries to download an app but XenMobile Server retries the same connection again.
Applications not deployed
Deployment Schedule was set to every connection
The Restricted open-in exception list.did not have any entries in it.
Multiple FQDN's were using the same public IP - > Checked that the XMS FQDN - "xms.example.com" resolved to this public IP - 4.4.4.4 - Gateway FQDN - "nsg.example.com" resolves to - 4.4.4.5 > When tried doing the nslookup for 4.4.4.4, found that the name was resolving to "mail.examle.com" > When did a nslookup with "mail.example.com", got three public IP's - 4.4.4.34.4.4.44.4.4.5
Possible causes for this issue -1. If the original XMS server was standalone, we have not enabled the clustering feature and we are using a different IP configurations for new XMS (database store's the network information)2. If we are trying to reach the database with invalid username and/or password.3. We are putting a different pki credentials than what is being used originally.In this case, when trying to point the new VM (.ova file in vmware) to the existing Database, providing the incorrect/different PKI credentials than what was used originally.
For iOS: We can search the app and when we save it post assigning delivery groups, we get internal 500 error.Removed the description from Application and application got added successfully.​
Captured the logs which shows below errorsException (exid:15B17E527CD-45538AB6BF6203C28746E90B93B556EB): org.owasp.esapi.errors.ConfigurationException: java.lang.IllegalArgumentException: Classname cannot be null or empty. HTTPUtilities type name cannot be null or empty.2017-03-28T19:29:09.737-0700 |   | ERROR | http-nio-14443-exec-9 | org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/].[Unified console Jersey Web Application] | Servlet.service() for servlet [Unified console Jersey Web Application] in context with path [] threw exception [org.owasp.esapi.errors.ConfigurationException: java.lang.IllegalArgumentException: Classname cannot be null or empty. HTTPUtilities type name cannot be null or empty.] with root causejava.lang.IllegalArgumentException: Classname cannot be null or empty.    at org.owasp.esapi.util.ObjFactory.make(ObjFactory.java:67)2. For Android: The device for which the device ID was configured on XenMobile console was not compatible with the application.
Sometimes, there are additional entries which comes up during migration or upgrade.Some historical data presents in DB.
Firewall blocking access to required ports 2195 and 2196 for APNS communication.
Samsung limitation.This behavior is expected for devices that doesn’t support multi-window mode.
The DNS suffix and background network service gateway in app mdx policy was not configured correctly.
Currently, iOS is only supported for biometric authentication.
Issue was particularly with capital entries in the pna for POSTGRESQL database.
STA missing for XenApp Delivery Controllers in the Netscaler Gateway VIP.
Having the XenMobile Server Property "zdm.mag.max.device.ids.asked" set to too high a value can cause these errors.When set to a value over 2000, this will cause SQL Queries to be generated by XMS which can not be serviced by the SQL Server.Instead of successfully executing the query, an error message will be generated if the number of parameters in the query exceeds 2000
By Default, these properties are set to False/not enabled.
Configure ShareFile StorageZone Connectors in XenMobile 10.5 - Introduction - http://support.citrix.com/article/CTX221595
Configure ShareFile StorageZone Connectors in XenMobile 10.5 - Server Configuration – http://support.citrix.com/article/CTX221596
Configure ShareFile StorageZone Connectors in XenMobile 10.5 - Controller Connection - http://support.citrix.com/article/CTX221597
Configure ShareFile StorageZone Connectors in XenMobile 10.5 - StorageZone Connector Configuration - http://support.citrix.com/article/CTX221598
Error: "The remote server returned an error 404 Not Found "when adding a SharePoint Connector in XenMobile 10.5 - http://support.citrix.com/article/CTX221599
Configure ShareFile StorageZone Connectors in XenMobile 10.5 - Introduction - http://support.citrix.com/article/CTX221595
Configure ShareFile StorageZone Connectors in XenMobile 10.5 - Server Configuration – http://support.citrix.com/article/CTX221596
Configure ShareFile StorageZone Connectors in XenMobile 10.5 - Controller Connection - http://support.citrix.com/article/CTX221597
Configure ShareFile StorageZone Connectors in XenMobile 10.5 - StorageZone Connector Configuration - http://support.citrix.com/article/CTX221598
Error: "The remote server returned an error 404 Not Found "when adding a SharePoint Connector in XenMobile 10.5 - http://support.citrix.com/article/CTX221599
Error: "This Functionality is Disabled" is displayed when trying to configure ShareFile Controller in XenMobile 10.5 - http://support.citrix.com/article/CTX221600
Configure ShareFile StorageZone Connectors in XenMobile 10.5 - Introduction - http://support.citrix.com/article/CTX221595
Configure ShareFile StorageZone Connectors in XenMobile 10.5 - Server Configuration – http://support.citrix.com/article/CTX221596
Configure ShareFile StorageZone Connectors in XenMobile 10.5 - Controller Connection - http://support.citrix.com/article/CTX221597
Configure ShareFile StorageZone Connectors in XenMobile 10.5 - StorageZone Connector Configuration - http://support.citrix.com/article/CTX221598
Error: "This Functionality is Disabled" is displayed when trying to configure ShareFile Controller in XenMobile 10.5 - http://support.citrix.com/article/CTX221600
Although the passcode is not set, the overall security policy is applied successfully. Therefor it is not seen as a failed policy upon refreshing. To ensure users are prompted to set a pin on every refresh (or next re-auth) you must set this setting to "on every connection".
In Xenmobile the renewal of certificates value was in days and the default value was set to 30  - so that the certificate can renew 30 days prior to expiry of the certificate .However the same property is using seconds as parameter in later schema Xenmobile 10+ . hence for all migrated instance the value is 30 seconds which is too low and hence the certificates are not renewed
https://docs.citrix.com/en-us/xenmobile-apps/10/about-secure-apps/secure-apps-delivery-administration.html#par_anchortitle_3f2e
The Deployment Condition: "Only when previous deployment has failed" was preventing these DeliveryGroups from being deployed again.Since the certificates will continue to be considered "installed".This setting should never be used for Certificate policies.
The Samsung SMS app (com.andoird.mms) defaults to 'Compose View' rather than 'Conversation List' view when opened.This behaviour is not due to Citrix Launcher but rather it is due to the default behaviour of the Samsung SMS app itself
Signing Private Key on Mac needs Access Control set to "Allow all applications to access this item".
LDAP connector on XMS / Gateway is unable to extract the Nested Groups from Active Directory.
CTX220875 - XenMobile 10.5: SmartAccess to HDX - Introduction and RequirementsCTX220877 - XenMobile 10.5: SmartAccess to HDX - How to configure SmartAccess Policy on XenApp and XenDesktop CTX220967 - XenMobile 10.5: XenMobile Server and SmartAccess FAQ CTX220876 - XenMobile 10.5: SmartAccess to HDX - How to Configure the XenMobile SAML Certificate to the StoreFront Store
Air Print option does not work with Secure Mail mail bodyNative email works fine.
CTX220875 - XenMobile 10.5: SmartAccess to HDX - Introduction and RequirementsCTX220877 - XenMobile 10.5: SmartAccess to HDX - How to configure SmartAccess Policy on XenApp and XenDesktop CTX220964 - XenMobile 10.5: SmartAccess to HDX - How to Configure Compliance Automated Actions in XenMobile CTX220967 - XenMobile 10.5: XenMobile Server and SmartAccess FAQ
CTX220875 - XenMobile 10.5: SmartAccess to HDX - Introduction and RequirementsCTX220877 - XenMobile 10.5: SmartAccess to HDX - How to configure SmartAccess Policy on XenApp and XenDesktop CTX220964 - XenMobile 10.5: SmartAccess to HDX - How to Configure Compliance Automated Actions in XenMobile CTX220967 - XenMobile 10.5: XenMobile Server and SmartAccess FAQ CTX220876 - XenMobile 10.5: SmartAccess to HDX - How to Configure the XenMobile SAML Certificate to the StoreFront Store
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Configure Office 365 with Secure Apps
1.           If you would like to sync Office 365 to Secure Mail application, make sure you have the below configuration in Secure Mail mdx policies along with the aforementioned mdx policies to enable the secure app interaction between Secure Mail and Office suite of apps.
Example: 			Secure Mail Exchange server: outlook.office365.com
Secure Mail User Domain: <enterprise office365 domain>			  Note: As Office is hosted in the cloud, you can have the App Network Access policy for Secure Mail set to Unrestricted.
The app is repeatedly trying to enumerate the path  /data/data/com.workflex.nice/databases and trying to lock and unlock various paths.
Hybrid apps also try to memory map various files which is not supported over the Citrix Encryption Driver.
Lack of recommended hardware size to manage workload
Some devices report IMEI ID intstead of Serial Number.
configuration issues
Com.Zenprise service on device will not start back once killed using Brush Tool.
How to use XenMobile MDX Service on Citrix Cloud:https://support.citrix.com/article/CTX220487  How to Configure Multiple Domains for XenMobile Service in Citrix Cloud.https://support.citrix.com/article/CTX220491  How to Configure Certificate Based Authentication for XenMobile Service in Citrix Cloud:https://support.citrix.com/article/CTX220479  How to Create Custom Android KeyStore for MDX App Wrapping:https://support.citrix.com/article/CTX220480
Additional API details: https://docs.citrix.com/content/dam/docs/en-us/xenmobile/10-2/Downloads/XenMobile-Public-API.pdfThe current article has been created leveraging the pointers defined by Ward Van Besien in his blog.
How to use XenMobile MDX Service on Citrix Cloud:https://support.citrix.com/article/CTX220487  How to Configure Multiple Domains for XenMobile Service in Citrix Cloud.https://support.citrix.com/article/CTX220491  How to Configure Certificate Based Authentication for XenMobile Service in Citrix Cloud:https://support.citrix.com/article/CTX220479  How to Create Apple Certificate and Provisioning Profile for MDX App Wrapping:https://support.citrix.com/article/CTX220481
https://docs.citrix.com/en-us/netscaler-gateway/10-5/ng-install-wrapper-con/ng-config-ng-with-wizards-con/ng-config-xenmobile-wizard-con.html
End users not added within the Storage zones Secure Forms groups
https://docs.citrix.com/en-us/xenmobile/10/xmob-device-policy-wrapper/xmob-device-policy-location.htmlhttps://docs.citrix.com/en-us/xenmobile/10-4/automated-actions.htmlhttps://docs.citrix.com/en-us/xenmobile/10-3/xmob-delivery-groups.html
In Secure Web we use the native UIWebview, which loads websites, and consumes memory . if website is loading more resources in memory then app gets closed out by OS itself due to high memory consumption, due to which OS is left with low memory for operation.
Password of Apple Developer account was changed and was not updated on XenMobile  server.
This error means that we do not have the proper certificate selected that matches the certificate used by the CA for signing the certificates.
The logs show that HTC API’s are not found:
htcmdm.ReallyCheck2:HTC MDM not foundhtcmdm.v2.Check:HTC MDM v2 not found
The space in root context (ldap settings) in XenMobile 9 will be carried over to the XenMobile 10 environment. This space will reside in the database and it causes a problem in XenMobile 10. This causes the users with inability to log in to Secure Home, view apps in XenMobile Store, as well as prevents admins to modify the LDAP connector in XenMobile 10.
Upgrading the trusted anchor certificates after enabling iOS bulk enrollment.
Certificate has that been requested (Client), does not match the CA used to sign the SA/User Certificate (Requesting)
There was only one Secure Mail application configured with "tunneled to internal" with the relevant mail settings (exchange server, domain) and the rest of applications settings were not populated and left as default.
Android Debug logs during these crashes or events will show the following SSL handshake errors:
08-09 16:53:25.307 2448 2448 D getSystemService: multiwindow_facade
08-09 16:53:25.347 2448 3197 W chromium: [WARNING:ssl_client_socket_openssl.cc(185)] Unmapped error reason: 267
08-09 16:53:25.347 2448 3197 E chromium: [ERROR:ssl_client_socket_openssl.cc(845)] handshake failed; returned -1, SSL error code 1, net_error -2
08-09 16:53:25.347 2448 3225 W CtxTFE : CtxEncLstat: Failed to get status, path
Citrix Developers have isolated this to the following Bug list from Google containing same errors: https://bugs.chromium.org/p/chromium/issues/detail?id=395638 https://bugs.chromium.org/p/chromium/issues/detail?id=395271 https://bugs.chromium.org/p/chromium/issues/detail?id=261677 Most of those Bugs are marked: Won't FIX by the Google Dev Teams as they have been addressed in newer versions of Android OS or Android WebView.
This problem is only seen during Apple DEP device enrollment and is caused by Safari not using the UTF-8 character set when users enter their credentials. Rather, Safari uses the local character set for the region instead of UTF-8, as is requested by the Enrollment URL Handler provided by the XenMobile server.
Device policies had been set by XenMobile server which prevented un-setting Secure Hub as a Device Administrator.The device had lost communication with XenMobile server for some unknown reason and so no new policy updates could be sent to the device.Could not factory reset device due to device policies in place.
A network trace of the issue will show a RST occurring after the AGServices/device_check. Directly after the AGServices/device_check you will see another request for the MDM IP on port 8443, checking the SRC and DST mac of this connection shows this to be an internal Netscaler check.This connection will fail with "certificate unsupported" shown in the trace. (ensure trace is decoded as SSL to see the error)Currently 4096bit certs are not supported for situations where the NS is the client and the server, such as this loopback style check.
http://sysdev.microsoft.com/en-us/Hardware/oem/docs/Device_Management/ActiveSync_configuration_service_providerhttps://technet.microsoft.com/en-us/library/dd335068(v=exchg.160).aspxhttps://docs.citrix.com/en-us/xenmobile/10/xmob-device-policy-wrapper/xmob-device-policy-exchange.html
On certain iOS devices, the IMEI device property contains spaces. You validate this by editing the device in the XenMobile Console.
Proxy server returning http 407 errors.NetScaler forwarding user domain as "NETSCALER".
XenMobile is read times out before a successful retrieval of the user can happen
ActiveSync limitation
The Server Property setting "xam.nsg.sso.simplified" is not implemented on client side code yet
If an IIP (Intranet IP), is enabled and bound to NetScaler Gateway, NetScaler will only map one IP per user connection for an user account on that Gateway.So if the user is authenticated and accessing resources on one device and attempts authenticate and access resources on another device with the same account. One of those devices will loose access to the resources due to the auth cookie being valid for only one user that is mapped to one IP.
Running MDXToolkit from non-default install location (like the Desktop).MDXToolkit installation path installs with lower case "d" instead of "D" for the /Data folder.
The configuration on Xenmobile server or database is not reachable The DNS FQDN is not resolvable Server node has become unresponsive and having high CPU utilisation the next line which we see it repeatedly over and over suggests so:Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [ew-dao.xml]: Invocation of init method failed; nested exception is org.hibernate.cache.CacheException: com.hazelcast.config.InvalidConfigurationException: Premature end of file.at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1482)at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:521)at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:458)at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
The S/MIME was disabled in the Secure Mail settings.
Firewall rule for XenMobile communication from XenMobile to License IP was hitting two rule. One was allowing and the other was denying.
Microsoft’s Policy Configuration Service Provider: https://msdn.microsoft.com/en-us/library/windows/hardware/dn904962(v=vs.85).aspxHow to Enroll your Windows device in XenMobile: https://docs.citrix.com/en-us/xenmobile/10-4/provision-devices/devices-enroll.html
Multiple apps (Secure Mail) found in the XenMobile Store which had the same App ID's.
These policies when your Mail Server is on the internal network proxies the connection to the Mail Server via the NetScaler Gateway
database deadlocks on the backend suggested a large amount sql queries towards the same portion of the DB causing any of the nodes from the cluster unresponsive
MDM enrollment were failing because Client Authentication was disabled under the SSL Parameters for the MDM LB vServer on port 443.This is causing the backend XenMobile server to fail to recognize the client's identity during enrollment, and sending an HTTP 417 Selective Wipe back to client, which terminates the enrollment process, followed by a selective wipe happening on the Secure Hub client.
The limit of ActiveSync devices for that account was reached (by default, only 10 devices are allowed to connect to a Exchange mailbox).
If the Sharefile configuration is enabled on AppController, QuickEdit will try to fetch a SAML token from Secure Hub to authenticate.However, if the Sharefile configuration is not complete, meaning that this SAML token will not be issued and passed to try to authenticate, QuickEdit will never be able to start, and will keep the device in a loop with Secure Hub, prompting the user to re-authenticate.This scenario will only work if the Sharefile SAML / SSO configuration between AppController, NetScaler Gateway, and the Sharefile Enterprise account is complete and successful. Refer to the following article to learn how to set this up: https://support.citrix.com/article/CTX208557
Devices getting authentication prompt (ldap username and password) too often due to the session timeout on the NetScaler Gateway being configured low (2 hours).
2195 and 2196 is blocked on Firewall. APNS connectivity is failing.
XenMobile had a modified instance name instead of the default instance name /zdmFor Eg. xm.example.com/mdm instead of xm.example.com/zdm
NetScaler Trace showed the Mail Server was responding with a "HTTP Error 503. The service is unavailable"OPTIONS /Microsoft-Server-ActiveSync HTTP/1.1Host: "ExchnageFQDN"User-Agent: Secure Mail/10.4.1 iPad/10.0.1Authorization: Basic ampvbmVzOg==Content-Length: 0Accept-Encoding: gzipConnection: keep-aliveHTTP/1.1 503 Service UnavailableContent-Type: text/html; charset=us-asciiServer: Microsoft-HTTPAPI/2.0Date: Fri, 18 Nov 2016 16:33:38 GMTConnection: closeContent-Length: 326<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd"><HTML><HEAD><TITLE>Service Unavailable</TITLE><META HTTP-EQUIV="Content-Type" Content="text/html; charset=us-ascii"></HEAD><BODY><h2>Service Unavailable</h2><hr><p>HTTP Error 503. The service is unavailable.</p></BODY></HTML>
If IIS is not configured to use a CTL, SSL client certificate authentication will fail with the 403.16 error condition. This error occurs because SChannel.dll wrongly considers the client certificate to be untrusted. (NOTE: Having no CTL in use is the default configuration of IIS 8.0. This is configured by having no SendTrustedIssuerList present or by setting SendTrustedIssuerList=0).In this scenario, the IIS log typically shows a value of 2148204809 in the sc-win32-status field. This translates to error code 0x800b0109, which is defined as CERT_E_UNTRUSTEDROOT.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
XMS 10.4.0.116 prevents users from filtering devices by Active Directory group if there is an ampersand (& symbol) in the AD group name.This issue was not present in XMS 10.3.6
https://support.citrix.com/article/CTX202982https://www.citrix.com/blogs/2015/03/13/mobility-experts-step-by-step-guide-to-clustering-xenmobile-10/https://docs.citrix.com/en-us/xenmobile/10/xmob-clustering.html
Incorrect configuration on Netscaler Gateway.
Inbound document exchange whitelist is hidden policy in .mdx file. We need to make this policy available manually.
US Desc: The app \M-b\M^@\M^\com.citrix.mail\M-b\M^@\M^] is already scheduled for management.Domain : MCMDMErrorDomainCode   : 12026Type   : MCFatalErrorParams : (    "com.citrix.mail")US Desc: The app \M-b\M^@\M^\com.citrix.mail\M-b\M^@\M^] is already scheduled for management.Domain : MCMDMErrorDomainCode   : 12026Type   : MCFatalErrorParams : (    "com.citrix.mail")This itself is an rare iOS issue where an enterprise app MDM would be stuck downloading an enterprise application.This can affect any MDM solution.
https://docs.citrix.com/en-us/xenmobile/10/xmob-configure-server-settings/xmob-settings-syslog.htmlhttps://www.splunk.com/en_us/download-5.htmlhttps://docs.splunk.com/Documentation/Splunk/6.5.0/Data/HowSplunkEnterprisehandlessyslogdata
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
There is currently an enhancement request in progress to workaround this issue.This is as per design from Microsoft for DeviceLock/MinDevicePasswordComplexCharacters:https://msdn.microsoft.com/en-us/library/windows/hardware/dn904962%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396#DeviceLock_MinDevicePasswordComplexCharacters1 - Digits only2 - Digits and lowercase letters are required3 - Digits, lowercase letters, and uppercase letters are required4 - Digits, lowercase letters, uppercase letters, and special characters are required
Secure Web is not supported (as well as Chrome desktop).
Wrong server mode set on XMS.No MAM functionality was used and no Netscaler in the environment.
unsupported for mobile devices to sync .pst Outlook Data filesOutlook Data Files (.pst) are used in Outlook clients to synchronise the data present in personal Storage table. These data are not present in Exchange Mailbox to synchronise with any clients including Secure Mail.
The Outlook application does not give a unique ID which XMM can use.
XenMobile Mail Manager by default uses protocol TLS 1.0 to establish a secure connection
With iOS 10, as per design you can only use one VPN at a time, either the device VPN or the micro VPN / per-app VPN created by the XenMobile App.  According to the edocs, https://docs.citrix.com/en-us/xenmobile-apps/10/secure-hub/ios-vpn.htmlNoteCitrix recommends leaving Secure Hub VPN enabled in environments where it is enabled by default. However, because iOS does not allow more than one VPN client to run on an iOS device at the same time, Secure Hub VPN cannot be used if another VPN app, such as Cisco AnyConnect or Citrix VPN app, needs to run on iOS devices in the XenMobile environment.
The Enrollment Global profile was configured to only allow 2 devices to be enrolled per user.
Citrix Discussions - After update to XenMobile 10.4 no ShareFile configuration possibleCitrix Discussions - XenMobile 10.4 error when editing delivery groups
This is a known issue that Microsoft is presently aware of.
The following article has been provided  https://support.microsoft.com/en-us/kb/3193474.
This is as per the design. Expired signing certificate are actually a digital signature cert for profiles. Digital signature of a profile is included in the profile data. Digital signature block contains information about the cert that was used to sign digitally, which is what iOS shows.
Issuing Server responding with a 403 Forbidden (blanket 'NO'), with no further discussion allowed
>_ Under the Credential provider - the provider was not selected.
Issue with database column OBJECT_SID column in ldap_group_role
Expected behavior.
https://docs.citrix.com/en-us/mdx-toolkit/10/xmob-mobile-app-policy-defaults/xmob-mdx-policies-ios.html
'Wait for configuration to complete setup' was turned ON in IOS bulk enrollment.
The template was still there and the notification type was selected as Jailbroken/rooted devices.
- However when we were selecting the notification trigger as "Device property - Jailbroken/Rooted", that template was not listed over there.
> That template only comes when we select the trigger type as event = Device jailbroken.
The notification template created to be detected only with the trigger type = "Event"
1800000 ( value is in seconds = 30 minutes)
The users have not followed the workarounds mentioned in this article - XenMobile Secure Hub 10.4 for iOS 10 issue.
Some devices are getting into the VPN loops while installing the new secure HUB.
XMS works as designed and complies with industry standards
Android behaviour - If the Passcode prompt comes into the device, users can skip it via clicking on back button or home button.
> To make sure this should not happen, administrator can set "Passcode security" under the passcode policy, and can mention the time under "Device lock grace period (minutes of inactivity)": In the list, click the length of time before users must enter a passcode to unlock a locked device. -
This is known issue and as per design. i.e. once a micro VPN or per app VPN is formed, on the device acting as hot spot;
The original XenMobile certificate certificate used with Cisco-ISE was invalid/expired.
The secure SQL should use the Hostname instead of the IP address.
Due to cached information(keywork _XM) the Wizard was not showing up from the beginning
According to documentation online, ActiveSync (protocol used for Secure Mail Exchange access) does not have access to these folders.
When we enter the enrolment URL,the device detect the server address and then move to next step which is entering username and password. But in the meantime when the user is entering the credentials we are getting the “profile not found ” error. The user is asked to enter the credentials and after the credentials are entered there Is a successful enrollment of the device.
CLI logsThe transaction log for database xdm is full. To find why the space in the log cannot be resused, see the log_reuse_wait_desc column in sys.databases which pointed that their is no space in the SQL server.
Android SDK was downloaded from the Android Studio and was installed directly under the Library Folder.
Secure Hub: Could not load the XenMobile Store
None - Misconfiguration
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Refer to https://support.apple.com/en-us/HT204460 for a workaround to suppress the notifications.
Trace showed "Duplicated devices" as part of a 403 response to the storeweb Querying the DEVICES table for the X-Citrix-Device-ID from trace result in two hits. This means two users/devices are using the same MAM id. Deletion of both devices, then re-enrol resolved the issue
DNS suffix is missing.
App store is disabled for IOS users
Microsoft Update KB3172614https://support.microsoft.com/en-us/help/24717/windows-8-1-windows-server-2012-r2-update-history
This issue can be caused due to database corruption or duplicate entries within the database. This can occur during XenMobile Server migration.
This is expected behaviour. Unless the Google account is not verified and registered on the Google server from the device side, it will not get added on Server.
When a VPP application is configured to use device association, only the server that reported the license usage receives the serial number of the device using the license from Apple. All other servers that access the same VPP token will receive the hidden message from Apple.In the case of the devices that are wiped locally and not at the console, XenMobile keeps the record for that device in the database as using licenses that are no longer in use which causes this issue.
Local time was off by 8 minutes on the XenMobile server, causing connectivity to be denied by Apple's server when importing the token file to the console.Logs were showing a HTTP 400 Bad Request when XMS was trying to connect to DEP:com.citrix.ios.bulkenrollment.impl.BulkEnrollmentServicesImpl | Received "Session Auth Token" response: BE request result: {httpCode=400, reason='Bad Request', cause='', content='timestamp_refusedBad Request'}
The "Device Enrollment Program User" created locally on XMS was missing permissions to enroll as shown in the logs:2016-09-09T15:10:40.586+0000 |   |  WARN | http-nio-10080-exec-61 | com.sparus.nps.ios.enroll.EnrollmentServlet | Enrollment authentication failed: User lacks permission to enroll
Cause 1:Doze feature on Samsung Galaxy S7 is preventing notifications from Secure MailCause 2:3rd Party app, Clean Master, is preventing the device from receiving notifications.
The Secure Mail for windows does not connect to exchange server. This is because the traffic goes through the micro VPN and there is connectivity issues with the SNIP to the exchanges server.
The Android and iOS devices connect fine with WM as the Network Access is “Unrestricted”. When they are connected via “Tunnelled to internal network”, they face the same issue as such.
On diagnosing found that the SSL cert used for exchange is of 4096 bits which is not supported with NS VPX for backend communication.
While changing the backend server certificate key size to 2048 bits was able to enroll the devices.
IE11 seems to have problems when uploading some APK files to XMS.The apk-tool version used for XenMobile10.7.0.20.
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Malformed Web enrollment service root URL.
Incorrect Subject/Domain name request to Issuing Server
XMS is unable to succesfully negotiate a request to the Issuing Server for a Client Certificate due to either an invalid/expired User/Service Account, or Invalid credentials for the required authentication method, recieving instead a HTTP Response 401 Unauthorized
Exclusion not added for the Issuing Server within the XMS Proxy configuration. Instead all traffic is forced to go through the Proxy Server where it is blocked from accessing its the Issuing Server
Remote host closed connection during handshake
Traffic to/from the Issuing Server and the XMS is blocked or the XMS server is timing out before we can successfully reach the Issuing Server
This is caused due to a resourcing issue on the XenMobile Server.
Matching bundle IDs
An enrollment profile limited the number of devices per user.
Configuration issue -split tunnel was enabledthe traffic policy settingsand expression were wrong
It is observed that, if there is a folder available on the network share then the following error is displayed when attempting to attach a document from the network share.
The following articles show all the commands generated on NetScaler by the wizard.  You can use these as a reference to look for misconfigurations.CTX205773 - Commands Generated by XenMobile Wizard on NetScaler - SSL OffloadCTX205771 - Commands Generated by XenMobile Wizard on NetScaler - SSL Bridge
Not able to push updates of applications to IOS devices.
The NetScaler Gateway is denying access and returning a NSC_VPNERR cookie with value 4002.The issue was with the LDAP authentication policy bound to the NetScaler Gateway, which wasn't fetching the AD user information correctly. This is causing the NetScaler session to be terminated.Logs are showing:07-29 15:37:50.210 D/"Secure Hub"(21203): "DETAIL    ( 5)","AuthMan:AGLegacyAuthImpl.processPostCredentialsResponse"07-29 15:37:50.210 D/"Secure Hub"(21203): "DETAIL    ( 5)","AuthMan:AgeeLogon.extractAuthenticationResult"07-29 15:37:50.210 D/"Secure Hub"(21203): "DETAIL    ( 5)","AuthMan:NSC_VPNERR cookie received 'NSC_VPNERR=4002' (LoginNotPermitted)"07-29 15:37:50.210 D/"Secure Hub"(21203): "DETAIL    ( 5)","AuthMan:AuthManException.gatewayErrorFromVpnCookie: The gateway response contained an NSC_VPNERR cookie with value '4002' (LoginNotPermitted)"07-29 15:37:50.210 D/"Secure Hub"(21203): "DETAIL    ( 5)","AuthMan:AgeeLogon.destroySession gatewayUrl='https://gateway.fqdn.com' proxyMode=ENTCVPN"
The roles assigned to the sharefile SAML SP were missing for the particular user.
This device comes with a specific version of Android System Webview than cannot be updated or removed. Installing the Play store webview makes no difference and local apps continue to use the system supplied version.Devices should never have more than one system webview installed. Issue is Hauwei specific - See chromium bug https://bugs.chromium.org/p/chromium/issues/detail?id=466818
CTX141685 - Secure Mail Test Tool
This is a public application hence it is already signed by Apple / Google and uploaded on their public App store.
iOS Devices were not supervised.
Samsung requires specific sites to be whitelisted on a clients Firewall.https://www.samsungknox.com/en/qa/our-corporate-devices-are-behind-firewall-how-do-i-enable-knox-devices-contact-samsung-servers
NetScaler does not trust the cert hence clients connected through Full VPN receive this error.
Incorrect format for adding bookmarksWe add it as: ”Search”,Google,http://www.google.com/,”Search”,Yahoo,http://www.yahoo.com/
Found that for that user the ActiveSync is not enabled for the mailbox.
MDX policy for Document Exchange in app is set to Restricted by default.We either need to change it to unrestricted or add the required filters for Restricted option.
Block SMS compose was turned ON in mdx policy settings.
The hotfixes listed in the Environment section of this article introduced virtualization support for new microprocessor features. These features were delivered by the processor vendors typically in the form of updated CPU microcode. These features were introduced as a mechanism to address the issues described in the following articles:
Citrix XenServer Multiple Security UpdatesCitrix XenServer Multiple Security UpdatesCitrix XenServer Security Update for CVE-2018-3639
This microcode can be obtained either through an update from your hardware vendor, or in the form of an updated microcode package in XenServer.
To check if a host is using the level of microcode that can cause this error, run the following command on the host console:
xen-cpuid | grep Host
The output looks like this:
Host b7ebfbff:77fef3ff:2c100800:00000121:0000000f:019cfffb:00000008:00000100:00000000:0c000000
If there are any non-zero values after the last colon (0c000000 in this example), you have both the microcode and version of Xen that causes VMs started on the host to be unable to live migrate during a rolling pool upgrade.
To check if an individual VM is unable to live migrate during an RPU, run the following command on the host console:
xe vm-list params=last-boot-CPU-flags,name-label power-state=running
The output looks like this:
name-label ( RW)             :  Guest-746
last-boot-CPU-flags ( RO): vendor: GenuineIntel; features: 17cbfbff-f7fa3223-2d93fbff-00000123-0000000f-019c4fbb-00000008-00000000-00001000-0c000000
If the final segment (0c00000 in this example) contains any non-zero values this VM cannot migrate during RPU.
Any virtual machines started on hosts that have both the hotfix and the appropriate microcode installed, can make use of these new microprocessor features. VMs with these new microprocessor features
Logs shows the following error.
May 16 13:24:37 myhost prepare_host_upgrade.py INFO: Creating answerfile
May 16 13:24:37 myhost prepare_host_upgrade.py DEBUG: Repo host: X.X.X.X
May 16 13:24:37 myhost prepare_host_upgrade.py DEBUG: ran ['ip', 'route', 'get', 'x.x.x.x']; rc 0
May 16 13:24:37 myhost prepare_host_upgrade.py DEBUG: STANDARD OUT:
May 16 13:24:37 myhost prepare_host_upgrade.py DEBUG: x.x.x.x dev xapi1  src x.x.x.x
May 16 13:24:37 myhost prepare_host_upgrade.py DEBUG:     cache
May 16 13:24:37 myhost prepare_host_upgrade.py DEBUG:
May 16 13:24:38 myhost prepare_host_upgrade.py INFO: x.x.x.x accessible via xapi1 (bond0)
May 16 13:24:38 myhost prepare_host_upgrade.py ERROR: Gateway parameter missing for static network configuration
May 16 13:24:38 myhost prepare_host_upgrade.py ERROR: There was an error in preparing the host for upgrade.
May 16 13:36:54 myhost logger: local-device-change DEVICE=sr0 ACTION=add
While checking the code, its trying to figure out the gateway to reach to the URL where the ISO on the NFS server is unpacked.Its checking the gateway from the PIF parameter on the host and its not getting it. Looking at the network object, every host have an additional storage network  without a gateway parameter on the same management network.
This issue can be seen if there are discrepancies between the Site assignment of the Target Device, the PVS Servers and the Store and vDisk.If there are multiple Sites in a Farm, a Target that belongs to Site-A must:
Acquire a bootstrap from a Server in Site-ALogin to a PVS Server in Site-ABe assigned a vDisk served from a PVS Server in Site-A
How to configure USB Passthrough with XenServer
How to Use SR-IOV Feature in XenServerHow to troubleshoot common SR-IOV related issuesSR-IOV support FAQ
For more information see, XenServer Product Documentation.
If you experience any difficulties, contact Citrix Technical Support.
How to troubleshoot XenServer USB Passthrough related issues
The update precheck stage failed with an unknown error. update: XS71ECU1012info: Retrieving key from file:///etc/pki/rpm-gpg/. http://10.x.x.x/update/exxxx/vdi/repodata/repomd.xml: [Errno -1] Gpg Keys not imported, cannot verify repomd.xml for repo XS71ECU1012Trying other mirror.
1. XenSource.log:Mar 19 09:06:42 xenserver-01 xapi: [error|xenserver-01|546383 |Async.VM.start R:e55e6fd0b035|xenops] Re-raising as SR_BACKEND_FAILURE_202 [ ; General backend error [opterr=rc: 21, stdout: , stderr: iscsiadm: No records found#012];  ]Mar 19 09:06:42 xenserver-01 xapi: [error|xenserver-01|546383 ||backtrace] Async.VM.start R:e55e6fd0b035 failed with exception Server_error(SR_BACKEND_FAILURE_202, [ ; General backend error [opterr=rc: 21, stdout: , stderr: iscsiadm: No records found#012];  ])
2. run cmd "xe pbd-list sr-uuid=<UUID of SR>"Cannot unplug the PBD via CLI, error code: SR_BACKEND_FAILURE_2023. Volume Group not found:4. Reboot the server, and the PBD became unplugged.5. The LUN can forget now.The LUN was attached to another VM after being attached to this xenserver pool.
none
AMD DocumentationHow to troubleshoot AMD MxGPU related issuesConfiguring Citrix XenServer 7.4 for Graphics
Configuring Citrix XenServer 7.4 for GraphicsNVIDIA vGPU Troubleshooting Guide  NVIDIA System Management Interface nvidia-smi
How to use AMD MxGPU with XenServer
[Cause Determination] When multipath detected failing path, driver qla2xxx will abort all I/O commands on the fail path then kernel have to stop related Multi-Queue.But .queue_rq() has been called for a queue, which has been already stopped, hence race condition occurred within dom0 kernel, then Kernel panic issue occurred.Say it in another words, due to a race condition in Control Domain (dom0) kernel, multipath failover on a storage repository (SR) can occasionally cause a host crash. [Cause Justification] [    949.365083]   WARN: RIP: e030:[]  [] dm_softirq_done+0xcc/0x220 [dm_mod]...[    949.365178]   WARN: Call Trace:[    949.365182]   WARN: [    949.365192]   WARN:  [] __blk_mq_complete_request+0xc1/0xe0[    949.365200]   WARN:  [] blk_mq_complete_request+0x1c/0x20[    949.365208]   WARN:  [] dm_complete_request+0x45/0x50 [dm_mod][    949.365215]   WARN:  [] end_clone_request+0x3a/0x40 [dm_mod][    949.365223]   WARN:  [] blk_finish_request+0x99/0xd0[    949.365240]   WARN:  [] scsi_end_request+0x153/0x1a0 [scsi_mod][    949.365250]   WARN:  [] scsi_io_completion+0x239/0x610 [scsi_mod][    949.365257]   WARN:  [] ? handle_irq_event_percpu+0x171/0x1e0[    949.365266]   WARN:  [] scsi_finish_command+0x108/0x120 [scsi_mod][    949.365276]   WARN:  [] scsi_softirq_done+0x128/0x140 [scsi_mod][    949.365282]   WARN:  [] blk_done_softirq+0x78/0x90[    949.365292]   WARN:  [] __do_softirq+0x129/0x290[    949.365297]   WARN:  [] irq_exit+0x42/0x90[    949.365306]   WARN:  [] xen_evtchn_do_upcall+0x35/0x50[    949.365313]   WARN:  [] xen_do_hypervisor_callback+0x1e/0x40[    949.365317]   WARN: [    949.365322]   WARN:  [] ? xen_hypercall_sched_op+0xa/0x20[    949.365329]   WARN:  [] ? xen_hypercall_sched_op+0xa/0x20[    949.365335]   WARN:  [] ? xen_safe_halt+0x10/0x20[    949.365342]   WARN:  [] ? default_idle+0x57/0xf0[    949.365347]   WARN:  [] ? arch_cpu_idle+0xf/0x20[    949.365354]   WARN:  [] ? default_idle_call+0x32/0x40[    949.365359]   WARN:  [] ? cpu_startup_entry+0x1ec/0x330[    949.365367]   WARN:  [] ? rest_init+0x77/0x80[    949.365375]   WARN:  [] ? start_kernel+0x45b/0x468[    949.365380]   WARN:  [] ? set_init_arg+0x57/0x57[    949.365386]   WARN:  [] ? x86_64_start_reservations+0x2a/0x2c[    949.365392]   WARN:  [] ? xen_start_kernel+0x4cf/0x4db[    949.365397]   WARN: Code: ff ff e9 67 01 00 00 48 8b 43 40 41 8b 5d 40 4d 8b ac 24 60 01 00 00 48 c1 e8 17 49 8b 7d 08 48 83 f0 01 83 e0 01 48 85 ff 74 1f 8b 57 08 84 c0 4c 8b 42 60 74 13 4d 85 c0 74 0e 89 da 49 8d[    949.365443]  ALERT: RIP  [] dm_softirq_done+0xcc/0x220 [dm_mod][    949.365452]   WARN:  RSP[    949.365455]   WARN: CR2: ffffc900401fc048[    949.397559]   WARN: ---[ end trace 83d98d148c168c0e ]---[    949.397564]  EMERG: Kernel panic - not syncing: Fatal exception in interrupt
Problem Cause
The new update that you are applying removes CPU features that were present in an earlier version of the microcode. You cannot migrate or resume a VM on a host that has had the features removed if the VM was previously using those features.
Now withdrawn hotfixes for CTX231390 - Citrix XenServer Multiple Security Updates supplied updated microcode produced by the CPU vendor, which enabled additional features to allow mitigation of the vulnerabilities. Subsequently, potential issues have been found with that microcode and tha latest updates for CTX231390 - Citrix XenServer Multiple Security Updates remove the microcode and the CPU features it contained.
Refer to the following Workload Balancing Administrator's guides for more information on Workload Balancing (WLB) for 7.1 LTSR:
Workload Balancing Quick Start Guide: https://docs.citrix.com/content/dam/docs/en-us/xenserver/7-1/downloads/xenserver-7-1-wlb-quick-start-guide.pdfWorkload Balancing Administrator Guide: https://docs.citrix.com/content/dam/docs/en-us/xenserver/7-1/downloads/xenserver-7-1-wlb-admin-guide.pdf
Additional versions' guides can be found under the XenServer Product Documentation: https://docs.citrix.com/en-us/xenserver.html
Refer to the following Workload Balancing Administrator's guides for more information on Workload Balancing (WLB) for 7.1 LTSR:
Workload Balancing Quick Start Guide: https://docs.citrix.com/content/dam/docs/en-us/xenserver/7-1/downloads/xenserver-7-1-wlb-quick-start-guide.pdfWorkload Balancing Administrator Guide: https://docs.citrix.com/content/dam/docs/en-us/xenserver/7-1/downloads/xenserver-7-1-wlb-admin-guide.pdf
Additional versions' guides can be found under the XenServer Product Documentation: https://docs.citrix.com/en-us/xenserver.html
This problem happens when the date on your system is older than the date of the gpg key (In this instance the 7.1 release date).
VIP’s go down and servers will flap.Interfaces will miss out from the configurationsh interface <10/1> command will show ‘Stalls’ and ‘Hangs’ in the output.eg:Interface 10/1 (10G vNIC Interface, pNIC 10/5) #0flags=0xe460 <ENABLED, UP, UP, HAMON, HEARTBEAT, 802.1q>MTU=1500, native vlan=1, MAC=x:x:x:x:x:x, uptime 0h34m32sActual: media FIBER, speed 10000, duplex FULL, fctl NONE, throughput 10000LLDP Mode: NONE,                 LR Priority: 1024 RX: Pkts(63484) Bytes(4422612) Errs(0) Drops(15467) Stalls(0)TX: Pkts(58915) Bytes(2474502) Errs(0) Drops(1) Stalls(67)NIC: InDisc(0) OutDisc(0) Fctls(0) Stalls(0) Hangs(2) Muted(0)Bandwidth thresholds are not set. Interface 10/2 (10G vNIC Interface, pNIC 10/6) #1flags=0x6640 <ENABLED, DOWN, down, HEARTBEAT, 802.1q>LACP <Active, Long timeout, key 2, priority 32768>MTU=1500, MAC=x:x:x:x:x:x, downtime 8h19m02sLLDP Mode: NONE,                 LR Priority: 1024 RX: Pkts(11762) Bytes(1144780) Errs(0) Drops(9694) Stalls(0)TX: Pkts(115) Bytes(14434) Errs(0) Drops(0) Stalls(4)NIC: InDisc(0) OutDisc(0) Fctls(0) Stalls(0) Hangs(3) Muted(0)Bandwidth thresholds are not set. corresponding eth interface mapping : eth2", "mtu" : 1500, "port" : "10/7"eth3", "mtu" : 1500, "port" : "10/8”eth5", "mtu" : 1500, "port" : "10/6"                      <-----------------     This wil be marked as DOWN on VPXeth4", "mtu" : 1500, "port" : "10/5" newnslogs shows below info:ns.log.8:Oct 29 21:55:58 <local0.notice> 10.x.x.x/29/2017:16:25:58 GMT hostname 0-PPE-2 : default EVENT DEVICEDOWN 3168881 0 :  Device "interface(10/2)" - State DOWNns.log.8:Oct 29 21:55:58 <local0.notice> 10.x.x.x 10/29/2017:16:25:58 GMT hostname 0-PPE-1 : default EVENT DEVICEDOWN 3212975 0 :  Device "interface(10/2)" - State DOWNns.log.8:Oct 29 21:55:58 <local0.notice> 10.x.x.x 10/29/2017:16:25:58 GMT hostname 0-PPE-0 : default EVENT DEVICEDOWN 1351999 0 :  Device "interface(10/2)" - State DOWN Xenserver kernlog shows below info:cat kern.log | grep "Detected Tx Unit Hang"Oct 28 21:13:38 netscaler-sdx kernel: [11487774.550966] ixgbe 0000:08:00.1 eth3: Detected Tx Unit HangOct 28 23:26:42 netscaler-sdx kernel: [  368.183337] ixgbe 0000:0b:00.1 eth5: Detected Tx Unit HangOct 29 09:36:20 netscaler-sdx kernel: [36946.735328] ixgbe 0000:0b:00.1 eth5: Detected Tx Unit Hang Fake hang logs:eg:Oct 23 05:50:35 netscaler-sdx kernel: [11000391.898410] ixgbe 0000:0b:00.0 eth4: Fake Tx hang detected with timeout of 80 secondsOct 23 06:21:20 netscaler-sdx kernel: [11002236.890412] ixgbe 0000:0b:00.0 eth4: Fake Tx hang detected with timeout of 80 secondsOct 23 06:50:46 netscaler-sdx kernel: [11004003.034410] ixgbe 0000:0b:00.0 eth4: Fake Tx hang detected with timeout of 80 secondsOct 23 07:21:31 netscaler-sdx kernel: [11005848.026412] ixgbe 0000:0b:00.0 eth4: Fake Tx hang detected with timeout of 80 secondsOct 23 07:49:37 netscaler-sdx kernel: [11007534.042409] ixgbe 0000:0b:00.0 eth4: Fake Tx hang detected with timeout of 80 secondsOct 23 08:17:42 netscaler-sdx kernel: [11009219.034410] ixgbe 0000:0b:00.0 eth4: Fake Tx hang detected with timeout of 80 seconds
There are multiple possible causes for this issue:
The provided host credentials were not correct. You’re using a web browser that is not supported, such as IE 11. Issue may also happen on supported web browser. This is because we pass some critical information from the machine details tab to the new console tab, to prevent this information from being hacked, we send it as a secure message only once when the new tab is loaded. It may happen sometime that this message may not reach the console tab and cause the error as reported.
Changed Block Tracking Developer Guide
Bonds are not supported on NICs that carry FCoE traffic. Even if there are no Storage devices on FCoE, make sure the FCoE services are not running.
According to analysis result of Dom0.log, Kernel is encountering error "unable to handle kernel paging request" due to defect of driver be2net when calling be_xmit() function, then kernel panic occurred.Dom0.log: [50326137.331440]  ALERT: BUG: unable to handle kernel paging request at 0000000067a46e94 <------------- kernel panic error[50326137.331453]  ALERT: IP: [<ffffffffa016fdc3>] be_xmit+0xb13/0xd70 [be2net]...[50326137.331568]   WARN: RIP: e030:[<ffffffffa016fdc3>]  [<ffffffffa016fdc3>] be_xmit+0xb13/0xd70 [be2net]  <------------- defect of driver be2net when calling be_xmit function for data transmition...[50326137.331643]   WARN: Call Trace:[50326137.331645]   WARN:  <IRQ> [50326137.331649]   WARN: [50326137.331654]   WARN:  [<ffffffff8144ee99>] dev_hard_start_xmit+0x309/0x4c0[50326137.331658]   WARN:  [<ffffffff8144ee99>] ? dev_hard_start_xmit+0x309/0x4c0[50326137.331667]   WARN:  [<ffffffff8146bd94>] sch_direct_xmit+0x84/0x1d0[50326137.331671]   WARN:  [<ffffffff8146bffe>] __qdisc_run+0x11e/0x140[50326137.331675]   WARN:  [<ffffffff8144f2a5>] dev_queue_xmit+0x255/0x490[50326137.331683]   WARN:  [<ffffffffa02684c2>] netdev_send+0x92/0xc0 [openvswitch][50326137.331690]   WARN:  [<ffffffffa0266716>] ovs_vport_send+0x26/0x90 [openvswitch][50326137.331696]   WARN:  [<ffffffffa025d4b2>] do_output+0x42/0x50 [openvswitch][50326137.331702]   WARN:  [<ffffffffa025e0b1>] do_execute_actions+0xb91/0xbd0 [openvswitch][50326137.331709]   WARN:  [<ffffffffa026557d>] ? masked_flow_lookup+0xbd/0x120 [openvswitch][50326137.331717]   WARN:  [<ffffffffa02c1630>] ? iscsi_complete_pdu+0x60/0x80 [libiscsi][50326137.331723]   WARN:  [<ffffffff813634ae>] ? info_for_irq+0xe/0x20[50326137.331729]   WARN:  [<ffffffffa025e182>] ovs_execute_actions+0x92/0xe0 [openvswitch][50326137.331735]   WARN:  [<ffffffffa025f590>] ovs_dp_process_received_packet+0xf0/0x130 [openvswitch][50326137.331742]   WARN:  [<ffffffff810841f1>] ? ttwu_do_activate+0x51/0x60[50326137.331749]   WARN:  [<ffffffffa026623a>] ovs_vport_receive+0x2a/0x30 [openvswitch][50326137.331756]   WARN:  [<ffffffffa02681cf>] netdev_frame_hook+0xef/0x110 [openvswitch][50326137.331763]   WARN:  [<ffffffffa02680e0>] ? get_dpdev+0x30/0x30 [openvswitch][50326137.331767]   WARN:  [<ffffffff8144fa4c>] __netif_receive_skb_core+0x56c/0x740[50326137.331774]   WARN:  [<ffffffff8100a080>] ? xen_clocksource_read+0x20/0x30[50326137.331779]   WARN:  [<ffffffff810a080f>] ? __getnstimeofday+0x3f/0xd0[50326137.331783]   WARN:  [<ffffffff8144fc8b>] __netif_receive_skb+0x6b/0x80[50326137.331787]   WARN:  [<ffffffff8144feb8>] netif_receive_skb+0x78/0x80[50326137.331792]   WARN:  [<ffffffff813d4243>] xenvif_tx_action+0x1683/0x17f0[50326137.331799]   WARN:  [<ffffffff812d28fb>] ? radix_tree_lookup+0xb/0x10[50326137.331803]   WARN:  [<ffffffff813634ae>] ? info_for_irq+0xe/0x20[50326137.331809]   WARN:  [<ffffffff8100fea0>] ? xen_smp_send_reschedule+0x10/0x20[50326137.331814]   WARN:  [<ffffffff81084071>] ? check_preempt_curr+0x41/0x90[50326137.331818]   WARN:  [<ffffffff810841f1>] ? ttwu_do_activate+0x51/0x60[50326137.331825]   WARN:  [<ffffffff81506bde>] ? _raw_spin_unlock_irqrestore+0x1e/0x30[50326137.331829]   WARN:  [<ffffffff810873e4>] ? try_to_wake_up+0x254/0x270[50326137.331834]   WARN:  [<ffffffff81087412>] ? default_wake_function+0x12/0x20[50326137.331840]   WARN:  [<ffffffff81078416>] ? autoremove_wake_function+0x16/0x40[50326137.331846]   WARN:  [<ffffffffa01673b2>] ? be_eq_notify+0x52/0x80 [be2net][50326137.331851]   WARN:  [<ffffffff8107fe53>] ? __wake_up_common+0x53/0x90[50326137.331856]   WARN:  [<ffffffff81506bde>] ? _raw_spin_unlock_irqrestore+0x1e/0x30[50326137.331861]   WARN:  [<ffffffff81083883>] ? __wake_up+0x53/0x70[50326137.331865]   WARN:  [<ffffffff810013aa>] ? xen_hypercall_sched_op+0xa/0x20[50326137.331870]   WARN:  [<ffffffff813d62f8>] xenvif_poll+0x48/0x80[50326137.331873]   WARN:  [<ffffffff81450694>] net_rx_action+0xc4/0x1f0[50326137.331879]   WARN:  [<ffffffff8105b90a>] __do_softirq+0x10a/0x220[50326137.331884]   WARN:  [<ffffffff810d3662>] ? handle_edge_irq+0xf2/0x100[50326137.331889]   WARN:  [<ffffffff815105dc>] call_softirq+0x1c/0x30[50326137.331894]   WARN:  [<ffffffff810140a0>] do_softirq+0x50/0xa0[50326137.331898]   WARN:  [<ffffffff8105b3cd>] irq_exit+0x4d/0xa0[50326137.331903]   WARN:  [<ffffffff81363325>] xen_evtchn_do_upcall+0x35/0x50[50326137.331907]   WARN:  [<ffffffff8151063e>] xen_do_hypervisor_callback+0x1e/0xa0[50326137.331911]   WARN:  <EOI> [50326137.331913]   WARN: [50326137.331915]   WARN:  [<ffffffff810013aa>] ? xen_hypercall_sched_op+0xa/0x20[50326137.331919]   WARN:  [<ffffffff810013aa>] ? xen_hypercall_sched_op+0xa/0x20[50326137.331924]   WARN:  [<ffffffff81009b90>] ? xen_safe_halt+0x10/0x20[50326137.331928]   WARN:  [<ffffffff8101a735>] ? default_idle+0x65/0xc0[50326137.331933]   WARN:  [<ffffffff8101a418>] ? arch_cpu_idle+0x18/0x30[50326137.331938]   WARN:  [<ffffffff8109e636>] ? cpu_startup_entry+0x1a6/0x210[50326137.331943]   WARN:  [<ffffffff814f3322>] ? rest_init+0x72/0x80[50326137.331950]   WARN:  [<ffffffff81ad018f>] ? start_kernel+0x3ef/0x400[50326137.331955]   WARN:  [<ffffffff81acf8e0>] ? repair_env_string+0x70/0x70[50326137.331959]   WARN:  [<ffffffff81acf56e>] ? x86_64_start_reservations+0x2e/0x40[50326137.331964]   WARN:  [<ffffffff81ad3241>] ? xen_start_kernel+0x7a1/0x7c0[50326137.331968]   WARN: Code: 24 68 48 01 82 58 40 00 00 41 8b 84 24 d0 00 00 00 48 8b 8d 78 ff ff ff 49 03 84 24 d8 00 00 00 48 8b 9d 78 ff ff ff 48 8b 71 08 <0f> b7 50 04 b8 01 00 00 00 66 85 d2 0f b7 ca 48 0f 45 c1 48 01 [50326137.332008]  ALERT: RIP  [<ffffffffa016fdc3>] be_xmit+0xb13/0xd70 [be2net][50326137.332014]   WARN:  RSP <ffff880180a03600>[50326137.332017]   WARN: CR2: 0000000067a46e94[50326137.365482]   WARN: ---[ end trace bfcc3eb1efe4cba1 ]---[50326137.423857]  EMERG: Kernel panic - not syncing: Fatal exception in interrupt
Below hotfix has been applied on standalone host only, but not applied on existing pool.Hence,  patch level of standalone host is mismatching with existing pool, then error Patches applied differ occurred when adding standalone hostXS65E016 : 1b64f57bc-b0b7-4773-89e0-4d6e82f47457
Unknown damage occurred to the PDB(s) and because of this storage would not reconnect to the host.
be2net driver issue[Details]
Potential race on hb_sent between be_check_fw_health() andbe_async_cmd_process(). There is a chance that the hb_sentwill be always true when CNTL_ATTRIB command completionprocessed before setting hb_sent to true in be_check_fw_health().Due to this race, driver thinks that there is no response from theIOCTL from FW and throws an error "Error in FW card".
Also, if the mcc_lock mutex is interrupted, then we are not releasingrtnl_lock().
Fix is to set hb_sent to true before invoking the "be_cmd_check_fw_health"and release the rtnl_lock when mcc_lock mutex is interrupted.
Excessive input/output from a process could trigger a SCSI target reset while the process is still ongoing. This leads to tapdisk logs reporting invalid request type and/or invalid number of segments, and filling up the Dom0 log partition. This issue occurs due to a race condition that leads to an incorrect reference count.
The CVM had a service failure that would cause it to reject iSCSI connections upon first boot post power failure.
CTX121442 – How to Configure Serial Console Access on XenServer 6
XenServer Product Documentation
If you experience any difficulties, contact Citrix Technical Support.
Older version of RPU004 package in the installation directory of XenCenter.
Issue occurred due to systemd defect, which has been addressed and fixed in below:https://rhn.redhat.com/errata/RHBA-2016-2216.htmlBackport memory leak bug fixes:https://bugzilla.redhat.com/show_bug.cgi?id=1331667
The issue occurrence logic is figured out as below,
Initially, customer created a resource in Studio > Hosting with Network "eth2" in XenServer.Later, customer created a XenServer NIC Bond with Network "eth2" and "eth3". Therefore, when creating the machine catalog, "eth2" is no longer a standalone NIC but a slave NIC of the NIC Bond.According to behavior of XenServer Bond Slave, it is still possible to create a VIF based on the Network of a bond slave. However, it is not possible to start such a VIF’s VM if this would need a bond slave to be plugged. Since starting such a VIF’s VM on a host would need a bond slave to be plugged, it's not possible to perform this action on any xenserver. Therefore, to start the Preparation VM attached with "eth2" will fail with exception CANNOT_PLUG_BOND_SLAVE on XenServer level and MCS creation failed with error NO_HOSTS_AVAILABLE​.
Password was changed for the CIFS library.
due to the inode usage in the /dev/sda1 partition is high (Can be verified with df -i command)
https://docs.citrix.com/content/dam/docs/en-us/xenserver/xenserver-7-0/downloads/xenserver-7-0-installation-guide.pdf
Host name could not be resolved of remote host
Xenserver is taking the date/time settings from hardware clock
https://lists.debian.org/debian-user/2006/09/msg00532.htmlhttps://en.wikipedia.org/wiki/VESA_BIOS_Extensions#Linux_video_mode_numbers
This behavior happens when  you have large number of files ( Notification and messages files in xencenter are stored) in /var/xapi/blobs. Actually at 72% the upgrade is not stuck, its progressing, its trying to Restore all your previous performance related information. You can check this by press Alt+F3  while you see it is stuck at 72%.
How to Manage Scheduled SnapshotsHow to Revert VMs to Scheduled SnapshotsHow to Troubleshoot Scheduled Snapshots issues
Troubleshooting XenCenter Proxy Authentication Issues
How to Create Scheduled SnapshotsHow to Manage Scheduled SnapshotsHow to Revert VMs to Scheduled Snapshots
How to Configure Proxy Server Authentication in XenCenter
How to Create Scheduled SnapshotsHow to Manage Scheduled SnapshotsHow to Troubleshoot Scheduled Snapshots issues
How to Create Scheduled SnapshotsHow to Revert VMs to Scheduled SnapshotsHow to Troubleshoot Scheduled Snapshots issues
No default SR was set on pool
When exporting the VM, transfer VM of 7.0 version was getting created.
The hostfile name was incorrect.
We found that in kernel compact layer, Gen6 devices were explicitly disabled:
#define SA_CONTROLLERS_GEN6 0
There were unwanted extra NIC's on master host
CD was inserted
Event ID 129 means storage device is encountering timeout issue. And there're tap-ctl errors on Dom0, which indicated read request failed at the same time. Hence, this issue occurred due to too much Disk I/O read request has been performed at the same time, need performance tuning regarding disk I/O.
https://blogs.msdn.microsoft.com/ntdebugging/2011/05/06/understanding-storage-timeouts-an.d-event-129-errors/Windows I/O uses a layered architecture where device drivers are on a “device stack.”  In a basic model, the top of the stack is the file system.  Next is the volume manager, followed by the disk driver.  At the bottom of the device stack are the port and miniport drivers.  When an I/O request reaches the file system, it takes the block number of the file and translates it to an offset in the volume. The volume manager then translates the volume offset to a block number on the disk and passes the request to the disk driver. When the request reaches the disk driver it will create a Command Descriptor Block (CDB) that will be sent to the SCSI device.  The disk driver imbeds the CDB into a structure called the SCSI_REQUEST_BLOCK (SRB).  This SRB is sent to the port driver as part of the I/O request packet (IRP).
NVIDIA driver are not able to manage resources well.
xensource.org bug
No storage attached to the host
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Kernel memory is required to be a contiguous block of a certain size, memory allocation failure may occurred due to high consummation or fragmentation. Hence, kernel memory tuning is required.
If you have a VM imported from a previous version of XenServer into higher version there could be an issue with the VM template hence by creating diskless VM on the XenServer host will use new template.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
XS was booting in trusted mode and the memory setting for trusted mode was 4Gb.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
nvidia k2 grid h/w error or driver errorkern.log:Dec 22 16:36:02  kernel: [9687906.097043] NVRM: Xid (PCI:0000:0f:00): 32, Channel ID 00000033 intr 02000000 Dec 22 16:36:02  kernel: [9687906.097214] NVRM: Xid (PCI:0000:0f:00): 32, Channel ID 00000033 intr 02000000 Dec 22 16:36:02  kernel: [9687906.097384] NVRM: Xid (PCI:0000:0f:00): 32, Channel ID 00000033 intr 02000000 Dec 22 16:36:02  kernel: [9687906.097554] NVRM: Xid (PCI:0000:0f:00): 32, Channel ID 00000033 intr 02000000 Dec 22 16:36:02  kernel: [9687906.097723] NVRM: Xid (PCI:0000:0f:00): 32, Channel ID 00000033 intr 02000000 Dec 22 16:36:02  kernel: [9687906.097901] NVRM: Xid (PCI:0000:0f:00): 32, Channel ID 00000033 intr 02000000 Dec 22 16:36:02  kernel: [9687906.098091] NVRM: Xid (PCI:0000:0f:00): 32, Channel ID 00000033 intr 02000000 Dec 22 16:36:02  kernel: [9687906.098263] NVRM: Xid (PCI:0000:0f:00): 32, Channel ID 00000033 intr 02000000 This issue occurred due to GRID K2 vGPU hardware failure, which PCI ID is 0000:0f:00
HBA offline
license server
http://discussions.citrix.com/topic/385192-fresh-xs-71-install-no-windows-2016-server-template/
There is a rule on NFS storage server that turn the storage into read only mode after usage exceed 90%.
Xapi not working.
The error messages indicated the cause.The last mount time Feb 27 16:19:54 2017 was from the VM running with the current time.The incorrect date, Feb 17 2017, was taken by the VM from the XenServer host at boot time.
Citrix Discussions - xenserver 7 issue with IBM DS3500 SAS
XenServer PVS-Accelerator Introduction and Requirements  XenServer PVS-Accelerator Cache Storage ConsiderationsHow to change control domain memory using XenCenter in XenServer 7.1 and higherHow to Configure XenServer PVS-AcceleratorHow to troubleshoot XenServer PVS-Accelerator
XenServer PVS-Accelerator Cache Storage ConsiderationsHow to Configure XenServer PVS-Accelerator
XenServer Live Patching Introduction  How to troubleshoot XenServer Live Patching
/etc/cron.d/ringwatch failed due to overhead error after xenserver keep running for long time and vbd performance statistics data value exceeds 4294967295 crontab details：# cat /etc/cron.d/ringwatchPATH=/bin:/usr/sbin:/usr/bin:/sbin*/2 * * * * root xen-ringwatch check -T3 --kick | logger -p daemon.crit -t RINGWATCH-ALERTIssue occurred due to limitation of python script within /etc/cron.d/ringwatch
XenServer Live Patching Introduction  How to enable Live Patching using XenCenter and the xe CLI
Citrix XenServer on Nutanix Administration GuideXenServer-Nutanix Integration Introduction
XenServer PVS-Accelerator Introduction and Requirements  XenServer PVS-Accelerator Cache Storage ConsiderationsHow to change control domain memory using XenCenter in XenServer 7.1 and higherHow to Check PVS-Accelerator Cache Status
Turn off debug logging to syslog server
A buggy implementation of PML in Xen is causing the issue.
Issue is due to the configurations settings from Microsoft on vss time out value of 10 seconds which is hard coded.
Lower memory free on the DOM0
Error - The SR operation cannot be performed because a device underlying the SR is in use by the server while trying to create new HBA SR using XenCenterNote - Make sure the SR is not attached with any other XenServer Pool or is not in use by any other environmentProbe returns below error SMlogs show 'Article https://support.citrix.com/article/CTX122233 is not applicable in XS 7.0 as /opt/xensource/sm/mpathutil.py script doesn't contain the remove code which was included in XS 6.x versionsMissing code def remove(scsi_id):    paths=mpath_cli.list_paths(scsi_id)    mpath_cli.remove_map(scsi_id)    for path in paths:        mpath_cli.remove_path(path)
Multiple SR found
The LUNs were migrated between storage arrays resulting in new Unique IDs being given to the LUNs by EMC:The /etc/sysconfig/mkinitrd.latches file on XenServer hosts with multipath boot from SAN contain a reference to the disk by its SCSI ID. This SCSI ID is returned by EMC based on the Unique ID.mkinitrd generates the initrd with the device listed in the latches file.When scanning for that disk it does not find the device, this results in the fnci and multipath kernel modules not being added into the initrd.Then when booting there is no fnic module loaded so the disk in inaccessible through the HBA.
The storage controllers and the hard drive issues are the most likely cause.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
If the ECC feature is enabled on a GRID K2 card, virtual GPU fails to start. The following error is logged in /var/log/messages: vmiop_log: error: Initialization: VGX not suported with ECC Enabled. Virtual GPU is not currently supported with ECC active.
GRID K2 cards ship with ECC disabled by default, but ECC may subsequently be enabled using nvidia-smi.
A common cause of hosts being in maintenance state is them not being able to connect to one of the storage repositories. Check the storage connections in XenCenter and repair if needed.
RAM to be increased.
sshd.conf file had root login no
cd /tmp/root/user/share/splash/then kept doing an "ls" until the file "download.png" appeared. then I promptly deleted it.Then, about at 98% install completion, the system appears to make the symlink between (/tmp/root)/usr/share/splash/download.png and (/tmp/root)/usr/share/splashy/themes/citrix-theme/download.pngBecause the the former file, the latter sylmink creation would barf and kill the install.
Incorrect date and time on the XenServer
This issue is likely to be seen if customers have previously attempted to upgrade from XS 6.5 to XS 7.0 using XenCenter 7.0.x. This action installs the RPU002 hotfix on a XenServer 6.5 host.
Installing the RPU002 hotfix also introduces the associated stamp file in the /var/patch/applied directory.
Later, installing XenServer 6.5 SP1 overwrites the RPU002 hotfix with an older version to the one present in XenCenter 7.0.x. However, the stamp will not be updated. After installing XenServer 6.5 SP1, when XenCenter 7.0.x is used to execute a Rolling Pool Upgrade from XenServer 6.5 SP1 to 7.0, XenCenter sees the stamp file for the RPU002 hotfix exists and expects the hotfix to be the newer version of RPU002. Therefore, XenCenter does not attempt to update the RPU002 hotfix with the newer version.
When the Rolling Pool Upgrade executes the RPU002 hotfix, it runs the older version of the RPU002, which references a variable XS-REPOSITORY-LIST which existed on the XenServer 6.5 media, but does not exist in the XenServer 7.0 installation media. This causes XenCenter to report the error.
FTP was configured to be on port 80 but that was taken up.
n/a
lsass service failing to start.
SSSL certificate issue
Unable to export the VMs
In XenSever 7.0 a feature was introduce to improve IOMMU performance. As well as a speed improvement, this feature results in the addresses of memory areas appearing in a different range, and critically, potentially a higher one. In the majority of cases, this raised range would make no visible difference.However, NVIDIA cards can't access the full 64bit address space, as they only have 40bits for accessing the memory. (meaning they can assess a maximum 1TB range).The IOMMU change in XenServer 7.0 means you can potentially get address up to slightly above twice the total RAM. This means that with a 40bit GPU and PVIOMMU enabled, the maximum RAM you can have is about 500GB.
XAPI initialization failed when XenServer tried to create XAPI connection with other pool members.
a lot of packets going to the controller and sent back with PACKET_OUT causing the OVS to show high CPU utilization
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
CD/DVD drive does not show as empty.
http://support.citrix.com/article/CTX120869
Leaked datapath preventing the deactivation of the VDI
Filesystem Corruption causing sda1 from loosing the journal on the filesytem
Xapi may loose the host configuration  for the iscsi iqn causing such issues.
Most like the Storage which contain the Heartbeat file and Statefile was removed from the xapi database, resulting in an invalid uuid which doesn’t exist
It is not necessary to always start the VM on the same host. when the host is unavailable to the VM (for example, it's already out of memory, or the storage or network the VM needs is not visible to that host). But it also includes WLB (when the WLB recommendations take priority) and vGPU (when the vGPU placement policy, maximum density or maximum performance, takes priority).
In the case of vGPU, "When a VM with an assigned vGPU is started on a pool it must adhere to the placement policy assigned to the pool; Where "performance" will attempt to spread the vGPU load across multiple hosts and pGPUs, and "capacity" will attempt to use all capacity on pGPUs already in use."
Misconfigured multipath configuration for Active / Active mode.
This happens when the VBD qos settings are unset, which is the default. Essentially there's a bit of code (the events thread) that's ensuring the qos settings are applied, and it logs when it's unset
There is lots of IO errors in the kern.log of
Mar 13 12:36:11  kernel: [1711525.266376] sd 0:0:1:2: [sdf] Device not ready
Mar 13 12:36:11 xxxxx kernel: [1711525.266379] sd 0:0:1:2: [sdf] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE
Mar 13 12:36:11 xxxxx kernel: [1711525.266383] sd 0:0:1:2: [sdf] Sense Key : Not Ready [current]
Mar 13 12:36:11 xxxxx kernel: [1711525.266387] sd 0:0:1:2: [sdf] Add. Sense: Logical unit not accessible, target port in standby state
Mar 13 12:36:11 xxxxx kernel: [1711525.266393] sd 0:0:1:2: [sdf] CDB: Read(10): 28 00 00 00 00 00 00 00 04 00
Mar 13 12:36:11 xxxxx kernel: [1711525.266401] end_request: I/O error, dev sdf, sector 0

This error indicates that the storage is active/passive.
This means that multiple paths (/dev/sdX and /dev/sdY) point to the same disk, but only one path can be accessed. Accessing the other path will result in I/O errors.
https://www.citrix.com/blogs/2013/12/02/xenserver-performance-tuning-top-5-recommended-guides/
One is base mirror and other is Active VDI holding the writes to the VM but due to a bug, the  base mirror is visible in XenCenter which ideally should be hidden
WMI repository corruption caused the error "Installation Service not found"
Run ovs-dpctl dump-flows and look into the flows and see most of the flows are having same destination MAC address as below.
(vid=3657,pcp=0),encap(), packets:7, bytes:588, used:4.150s, actions:0
in_port(1),eth(src=64:31:50:f8:c3:35,dst=01:14:c2:44:1e:cc),eth_type(0x8100),vlan(vid=3713,pcp=0),encap(), packets:8, bytes:672, used:4.140s, actions:0
in_port(1),eth(src=64:31:50:f8:c3:35,dst=01:14:c2:44:1e:cc),eth_type(0x8100),vlan(vid=3786,pcp=0),encap(), packets:8, bytes:672, used:4.130s, actions:0
in_port(1),eth(src=64:31:50:f8:c3:35,dst=01:14:c2:44:1e:cc),eth_type(0x8100),vlaovs-dpctl: write to stdout failed
Applied a free edition license or trial license which will not work GPU
Leaked XenDPriv.exe process while user logoff/ login
Stale entries of HA state files causing the XenServer not able to read  and giving I/O error while trying to attach it.
Improper Virtual machine parameter preventing console access
In 6.5 we are supposed to force mask the FMA4 bit in hardware, but still have it shown as set to the toolstack (unless the toolstack has explicitly requested that FMA4 should be masked). This is to allow an unlevelled 6.2 (FMA4 uNetScaler MASked) to be upgraded to 6.5 (FMA4 masked) without the toolstack complaining of a hardware downgrade.
Due to the improper mapping from the SAN side, All luns from the storage was visible to the XenServer. This causes the host to scan though the metadata of all devices based on the filter set in /etc/lvm/lvm.conf
The host crashes when IP fragmentation is done on defragmented packets.
Partition table on the device was causing the device to be ignored during the pvscan
If the VM has host_OpaqueRef in the VDI sm_record, this VM will fail to import, You can confirm this from the below command before exporting
#xe vdi-list params=sm-config uuid=<VDI in question>
Xen prints a large amount of messages to the serial console when disabling boot CPUs, of the form "Broke affinity for irq" due to the large numbers of IRQs that Netscaler uses.
(XEN) [ 2543.038825] Broke affinity for irq 82
(XEN) [ 2543.038830] Broke affinity for irq 83
(XEN) [ 2543.038834] Broke affinity for irq 84
(XEN) [ 2543.038839] Broke affinity for irq 85
(XEN) [ 2543.038868] Broke affinity for irq 92
(XEN) [ 2548.000370] Watchdog timer detects that CPU0 is stuck!
(XEN) [ 2548.067966] ----[ Xen-4.4.1-xs116341  x86_64  debug=n  Not tainted ]----
(XEN) [ 2548.154287] CPU:    0
(XEN) [ 2548.187565] RIP:    e008:[<ffff82d08013f5a6>] ns_read_reg+0x16/0x50
(XEN) [ 2548.268681] RFLAGS: 0000000000000002   CONTEXT: hypervisor
(XEN) [ 2548.340439] rax: 0000000000000000   rbx: ffff82d0802e8e20   rcx: 0000000000000000
(XEN) [ 2548.436118] rdx: 00000000000003fd   rsi: 0000000000000005   rdi: ffff82d0802e8e20
(XEN) [ 2548.531794] rbp: ffff82d08026f75c   rsp: ffff82d0802c7e38   r8:  0000000000000000
(XEN) [ 2548.627471] r9:  0000000000000005   r10: 0000000000000004   r11: ffff82d080109930
(XEN) [ 2548.723149] r12: 0000000000000246   r13: ffff82d080308240   r14: 0000024fd9b20831
(XEN) [ 2548.818826] r15: ffff82d0802c7f18   cr0: 000000008005003b   cr4: 00000000001126f0
(XEN) [ 2548.914504] cr3: 000000007dc6d000   cr2: ffff880001bfdbc0
(XEN) [ 2548.985224] ds: 0000   es: 0000   fs: 0000   gs: 0000   ss: 0000   cs: e008
(XEN) [ 2549.074659] Xen stack trace from rsp=ffff82d0802c7e38:
(XEN) [ 2549.142259]    ffff82d08013f68d ffff82d08026f6e0 ffff82d08014142e 0000000000000000
(XEN) [ 2549.238977]    0000000000000005 ffff83007dd0e000 ffff82d0801a2925 0000000000000100
(XEN) [ 2549.335692]    ffff82d080308220 00000000802c7f18 ffff8304b1619010 ffff82d080308208
(XEN) [ 2549.432411]    ffff83007dd0e000 ffff82d080308240 0000024fd9b20831 ffff82d0802c7f18
(XEN) [ 2549.529128]    ffff82d080105996 ffff83007dd0e1b8 ffff82d0803082f0 0000000000000000
(XEN) [ 2549.625846]    ffff82d08012b6be ffff82d0803082d0 ffff82d08012b778 ffff82d0802c7f18
(XEN) [ 2549.722562]    ffff83007f3e3000 ffff83007f3e3000 ffff82d08016027f ffffffffffffffff
(XEN) [ 2549.819279]    0000000000000014 000000000000000f 0000000000000048 000000000000006f
(XEN) [ 2549.915998]    ffff8801eee399d8 ffff8801f080c400 0000000000000010 0000000000000001
(XEN) [ 2550.012715]    ffff8800000bfe12 0000000000000000 ffffffff81c32600 00000000ffffffff
(XEN) [ 2550.109431]    0000000000000000 0000000000000003 ffffffff81cc31a8 000000fa00000000
(XEN) [ 2550.206149]    ffffffff81391392 000000000000e033 0000000000000246 ffff8801eee39998
(XEN) [ 2550.302865]    000000000000e02b 0000000000000000 0000000000000000 0000000000000000
(XEN) [ 2550.399585]    0000000000000000 0000000000000000 ffff83007f3e3000 0000000000000000
(XEN) [ 2550.496302]    0000000000000000
(XEN) [ 2550.539982] Xen call trace:
(XEN) [ 2550.579500]    [<ffff82d08013f5a6>] ns_read_reg+0x16/0x50
(XEN) [ 2550.650217]    [<ffff82d08013f68d>] ns16550_tx_ready+0x2d/0x50
(XEN) [ 2550.726135]    [<ffff82d08014142e>] serial_start_sync+0x8e/0xb0
(XEN) [ 2550.803093]    [<ffff82d0801a2925>] enter_state_helper+0x1c5/0x3b0
(XEN) [ 2550.883170]    [<ffff82d080105996>] continue_hypercall_tasklet_handler+0xe6/0xf0
(XEN) [ 2550.977807]    [<ffff82d08012b6be>] do_tasklet_work+0x5e/0xa0
(XEN) [ 2551.052686]    [<ffff82d08012b778>] do_tasklet+0x78/0xb0
(XEN) [ 2551.122364]    [<ffff82d08016027f>] idle_loop+0x1f/0x50
(XEN) [ 2551.191003]
(XEN) [ 2551.214922]
(XEN) [ 2551.238841] ****************************************
(XEN) [ 2551.304360] Panic on CPU 0:
(XEN) [ 2551.343878] FATAL TRAP: vector = 2 (nmi)
(XEN) [ 2551.396915] [error_code=0000] , IN INTERRUPT CONTEXT
(XEN) [ 2551.462436] ****************************************
(XEN) [ 2551.527954]
(XEN) [ 2551.551874] Reboot in five seconds…
By default 3 disks are allowed but in order to add additional disk , we need to have the PV drivers in the guest.
The reason it complains is that the format of the multipath.conf file has changed slightly in the latest version of multipathd and our older version doesn't recognize some of the newer keywords. We get the device entries from third parties and incorporate them into multipath.conf as supplied.
XenServer 7 uses systemd for bootup instead of SYSV style which is used with XenServer 6 or prior
Known Issues: There were some known issues with patch-clean command that it won't clear the space utilization on slave host but that is fixed in a hotfix. So if your host is not up to date, please apply the hotfix and try this.
Unknown vendor that is not mentioned in the pci id files
RAW VDI gives more performance improvement but you miss the snapshotting and cloning feature with raw VDI
The "Bad domain" errors result in the active entry lock not being released.
A Bug in XenServer SM code
A bug in the Rolling pool upgrade plugin
As per the design of the kernel
Bug in the SM code preventing the scan to run properly and retrieve the disk information
The cause can be mainly due to the over loaded network causing high packet to flow in. We need to confirm if the packets which we are seeing are genuine or some broadcast traffic which the host is not intentended to receive
NIC firmware assumes that SR-IOV is enabled and sets up VEB (virtual ethernet bridging) which causes the packet to be looped back.
State Alert entries in Filesystem not getting cleared after the upgrade
Bug in xen-crashdump collector
Accidental deletion of VHD files
As a preventive measure not to mess up with the LVM metadata, configuration file in XenServer is set by default not to permit operation related to changing the lvm metadata. See below the related stanza from /etc/lvm/lvm.conf
# Configuration option global/metadata_read_only.
# No operations that change on-disk metadata are permitted.
# Additionally, read-only commands that encounter metadata in need of
# repair will still be allowed to proceed exactly as if the repair had
# been performed (except for the unchanged vg_seqno). Inappropriate
# use could mess up your system, so seek advice first!
metadata_read_only = 1
As per design of Share Clipboard option on XenCenter
Mirroring was done between SSD drive and SATA drives. This caused the high latency issue while writing to backend
Most likely cause of such issues happen when you have added some other devices to the virtual machine (like PCI passthrough or vgpu passthrough) referring to the PCI devices on the other hosts.
XenCenter get the info from xapi DB, that contains this info in the PBD for that SR. In the PBD we record the maximum number of paths we have seen so far, because it is not easy to distinguish a path that is down for a long time (e.g. maintenance) from a path that has been removed on purpose.
Kernel has not refreshed the new paths which came available in later stages of booting
Sometimes the default location of xs-tools.iso under /opt/xensource/packages/iso in xenserver might still point to older ISO
This is due to a bug in the 3.10 kernel which XenServer is using.
Xentools bug
No support for TRIM command by backend SAN array
Wrong driver disk for XenServer 6.1 was loaded for XenServer 6.5 upgrade. 6.1 Driver disk is not compatible with 6.5
Low or fragmented dom0 memory condition causes the driver to allocate buffers incorrectly
Controller reset might take around 60 seconds to failover. So the default iscsi timeout was not sufficient enough to recover from these timeout.
Filesystem got corrupt during the crash and its failing to mount
Network drivers were blocked by a group policy setting (Disallow removable devices). Following can be seen in installer logs
>>>  [Device Install (Hardware initiated) - XENVIF\VEN_XS0002&DEV_NET&REV_00000000\0]
>>>  Section start 2016/07/08 13:18:53.663
...
!!!  pol: The device is explicitly restricted by the following policy settings:
!!!  pol: [-] Removable devices are restricted
!!!  pol: {Device installation policy check [XENVIF\VEN_XS0002&DEV_NET&REV_00000000\0] exit(0xe0000248)}
!!!  ndv: Installation of device is blocked by policy!
These messages are seen when an iSCSI connection times out (1011 means timeout on initiator side and 1020 means the target dropped the connection).
Ideally Switch should be able to identify which is the active interface and send packets over the active interface. Ovs is processing packets received on the backup interface. We can confirm this from the ifconfig output of the backup interface ( Look at RX packets  received)
When we remove LUN from XS 6.x and attach to XS 5.x it contains a MGT which is not understandable by XS5.x
Therefore, we need to rename the previous MGT so that XS 5.x will create a new MGT which is understandable by MBR (as XS 6.x MGT understands GPT)
Dom0 memory was set to less than 1 GB and yum was getting OOM killed and failing while trying to download the package.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
SD card went offline due to a raid failure
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
xcp-rrdd-gpumon sometimes fails to stop when requested to do so as part of the startup of a VM with a vGPU. xcp-rrdd-gpumon must be stopped while starting up a VM with a vGPU, as it is a client of the nvidia dom0 driver. It is not possible to switch the driver for a PCI device between pciback and nvidia while a client of the nvidia driver such as xcp-rrdd-gpumon is running. Failing to stop xcp-rrdd-gpumon consequently causes the VM.start task to fail.If a VM.start fails as described above, the VM's vGPU will be left in a state where it is marked as resident_on a pGPU, even though the VM is halted. This means that the vGPU appears, incorrectly, to be using some of the capacity of the pGPU, leading to the possibility of future VM.starts failing. This can be worked around as described by destroying and recreating the vGPU.
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Beginning with kernel 2.6.37, it has been changed the meaning of dropped packet count. Before, dropped packets was most likely due to an error. Now, the rx_dropped counter shows statistics for dropped frames because of:Bad / Unintended VLAN tagsUnknown / Unregistered protocolsIPv6 frames when the server is not configured for IPv6If any frames meet those conditions, they are dropped before the protocol stack and the rx_dropped counter is incremented.
This happens if the time on the servers in the pool are not synchronised to each other. All the hosts in the pool should be pointing to the same NTP Server and should have the same time. To check the time you can either use date command or you can view the time of the Server in xsconsole ( on the top )
The customer added the following settings to the VM on XenServer 6.2.
cores-per-socket = 6VCPUs-at-startup = 1VCPUs-max = 1
The problem cause was cores-per-socket. The number of VCPUs must be a multiple of the number of cores per socket. Although it has invalid configuration, such VM was bootable on XenServer 6.2.On XenServer 6.5, it is not bootable because of an invalid configuration.
Confirm if the device exists in /proc/scsi/scsi  or notIf not,check in /var/log/kern.log. This raid regarding to this local storage is removed from the  /var/log/kern.log:0:1:1:0 RAID REMOVE0:1:1:0 RAID REMOVE DONEMostly this will be a faulty disks in the RAID setup
The Virtual  Machines disk is being controlled by the Dom0 due to a failure in previous operation like Migration,snapshot
likewise cache not cleared up causing stale entries
OS disk was placed at 1 position instead of 0.
Registry entries are the left over remnants of the older XenTools. This can cause issues during sysprep process.
Iptables rules was Dropping access to port 80 on INPUT chain
IIS7 security is restricting certain mime type and file format
Windows management service should be running so that the usage can be correctly reported back to XenCenter
During Normal Scenarios where the XenCenter is able to connect to the host , try : How to Collect Diagnostic Information for XenServer or How to Run a System Status Report in XenCenter and XenServer
We could see error in daemon.log----
Mar 12 23:54:22 P-XS05 qemu-dm-169[20549]: I/O request not ready: 0, ptr: 0, port: 175, data: 0, count: 1, size: 1
Mar 12 23:54:42 P-XS05 tapdisk[18176]: nbd: Unix domain socket is ready to accept
Mar 12 23:54:42 P-XS05 tapdisk[18176]: nbd: Received fd 28 with message: mirror_vbd/153/xvda
Mar 12 23:54:42 P-XS05 tapdisk[18176]: received 'pause' message (uuid = 32)
Mar 12 23:54:42 P-XS05 tapdisk[18176]: vbd: pause requested
Mar 12 23:54:42 P-XS05 tapdisk[18176]: nbd: NBD server pause(0x1eb3610)
Mar 12 23:54:42 P-XS05 tapdisk[18176]: gaps written/skipped: 720/0
Mar 12 23:54:42 P-XS05 tapdisk[18176]: /dev/VG_XenStorage-1e2364b8-ed01-31fd-28ed-5e3e9a14f67b/VHD-f40949e8-ca8f-432c-a943-cd05f8d94a90: b: 76800, a: 74506, f: 73487, n: 305781072
Mar 12 23:54:42 P-XS05 tapdisk[18176]: closed image /dev/VG_XenStorage-1e2364b8-ed01-31fd-28ed-5e3e9a14f67b/VHD-f40949e8-ca8f-432c-a943-cd05f8d94a90 (0 users, state: 0x00000000, type: 4)
Mar 12 23:54:42 P-XS05 tapdisk[18176]: vbd: pause completed
Mar 12 23:54:42 P-XS05 tapdisk[18176]: sending 'pause response' message (uuid = 32)
Mar 12 23:54:46 P-XS05 tapdisk[18176]: received 'resume' message (uuid = 32)
Mar 12 23:54:46 P-XS05 tapdisk[18176]: control: resuming VBD 32, flags=0x00000080, secondary=0x63379c
Mar 12 23:54:46 P-XS05 tapdisk[18176]: control: resuming VBD 32 with secondary 'nbd:mirror_vbd/153/xvda'
Mar 12 23:54:46 P-XS05 tapdisk[18176]: /dev/VG_XenStorage-1e2364b8-ed01-31fd-28ed-5e3e9a14f67b/VHD-f40949e8-ca8f-432c-a943-cd05f8d94a90 version: tap 0x00010003, b: 76800, a: 0, f: 0, n: 8455
Mar 12 23:54:46 P-XS05 tapdisk[18176]: opened image /dev/VG_XenStorage-1e2364b8-ed01-31fd-28ed-5e3e9a14f67b/VHD-f40949e8-ca8f-432c-a943-cd05f8d94a90 (1 users, state: 0x00000001, type: 4, rw)
Mar 12 23:54:46 P-XS05 tapdisk[18176]: /dev/mapper/VG_XenStorage--1e2364b8--ed01--31fd--28ed--5e3e9a14f67b-VHD--e56b69bc--24c5--414c--b10d--38577c202165 version: tap 0x00010003, b: 76800, a: 74506, f: 73487, n: 0
Mar 12 23:54:46 P-XS05 tapdisk[18176]: opened image /dev/mapper/VG_XenStorage--1e2364b8--ed01--31fd--28ed--5e3e9a14f67b-VHD--e56b69bc--24c5--414c--b10d--38577c202165 (1 users, state: 0x00000003, type: 4, ro)
Mar 12 23:54:46 P-XS05 tapdisk[18176]: VBD CHAIN:
Mar 12 23:54:46 P-XS05 tapdisk[18176]: /dev/VG_XenStorage-1e2364b8-ed01-31fd-28ed-5e3e9a14f67b/VHD-f40949e8-ca8f-432c-a943-cd05f8d94a90: type:vhd(4) storage:lvm(3)
Mar 12 23:54:46 P-XS05 tapdisk[18176]: /dev/mapper/VG_XenStorage--1e2364b8--ed01--31fd--28ed--5e3e9a14f67b-VHD--e56b69bc--24c5--414c--b10d--38577c202165: type:vhd(4) storage:lvm(3)
Mar 12 23:54:46 P-XS05 tapdisk[18176]: Adding secondary image: nbd:mirror_vbd/153/xvda
Mar 12 23:54:46 P-XS05 tapdisk[18176]: nbd: Opening nbd export to mirror_vbd/153/xvda (flags=408)
Mar 12 23:54:46 P-XS05 tapdisk[18176]: nbd: Found passed fd. Connecting...
Mar 12 23:54:46 P-XS05 tapdisk[18176]: nbd: Got size: 161061273600
Mar 12 23:54:46 P-XS05 tapdisk[18176]: nbd: Got flags: 0
Mar 12 23:54:46 P-XS05 tapdisk[18176]: nbd: Successfully connected to NBD server
Mar 12 23:54:46 P-XS05 tapdisk[18176]: nbd: Opening in secondary mode: Read requests will be forwarded
Mar 12 23:54:46 P-XS05 tapdisk[18176]: opened image mirror_vbd/153/xvda (1 users, state: 0x00000001, type: 15, rw)
Mar 12 23:54:46 P-XS05 tapdisk[18176]: In mirror mode
Mar 12 23:54:46 P-XS05 tapdisk[18176]: Added secondary image
Mar 12 23:54:46 P-XS05 tapdisk[18176]: nbd: NBD server unpause(0x1eb3610) - fdrecv_listening_fd -1, unix_listening_fd=21
Mar 12 23:54:46 P-XS05 tapdisk[18176]: sending 'resume response' message (uuid = 32)
Mar 12 23:54:46 P-XS05 tapdisk[18176]: tap-err:nbd: Server shutdown prematurely in read_some
Mar 12 23:54:46 P-XS05 tapdisk[18176]: tap-err:nbd: Error reading reply header: -1
Mar 12 23:54:46 P-XS05 tapdisk[18176]: nbd: NBD client full-disable
---
VM param is set to has-vendor-device=false
It's the problem with loading/initialising xen.sys itself when booting, will load correctly if "boot log" is enabled, or BSOD when "boot log" is disabled.
Could see the following errors in installer logs.
7/06/2016 13:17:14 : Initializing Install =======================================
27/06/2016 13:17:14 : 64 Bit Install
27/06/2016 13:17:14 : MSI PACKAGE: C:\Program Files (x86)\Citrix\XenTools\Installer\citrixxendriversx64.msi
27/06/2016 13:17:14 : MSI PACKAGE: C:\Program Files (x86)\Citrix\XenTools\Installer\citrixvssx64.msi
27/06/2016 13:17:14 : MSI PACKAGE: C:\Program Files (x86)\Citrix\XenTools\Installer\citrixguestagentx64.msi
27/06/2016 13:17:14 : Entering state loop
27/06/2016 13:17:14 : No DriverMSI work
27/06/2016 13:17:14 : Checking NSIS
27/06/2016 13:17:14 : Key VEN_1013&DEV_00B8 DevName VEN_5853&DEV_0001
27/06/2016 13:17:14 : Key VEN_10EC&DEV_8139 DevName VEN_5853&DEV_0001
27/06/2016 13:17:14 : Key VEN_5853&DEV_0001 DevName VEN_5853&DEV_0001
27/06/2016 13:17:14 : Got device key
27/06/2016 13:17:14 : Device name HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\PCI\VEN_5853&DEV_0001&SUBSYS_00015853&REV_01
27/06/2016 13:17:14 : looking at key 3&267a616a&0&18
27/06/2016 13:17:14 : found driver key key {4d36e97d-e325-11ce-bfc1-08002be10318}\0029
27/06/2016 13:17:14 : Got driver key
27/06/2016 13:17:14 : Driver is
27/06/2016 13:17:14 : No NSIS based installer found
27/06/2016 13:17:14 : Key VEN_1013&DEV_00B8 DevName VEN_5853&DEV_0001
27/06/2016 13:17:14 : Key VEN_10EC&DEV_8139 DevName VEN_5853&DEV_0001
27/06/2016 13:17:14 : Key VEN_5853&DEV_0001 DevName VEN_5853&DEV_0001
27/06/2016 13:17:14 : Got device key
27/06/2016 13:17:14 : Device name HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\PCI\VEN_5853&DEV_0001&SUBSYS_00015853&REV_01
27/06/2016 13:17:14 : looking at key 3&267a616a&0&18
27/06/2016 13:17:14 : found driver key key {4d36e97d-e325-11ce-bfc1-08002be10318}\0029
27/06/2016 13:17:14 : Got driver key
27/06/2016 13:17:14 : Driver is
27/06/2016 13:17:14 : Exited install cycle True 5 False
27/06/2016 13:17:14 : Waiting to be told we are done
27/06/2016 13:17:38 : STATUS:Failed
27/06/2016 13:17:38 : STATUS:Failed
27/06/2016 13:17:38 : STATUS:Failed
27/06/2016 15:35:15 : I caught an event
27/06/2016 15:35:15 : UserDone
27/06/2016 15:35:15 : event done
Its  looking for an old xen related registry entryunder [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\PCI\VEN_5853&DEV_0001&SUBSYS_00015853&REV_01] "ContainerID"="{00000000-0000-0000-ffff-ffffffffffff}""ConfigFlags"=dword:00000020"ClassGUID"="{4d36e97d-e325-11ce-bfc1-08002be10318}""Driver"="{4d36e97d-e325-11ce-bfc1-08002be10318}\\0029""Class"="System""Mfg"="@oem1.inf,%citrix%;Citrix Systems Inc.""Service"="xenbus"
XenServer 7.0 Release Notes
xenops is not present in XenServer 7.0
It seems the XenCenter Radion Button "Join Domain" is not able to get the details if there are multiple OUs
xapi service was stopped. #service xapi status
How to take Pool Metadata Backup on XenServer
Unable to apply SP1--Error : Shutting down kernel logger: [ OK ] Shutting down system logger: [ OK ] Starting system logger: [FAILED] Starting kernel logger: [ OK ] error: %post(elasticsyslog-1.0-3.xs1133.i386) scriptlet failed, exit status 1
Netscaler VM does not have network interface active
Initial Migration of VM got struck and it created duplicate uuid. This blocked the VM migrations further.
http://support.citrix.com/article/CTX121282
https://www.citrix.com/blogs/2010/10/18/how-to-add-a-usb-drive-to-citrix-xenserver-as-a-local-sr-storage-repository/http://www.jasonsamuel.com/2011/07/14/how-to-use-an-external-usb-drive-as-a-storage-repository-in-xenserver-5-6/
We could see that in C:\programdata\programdata\InstallAgent\1.0.5961.21197\InstallAgent.log, it was failing to fetch information related to XenBus and failing.
dvi: Default installer: Exit dvi: {DIF_INSTALLINTERFACES - exit(0x00000000)} 14:06:24.466 dvi: {DIF_INSTALLDEVICE} 14:06:24.466 dvi: No class installer for 'XenServer PV Bus' dvi: CoInstaller 1: Enter 14:06:24.466 ! ven: XENBUS_COINST|Entry: 8.1.0.63 (22/1/2016) ===> ! ven: XENBUS_COINST|Entry: INSTALLDEVICE PreProcessing ! ven: XENBUS_COINST|DifInstall: Flags = 01800028 ! ven: XENBUS_COINST|DifInstallPreProcess: ====> ! ven: XENBUS_COINST|AllowInstall: ====> ! ven: XENBUS_COINST|AllowUpdate: ====> (XEN) ! ven: XENBUS_COINST|AllowUpdate: (XENBUS) ! ven: XENBUS_COINST|AllowUpdate: (XENFILT) ! ven: XENBUS_COINST|AllowUpdate: ! ven: XENBUS_COINST|GetDeviceKeyName: none found ! ven: XENBUS_COINST|GetDeviceKeyName: VEN_5853&DEV_0002&SUBSYS_00025853&REV_02 ! ven: XENBUS_COINST|GetDriverKeyName: {4d36e97d-e325-11ce-bfc1-08002be10318}\0024 ! ven: XENBUS_COINST|MatchExistingDriver: ! ven: XENBUS_COINST|GetDriverKeyName: {4d36e97d-e325-11ce-bfc1-08002be10318}\0025 ! ven: XENBUS_COINST|GetMatchingDeviceID: XENBUS\VEN_XS0002&DEV_IFACE&REV_00000001 ! ven: XENBUS_COINST|SupportDeviceID: fail2 ! ven: XENBUS_COINST|SupportDeviceID: fail1 (Íå óäàåòñÿ íàéòè óêàçàííûé ôàéë.) ! ven: XENBUS_COINST|SupportChildDrivers: fail9 ! ven: XENBUS_COINST|SupportChildDrivers: fail8 ! ven: XENBUS_COINST|SupportChildDrivers: fail7 ! ven: XENBUS_COINST|SupportChildDrivers: fail6 ! ven: XENBUS_COINST|SupportChildDrivers: fail5 ! ven: XENBUS_COINST|SupportChildDrivers: fail4 ! ven: XENBUS_COINST|SupportChildDrivers: fail3 ! ven: XENBUS_COINST|SupportChildDrivers: fail2 ! ven: XENBUS_COINST|SupportChildDrivers: fail1 (Íå óäàåòñÿ íàéòè óêàçàííûé ôàéë.) ! ven: XENBUS_COINST|DifInstallPreProcess: fail4 ! ven: XENBUS_COINST|DifInstallPreProcess: fail3 ! ven: XENBUS_COINST|DifInstallPreProcess: fail2 ! ven: XENBUS_COINST|DifInstallPreProcess: fail1 (Íå óäàåòñÿ íàéòè óêàçàííûé ôàéë.) ! ven: XENBUS_COINST|Entry: 8.1.0.63 (22/1/2016)
/dev/sda1 partition was the Dell Utility Partition
Citrix admin account was getting locked out when the CIFS  ISO repository was trying to contact the Active directory with the Wrong credentials.
Incompatible permissions for AD.  When working with XenCenter the users MUST have access to the default Computers OU.  If they do not then they either must configure the addition to AD via CLI or have a higher level admin add the pool/host to AD and then move the computers to the correct OU.
n/a
It seems that we were booting SDX’s XS component in an unsupported “Measured boot” mode. This mode is untested in the SDX context.
- XenServer hosts in the pool boot from SAN, no locally attached storage- The pool does NOT have default SR set- Transfer VM which is required for import/export failed to install as there is no local storage or default SR set
Error accessing the Licensing Node in Citrix Studio “An error has occurred with the Citrix License Server….”Desktop Studio Error: Can't Get License InfoError: "Detailed license information unavailable"More information:http://discussions.citrix.com/topic/350367-error-xdds4ad5e6ee/http://support.citrix.com/proddocs/topic/licensing-vpx-1112/lic-about-11-12.html
Distributed virtual switch controller works with OpenSwitch backend. XenServer was running the native Linux Bridge
Xentools update via  windows update is not supported for Imported VM from old version
State.db is containing information related to the previous master and its trying to reach to the old master
For more information about XenServer, see XenServer Product Documentation.
VMs revert their IP configuration to DHCP even after setting them to Static
This issue is fixed in XS65ESP1035
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Citrix is not responsible for and does not endorse or accept any responsibility for the contents or your use of these third party Web sites. Citrix is providing these links to you only as a convenience, and the inclusion of any link does not imply endorsement by Citrix of the linked Web site. It is your responsibility to take precautions to ensure that whatever Web site you use is free of viruses or other harmful items.
Use of XenCenter 6.5also the installer keeps searching for XS-REPOSITORY-LIST.
VLAN tagging and network issues.
Older version of XCM VPX not working properly on XS 6.5.
This happens because the Xen command line has: "dom0_mem=12288M,max:16384M" which means there is a chunk of pre-ballooned memory which uses a shared p2m_missing page in the p2m. When a page from this pre-ballooned region gets used for grant maps, the issue occurs.---/boot/extlinux.conflabel xe  # XenServer  kernel mboot.c32  append /boot/xen.gz watchdog dom0_max_vcpus=8 crashkernel=128M@32M cpuid_mask_xsave_eax=0 console=vga vga=mode-0x0311 dom0_mem=12288M,max:16384M --- /boot/vmlinuz-3.10-xen root=LABEL=root-dwlsrlri ro hpet=disable xencons=hvc console=hvc0 console=tty0 quiet vga=785 splash --- /boot/initrd-3.10-xen.img---
Configuration change
The uuid.mk was not checked in when Seedy was created.
AutoCAD requires the better GPU performance, the vm default GPU is a simple low level virtual GPU which doesn't satisfy with AutoCAD application.
deadbeef domains and root disk filesystem was full.XenServer was not able to connect to XenCenter because the XAPI service cannot start when the filesystem is full.
Firewall plus license service (unable to read license).
XenServer was not added in the export list
Memory leak in dom0Call Trace:
Mar 17 17:30:27  kernel: [76559772.6451821 [<c0190994>] oom_kill_process+0x144/0x290
Mar 17 17:30:27  kernel: [76559772.6451881 [<c0190f62>] out of memory+Oxd2/0x130
Mar 17 17:30:27  kernel: [76559772.645194] [<c019102a>] out_of_memory+Ox6a/OxcO
Mar 17 17:30:27  kernel: [76559772.645200] [<c019418f>] _alloc_pagesnodemask+0x56f/0x580
Mar 17 17:30:27  kernel: [76559772.645207] [<c0106621>] ? local clock+0x41/0x80
Mar 17 17:30:27  kernel: [76559772.645213] [<c019426c>J _getfree_pages+Oxlc/0x30
Mar 17 17:30:27  kernel: [76559772.645220] [<c02e56a7>] evtchnwrite+0x27/0x130
Mar 17 17:30:27  kernel: [76559772.645226] [<cOlc7lab>] vfswrite+Ox9b/0x180
Mar 17 17:30:27  kernel: [76559772.645231] [<c02e5680>] ? evtchnwrite+OxO/0x130
Mar 17 17:30:27  kernel: [76559772.645236] [<c01c78b2>] syswrite+0x42/0x70
Mar 17 17:30:27  kernel: [76559772.645242] [<c0104571>] 3yscall_call+0x7/Oxb
VMs took APIPA range and not the IPs from DHCP server.
Stale connection on XenServer
This is identified as a XenServer bug
The SSL Certificate being used by XenServer does not meet the criteria for the connection to be trusted, e.g. the certificate Subject is different to the IP address being used.
This ISO share is unavailable but the mount point still exists on the pool master.
Root file system usage reached 100% and prevented the lock file from getting released
Known Issue: XS 6.5 has known issue with bnx2 drivers.http://support.citrix.com/servlet/KbServlet/download/38334-102-714582/XenServer-6.5.0-releasenotes.pdf--------------Networking • Jumbo frames cannot be enabled on QLogic 10 Gigabit Ethernet adapters (10GbE) as the QLogic driver uses contiguous network buffers. Contiguous network buffers cause fragmentation of dom0 memory and leads to memory allocation failures and performance issues in dom0.---------------
Jumbo Frames was enabled for bnx2 driver 10G Qlogic , which is not supported.
Citrix Xenguest agent service is down and because of which it is not reporting the Virtualization state correctly back to Xenstored
xapi runs some initializing processes after restarting, and the host(s) exit Maintenance Mode if the initializing processes complete without problem. If some issue about storage attachment occurs, the host(s) don't exit Maintenance Mode.
CTX116019  - How to Reset root Password for XenServer Host
Patches duplicate uuid.
Mounted iso file unable to access.
Storage was not mapped.
Latest changes of OPENSSL RPM from Hotfix 39/40 has caused underlaying openssl-xs(not openssl-wrapper)  race condition together with stunnel.
On hosts with high uptime (over 90 days), a file system check is forced by Linux control VM (domain 0) on file system. This is by design with open-source Linux and is not specific to XenServer.
It appears that the customer has done something externally to the XenServer which has overwritten the 0x00001030 to 0x00002000 area  of each PV with zeroes (such as presenting the LUNs to other machines). This is visible from all hosts in the pool - it is not just a single host in the pool that is not seeing the data. In this case this was not a Citrix XenServer Support issue.
This issue occurs because not all required external power cables are attached, or the attached cables are not seated properly.
Xapi is generating API Errors when operation performed through XenCenter.
This issue might occur if there is still metadata information stored in the MGT for that VDI even after LV for the VDI is removed. Mismatch in xapi DB and MGT volume cause this error
One of the snapshots (disk+memory) was holding old xentools as attached in XAPI DB
High Availability was enabled on the pool.
The search domain in the DNS configuration on the hosts is missing. When using DHCP this is added into /etc/resolv.conf automatically.
Xentools error 1603.
The folder is created in /opt/xensource/patch-backup directory for a patch after it fails to apply.
The was a expected behavior of SDX to show time difference with the SDX Dom clock
This software application is provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that: (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the software application be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the software application.
Most probable cause of such behavior is that the IP was provided to the VM prior to xentools installation/upgrade
Connectivity issues between XenCenter and License server.
Why does this happen?
Basically it boils down to disk operations on/from a VM failing.  Operations such as move, copy, snapshot, export, etc.  The control domain (XenServer/dom0) protects the source VDI until virtual disk-based operations complete.
No NTP server in the environment.
Root file system did not have enough space. CDs were not ejected properly from the VMs /opt/xensource/patch-backup was not cleared.
File stuck in /opt/xensource/patch-backup
Bug in XS 6.5 preventing FAM4 bit to be masked
NB : This is tested only with Windows 2012 R2.
Bad partition.
xapi did not update the information.
http://support.citrix.com/article/CTX121235 : How to change the management IP address of Xenserver http://support.citrix.com/article/CTX116835 : How to Modify the Mapped IP and NetScaler IP on a HA Pair
https://www.citrix.com/blogs/2010/10/18/how-to-add-a-usb-drive-to-citrix-xenserver-as-a-local-sr-storage-repository/
This issue is caused when the system is a virtual machine that was reversed to a previous snapshot. If the snapshot is reverted, the computer account password might lose synchronization with Active Directory.
Host could have lost mount point after a host crash which is one of the main possibility.
There was a problem with xenDPriv.exe, there should be no xenDPrive with SYSTEM account.
Unable to start a VM.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Syslog rotation is either set to default values or needs to be tuned, as log data in /var/log/ consumes all available space on the XenServer's root partition.
The issue was caused because the password for the user had expired in the local likewise cache.Below is the error message from the log /var/logmessages :
Sep 16 11:32:31 trodeehnxs21 xapi: [ info|trodeehnxs21|2098311 INET :::80|session.login_with_password D:8050f3568dfa|xapi] Failed to externally authenticate user fcadmin@trost.local from HTTP request from Internet with User-Agent: XenCenter/6.5.2: The authentication request could not be handled
Sep 16 11:32:34 trodeehnxs21 lsassd[3347]: 0x7fdb984d5940:Permission granted for (uid = 0, gid = 0, pid = 10020) to open LsaIpcServer
Sep 16 11:32:34 trodeehnxs21 lsassd[3347]: [IPC] (session:11c17c9830c61abd) Accepted association 0x1d1bf40
Sep 16 11:32:34 trodeehnxs21 lsassd[3347]: 0x7fdb597da940:Cache entry for Sid S-1-5-21-2557590035-4015778651-1097594630-24859 is expired
Sep 16 11:32:34 trodeehnxs21 lsassd[3347]: 0x7fdb5dfe3940:Cache entry for sid S-1-5-21-2557590035-4015778651-1097594630-24859 expired 3027924 seconds ago
Sep 16 11:32:34 trodeehnxs21 lsassd[3347]: [IPC] (assoc:0x1d1bf40) Dropping: Connection closed by peer
VM hung causes the tapdisk process to keep consuming the space in root partition.Check the /var/log/messages, found that the tap-err:
Nov 30 09:14:01 Infra-Srv01 tapdisk[27646]: tap-err:scheduler_wait_for_events: elect failed: Bad file descriptorNov 30 09:14:31 Infra-Srv01 last message repeated 401091 timesNov 30 09:14:39 Infra-Srv01 last message repeated 93508 timesNov 30 09:14:39 Infra-Srv01 xenstored:  D8           write     data/meminfo_fre 6022620Nov 30 09:14:39 Inf^C
Type date, and found that the issue happened 4 days.
[root@Infra-Srv01 /]# dateFri Dec  4 00:41:41 CST 2015
Serach the PID according to the tap-err, the commands hung.
[root@Infra-Srv01 /]# tap-ctl list| grep 27646
Kill the Process, the root space is released.
[root@Infra-Srv01 /]# kill -9 27646
Restart the toolstack, the server works fine.
[root@Infra-Srv01 /]# xe-toolstack-restart

The tapdisk process 27646 is for a SQL server VM, we can find many sql error messages in sql log.
A bug in the older version of tg3 driver leaked the skb, leaking memory and failing to call the skb zero-copy destructor. If at leak one skb is leaked, the virtual interface cannot be destroyed.
No license allocated to the XenServer.
A race condition bug in XS code
Root Partition is filled up.
Rogue Entries of patches and log files.
Inflate disk was not deleted automatically. The inflate disk would have been created as part of a snapshot or Garbage collection process
tftp client is always acknowledging the first packet it receives, instead of the last one. This cause retransmission
--- High number of flows causing the daemon to use up the CPU cycles. Look at the ovs-dpctl show o/p  cat ovs-dpctl-show-s.outsystem@ovs-system:        lookups: hit:3094575866 missed:217618238 lost:0        flows: 16384 What is causing this high flows and how to identify Looking at the flows using ovs-appctl bridge/dump-flows bridgename( collected in bugreport as a file named ovs-appctl-dpif%dump-flows-xapi1.out), we can see a pattern in the ovs flows. 90 % of the flows are like below skb_priority(0),in_port(5),eth(src=34:64:a9:e2:95:1d,dst=01:14:c2:44:1e:cc),eth_type(0x8100),vlan(vid=3907/0xfff,pcp=0/0x0,cfi=1/1),encap(), packets:4, bytes:320, used:2.080s, actions:dropskb_priority(0),in_port(5),eth(src=34:64:a9:e2:95:1d,dst=01:14:c2:44:1e:cc),eth_type(0x8100),vlan(vid=3825/0xfff,pcp=0/0x0,cfi=1/1),encap(), packets:4, bytes:320, used:2.084s, actions:dropskb_priority(0),in_port(2),eth(src=34:64:a9:e2:95:09,dst=01:14:c2:44:1e:cc),eth_type(0x8100),vlan(vid=2107/0xfff,pcp=0/0x0,cfi=1/1),encap(), packets:5, bytes:400, used:1.712s, actions:1skb_priority(0),in_port(2),eth(src=34:64:a9:e2:95:09,dst=01:14:c2:44:1e:cc),eth_type(0x8100),vlan(vid=2662/0xfff,pcp=0/0x0,cfi=1/1),encap(), packets:19, bytes:1520, used:1.676s, actions:1 Looking at the pattern, we could identify this is related to Network Loop Protection (NLP). 01:14:c2:44:1e:cc is a reserved HP multicast address.
During the upgrade from XenServer 5.6 to 6.x, templates were not properly removed and new template was not installed.
This procedure might be desirable when you rebuild a server. Archiving the PFX and PEM format certificates enables the ability to rebuild a XenServer and immediately replace the SSL certificate without having to repeat the request process.
Citrix XenServer Design:Configuring iSCSI Multipathing Support for XenServerXenServer 6.2.0 Administrator’s GuideXenServer 6.1.0 Administrator’s Guide
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
Internet Explorer disables GPU hardware acceleration and falls back to software rendering when it detects that it is running “in a remote desktop session” (see How to enable or disable software rendering in Internet Explorer). In XenServer 6.2, the hardware flags provided to VMs do not include all the necessary parameters for Internet Explorer to determine that hardware GPU acceleration is available even if a hardware GPU is present. Specifically, Internet Explorer must be able to detect the presence of Second Level Address Translation (SLAT) which while supported by XenServer 6.2, is not flagged to virtual machines in the way expected.
Citrix XenConvert Application Software
CTX127641 - Citrix XenConvert Guide 2.3
CTX116685 - How to Copy a Virtual Machine From One Storage Repository to Another
VMware OVF Tool User Guide
During the tools upgrade, virtual machine parameter platform id is not properly updated to id=2.
To find the Latest drivers and hotfixes Refer : Recommended Updates for XenServer Hotfixes
The default timeout for storage repository creation in XenServer is 2 seconds. This is not sufficient or certain storage models 9 (Dell equallogic), hence you have to increase the default value from 2 to 3 seconds.
You could find the following entry in SMlog when you are adding the storage repository.
Connection failed after 2 seconds time out, failed to connect to iSCSI service on target in SMlog.
NVIDIA GRID vGPU 1.1 for Citrix XenServer 6.2SP1
3D Graphics Pack: Configuring XenServer to use NVIDIA GRID v2.0
Configuring XenServer v6.5.0 Service Pack 1 for Graphics
For information on XenServer 6.5, refer to the Release Notes: http://support.citrix.com/article/CTX141498
For information on using and configuring VMs, refer to the XenServer 6.5 Virtual Machine User’s Guide: http://support.citrix.com/article/CTX141502
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
If you experience any difficulties, contact Citrix Technical Support.
In XenServer version 6.2 and earlier, GRO is not enabled by default. Combination of jumbo frames and certain network drivers result in excessive dom0 SWIOTLB usage.
Excessive SWIOTLB usage causes increased dom0 load, reduced performance for 10GbE NICs and may exhaust SWIOTLB which will in turn trigger a kernel panic and subsequently cause dom0 crash.
The SWIOTLB is a software implementation of an IOMMU. It is used to hide the fact that Dom0 kernel physical address space (PFNs) does not match the machine address space (MFNs) from the Dom0 drivers which expect contiguous buffers available to the hardware. It does this action through a combination of hooking the kernel DMA mapping API in the correct places and bounce buffering (which involves copying PFN data into and out of a special contiguous PFN region created at boot time). Bounce buffering only needs to be used when there is mismatch between the PFN and MFN mapping which occurs when a kernel buffer is larger than 4 kilobytes (page size).
Jumbo frames are up to 9 kilobytes in size and certain drivers create contiguous buffers for receiving jumbo frame sized packet data. This means the SWIOTLB bounce buffering must be used in order to create a machine contiguous region that PCI hardware can DMA to. This also means Dom0 will copy the data out of the SWIOTLB region for every packet received which adds latency and uses Dom0 CPU.
If a driver maps a large number of buffer greater than 4k for receiving data, then it can exhaust the SWIOTLB region (typically 64MiB). This will either cause the mapping driver to crash/error or other drivers which need to map buffers greater than 4k to crash.
GRO can be used to offload some network processing to NICs (their drivers need to support GRO) so as to improve network performance and reduce the usage of SWIOTLB.
The system priority with a lower numerical value has a greater priority then a system priority with a higher numerical value. If a partner system priority advertised in the LACPPDU is greater than (has a lower numerical value) from the negotiated one, all other partner with lower priority (higher numerical value) are disabled. When all the links for the bond have the same priority, all those links will become active.
For example, a XenServer LACP bond has a system priority of 32938. If one of the partners in this bond changes the system priority to 32768 and it is a higher priority than 32938, OpenVswitch will deactivate all the links in that bond with a lower system priority until the system priority for all the links are the same.
CTX130986 - Unable to Install XenServer Tools Version 6.x on Windows 7 Virtual Machines
CTX121652 - Overview of the Open Virtualization Format
CTX124961 - Operating System Fixup in XenCenter 5.6 or later OVF Appliance Plug-inCTX116603 - How to Convert VMware Virtual Machines to XenServer Virtual Machines
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
The XDConfig:XdProvisioned tag is set to true on the hypervisor on XenServer. The hypervisor is already configured with the desktops within a catalog and does not provide an option to add the virtual machine into a new catalog.
XenServer Root Disk Maintenance
There are 6.1 Virtual Machines present in a 6.2 XenServer pool. 2. Incorrect License present on the License Server.
XenServer 6.2 is licensed per socket while previous versions of XenServer were licensed per server.  The 2 different license structures do not work together.  The XenServer pools must correspond with the version of XenServer installed on the server.
Incorrect XenServer edition & version license present on the License Administration Console (license server).
CTX107789 | How to Find the Subscription Eligibility Date on Licensing ConsoleCTX130127 | Select or change Security Access Model on Citrix account (Contact Restrictions section)CTX111618 | Citrix Product Subscription Advantage Eligibility Dates
This error affects users trying to view privileged content without a Customer Success Services or Partner or TRM support agreement level set for company account.
If your company has already paid for a support agreement with Citrix Technical Support, make sure to log in to My Account/Partner Central using credentials associated to the account linked to the valid company support agreement.
If you believe you have reached this page in error, contact Citrix Customer Service to verify your user account allows you to access this content.
This is the expected behavior when logging on using a My Account/Partner Central account without the appropriate support agreement.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Driver Verifier
CTX106970 - How to Enable User Mode Stack Trace Database for IMA Service to Detect Memory Leaks
How to use the special pool feature to isolate pool damage
Any network adapter except “All Network Adapters” selected for RDP-Tcp properties of RD Session Host Configuration will be broken. Therefore, xs-tools installation replaces network adapters.
VM has association with a VDI that is no longer available. Often, this is due to DVD associated with an ISO that is no longer available.
The XenServer lost communication to the license server.
XenServer services are hung.One or more management interfaces in a XenServer pool referenced an invalid DNS server, such as 192.168.0.1.  This IP address was transitioned to be a network gateway address.
If you experience any difficulties, contact Citrix Technical Support
For more information about XenServer 6.1.0 refer to Citrix Documentation - XenServer 6.1.0 Release Notes
Because of a bug in the gdisk (v0.6.10), partitioning utility it is unable to properly prepare the disk for installation of XenServer.
These software applications are provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
Sometimes the management interface of the computer functions, but the other NICs or resources stop working. This issue occurs because of the enabling of the C-states. Refer to CTX127395 – Hosts Become Unresponsive with XenServer 5.6 and above on Nehalem and Westmere CPUs for more information. The server does not self-fence and remains in an unresponsive state.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
Additional background and/or reference information can be obtained from the XenServer Administrators guide.
For information on using SR-IOV in earlier versions of XenServer, refer
XenServer Single Route I/O Virtualization (SR-IOV) Support for Provisioning Services Virtual Machines
How to Enable Single Root I/O Virtualization SR-IOV on XenServer
If you experience any difficulties, contact Citrix Technical Support.
For more information about XenServer 6.1.0 refer to XenServer 6.1.0 Release Notes.
The xennet6.sys file seems to be causing to freeze driver loading, and will not allow either safe mode or last known good configuration.
There are two possible reasons for this error:
HA was not disabled appropriately
A XenServer host in the pool was rebooting during the time HA was disabled
http://www.ntp.org/
If you experience any difficulties, contact Citrix Technical Support. For more information about XenServer 6.1.0 refer to CTX134582 – XenServer 6.1.0 Release Notes
VMs created from templates while running 5.6 Service Pack 2 or earlier, erroneously populated the parent field of the VM with the template UUID.
If you experience any difficulties, contact Citrix Technical Support
For more information about XenServer 6.2.0 SP1, refer to CTX139788 -  XenServer 6.2.0 Service Pack 1
For information on configuring local ext3 storage, refer to Local EXT3 in Citrix XenServer Administrator's Guide
To Copy Virtual Machines (VMs) to the New Storage
When you copy a VM from one storage to another, and plan to use this new copy, ensure that you manually change the MAC address on the interface to the one that was used previously. To do this, complete the following procedure:
Note the MAC on the original VM interface.
Change the MAC address on the original VM interface (a small change in characters is sufficient), because you cannot have two identical MACs in the pool.
Change the MAC on the new VM interface.
If the MAC address is not changed, you might experience the error described at http://support.microsoft.com/kb/269155/en-us
CTX128116 - How to Use a Windows 2008 Network File Share as a Storage Repository for XenServer
Citrix XenServer 6.5 Installation Guide
Note: If the third partition was not created during the XenServer installation process, it is possible to use the available space (capacity - 8GB for 6.5 and earlier) as local storage. Create the third partition using gdisk and set the type to Linux LVM. Reboot the host and then run the same xe sr-create command. The device should be the third partition suffixed with -part3.
CTX120540 – How to Generate a Crashdump from an Unresponsive XenServer
CTX135498 – How to Configure Serial Console Access on XenServer v5.0
XenServer Tech Info
If you experience any difficulties, contact Citrix Technical Support.
The original template was created before XenServer Hotfix 009 and XenServer Hotfix 10 were available. Therefore, the template looks for a different position in the XenServer from where the Network Interface Card (NIC) is located, though the vDisk shows that the latest tools are installed.
CTX126524 - How to Set Cores-Per-Socket Parameter for a Virtual Machine
The following are some guidelines for troubleshooting:
The file /etc/iscsi/initiatorname.iscsi is not created by default so create it if it does not exist or you will not be able to use the open-iscsi connection.
Ensure you have connectivity to the SAN and the appropriate access set to allow the XenServer host to the SAN/LUN.
Ensure you have a NIC/Network dedicated to iSCSI storage on a separate subnet than management or virtual machine network.
Enable multi-pathing with multiple I/O paths for better throughput. Refer to the Knowledge Center article CTX118791 – Multipathing Overview for XenServer for more information about multi-pathing configuration and overview.
You should get above 30MB I/Os to ensure good performance on software iSCSI network. Refer to the Knowledge Center article CTX127065 – XenServer Virtual Machine Performance Utility for information about the XenServer Virtual Machine Performance Utility to identify throughput.
CTX121442 - How to Configure Serial Console Access on XenServer
CTX138234 – Error: "VDI Not Available"
Citrix Documentation - Updating XenCenter
Citrix Documentation - Automatic Update Notification
To download latest XenServer hotfixes
CTX138115 - Recommended Updates for XenServer 6.x Hotfixes
To download latest XenCenter versions
XenServer 6.5 - CTX142447 - Hotfix XS65ESP1001 - For XenServer 6.5.0 Service Pack 1 - This hotfix is for customers who use XenCenter as the management console for XenServer 6.5.0 Service Pack 1.XenServer 6.2 - CTX139790 – Hotfix XS62ESP1001 - For XenServer 6.2.0 Service Pack 1 > XenCenter update. This is not a host side hotfix and this needs to be installed before applying Service Pack 1.XenServer 6.1 - CTX136714 – Hotfix XS61E016 - For XenServer 6.1.0  (Updates XenServer Console).
TEST
Note: The KRBTGT user is used to verify if the XenServer can access Active Directory.
The following are the two causes for this issue:
The XenServer computer object created in the join process does not have rights to see the KRBTGT user. This could be being blocked by a group policy object (GPO).
An existing Enterprise Likewise installation is already integrated with Active Directory. The Likewise code changes behavior when it finds a default cell and needs to be able to read the following user attributes: uid, uidNumber, gidNumber, loginShell, and unixHomeDirectory. If a default cell is defined, then the krbtgt user must be added to the default cell for XenServer to enable external authentication.	Run the following command at the command line interface of XenServer Host to identify if a default cell is defines: /opt/likewise/bin/lw-get-status	If the output shows the authentication provider mode is set to “Default Cell”, then this confirms that Likewise Enterprise is in control of Active Directory configuration.	Normally the authentication provider is set to “Un-provisioned”.
LSA Server Status:
Compiled daemon version: 5.0.0.0
Packaged product version: 5.4.0.51423
Uptime: 31 days 0 hours 47 minutes 37 seconds
[Authentication provider: lsa-activedirectory-provider]
Status: Online
Mode: Default Cell
Domain: DOMAIN.COM
Forest: domain.com
Site: corp
Online check interval: 300 seconds
Sub mode: Schema
To configure Ethernet interfaces in CentOS, refer http://www.centos.org/docs/5/html/5.1/Deployment_Guide/s2-networkscripts-interfaces-eth0.html or /usr/share/doc/initscripts-8.45.17.EL/sysconfig.txt on your Xenserver.
Dell customers - refer http://supportapj.dell.com/support/edocs/software/Citrix/EN/Solutions%20Guide/HTML/body.htm.
Why is the /proc/scsi/qla2xxx/ or /proc/scsi/lpfc/ directory missing in Red Hat Enterprise Linux 5 and what has replaced it?
XenServer does not properly store the incoming virtual machine name-label and description fields in management VDI (MGT).
CTX121646 - Citrix XenConvert 2.1.1
CTX120520 - How to Export a Virtual Machine to an External USB Drive
For more information about the configuration of HA (increasing failover capacity, priorities, and restart/other actions) refer the following links:
High Availability for Citrix XenServer
Complete the following steps to mount Provisioning server vDisk:
From XenCenter console, create a new virtual machine based on the target device properties. In this scenario, the target device is a Windows 7 x64 virtual machine with one (1) vCPU and 2048MB RAM. Click Next.
Type a name for the virtual machine and click Next.
Specify the location to the Provisioning Services ISO image and click Next.

Select a home server for the virtual machine and click Next.
Allocate the required number of vCPUs and the amount of memory and click Next.
Modify the default storage by selecting Properties.  Enter a name for the virtual disk and select the Location for the NFS storage repository. click Ok and then Next.
After assigning the correct virtual network interface(s), click Next.
Clear the option to Start VM automatically and click Create Now.
To mount the NFS storage repository, you need to install the Client for NFS feature. Go to Programs and Features and click on Turn Windows features on or off.  	After that, go to the command line to mount the NFS storage. Type command: mount \\<NFSStorageIPAddress\NFSfolder <letter>: 	Where NFSStorageIPAddress is the IP address for the NFS storage, NFSfolder is the name of the storage folder, and letter is the letter you want to assign to the NFS share.
Browse to the NFS share using Windows Explorer. Note: During the process of mounting the NFS storage repository using XenCenter, a folder was created with a Globally Unique Identifier (GUID).
Ensure that vDisk that requires updating is not in use by any devices.
Copy the vDisk to XenServer folder specified in step 10.
This folder should already contain a *.vhd file that was created and assigned to the virtual machine created earlier. The file name is represented by a GUID.
Rename the copied vDisk to match the name of the vhd file created by XenServer from Step 13.
Start the newly created virtual machine.
When the virtual machine starts into the operating system, uninstall the current version of the provisioning target device software.
Restart the virtual machine.
Install the new version of the provisioning target device software.
Restart the virtual machine.
Shutdown the virtual machine.
Copy the vDisk back to the original Provisioning Server share location.
Rename the vDisk to its original name.
The vDisk is now ready to be deployed to the devices with the updated device target software.
How to Check if Extra C-States are Enabled without Booting into the BIOSHosts Become Unresponsive with XenServer 5.6 and above on Nehalem and Westmere CPUs
CTX125574 - XenServer 5.6 Multi-GPU Pass-through for XenDesktop HDX 3D Pro Graphics
Ubuntu Crashes/Freeze on XenMotion
http://support.ntp.org/bin/view/Servers/StratumOneTimeServersStratum1]Stratum1 server http://support.ntp.org/bin/view/Servers/StratumTwoTimeServers]Stratum2 server
QLogic Driver Downloads / Documentation
QLogic Documentation for Linux Red Hat (64-bit)
RW lock on the VDI because of storage connection issue or VMs being hard powered down
.NET framework 4.0 Client Profile is installed only in the Windows 7 virtual machine but the version installed is not the full version, which includes .NET framework 4.0 Extended.
Storage heartbeat loss of this type is almost always caused by SAN problems. It is generally a good idea to examine the xha.log after the fence – you might find previous or subsequent indications of temporary loss of storage heartbeat, indicating performance issues; the SAN being either simply too busy to keep up with the heartbeat or other types of SAN issues causing intermittent glitches.
Before SAN troubleshooting, however, look for driver errors from drivers related to the SAN (NICs assigned to the storage network in the case of software iSCSI, HBAs in the case of FibreChannel, SAS, or iSCSI HBAs) in /var/log/kern.log. Driver stack traces or other errors and warnings could indicate that the issue is on the XenServer side rather than on the SAN.
These software applications are provided to you as is with no representations, warranties or conditions of any kind. You may use and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the software application may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the software application fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the software application. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SOFTWARE APPLICATION, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
This issue may occur if the hardware is different on the master target device and on the target device.
Caution! Using Registry Editor incorrectly can cause serious problems that might require you to reinstall your operating system. Citrix cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved. Use Registry Editor at your own risk. Be sure to back up the registry before you edit it.
AMD-8132™ HyperTransport™ PCI-X®2.0 Tunnel Revision Guide
AMD-8131™ HyperTransport™ PCI-X® Tunnel Revision Guide
Wikipedia on IOMMU
This issue was exposed because OVS did not change the Media Access Control (MAC) address of the secondary interface when setting up the bond. The firmware causes one interface not to pass the traffic to the bond interface. For example when a bond is created using both ports of an NC551i card, the OS assigns a MAC address to the bonded interface.
The Lpfc driver version 0:8.3.5.39.1p has an issue with the interrupt mode, which can cause losing access to LUNs, multipath failure, and host reboots.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
This error occurs when the information of vDisks of which the Virtual Disk Images (VDI) are already deleted from the Storage Repository, still exist in the Volume Group configuration on XenServer. Attempting to rescan the Storage Repository results in the “VDI is not available” error as shown in the following screen shot:

The following screen shot displays the VHD-scan errors in the output of tail –f /var/log/SMlog appeared when attempting to rescan the storage repository from XenCenter. This output contains the UUIDs of the VDIs or VHDs (Virtual Hard Drives) that are causing this issue. These VDIs were already deleted from the Storage Repository but still appear in the volume group configuration.
This behavior is because the No-Execute flag on CPU is disabled on the server that VM is being migrated from. When comparing the CPU of the machine where the VM is migrating from and the CPU where the VM is migrating to, no-Execute flag is found not enabled on the XenServer of the initial VM.
CPU flag of the XenServer, VM is migrating to:
CPUs flag of XenServer, VM is migrating from:
XenTools are not properly installed. During upgrading master target device, and uninstalling provisioning server target software, the upgrading of XenTools might not work. Before upgrading PVS master target device, PVS target software should be uninstalled first. Upgrading tools before uninstalling provisioning target software can cause the VM to Blue Screen (BSOD).
Citrix Documentation - XenServer 7.0
Unlike Microsoft Windows, which uses device drivers for paravirtualization, Linux virtual machines have a paravirtualized kernel. During the installation of Linux, it is actually running as a Hardware-Assisted Virtual Machine (HVM) and has access to DVD just like Windows.	When the Linux installation is complete, a Xen kernel is swapped in. However, as the paravirtualization is kernel based, this causes issues with accessing the DVD on boot, as the kernel is not loaded.
This error is caused by insufficient write permissions on the NFS share. There are a number of different causes for this issue.
The Nehalem CPU architecture introduced new power-saving features for CPUs in the form of deep C-states, which the CPU cores can enter during idle periods, essentially allowing partial power-down of the CPU. Unfortunately, processors (like software) have defects. Software defects are generally known as bugs, while CPU design defects are called errata, and there are a number of known errata in both the Nehalem and Westmere CPU cores about the new C-state features.
In particular, under certain conditions, C3 <-.> C6 state transitions can lead to system lockups and other erratic behavior. As software platforms have been updated to include support for the new power saving features, the real impact of these errata have gradually come to light, and problems have been observed on every software platform that has implemented support for the deep C-states (see the Additional Resources section in this article). Older operating systems, including versions of XenServer prior to 5.6, were not affected because they did not yet make use of the new C-state features, and thereby never encountered the CPU errata.
Following are the lists of the relevant errata for the two affected CPU types:
Errata for Nehalem CPUs
75xx - BA8055xx – AAK12035xx - AAM10834xx - AAO67
Errata for Westmere CPUs
56xx – BD5936xx - AAY54
For details on the CPU errata, refer to the following Intel documents:Xeon 3500 Specification UpdateXeon 3600 Specification UpdateXeon 5500 Specification UpdateXeon 5600 Specification UpdateXeon 7000 Specification Update
Multipathing Overview for XenServer
RealVNC.
CTX119906 – How to Set Up VNC Channels Using PuTTY
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
This error occurs because the Control Domain (Dom0) on the XenServer which runs the VM, attaches the Virtual Disk Image (VDI) of the VM to Control Domain. This attached disk is then operated by the Control Domain to perform the operations which has been initiated on the VM. As the operation fails, the VDI is still attached to the control domain through a Virtual Block Device (VBD) connection that needs to be destroyed.
The Control Domain connection can be seen on the disk by selecting the Storage Repository Object on the Left Pane of the XenCenter, by browsing to the Storage Tab. In the VM column, the Disk (VDI) is seen being attached to both the Control Domain of a XenServer and the VM itself.
The firmware on the HP NC375(x) card must be at least Version 4.0.585 to prevent the loss and recovery of Ethernet connectivity.
There is an advisory from HP on this issue. http://h20000.www2.hp.com/bizsupport/TechSupport/Document.jsp?objectID=c02964542.
To upgrade the firmware, you must update the firmware by booting from the HP Service Pack for ProLiant (SPP) DVD which has replaced the Smart Update Firmware DVD. The latest SPP ISO DVD can be downloaded at: http://h18004.www1.hp.com/products/servers/service_packs/en/index.html
Note: The specifications for the NC375(x) show the card is only a 1GB adapter despite being based on the NetXen 3031 chipset.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
Citrix Documentation - XenServer 6.2.0 Configuration Limits
Citrix Documentation - XenServer 6.1.0 Configuration Limits
Additional information about the Intel 82599 10 Gigabit Ethernet Controller can be found at - Intel® 82599 10 Gigabit Ethernet Controller
PCI-SIG SR-IOV Primer: An Introduction to SR-IOV TechnologyHow to Assign SR-IOV Enabled NICs with XenServer 6.xHow to Enable Single Root I/O Virtualization SR-IOV on XenServer
The Appliance Import feature of XenCenter includes an option for “fix-up” of an imported virtual machine as part of the import process. This is particularly useful for repairing a virtual machine operating system when the OVF package was built on a hypervisor other than XenServer.
Each hypervisor presents virtual hardware to a virtual machine in a way that appears different to the operation system that runs within the virtual machine. How the operating system within the virtual machine responds to changes in boot device hardware is the basis for the fix-up feature of the Appliance Import.
This most frequently happens if the OVF Package was created from a VMware environment.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
eDocs - Getting Started > Import and configure the License Server VPX
The XenServers hosts processor does not have the VT functionality required or it has been disabled in the system's BIOS.
CTX138115 – Recommended Updates for XenServer Hotfixes   CTX138373 - How to Update XenServer 6.x with Latest HotfixesCTX202821 -  File System on Control Domain Full
CTX121169 - How to Set Up XenServer in a Routed Network
Citrix Discussions - XenServer iptables
Citrix Documentation - Live LUN Expansion
CTX215564 - How to take Pool Metadata Backup on XenServer
This could be a problem with the PIF networking bridge having an IP address. In XenServer, you configure an IP address on NICs that are dedicated to management or storage traffic.
If you have an IP address set on a NIC that is neither management nor storage, the PIF cannot send or receive traffic on the PIF network.
In XenDesktop 7, Citrix has provided a script for backup and restoring the PvD volumes belonging to Desktop Virtual Machines. These scripts rely on the XenServer PowerShell SDK.
XenServer 6.2 introduced Version 2 of the PowerShell SDK. At the time of release of XenDesktop 7, XenServer 6.2 was not released and so testing was performed only on V1 XenServer PowerShell SDK. As a result, changes to the PowerShell interface in V2 of the XenServer PowerShell SDK have broken this script.
The issue is because the XenServer is trying to use the old MAC addresses and information for the new network card.
For more information regarding the access control software in XenServer, log on to the console of the XenServer and review the manual pages of the access control software with one or more of the following commands:man hosts_accessman hosts.allowman hosts.deny
This error occurs because of the corrupted VDI.
CTX127395 – Hosts Become Unresponsive with XenServer 5.6 and above on Nehalem and Westmere CPUs
This is the expected behavior without High Availability (HA) enabled. When HA is not enabled XenServer is unable to confirm that there has been a host failure and to recover the VMs from that host. It is unsafe to restart the VMs on other hosts in the pool if the problem host is unresponsive rather than in a completely failed state. This might cause data corruption.
CTX130327 - How to Enable Log Compression on XenServer
Unable to Install XenServer Tools Version 6.x on Windows 7 Virtual MachinesOverview of the Open Virtualization FormatOperating System Fixup in XenCenter 5.6 or later OVF Appliance Plug-in
To prevent file system errors, use check disk before mounting the partition (before proceeding with step 9). This applies only to EXT3 file systems: # fsck.ext3 /dev/<vg-name>/<partition>
For example: # fsck.ext3 /dev/system/root
CTX120540 - How to Generate a Crashdump from an Unresponsive XenServerMicrosoft - A hotfix is available that enables a Windows 7-based or Windows Server 2008 R2-based computer to create a memory dump file without a page file
This error occurs when an attached hard disk is formatted using the VMFS5 file system.
This article is intended to provide instructions for reordering NICs in a post-install XenServer scenario. It is also possible to apply ordering rules during installation of XenServer.
Installer options can be provided which applies dynamic or static rules to interface-rename during installation of XenServer. The options are as follows:
map_netdev=ethN:(s,d):<mapping>
ethN indicates the target eth name(s,d) indicates static or dynamic rule
<mapping> can be:
emN or pciNpM – biosdevname naming label00:23:7d:54:52:88 – MAC address0000:01:01.0 – PCI ID“smbios label” – SMBios label
NIC ordering rules are applied for the host when interface-rename command is executed.
The issue occur because a device underlying the SR is in use by the host.
CTX138335 - How to Validate If XenServer is Using Bridge or vSwitch for the Network Stack
CTX119717 - XenServer 6.x High Availability
The be2iscsi driver, which is part of the driver package for the NC553i Converged Network adapter shipped with XenServer 6.0, has bugs in its MSI-X initialization code. This results in incorrect string pointers in the description field for the MSI-X vectors in the /proc/interrupts file. Reading this file (which is done every 10 minutes by sysstat, and also when collecting a Server Status report through XenCenter), might therefore cause a kernel crash.
CTX138115 – Recommended Updates for XenServer HotfixesCTX132791 - How to Apply a XenServer Hotfix Using the Command Line
If you experience any difficulties, contact Citrix Technical Support.
For a review of all supported bonding modes, refer to CTX134585 – XenServer 6.1.0 Administrator's Guide.
For additional information about bonding in the vSwitch network stack, refer to Open vSwitch documentation. XenServer 6.1.0 uses Open vSwitch v1.4.2.
For further information about XenServer 6.1.0 refer to CTX134582 – XenServer 6.1.0 Release Notes.
From XenServer version 6.0, GPT (GUID Partition Table) partition has replaced traditional MBR (Master boot record) to make dom0 more scalable. The traditional command fdisk does not work with GPT partitions.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the sample code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the sample code.
Refer to an fsck man page for more information.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
No-Execution Memory Protection/Data Execution Prevention processor:
The LRO functionality of the NICs are enabled with Intel 10 Gigabit Ethernet Controllers.
CTX215974 - How to Shut Down a XenServer 7 Virtual Machine which is Unresponsive in the Pending or Amber State
If you experience any issues, contact Citrix Technical Support
For further information about XenServer 6.2.0, refer to CTX137826 – XenServer 6.2.0 Release Notes
For Xenpm commands, refer to Xenpm Commands
For XL commands, refer to XL Commands
References : How to Find dom-id or Domain ID of Virtual Machines Running On XenServer
Peeking under the hood of High Availability
CTX119717 - XenServer High Availability
CTX128275 - How to Distinguish a High Availability Storage Fence from a Real Host Crash
Unable to Install XenServer Tools Version 6.x on Windows 7 Virtual MachinesOverview of the Open Virtualization FormatOperating System Fixup in XenCenter 5.6 or later OVF Appliance Plug-inEnabling the Paravirtualization Kernel of an HVM Linux Virtual Machine Imported from VMware
XenCenter can be downloaded from the following resources: Citrix Web site
If a real connection for the same pool from where the report was collected from is already configured on the same instance of XenCenter, opening the report fails because a connection to the same pool is already in place.
Additional background and/or reference information can be obtained from CTX124887 - XenServer 5.6 Administrator's Guide.
For more information about the XenServer command line interface, refer to the XenServer Administrator’s Guide.
XenServer 5.6 Administrator's Guide
CTX130422 – XenServer 6.0 Virtual Machine Installation Guide
Joining XenServer hosts to an Active Directory domain might fail if the host short name is configured as the Fully Qualified Domain Name (FQDN) of the host. The host name can be configured this way during installation of XenServer.
This fails because the XenServer service that communicates to the Active Directory Domain Controller queries Active Directory for its domain suffix at the time the host join is attempted. When it determines what the domain suffix for the domain is, it automatically applies this domain suffix to the host name configuration for the XenServer host. If the host short name is set to be the FQDN then the machine incorrectly registers with Active Directory because it ends up with a host name that cannot be resolved in DNS, per the following logical example:
IFHost Short Name = myhost.domain.localANDAD Domain Suffix = domain.localTHENResulting host name configuration when external pool authentication is enabled is myhost.domain.local.domain.local
This machine will fail to join AD because of the invalid DNS name.
CTX138115 - Recommended Updates for XenServer 6.x Hotfixes
CTX124660 - How to Manually Import Virtual Machines to Other Than the Default Storage Repository
CTX116981 - How to Run a System Status Report in XenCenter and XenServerCTX136396 - How to Upload Data to Citrix Insight Services (CIS)CTX135318 - How to Collect Diagnostics Information during XenServer Installation​
The behavior is because of  the view chosen on the Snapshots tab of the virtual machine.Open the Snapshots tab, select View and verify if the Scheduled Snapshots option is checked.
This issue occurs because the operating system cannot correctly call the crash dump file creation feature in some cases after the update to Service Pack 1.
CTX121442 - How to Configure Serial Console Access on XenServer	CTX131909 - How to Enable Serial Ports on Dell Servers
The most common occurrence of the VDI is not available message is VDI already attached RW.	Following are the causes of the preceding issue:
The VM crashed or was interrupted during shut down.
XenMotion failed in the VM, or XenMotion was interrupted.
The VM Storage Repository is out of disk space
Loss of connection to NFS Server
The VM becomes unresponsive where it is off, but the XenServer does not receive the signal about the shutting down of the VM.
If there are hosts that still do not connect back to XenCenter, check the /etc/xensource/pool.conf file of each slave to ensure that the correct host IP is set for the master.The format is: slave:<ip.of.the.master>Eg : slave:192.168.78.99For information on changing the Pool Master on XenServer via XenCenter/xsconsole Try : How to change the XenServer Pool master role from XenServer Console
CTX131752 - How to Change XenServer Network Backend to Linux Bridge
When High Availability is disabled and the pool master and one or more of the slave servers in the pool self-fence or lose power at the same time, the other servers nominate a new master.
After the old master server and the hosts start up again, the servers do not contain the updated details of the changed pool master server. These servers enter into an emergency mode and elect each other as the master server.
If the master server fails when it starts again, it cannot communicate to any other machines in the pool, it displays itself as a slave and points to itself.
The above mentioned sample code is provided to you as is with no representations, warranties or conditions of any kind. You may use, modify and distribute it at your own risk. CITRIX DISCLAIMS ALL WARRANTIES WHATSOEVER, EXPRESS, IMPLIED, WRITTEN, ORAL OR STATUTORY, INCLUDING WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NONINFRINGEMENT. Without limiting the generality of the foregoing, you acknowledge and agree that (a) the sample code may exhibit errors, design flaws or other problems, possibly resulting in loss of data or damage to property; (b) it may not be possible to make the sample code fully functional; and (c) Citrix may, without notice or liability to you, cease to make available the current version and/or any future versions of the sample code. In no event should the code be used to support of ultra-hazardous activities, including but not limited to life support or blasting activities. NEITHER CITRIX NOR ITS AFFILIATES OR AGENTS WILL BE LIABLE, UNDER BREACH OF CONTRACT OR ANY OTHER THEORY OF LIABILITY, FOR ANY DAMAGES WHATSOEVER ARISING FROM USE OF THE SAMPLE CODE, INCLUDING WITHOUT LIMITATION DIRECT, SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR OTHER DAMAGES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Although the copyright in the code belongs to Citrix, any distribution of the code should include only your own standard copyright attribution, and not that of Citrix. You agree to indemnify and defend Citrix against any and all claims arising from your use, modification or distribution of the code.
Modifying duplex, speed, and auto-negotiation can be made with ethtool on the fly; the change is not persistent across reboot.
Show current settings:# ethtool eth0
Configure duplex, speed, and autonegotiation manually:# ethtool -s eth0 speed 100 duplex true autoneg off
Man page for the ethtool:# man ethtool
Note: For more information, refer section ethtool settings in the XenServer Software Development Kit Guide.
You can use tcpdump utility to compare traffic on the PIF and VIF to ensure that the VIF is behaving promiscuously.
Use ifconfig (net-tools) or ip (iproute2) to directly turn on promiscuous mode for interfaces within the guest.
Turn On Promiscuous Mode:ifconfig eth0 promiscTurn Off Promiscuous Mode:ifconfig eth0 -promisc
ip link set eth0 promisc on|off
Use netstat -i to check if interfaces are running in promiscuous mode. There will be a "P" flag for interfaces running promisc mode.
According to the configurations, XenServer 6.1 and 6.2 are having Virtual Machine limit of seven.
Note: Command Line Interface (CLI) allows the configuration up to 16 Virtual Disk Images (VDI). This configuration is not supported.On XenServer 6.0 and 6.0.2, the number of virtual disk images per virtual machine is 16: however through XenCenter this can be configured when reattaching a VDI.
